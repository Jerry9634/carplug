/*! For license information please see main.8ddd4885.js.LICENSE.txt */
!function(){var e={2593:function(e,t,n){var r=n(7424).default,a=n(4687),o=n(7156).default,i=n(6690).default,s=n(9728).default;!function(e,t,n){"use strict";var u={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}},c=function(){function e(t,n){i(this,e),this.modelPath=n||"https://storage.googleapis.com/tfjs-models/savedmodel/".concat(this.getPrefix(t),"/model.json")}return s(e,[{key:"getPrefix",value:function(e){return"lite_mobilenet_v2"===e?"ssd".concat(e):"ssd_".concat(e)}},{key:"load",value:function(){var e=o(a.mark((function e(){var r,o;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadGraphModel(this.modelPath);case 2:return this.model=e.sent,r=n.zeros([1,300,300,3],"int32"),e.next=6,this.model.executeAsync(r);case 6:return o=e.sent,e.next=9,Promise.all(o.map((function(e){return e.data()})));case 9:o.map((function(e){return e.dispose()})),r.dispose();case 11:case"end":return e.stop()}}),e,this)})));function r(){return e.apply(this,arguments)}return r}()},{key:"infer",value:function(){var e=o(a.mark((function e(t,o,i){var s,u,c,l,d,p,f,h,m,g,v,y,b;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.tidy((function(){return t instanceof n.Tensor||(t=n.browser.fromPixels(t)),n.expandDims(t)})),u=s.shape[1],c=s.shape[2],e.next=5,this.model.executeAsync(s);case 5:return l=e.sent,d=l[0].dataSync(),p=l[1].dataSync(),s.dispose(),n.dispose(l),f=this.calculateMaxScores(d,l[0].shape[1],l[0].shape[2]),h=r(f,2),m=h[0],g=h[1],v=n.getBackend(),"webgl"===n.getBackend()&&n.setBackend("cpu"),y=n.tidy((function(){var e=n.tensor2d(p,[l[1].shape[1],l[1].shape[3]]);return n.image.nonMaxSuppression(e,m,o,i,i)})),b=y.dataSync(),e.abrupt("return",(y.dispose(),v!==n.getBackend()&&n.setBackend(v),this.buildDetectedObjects(c,u,p,m,b,g)));case 13:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"buildDetectedObjects",value:function(e,t,n,r,a,o){for(var i=a.length,s=[],c=0;c<i;c++){for(var l=[],d=0;d<4;d++)l[d]=n[4*a[c]+d];var p=l[0]*t,f=l[1]*e,h=l[2]*t,m=l[3]*e;l[0]=f,l[1]=p,l[2]=m-f,l[3]=h-p,s.push({bbox:l,class:u[o[a[c]]+1].displayName,score:r[a[c]]})}return s}},{key:"calculateMaxScores",value:function(e,t,n){for(var r=[],a=[],o=0;o<t;o++){for(var i=Number.MIN_VALUE,s=-1,u=0;u<n;u++)e[o*n+u]>i&&(i=e[o*n+u],s=u);r[o]=i,a[o]=s}return[r,a]}},{key:"detect",value:function(){var e=o(a.mark((function e(t){var n,r,o=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:20,r=o.length>2&&void 0!==o[2]?o[2]:.5,e.abrupt("return",this.infer(t,n,r));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"dispose",value:function(){null!=this.model&&this.model.dispose()}}]),e}();e.ObjectDetection=c,e.load=o(a.mark((function e(){var t,r,o,i,s=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},null!=n){e.next=3;break}throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");case 3:if(r=t.base||"lite_mobilenet_v2",o=t.modelUrl,-1!==["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(r)){e.next=6;break}throw new Error("ObjectDetection constructed with invalid base model ".concat(r,". Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'."));case 6:return i=new c(r,o),e.next=9,i.load();case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)}))),e.version="2.2.2",Object.defineProperty(e,"__esModule",{value:!0})}(t,n(7038),n(2795))},7038:function(e,t,n){"use strict";n.r(t),n.d(t,{GraphModel:function(){return gt},deregisterOp:function(){return M},loadGraphModel:function(){return vt},loadGraphModelSync:function(){return bt},registerOp:function(){return D},version_converter:function(){return kt}});var r={};n.r(r),n.d(r,{json:function(){return U}});var a={};n.r(a),n.d(a,{json:function(){return H}});var o={};n.r(o),n.d(o,{json:function(){return G}});var i={};n.r(i),n.d(i,{json:function(){return q}});var s={};n.r(s),n.d(s,{json:function(){return X}});var u={};n.r(u),n.d(u,{json:function(){return K}});var c={};n.r(c),n.d(c,{json:function(){return Y}});var l={};n.r(l),n.d(l,{json:function(){return Q}});var d={};n.r(d),n.d(d,{json:function(){return $}});var p={};n.r(p),n.d(p,{json:function(){return J}});var f={};n.r(f),n.d(f,{json:function(){return ee}});var h={};n.r(h),n.d(h,{json:function(){return te}});var m={};n.r(m),n.d(m,{json:function(){return ne}});var g={};n.r(g),n.d(g,{json:function(){return re}});var v={};n.r(v),n.d(v,{json:function(){return ae}});var y={};n.r(y),n.d(y,{json:function(){return oe}});var b={};n.r(b),n.d(b,{json:function(){return ie}});var x={};n.r(x),n.d(x,{json:function(){return se}});var k={};n.r(k),n.d(k,{json:function(){return ue}});var w={};n.r(w),n.d(w,{OP_SCOPE_SUFFIX:function(){return Ee.zvA},abs:function(){return Ee.WnP},acos:function(){return Ee.Khb},acosh:function(){return Ee.__u},add:function(){return Ee.IHx},addN:function(){return Ee.QBD},all:function(){return Ee.$6P},any:function(){return Ee.YjB},argMax:function(){return Ee.NqF},argMin:function(){return Ee.vHJ},asin:function(){return Ee.ZRM},asinh:function(){return Ee.VfV},atan:function(){return Ee.z4N},atan2:function(){return Ee.fvJ},atanh:function(){return Ee.C80},avgPool:function(){return Ee.wS1},avgPool3d:function(){return Ee.uR5},basicLSTMCell:function(){return Ee.zEQ},batchNorm:function(){return Ee.tgs},batchNorm2d:function(){return Ee.Dxk},batchNorm3d:function(){return Ee.JY5},batchNorm4d:function(){return Ee.p3b},batchToSpaceND:function(){return Ee.E4h},bincount:function(){return Ee.yE8},booleanMaskAsync:function(){return Ee.anm},broadcastArgs:function(){return Ee.XsQ},broadcastTo:function(){return Ee.UFq},buffer:function(){return Ee.f3b},cast:function(){return Ee.pju},ceil:function(){return Ee.mDi},clipByValue:function(){return Ee.iUl},clone:function(){return Ee.d9v},complex:function(){return Ee.PYB},concat:function(){return Ee.zoF},concat1d:function(){return Ee.gME},concat2d:function(){return Ee.Izb},concat3d:function(){return Ee.MNy},concat4d:function(){return Ee.ZaL},conv1d:function(){return Ee.PAt},conv2d:function(){return Ee.Tek},conv2dTranspose:function(){return Ee.bc},conv3d:function(){return Ee.pdZ},conv3dTranspose:function(){return Ee.$QV},cos:function(){return Ee.mCk},cosh:function(){return Ee.f9Y},cosineWindow:function(){return Ee.mew},cumprod:function(){return Ee.$Gn},cumsum:function(){return Ee.zbp},denseBincount:function(){return Ee.ppE},depthToSpace:function(){return Ee.nTT},depthwiseConv2d:function(){return Ee.B10},diag:function(){return Ee.Ka3},dilation2d:function(){return Ee.WmZ},div:function(){return Ee.hiC},divNoNan:function(){return Ee.NTj},dot:function(){return Ee.AKD},dropout:function(){return Ee.rvX},einsum:function(){return Ee.WYO},elu:function(){return Ee.pyx},enclosingPowerOfTwo:function(){return Ee.GRh},equal:function(){return Ee.DgJ},erf:function(){return Ee.qNN},euclideanNorm:function(){return Ee.d2q},exp:function(){return Ee.Qqt},expandDims:function(){return Ee.dt4},expm1:function(){return Ee.t$B},eye:function(){return Ee.iyy},fft:function(){return Ee.kp_},fill:function(){return Ee.hlL},floor:function(){return Ee.GWj},floorDiv:function(){return Ee.qPi},fused:function(){return Ee.imm},gather:function(){return Ee.Iqj},gatherND:function(){return Ee.dbB},greater:function(){return Ee.pjt},greaterEqual:function(){return Ee.brS},ifft:function(){return Ee.Sxn},imag:function(){return Ee.asL},image:function(){return Ee.BHj},inTopKAsync:function(){return Ee.V3u},irfft:function(){return Ee.wx0},isFinite:function(){return Ee.xVT},isInf:function(){return Ee.UWc},isNaN:function(){return Ee.i2d},leakyRelu:function(){return Ee.hi7},less:function(){return Ee.d9m},lessEqual:function(){return Ee.zN1},linalg:function(){return Ee.$r2},linspace:function(){return Ee.SX3},localResponseNormalization:function(){return Ee.G9k},log:function(){return Ee.cM7},log1p:function(){return Ee.Krr},logSigmoid:function(){return Ee.e_t},logSoftmax:function(){return Ee.CmS},logSumExp:function(){return Ee.l_t},logicalAnd:function(){return Ee.HvI},logicalNot:function(){return Ee.hJK},logicalOr:function(){return Ee.K5V},logicalXor:function(){return Ee.egP},losses:function(){return Ee.MB5},lowerBound:function(){return Ee.eab},matMul:function(){return Ee.OI3},max:function(){return Ee.Fp7},maxPool:function(){return Ee._sB},maxPool3d:function(){return Ee.YQQ},maxPoolWithArgmax:function(){return Ee.Ip$},maximum:function(){return Ee.gWQ},mean:function(){return Ee.J69},meshgrid:function(){return Ee.ry_},min:function(){return Ee.VV$},minimum:function(){return Ee.LTh},mirrorPad:function(){return Ee.VdP},mod:function(){return Ee.wQq},moments:function(){return Ee.Gi7},movingAverage:function(){return Ee.p_},mul:function(){return Ee.dC7},multiRNNCell:function(){return Ee.rq4},multinomial:function(){return Ee.SJ_},neg:function(){return Ee.W76},norm:function(){return Ee.KOy},notEqual:function(){return Ee.Quu},oneHot:function(){return Ee.lfX},ones:function(){return Ee.iUs},onesLike:function(){return Ee.JpU},op:function(){return Ee.op},outerProduct:function(){return Ee.N2O},pad:function(){return Ee.vku},pad1d:function(){return Ee.pNR},pad2d:function(){return Ee.koy},pad3d:function(){return Ee.t1L},pad4d:function(){return Ee.lGY},pool:function(){return Ee.d_R},pow:function(){return Ee.sQ3},prelu:function(){return Ee.AL3},print:function(){return Ee.S0v},prod:function(){return Ee.WVs},raggedGather:function(){return Ee.$gW},raggedTensorToTensor:function(){return Ee.N89},rand:function(){return Ee.TN_},randomGamma:function(){return Ee.wzB},randomNormal:function(){return Ee.nGf},randomStandardNormal:function(){return Ee.ruB},randomUniform:function(){return Ee.LGj},range:function(){return Ee.w6H},real:function(){return Ee.kwC},reciprocal:function(){return Ee.M25},relu:function(){return Ee.UYe},relu6:function(){return Ee.btT},reshape:function(){return Ee.XLQ},reverse:function(){return Ee.GYS},reverse1d:function(){return Ee.SDf},reverse2d:function(){return Ee.diP},reverse3d:function(){return Ee.sx7},reverse4d:function(){return Ee.mG2},rfft:function(){return Ee.QEs},round:function(){return Ee.NMM},rsqrt:function(){return Ee.bp0},scalar:function(){return Ee.iD$},scatterND:function(){return Ee.snQ},searchSorted:function(){return Ee.zcT},selu:function(){return Ee.U8D},separableConv2d:function(){return Ee.U_I},setdiff1dAsync:function(){return Ee.ODp},sigmoid:function(){return Ee.XD2},sign:function(){return Ee.Xxe},signal:function(){return Ee.tdS},sin:function(){return Ee.O$l},sinh:function(){return Ee.R_K},slice:function(){return Ee.tPi},slice1d:function(){return Ee.jZU},slice2d:function(){return Ee.SmN},slice3d:function(){return Ee.CnO},slice4d:function(){return Ee.p0P},softmax:function(){return Ee.XAC},softplus:function(){return Ee.Wvh},spaceToBatchND:function(){return Ee.fBT},sparse:function(){return Ee.rVs},sparseToDense:function(){return Ee.ers},spectral:function(){return Ee.uN7},split:function(){return Ee.Vl2},sqrt:function(){return Ee._b3},square:function(){return Ee.h62},squaredDifference:function(){return Ee.$i},squeeze:function(){return Ee.L9e},stack:function(){return Ee.knu},step:function(){return Ee.Nbs},stridedSlice:function(){return Ee.NXj},string:function(){return Ee.Z_8},sub:function(){return Ee.luU},sum:function(){return Ee.Smz},tan:function(){return Ee.ORZ},tanh:function(){return Ee.AEp},tensor:function(){return Ee.XeE},tensor1d:function(){return Ee.RRF},tensor2d:function(){return Ee.odF},tensor3d:function(){return Ee.wOQ},tensor4d:function(){return Ee.yXz},tensor5d:function(){return Ee.Bfx},tensor6d:function(){return Ee.xZs},tile:function(){return Ee.Gg6},topk:function(){return Ee.hg7},transpose:function(){return Ee.p4s},truncatedNormal:function(){return Ee.Xu6},unique:function(){return Ee.Two},unsortedSegmentSum:function(){return Ee.pUJ},unstack:function(){return Ee.HHK},upperBound:function(){return Ee.GaM},variable:function(){return Ee.VD$},where:function(){return Ee.arb},whereAsync:function(){return Ee.itS},zeros:function(){return Ee.lls},zerosLike:function(){return Ee.P84}});var S=n(2795);(0,S.env)().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}));var C,E,T=n(9439),N=n(5861),_=n(5671),I=n(3144),R=n(4687),A=n.n(R),O=n(3433);!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(C||(C={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(E||(E={}));var P={};function D(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};P[e]=n}function L(e){return P[e]}function M(e){delete P[e]}function F(e,t,n,r,a){var o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){var i=o.inputIndexStart,s=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?i+1:o.inputIndexEnd;if("tensor"===o.type)return B(t.inputNames[o.inputIndexStart],n,r,a);if("tensors"===o.type)return t.inputNames.slice(i,s).map((function(e){return B(e,n,r,a)}));var u=B(t.inputNames.slice(i)[0],n,r,a),c=u.dataSync();return"number"===o.type?c[0]:S.util.toNestedArray(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function B(e,t,n,r){var a=V(e),o=(0,T.Z)(a,2),i=o[0],s=o[1];if(null!=r){var u=r.getHashTableHandleByName(i);if(null!=u)return u}var c=n.currentContextIds.find((function(e){return!!t[z(i,e)]}));return void 0!==c?t[z(i,c)][s]:void 0}function j(e,t){var n=V(e),r=(0,T.Z)(n,3),a=r[0],o=r[1],i=r[2];return[z(a,t&&t.currentContextId),o,i]}function z(e,t){return t?"".concat(e,"-").concat(t):e}function V(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function W(e,t,n){var r=F("pad",e,t,n);if("explicit"===r){r=F("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],o=0;o<4;o++)a[o][0]=r[2*o],a[o][1]=r[2*o+1];return a}return r}function Z(e){return e.kept?e:(0,S.clone)(e)}var U=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],H=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],G=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],q=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],X=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],K=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Y=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Q=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],$=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],J=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],ee=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],te=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],ne=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],re=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],ae=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],oe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],ie=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],se=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],ue=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],ce=function(){function e(){var t;(0,_.Z)(this,e);var n=[r,a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k],w=(t=[]).concat.apply(t,(0,O.Z)(n.map((function(e){return e.json}))));this.opMappers=w.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return(0,I.Z)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],o=[],i=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?o.push(e[n.name]):null!=n.input&&0!==n.input.length||i.push(e[n.name]),e}),{}),u=[],c=[],l={},d={};null!=n&&(l=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));var p=Object.keys(s);p.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=j(e),a=(0,T.Z)(r,3),o=a[0],i=a[2],u=s[o];if(null!=u.outputs){var c=u.outputs.indexOf(i);if(-1!==c){var l="".concat(o,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))})),0===Object.keys(d).length?p.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(d).forEach((function(e){var t=j(e),n=(0,T.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=d[e],c.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=j(e),n=(0,T.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=l[e],u.push(r))})):u=a;var f={};null!=e.library&&null!=e.library.function&&(f=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var h={nodes:s,inputs:u,outputs:c,weights:o,placeholders:a,signature:n,functions:f};return i.length>0&&(h.initNodes=i),h}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=L(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.slice(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=de(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=de(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=ke(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ke(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=fe(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=fe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=xe(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=xe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=pe(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=pe(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=Se(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Se(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=be(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=be(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=we(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=we(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=ge(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ge(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=ve(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=ve(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=me(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=me(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var o=[],i=[];e.signature.inputArg.forEach((function(e){var t=j(e.name),n=(0,T.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:he(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,o.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=j(e),o=(0,T.Z)(r,3),i=o[0],s=o[2],u=a[i];if(null!=u.outputs){var c=u.outputs.indexOf(s);if(-1!==c){var l="".concat(i,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=j(s[e.name]),n=(0,T.Z)(t,2),r=n[0],o=n[1],u=a[r];null!=u&&(u.defaultOutput=o,i.push(u))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:o,outputs:i,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function le(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=(0,S.env)().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function de(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?le(a.s,r):n}function pe(e,t,n){var r=e[t];return r?r.b:n}function fe(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function he(e){switch("string"===typeof e&&(e=C[e]),e){case C.DT_FLOAT:case C.DT_HALF:return"float32";case C.DT_INT32:case C.DT_INT64:case C.DT_INT8:case C.DT_UINT8:return"int32";case C.DT_BOOL:return"bool";case C.DT_DOUBLE:return"float32";case C.DT_STRING:return"string";default:return null}}function me(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function ge(e,t,n){var r=e[t];return r&&r.type?he(r.type):n}function ve(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return he(e)})):n}function ye(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function be(e,t,n){var r=e[t];return r&&r.shape?ye(r.shape):n}function xe(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function ke(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return le(e,r)})):n}function we(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return ye(e)})):n}function Se(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var Ce=function(){function e(t,n,r){var a=this;(0,_.Z)(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return(0,I.Z)(e,[{key:"getInput",value:function(e){return B(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return B(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return fe(this.node.rawAttrs,e,t);if(null!=n.s)return de(this.node.rawAttrs,e,t);if(null!=n.b)return pe(this.node.rawAttrs,e,t);if(null!=n.shape)return be(this.node.rawAttrs,e,t);if(null!=n.type)return ge(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return xe(this.node.rawAttrs,e,t);if(null!=n.list.s)return ke(this.node.rawAttrs,e,t);if(null!=n.list.shape)return we(this.node.rawAttrs,e,t);if(null!=n.list.b)return Se(this.node.rawAttrs,e,t);if(null!=n.list.type)return ve(this.node.rawAttrs,e,t)}return t}}]),e}(),Ee=n(553),Te=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(F("a",e,t,n),F("b",e,t,n))];case"AddN":return[r.addN(F("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(F("a",e,t,n),F("b",e,t,n))];case"Mul":return[r.mul(F("a",e,t,n),F("b",e,t,n))];case"RealDiv":case"Div":return[r.div(F("a",e,t,n),F("b",e,t,n))];case"DivNoNan":return[r.divNoNan(F("a",e,t,n),F("b",e,t,n))];case"FloorDiv":return[r.floorDiv(F("a",e,t,n),F("b",e,t,n))];case"Sub":return[r.sub(F("a",e,t,n),F("b",e,t,n))];case"Minimum":return[r.minimum(F("a",e,t,n),F("b",e,t,n))];case"Maximum":return[r.maximum(F("a",e,t,n),F("b",e,t,n))];case"Pow":return[r.pow(F("a",e,t,n),F("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(F("a",e,t,n),F("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ne=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(F("x",e,t,n))];case"Acos":return[r.acos(F("x",e,t,n))];case"Acosh":return[r.acosh(F("x",e,t,n))];case"Asin":return[r.asin(F("x",e,t,n))];case"Asinh":return[r.asinh(F("x",e,t,n))];case"Atan":return[r.atan(F("x",e,t,n))];case"Atan2":return[r.atan2(F("x",e,t,n),F("y",e,t,n))];case"Atanh":return[r.atanh(F("x",e,t,n))];case"Ceil":return[r.ceil(F("x",e,t,n))];case"Complex":return[r.complex(F("real",e,t,n),F("imag",e,t,n))];case"Cos":return[r.cos(F("x",e,t,n))];case"Cosh":return[r.cosh(F("x",e,t,n))];case"Elu":return[r.elu(F("x",e,t,n))];case"Erf":return[r.erf(F("x",e,t,n))];case"Exp":return[r.exp(F("x",e,t,n))];case"Expm1":return[r.expm1(F("x",e,t,n))];case"Floor":return[r.floor(F("x",e,t,n))];case"Log":return[r.log(F("x",e,t,n))];case"Log1p":return[r.log1p(F("x",e,t,n))];case"Imag":return[r.imag(F("x",e,t,n))];case"Neg":return[r.neg(F("x",e,t,n))];case"Reciprocal":return[r.reciprocal(F("x",e,t,n))];case"Real":return[r.real(F("x",e,t,n))];case"Relu":return[r.relu(F("x",e,t,n))];case"Round":return[r.round(F("x",e,t,n))];case"Selu":return[r.selu(F("x",e,t,n))];case"Sigmoid":return[r.sigmoid(F("x",e,t,n))];case"Sin":return[r.sin(F("x",e,t,n))];case"Sign":return[r.sign(F("x",e,t,n))];case"Sinh":return[r.sinh(F("x",e,t,n))];case"Softplus":return[r.softplus(F("x",e,t,n))];case"Sqrt":return[r.sqrt(F("x",e,t,n))];case"Square":return[r.square(F("x",e,t,n))];case"Tanh":return[r.tanh(F("x",e,t,n))];case"Tan":return[r.tan(F("x",e,t,n))];case"ClipByValue":return[r.clipByValue(F("x",e,t,n),F("clipValueMin",e,t,n),F("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(F("x",e,t,n))];case"Rsqrt":return[r.rsqrt(B(e.inputNames[0],t,n))];case"Prod":return[r.prod(F("x",e,t,n),F("axes",e,t,n))];case"LeakyRelu":return[r.leakyRelu(F("x",e,t,n),F("alpha",e,t,n))];case"Prelu":return[r.prelu(F("x",e,t,n),F("alpha",e,t,n))];case"IsNan":return[r.isNaN(B(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function _e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){S.util.assert(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],o=t[r];S.util.assert(a<0||o<0||a===o,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function Ie(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function Re(e,t,n){var r=Ae(e,n),a=!Ie(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=Ae(e.shape,r)})),!Ie(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function Ae(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],o=t[r];if(a>=0&&o>=0&&a!==o)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:o}return n}var Oe=function(){function e(t,n,r,a,o,i,s){(0,_.Z)(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=o,this.dynamicSize=i,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=(0,S.scalar)(0),(0,S.keep)(this.idTensor)}return(0,I.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),_e(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,(0,S.keep)(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return(0,S.tensor)([],[0].concat(this.elementShape));var r=this.readMany(e);return _e(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),(0,S.stack)(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return(0,S.tensor)([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return _e(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),(0,S.concat)(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,O.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,(0,S.unstack)(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var o=0===r?0:t.size/r,i=[];(0,S.tidy)((function(){t=(0,S.reshape)(t,[1,r,o]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],o];i[s]=(0,S.reshape)((0,S.slice)(t,u,c),n.elementShape)}return i}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,i)}}]),e}(),Pe=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;(0,_.Z)(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));_e(n,e.shape,"TensorList shape mismatch: "),(0,S.keep)(e)})),this.idTensor=(0,S.scalar)(0),this.maxNumElements=a,(0,S.keep)(this.idTensor)}return(0,I.Z)(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,O.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));_e(e,this.elementShape,"TensorList shape mismatch: ");var a=Re(this.elementShape,this.tensors,e);return(0,S.tidy)((function(){var e=n.tensors.map((function(e){return(0,S.reshape)(e,a)}));return(0,S.stack)(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=Re(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,_e(r.shape,e,"TensorList shape mismatch: "),(0,S.reshape)(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(_e(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,S.keep)(e),this.tensors.push(e)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));_e(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=Re(this.elementShape,this.tensors,t);return(0,S.reshape)(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));_e(this.elementShape,t.shape,"TensorList shape mismatch: "),(0,S.keep)(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));_e(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=Re(this.elementShape,this.tensors,n);return 0===e.length?(0,S.tensor)([],[0].concat(a)):(0,S.tidy)((function(){var t=e.map((function(e){return(0,S.reshape)(r.tensors[e],a)}));return(0,S.stack)(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));_e(this.elementShape,t,"TensorList shape mismatch: ");var r=Re(this.elementShape,this.tensors,t);return 0===this.size()?(0,S.tensor)([],[0].concat(r)):(0,S.tidy)((function(){var e=n.tensors.map((function(e){return(0,S.reshape)(e,r)}));return(0,S.concat)(e,0)}))}}]),e}();function De(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));_e(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=(0,S.unstack)(e);return new Pe(a,t,r)}function Le(e,t,n,r){return new Pe([],e,t,r)}function Me(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,O.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var o=new Pe([],n,e.dtype,r),i=(0,S.unstack)(e,0);return t.forEach((function(e,t){o.setItem(e,i[t])})),o}function Fe(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var o=Ae(e.shape.slice(1),n),i=0===r?0:e.size/r,s=(0,S.tidy)((function(){var n=[];e=(0,S.reshape)(e,[1,r,i]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],i];n[s]=(0,S.reshape)((0,S.slice)(e,u,c),o)}return e.dispose(),n})),u=new Pe([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var Be=function(){var e=(0,N.Z)(A().mark((function e(t,n,r){var a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w,C,E,T,N,_,I,R,O,P,D,L,M,j,z,V,W,U,H,G,q,X,K,Y,Q,$,J,ee,te,ne,re,ae,oe,ie,se,ue,ce,le,de,pe,fe,he,me,ge,ve,ye,be,xe,ke,we,Se,Ce,Ee,Te,Ne,_e,Ie,Re,Ae,Pe,Be,je,ze,Ve,We,Ze,Ue,He,Ge,qe,Xe,Ke,Ye,Qe,$e,Je,et,tt,nt,rt,at,ot,it,st,ut;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?19:"Switch"===e.t0?21:"Merge"===e.t0?32:"Enter"===e.t0?37:"Exit"===e.t0?41:"NextIteration"===e.t0?44:"TensorArrayV3"===e.t0?47:"TensorArrayWriteV3"===e.t0?57:"TensorArrayReadV3"===e.t0?63:"TensorArrayGatherV3"===e.t0?67:"TensorArrayScatterV3"===e.t0?72:"TensorArrayConcatV3"===e.t0?78:"TensorArraySplitV3"===e.t0?82:"TensorArraySizeV3"===e.t0?88:"TensorArrayCloseV3"===e.t0?91:"TensorListSetItem"===e.t0?95:"TensorListGetItem"===e.t0?101:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?107:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?114:"TensorListGather"===e.t0?122:"TensorListStack"===e.t0?128:"TensorListFromTensor"===e.t0?134:"TensorListConcat"===e.t0||"TensorListConcatV2"===e.t0?140:"TensorListPushBack"===e.t0?145:"TensorListPopBack"===e.t0?150:"TensorListSplit"===e.t0?155:"TensorListLength"===e.t0?161:"TensorListResize"===e.t0?164:170;break;case 3:return a=F("thenBranch",t,n,r),o=F("elseBranch",t,n,r),i=F("cond",t,n,r),s=F("args",t,n,r),e.next=9,i.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[o].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return e.delegateYield(A().mark((function e(){var a,o,i,s,u,c,l,d;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F("body",t,n,r),o=F("cond",t,n,r),i=F("args",t,n,r),e.next=5,r.functionMap[o].executeFunctionAsync(i,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=i.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||e.dispose()})),l=i,d=A().mark((function e(){var t,n,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[o].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return i=e.sent,e.next=11,i[0].data();case 11:c=e.sent,i.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(d(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:if("object"!==typeof(u=e.t1)){e.next=19;break}return e.abrupt("return",u.v);case 19:return c=F("pred",t,n,r),e.abrupt("return",[Z(c)]);case 21:return l=F("pred",t,n,r),(d=F("data",t,n,r)).kept||(d=Z(d)),e.next=26,l.data();case 26:if(!e.sent[0]){e.next=30;break}e.t2=[void 0,d],e.next=31;break;case 30:e.t2=[d,void 0];case 31:return e.abrupt("return",e.t2);case 32:if(p=t.inputNames.find((function(e){return void 0!==B(e,n,r)})),!p){e.next=36;break}return f=B(p,n,r),e.abrupt("return",[Z(f)]);case 36:return e.abrupt("return",void 0);case 37:return h=F("frameName",t,n,r),m=F("tensor",t,n,r),r.enterFrame(h),e.abrupt("return",[Z(m)]);case 41:return g=F("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[Z(g)]);case 44:return v=F("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[Z(v)]);case 47:return y=F("size",t,n,r),b=F("dtype",t,n,r),x=F("elementShape",t,n,r),k=F("dynamicSize",t,n,r),w=F("clearAfterRead",t,n,r),C=F("identicalElementShapes",t,n,r),E=F("name",t,n,r),T=new Oe(E,b,y,x,C,k,w),r.addTensorArray(T),e.abrupt("return",[T.idTensor,(0,S.scalar)(1)]);case 57:return N=F("tensorArrayId",t,n,r),_=F("index",t,n,r),I=F("tensor",t,n,r),(R=r.getTensorArray(N.id)).write(_,I),e.abrupt("return",[R.idTensor]);case 63:return O=F("tensorArrayId",t,n,r),P=F("index",t,n,r),D=r.getTensorArray(O.id),e.abrupt("return",[D.read(P)]);case 67:return L=F("tensorArrayId",t,n,r),M=F("indices",t,n,r),j=F("dtype",t,n,r),z=r.getTensorArray(L.id),e.abrupt("return",[z.gather(M,j)]);case 72:return V=F("tensorArrayId",t,n,r),W=F("indices",t,n,r),U=F("tensor",t,n,r),(H=r.getTensorArray(V.id)).scatter(W,U),e.abrupt("return",[H.idTensor]);case 78:return G=F("tensorArrayId",t,n,r),q=r.getTensorArray(G.id),X=F("dtype",t,n,r),e.abrupt("return",[q.concat(X)]);case 82:return K=F("tensorArrayId",t,n,r),Y=F("tensor",t,n,r),Q=F("lengths",t,n,r),($=r.getTensorArray(K.id)).split(Q,Y),e.abrupt("return",[$.idTensor]);case 88:return J=F("tensorArrayId",t,n,r),ee=r.getTensorArray(J.id),e.abrupt("return",[(0,S.scalar)(ee.size(),"int32")]);case 91:return te=F("tensorArrayId",t,n,r),(ne=r.getTensorArray(te.id)).clearAndClose(),e.abrupt("return",[ne.idTensor]);case 95:return re=F("tensorListId",t,n,r),ae=F("index",t,n,r),oe=F("tensor",t,n,r),(ie=r.getTensorList(re.id)).setItem(ae,oe),e.abrupt("return",[ie.idTensor]);case 101:return se=F("tensorListId",t,n,r),ue=F("index",t,n,r),ce=F("elementShape",t,n,r),le=F("elementDType",t,n,r),de=r.getTensorList(se.id),e.abrupt("return",[de.getItem(ue,ce,le)]);case 107:return pe=F("indices",t,n,r),fe=F("tensor",t,n,r),he=F("elementShape",t,n,r),me=F("numElements",t,n,r),ge=Me(fe,pe,he,me),r.addTensorList(ge),e.abrupt("return",[ge.idTensor]);case 114:return ve=F("elementShape",t,n,r),ye=F("elementDType",t,n,r),be="TensorListReserve"===t.op?"numElements":"maxNumElements",xe=F(be,t,n,r),ke="TensorListReserve"===t.op?-1:xe,we=Le(ve,ye,0,ke),r.addTensorList(we),e.abrupt("return",[we.idTensor]);case 122:return Se=F("tensorListId",t,n,r),Ce=F("indices",t,n,r),Ee=F("elementShape",t,n,r),Te=F("elementDType",t,n,r),Ne=r.getTensorList(Se.id),e.abrupt("return",[Ne.gather(Ce,Te,Ee)]);case 128:return _e=F("tensorListId",t,n,r),Ie=F("elementShape",t,n,r),Re=F("elementDType",t,n,r),Ae=F("numElements",t,n,r),Pe=r.getTensorList(_e.id),e.abrupt("return",[Pe.stack(Ie,Re,Ae)]);case 134:return Be=F("tensor",t,n,r),je=F("elementShape",t,n,r),ze=F("elementDType",t,n,r),Ve=De(Be,je,ze),r.addTensorList(Ve),e.abrupt("return",[Ve.idTensor]);case 140:return We=F("tensorListId",t,n,r),Ze=r.getTensorList(We.id),Ue=F("dtype",t,n,r),He=F("elementShape",t,n,r),e.abrupt("return",[Ze.concat(Ue,He)]);case 145:return Ge=F("tensorListId",t,n,r),qe=F("tensor",t,n,r),(Xe=r.getTensorList(Ge.id)).pushBack(qe),e.abrupt("return",[Xe.idTensor]);case 150:return Ke=F("tensorListId",t,n,r),Ye=F("elementShape",t,n,r),Qe=F("elementDType",t,n,r),$e=r.getTensorList(Ke.id),e.abrupt("return",[$e.popBack(Ye,Qe)]);case 155:return Je=F("tensor",t,n,r),et=F("elementShape",t,n,r),tt=F("lengths",t,n,r),nt=Fe(Je,tt,et),r.addTensorList(nt),e.abrupt("return",[nt.idTensor]);case 161:return rt=F("tensorListId",t,n,r),at=r.getTensorList(rt.id),e.abrupt("return",[(0,S.scalar)(at.size(),"int32")]);case 164:return ot=F("tensorListId",t,n,r),it=F("size",t,n,r),st=r.getTensorList(ot.id),ut=st.resize(it),r.addTensorList(ut),e.abrupt("return",[ut.idTensor]);case 170:throw TypeError("Node type ".concat(t.op," is not implemented"));case 171:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function je(e,t,n){var r=F("fusedOps",e,t,n),a=(0,T.Z)(r,2),o=a[0],i=a[1],s="biasadd"===o,u=!s,c="prelu"===i,l="fusedbatchnorm"===o,d=F("numArgs",e,t,n);if(s){if(c&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&s&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var p=F("strides",e,t,n),f=W(e,t,n),h=F("dataFormat",e,t,n).toUpperCase(),m=F("dilations",e,t,n),g=F("args",e,t,n),v=(0,T.Z)(g,2),y=v[0],b=v[1];return u&&(b=y,y=void 0),{stride:p,pad:f,dataFormat:h,dilations:m,biasArg:y,preluArg:b,activationFunc:i,leakyreluAlpha:F("leakyreluAlpha",e,t,n)}}var ze=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Conv1D":var a=F("stride",e,t,n),o=F("pad",e,t,n),i=F("dataFormat",e,t,n).toUpperCase(),s=F("dilation",e,t,n);return[r.conv1d(F("x",e,t,n),F("filter",e,t,n),a,o,i,s)];case"Conv2D":var u=F("strides",e,t,n),c=W(e,t,n),l=F("dataFormat",e,t,n).toUpperCase(),d=F("dilations",e,t,n);return[r.conv2d(F("x",e,t,n),F("filter",e,t,n),[u[1],u[2]],c,l,[d[1],d[2]])];case"_FusedConv2D":var p=je(e,t,n),f=p.stride,h=p.pad,m=p.dataFormat,g=p.dilations,v=p.biasArg,y=p.preluArg,b=p.activationFunc,x=p.leakyreluAlpha;return[r.fused.conv2d({x:F("x",e,t,n),filter:F("filter",e,t,n),strides:[f[1],f[2]],pad:h,dataFormat:m,dilations:[g[1],g[2]],bias:v,activation:b,preluActivationWeights:y,leakyreluAlpha:x})];case"FusedDepthwiseConv2dNative":var k=je(e,t,n),S=k.stride,C=k.pad,E=k.dataFormat,T=k.dilations,N=k.biasArg,_=k.preluArg,I=k.activationFunc,R=k.leakyreluAlpha;return[r.fused.depthwiseConv2d({x:F("x",e,t,n),filter:F("filter",e,t,n),strides:[S[1],S[2]],pad:C,dataFormat:E,dilations:[T[1],T[2]],bias:N,activation:I,preluActivationWeights:_,leakyreluAlpha:R})];case"Conv2DBackpropInput":case"Conv2dTranspose":var A=F("outputShape",e,t,n),O=F("strides",e,t,n),P=W(e,t,n);return[r.conv2dTranspose(F("x",e,t,n),F("filter",e,t,n),A,[O[1],O[2]],P)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var D=F("strides",e,t,n),L=W(e,t,n),M=F("dilations",e,t,n),B=F("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(F("input",e,t,n),F("filter",e,t,n),[D[1],D[2]],L,B,[M[1],M[2]])];case"Conv3D":var j=F("strides",e,t,n),z=F("pad",e,t,n),V=F("dataFormat",e,t,n).toUpperCase(),Z=F("dilations",e,t,n);return[r.conv3d(F("x",e,t,n),F("filter",e,t,n),[j[1],j[2],j[3]],z,V,[Z[1],Z[2],Z[3]])];case"AvgPool":var U=F("strides",e,t,n),H=F("pad",e,t,n),G=F("kernelSize",e,t,n);return[r.avgPool(F("x",e,t,n),[G[1],G[2]],[U[1],U[2]],H)];case"MaxPool":var q=F("strides",e,t,n),X=F("pad",e,t,n),K=F("kernelSize",e,t,n);return[r.maxPool(F("x",e,t,n),[K[1],K[2]],[q[1],q[2]],X)];case"MaxPoolWithArgmax":var Y=F("strides",e,t,n),Q=F("pad",e,t,n),$=F("kernelSize",e,t,n),J=F("includeBatchInIndex",e,t,n),ee=r.maxPoolWithArgmax(F("x",e,t,n),[$[1],$[2]],[Y[1],Y[2]],Q,J),te=ee.result,ne=ee.indexes;return[te,ne];case"AvgPool3D":var re=F("strides",e,t,n),ae=F("pad",e,t,n),oe=F("kernelSize",e,t,n);return[r.avgPool3d(F("x",e,t,n),[oe[1],oe[2],oe[3]],[re[1],re[2],re[3]],ae)];case"MaxPool3D":var ie=F("strides",e,t,n),se=F("pad",e,t,n),ue=F("kernelSize",e,t,n);return[r.maxPool3d(F("x",e,t,n),[ue[1],ue[2],ue[3]],[ie[1],ie[2],ie[3]],se)];case"Dilation2D":var ce=F("strides",e,t,n),le=F("pad",e,t,n),de=F("dilations",e,t,n),pe=ce[1],fe=ce[2],he=de[1],me=de[2];return[r.dilation2d(F("x",e,t,n),F("filter",e,t,n),[pe,fe],le,[he,me],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ve=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Fill":var a=F("shape",e,t,n),o=F("dtype",e,t,n),i=F("value",e,t,n);return[r.fill(a,i,o)];case"LinSpace":var s=F("start",e,t,n),u=F("stop",e,t,n),c=F("num",e,t,n);return[r.linspace(s,u,c)];case"Multinomial":var l=F("logits",e,t,n),d=F("numSamples",e,t,n),p=F("seed",e,t,n);return[r.multinomial(l,d,p)];case"OneHot":var f=F("indices",e,t,n),h=F("depth",e,t,n),m=F("onValue",e,t,n),g=F("offValue",e,t,n),v=F("dtype",e,t,n);return[r.oneHot(f,h,m,g,v)];case"Ones":return[r.ones(F("shape",e,t,n),F("dtype",e,t,n))];case"OnesLike":return[r.onesLike(F("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(F("shape",e,t,n),F("dtype",e,t,n),F("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(F("shape",e,t,n),F("minval",e,t,n),F("maxval",e,t,n),F("dtype",e,t,n))];case"Range":var y=F("start",e,t,n),b=F("stop",e,t,n),x=F("step",e,t,n);return[r.range(y,b,x,F("dtype",e,t,n))];case"TruncatedNormal":var k=F("shape",e,t,n),S=F("mean",e,t,n),C=F("stdDev",e,t,n),E=F("seed",e,t,n);return[r.truncatedNormal(k,S,C,F("dtype",e,t,n),E)];case"Zeros":return[r.zeros(F("shape",e,t,n),F("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(F("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function We(e,t,n){return{boxes:F("boxes",e,t,n),scores:F("scores",e,t,n),maxOutputSize:F("maxOutputSize",e,t,n),iouThreshold:F("iouThreshold",e,t,n),scoreThreshold:F("scoreThreshold",e,t,n),softNmsSigma:F("softNmsSigma",e,t,n)}}var Ze=function(){var e=(0,N.Z)(A().mark((function e(t,n,r,a){var o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,S,C,E,T,N,_,I,R,O=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=O.length>4&&void 0!==O[4]?O[4]:w,e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?4:"NonMaxSuppressionV4"===e.t0?9:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?15:"Where"===e.t0?20:"ListDiff"===e.t0?27:28;break;case 4:return i=We(t,n,r),s=i.boxes,u=i.scores,c=i.maxOutputSize,l=i.iouThreshold,d=i.scoreThreshold,p=i.softNmsSigma,e.next=7,o.image.nonMaxSuppressionWithScoreAsync(s,u,c,l,d,p);case 7:return f=e.sent,e.abrupt("return",[f.selectedIndices,f.selectedScores]);case 9:return h=We(t,n,r),m=h.boxes,g=h.scores,v=h.maxOutputSize,y=h.iouThreshold,b=h.scoreThreshold,x=F("padToMaxOutputSize",t,n,r),e.next=13,o.image.nonMaxSuppressionPaddedAsync(m,g,v,y,b,x);case 13:return k=e.sent,e.abrupt("return",[k.selectedIndices,k.validOutputs]);case 15:return S=We(t,n,r),C=S.boxes,E=S.scores,T=S.maxOutputSize,N=S.iouThreshold,_=S.scoreThreshold,e.next=18,o.image.nonMaxSuppressionAsync(C,E,T,N,_);case 18:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 20:return I=o.cast(F("condition",t,n,r),"bool"),e.next=23,o.whereAsync(I);case 23:return e.t2=e.sent,R=[e.t2],I.dispose(),e.abrupt("return",R);case 27:return e.abrupt("return",o.setdiff1dAsync(F("x",t,n,r),F("y",t,n,r)));case 28:throw TypeError("Node type ".concat(t.op," is not implemented"));case 29:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Ue=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"LowerBound":var a=F("sortedSequence",e,t,n),o=F("values",e,t,n);return[r.lowerBound(a,o)];case"TopKV2":var i=F("x",e,t,n),s=F("k",e,t,n),u=F("sorted",e,t,n),c=r.topk(i,s,u);return[c.values,c.indices];case"UpperBound":var l=F("sortedSequence",e,t,n),d=F("values",e,t,n);return[r.upperBound(l,d)];case"Unique":var p=F("x",e,t,n),f=r.unique(p);return[f.values,f.indices];case"UniqueV2":var h=F("x",e,t,n),m=F("axis",e,t,n),g=r.unique(h,m);return[g.values,g.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},He=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var a=F("default",e,t,n);return[B(e.name,t,n)||a];case"Placeholder":return[B(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":var o=F("x",e,t,n);return[Z(o)];case"IdentityN":return F("x",e,t,n).map((function(e){return Z(e)}));case"Snapshot":var i=F("x",e,t,n);return[Z(i)];case"Shape":return[r.tensor1d(F("x",e,t,n).shape,"int32")];case"ShapeN":return F("x",e,t,n).map((function(e){return r.tensor1d(e.shape)}));case"Size":return[r.scalar(F("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(F("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":var s=F("x",e,t,n),u=F("data",e,t,n),c=F("message",e,t,n),l=F("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(var d=0;d<u.length;d++)console.log(Array.prototype.slice.call(u[d].dataSync()).slice(0,l));return[s];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ge=n(7297),qe=function(){function e(t,n){(0,_.Z)(this,e),this.keyDType=t,this.valueDType=n,this.handle=(0,S.scalar)(0),this.tensorMap=new Map,(0,S.keep)(this.handle)}return(0,I.Z)(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return Ge.i(this.size(),"int32")}},{key:"import",value:function(){var e=(0,N.Z)(A().mark((function e(t,n){var r,a=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",(0,S.tidy)((function(){var e=(0,S.unstack)(n),t=r.length,o=e.length;S.util.assert(t===o,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(o," ")+"elements."}));for(var i=0;i<t;i++){var s=r[i],u=e[i];(0,S.keep)(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=(0,N.Z)(A().mark((function e(t,n){var r,a=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",(0,S.tidy)((function(){for(var e=[],t=0;t<r.length;t++){var o=r[t],i=a.findWithDefault(o,n);e.push(i)}return(0,S.stack)(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),Xe=function(){var e=(0,N.Z)(A().mark((function e(t,n,r,a){var o,i,s,u,c,l,d,p,f,h,m,g,v;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?24:27;break;case 3:return o=F("keyDType",t,n,r),i=F("valueDType",t,n,r),s=new qe(o,i),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return u=F("tableHandle",t,n,r,a),c=F("keys",t,n,r),l=F("values",t,n,r),d=a.getHashTableById(u.id),e.next=14,d.import(c,l);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return p=F("tableHandle",t,n,r,a),f=F("keys",t,n,r),h=F("defaultValue",t,n,r),m=a.getHashTableById(p.id),e.next=22,m.find(f,h);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:return g=F("tableHandle",t,n,r,a),v=a.getHashTableById(g.id),e.abrupt("return",[v.tensorSize()]);case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Ke=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"ResizeBilinear":var a=F("images",e,t,n),o=F("size",e,t,n),i=F("alignCorners",e,t,n),s=F("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[o[0],o[1]],i,s)];case"ResizeNearestNeighbor":var u=F("images",e,t,n),c=F("size",e,t,n),l=F("alignCorners",e,t,n),d=F("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(u,[c[0],c[1]],l,d)];case"CropAndResize":var p=F("image",e,t,n),f=F("boxes",e,t,n),h=F("boxInd",e,t,n),m=F("cropSize",e,t,n),g=F("method",e,t,n),v=F("extrapolationValue",e,t,n);return[r.image.cropAndResize(p,f,h,m,g,v)];case"ImageProjectiveTransformV3":var y=F("images",e,t,n),b=F("transforms",e,t,n),x=F("outputShape",e,t,n),k=F("fillValue",e,t,n),S=F("interpolation",e,t,n),C=F("fillMode",e,t,n);return[r.image.transform(y,b,S.toLowerCase(),C.toLowerCase(),k,x)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Ye=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Equal":return[r.equal(F("a",e,t,n),F("b",e,t,n))];case"NotEqual":return[r.notEqual(F("a",e,t,n),F("b",e,t,n))];case"Greater":return[r.greater(F("a",e,t,n),F("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(F("a",e,t,n),F("b",e,t,n))];case"Less":return[r.less(F("a",e,t,n),F("b",e,t,n))];case"LessEqual":return[r.lessEqual(F("a",e,t,n),F("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(F("a",e,t,n),F("b",e,t,n))];case"LogicalNot":return[r.logicalNot(F("a",e,t,n))];case"LogicalOr":return[r.logicalOr(F("a",e,t,n),F("b",e,t,n))];case"Select":case"SelectV2":return[r.where(F("condition",e,t,n),F("a",e,t,n),F("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Qe=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(F("a",e,t,n),F("b",e,t,n),F("transposeA",e,t,n),F("transposeB",e,t,n))];case"Einsum":return[r.einsum.apply(r,[F("equation",e,t,n)].concat((0,O.Z)(F("tensors",e,t,n))))];case"Transpose":return[r.transpose(F("x",e,t,n),F("perm",e,t,n))];case"_FusedMatMul":var a=F("fusedOps",e,t,n),o=(0,T.Z)(a,2),i=o[0],s=o[1],u="biasadd"===i,c="prelu"===s,l=F("numArgs",e,t,n),d=F("leakyreluAlpha",e,t,n);if(u){if(c&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var p=F("args",e,t,n),f=(0,T.Z)(p,2),h=f[0],m=f[1];return[r.fused.matMul({a:F("a",e,t,n),b:F("b",e,t,n),transposeA:F("transposeA",e,t,n),transposeB:F("transposeB",e,t,n),bias:h,activation:s,preluActivationWeights:m,leakyreluAlpha:d})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},$e=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(F("x",e,t,n),F("axis",e,t,n),F("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(F("x",e,t,n),F("mean",e,t,n),F("variance",e,t,n),F("offset",e,t,n),F("scale",e,t,n),F("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(F("x",e,t,n),F("radius",e,t,n),F("bias",e,t,n),F("alpha",e,t,n),F("beta",e,t,n))];case"Softmax":return[r.softmax(F("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(F("x",e,t,n))];case"SparseToDense":return[r.sparseToDense(F("sparseIndices",e,t,n),F("outputShape",e,t,n),F("sparseValues",e,t,n),F("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},Je=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Max":var a=F("axis",e,t,n),o=F("keepDims",e,t,n);return[r.max(F("x",e,t,n),a,o)];case"Mean":var i=F("axis",e,t,n),s=F("keepDims",e,t,n);return[r.mean(F("x",e,t,n),i,s)];case"Min":var u=F("axis",e,t,n),c=F("keepDims",e,t,n);return[r.min(F("x",e,t,n),u,c)];case"Sum":var l=F("axis",e,t,n),d=F("keepDims",e,t,n);return[r.sum(F("x",e,t,n),l,d)];case"All":var p=F("axis",e,t,n),f=F("keepDims",e,t,n);return[r.all(F("x",e,t,n),p,f)];case"Any":var h=F("axis",e,t,n),m=F("keepDims",e,t,n);return[r.any(F("x",e,t,n),h,m)];case"ArgMax":var g=F("axis",e,t,n);return[r.argMax(F("x",e,t,n),g)];case"ArgMin":var v=F("axis",e,t,n);return[r.argMin(F("x",e,t,n),v)];case"Prod":var y=F("axis",e,t,n),b=F("keepDims",e,t,n);return[r.prod(F("x",e,t,n),y,b)];case"Cumprod":var x=F("axis",e,t,n),k=F("exclusive",e,t,n),S=F("reverse",e,t,n);return[r.cumprod(F("x",e,t,n),x,k,S)];case"Cumsum":var C=F("axis",e,t,n),E=F("exclusive",e,t,n),T=F("reverse",e,t,n);return[r.cumsum(F("x",e,t,n),C,E,T)];case"Bincount":var N=F("x",e,t,n),_=F("weights",e,t,n),I=F("size",e,t,n);return[r.bincount(N,_,I)];case"DenseBincount":var R=F("x",e,t,n),A=F("weights",e,t,n),O=F("size",e,t,n),P=F("binaryOutput",e,t,n);return[r.denseBincount(R,A,O,P)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},et=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"ConcatV2":case"Concat":var a=F("n",e,t,n),o=F("axis",e,t,n),i=F("tensors",e,t,n);return i=i.slice(0,a),[r.concat(i,o)];case"Gather":var s=F("x",e,t,n),u=F("indices",e,t,n);return[r.gather(s,r.cast(u,"int32"),0)];case"GatherV2":var c=F("axis",e,t,n),l=F("batchDims",e,t,n),d=F("x",e,t,n),p=F("indices",e,t,n);return[r.gather(d,r.cast(p,"int32"),c,l)];case"Reverse":for(var f=F("dims",e,t,n),h=[],m=0;m<f.length;m++)f[m]&&h.push(m);var g=F("x",e,t,n);return[r.reverse(g,h)];case"ReverseV2":var v=F("axis",e,t,n),y=F("x",e,t,n);return[r.reverse(y,v)];case"Slice":var b=F("begin",e,t,n),x=F("size",e,t,n);return[r.slice(F("x",e,t,n),b,x)];case"StridedSlice":var k=F("begin",e,t,n),C=F("end",e,t,n),E=F("strides",e,t,n),T=F("beginMask",e,t,n),N=F("endMask",e,t,n),_=F("ellipsisMask",e,t,n),I=F("newAxisMask",e,t,n),R=F("shrinkAxisMask",e,t,n),A=F("x",e,t,n);return[r.stridedSlice(A,k,C,E,T,N,_,I,R)];case"Pack":return(0,S.tidy)((function(){var a=F("axis",e,t,n),o=F("tensors",e,t,n),i=o[0].shape,s=r.squeeze(o[0]).shape,u=o.map((function(e){var t=S.util.arraysEqual(e.shape,i);if(!t&&!S.util.arraysEqual(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,i)}));return[r.stack(u,a)]}));case"Unpack":var O=F("axis",e,t,n),P=F("tensor",e,t,n);return r.unstack(P,O);case"Tile":var D=F("reps",e,t,n);return[r.tile(F("x",e,t,n),D)];case"Split":case"SplitV":var L=F("axis",e,t,n),M=F("numOrSizeSplits",e,t,n),B=F("x",e,t,n);return r.split(B,M,L);case"ScatterNd":var j=F("indices",e,t,n),z=F("values",e,t,n),V=F("shape",e,t,n);return[r.scatterND(j,z,V)];case"GatherNd":var W=F("x",e,t,n),Z=F("indices",e,t,n);return[r.gatherND(W,Z)];case"SparseToDense":var U=F("sparseIndices",e,t,n),H=F("outputShape",e,t,n),G=F("sparseValues",e,t,n),q=F("defaultValue",e,t,n);return[r.sparseToDense(U,G,H,G.dtype===q.dtype?q:r.cast(q,G.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},tt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"SparseFillEmptyRows":var a=r.sparse.sparseFillEmptyRows(F("indices",e,t,n),F("values",e,t,n),F("denseShape",e,t,n),F("defaultValue",e,t,n)),o=a.outputIndices,i=a.outputValues,s=a.emptyRowIndicator,u=a.reverseIndexMap;return[o,i,s,u];case"SparseReshape":var c=r.sparse.sparseReshape(F("inputIndices",e,t,n),F("inputShape",e,t,n),F("newShape",e,t,n)),l=c.outputIndices,d=c.outputShape;return[l,d];case"SparseSegmentMean":var p=r.sparse.sparseSegmentMean(F("data",e,t,n),F("indices",e,t,n),F("segmentIds",e,t,n));return[p];case"SparseSegmentSum":var f=r.sparse.sparseSegmentSum(F("data",e,t,n),F("indices",e,t,n),F("segmentIds",e,t,n));return[f];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},nt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"FFT":return[r.fft(F("x",e,t,n))];case"IFFT":return[r.ifft(F("x",e,t,n))];case"RFFT":return[r.rfft(F("x",e,t,n))];case"IRFFT":return[r.irfft(F("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},rt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"StringNGrams":var a=r.string.stringNGrams(F("data",e,t,n),F("dataSplits",e,t,n),F("separator",e,t,n),F("nGramWidths",e,t,n),F("leftPad",e,t,n),F("rightPad",e,t,n),F("padWidth",e,t,n),F("preserveShortSequences",e,t,n)),o=a.nGrams,i=a.nGramsSplits;return[o,i];case"StringSplit":var s=r.string.stringSplit(F("input",e,t,n),F("delimiter",e,t,n),F("skipEmpty",e,t,n)),u=s.indices,c=s.values,l=s.shape;return[u,c,l];case"StringToHashBucketFast":var d=r.string.stringToHashBucketFast(F("input",e,t,n),F("numBuckets",e,t,n));return[d];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},at=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Cast":return[r.cast(F("x",e,t,n),F("dtype",e,t,n))];case"ExpandDims":var a=F("axis",e,t,n);return[r.expandDims(F("x",e,t,n),a)];case"Squeeze":var o=F("axis",e,t,n);return[r.squeeze(F("x",e,t,n),o)];case"Reshape":return[r.reshape(F("x",e,t,n),F("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(F("x",e,t,n),F("padding",e,t,n),F("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(F("x",e,t,n),F("padding",e,t,n),F("constantValue",e,t,n))];case"SpaceToBatchND":var i=F("blockShape",e,t,n),s=F("paddings",e,t,n);return[r.spaceToBatchND(F("x",e,t,n),i,s)];case"BatchToSpaceND":var u=F("blockShape",e,t,n),c=F("crops",e,t,n);return[r.batchToSpaceND(F("x",e,t,n),u,c)];case"DepthToSpace":var l=F("blockSize",e,t,n),d=F("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(F("x",e,t,n),l,d)];case"BroadcastTo":return[r.broadcastTo(F("x",e,t,n),F("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(F("s0",e,t,n),F("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function ot(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:S.tidy,o=function(e,t,n){switch(e.category){case"arithmetic":return a((function(){return Te(e,t,n)}));case"basic_math":return a((function(){return Ne(e,t,n)}));case"control":return Be(e,t,n);case"convolution":return a((function(){return ze(e,t,n)}));case"creation":return a((function(){return Ve(e,t,n)}));case"dynamic":return Ze(e,t,n);case"evaluation":return a((function(){return Ue(e,t,n)}));case"image":return a((function(){return Ke(e,t,n)}));case"graph":return a((function(){return He(e,t,n)}));case"logical":return a((function(){return Ye(e,t,n)}));case"matrices":return a((function(){return Qe(e,t,n)}));case"normalization":return a((function(){return $e(e,t,n)}));case"reduction":return a((function(){return Je(e,t,n)}));case"slice_join":return a((function(){return et(e,t,n)}));case"sparse":return a((function(){return tt(e,t,n)}));case"spectral":return a((function(){return nt(e,t,n)}));case"string":return a((function(){return rt(e,t,n)}));case"transformation":return a((function(){return at(e,t,n)}));case"hash_table":return Xe(e,t,n,r);case"custom":var o=L(e.op);if(o&&o.customExecutor)return o.customExecutor(new Ce(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return S.util.isPromise(o)?o.then((function(e){return[].concat(e)})):[].concat(o)}var it=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,_.Z)(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return(0,I.Z)(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function st(e,t,n,r){var a=new Set,o=[],i=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return V(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return V(e.name)[0]})));for(var d=(0,O.Z)(t);d.length>0;){var p=d.pop();(dt(p)||pt(p)||ft(p))&&null==i&&(s=(i=p).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(p.name),null==n[p.name]&&(-1===c.indexOf(p.name)&&-1===l.indexOf(p.name)&&(0!==p.inputs.length?p.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),d.push(e))})):o.push(p.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:o,dynamicNode:i,syncInputs:s}}var ut=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],ct=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],lt=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function dt(e){return ut.indexOf(e.op)>=0}function pt(e){return ct.indexOf(e.op)>=0}function ft(e){return lt.indexOf(e.op)>=0}var ht=function(){function e(t,n){var r=this;(0,_.Z)(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return(0,I.Z)(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,O.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=st(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,o=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(o,"]"));if(r.length>0){var i=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(i,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,o=[],i=Object.keys(a).map((function(e){return V(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;i.forEach((function(e){r.has(e.name)&&o.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&o.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&o.push(e)}));for(var u=new Set,c=[];o.length>0;){var l=o.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&o.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[V(e)[0]]})),o=t.map((function(e){return V(e)[0]})),i=o.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===i.length&&(i=this._outputs);var s=this.getCompilationKey(a,i),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,i),this.compiledMap.set(s,u));var c={},l={};return(0,S.tidy)((function(){var r=new it(n.weightMap,c,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=V(t),r=(0,T.Z)(n,2),o=r[0],i=[];i[r[1]]=e[t],a[o]=i}));for(var i=n.getFrozenTensorIds(a),s={},d=0;d<u.length;d++){var p=u[d];if(!a[p.name]){var f=ot(p,a,r,n._resourceManager);if(S.util.isPromise(f))throw new Error("The execution of the op '".concat(p.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[p.name]=f,n.checkTensorForDisposal(p.name,p,a,r,i,o,s)}}return null==n.parent&&r.dispose(i),t.map((function(e){return B(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,o,i){var s=this;"control"!==t.category&&-1===o.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(i[e.id]=(i[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var o=function(e,t,n){return t[z(e,n.currentContextId)]}(e.name,n,r);null!=o&&o.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=i[e.id];if(1===n){if(s.keepTensorForDebug){var o=j(t.name,r),u=(0,T.Z)(o,2),c=u[0],l=u[1];s.intermediateTensors[c]||(s.intermediateTensors[c]=[]),s.intermediateTensors[c][l]=e}else e.dispose();delete i[e.id]}else null!=n&&i[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=(0,N.Z)(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;this.tensorsMap&&Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){!t||t.kept||t.isDisposed||e.keepIds.has(t.id)||t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=(0,N.Z)(A().mark((function e(t,n){var r,a,o,i,s,u,c,l=this,d=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>2&&void 0!==d[2]&&d[2],a=d.length>3&&void 0!==d[3]?d[3]:{},o=d.length>4&&void 0!==d[4]?d[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=(0,S.env)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){console.warn(p.message)}return this.resetIntermediateTensors(),i=new it(this.weightMap,a,o,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,i,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return B(e,l.tensorsMap,i)})),u=s.map((function(e){return e.id})),c=Object.keys(t).map((function(e){return t[e].id})),this.keepIds=new Set([].concat((0,O.Z)(u),(0,O.Z)(c),(0,O.Z)(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&i.dispose(this.keepIds),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=(0,N.Z)(A().mark((function e(t,n,r){var a,o=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[o.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=(0,N.Z)(A().mark((function e(t,n,r,a){var o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Object.keys(t),i=o.map((function(e){return w.graph.nodes[V(e)[0]]})),s=r.map((function(e){return V(e)[0]})),0===(u=s.map((function(e){return w.graph.nodes[e]}))).length&&(u=this._outputs),c=st(t,u,this.weightMap,this._initNodes),l=c.usedNodes,d=c.missingInputs,p=c.dynamicNode,f=c.syncInputs,h=[].concat((0,O.Z)(i),(0,O.Z)(this.graph.weights),(0,O.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=V(e),r=(0,T.Z)(n,2),a=r[0],o=[];o[r[1]]=t[e],m[a]=o})),g={},v=this.getFrozenTensorIds(m),y={};case 12:if(!(h.length>0)){e.next=18;break}return b=this.processStack(i,h,n,m,y,v,s,g,l),e.next=16,Promise.all(b);case 16:e.next=12;break;case 18:if(null!=p||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((x=u.filter((function(e){return!dt(e)&&!B(e.name,m,n)})).map((function(e){return e.name}))).length>0)){e.next=24;break}throw k="",null!=p&&(k="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(f,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided ")+"inputs [".concat(o,"]. Consider providing the following inputs: ")+"[".concat(d,"]. ").concat(k));case 24:return e.abrupt("return",m);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,o,i,s,u){for(var c=this,l=[],d=function(){var e=t.pop();n.currentContext=e.contexts;var d="";if("Enter"===e.node.op&&F("isConstant",e.node,r,n)){var p=j(e.node.name,n),f=(0,T.Z)(p,1);d=f[0]}if(null==r[e.node.name]){var h=ot(e.node,r,n,c._resourceManager);if(!d){var m=j(e.node.name,n),g=(0,T.Z)(m,1);d=g[0]}var v=n.currentContext;S.util.isPromise(h)?l.push(h.then((function(l){return r[d]=l,n.currentContext=v,c.checkTensorForDisposal(d,e.node,r,n,o,i,s),c.processChildNodes(e.node,t,n,r,a,u),l}))):(r[d]=h,c.checkTensorForDisposal(d,e.node,r,n,o,i,s),c.processChildNodes(e.node,t,n,r,a,u))}else c.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)d();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,o){e.children.forEach((function(e){var i=j(e.name,n),s=(0,T.Z)(i,1)[0];!a[s]&&o.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!B(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!B(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=V(n),o=(0,T.Z)(a,1)[0],i=t.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){var s=i.attrParams.shape.value,u=s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e}));S.util.assert(u,(function(){return"The shape of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}i.attrParams.dtype&&i.attrParams.dtype.value&&S.util.assert(r.dtype===i.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(i.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=V(e),r=(0,T.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=V(e),r=(0,T.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),mt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_.Z)(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return(0,I.Z)(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),gt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.io;(0,_.Z)(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new mt}return(0,I.Z)(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"modelStructuredOutputKeys",get:function(){return this.structuredOutputKeys}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{var t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var t=this.handler.load();return S.util.isPromise(t)?t.then((function(t){return e.loadSync(t)})):this.loadSync(t)}},{key:"loadSync",value:function(e){this.artifacts=e;var t=this.artifacts.modelTopology,n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){var r=this.artifacts.userDefinedMetadata;null!=r.signature&&(n=r.signature),null!=r.structuredOutputKeys&&(this.structuredOutputKeys=r.structuredOutputKeys)}this.signature=n,this.version="".concat(t.versions.producer,".").concat(t.versions.minConsumer);var a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new ht(ce.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var o=ce.Instance.transformGraph(e.modelInitializer);this.initializer=new ht(o),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=(0,N.Z)(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=this.io.getSaveHandlers(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){var n=this,r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){var a=r instanceof S.Tensor?[r]:r,o={};return a.forEach((function(e,t){return o[n.structuredOutputKeys[t]]=e})),o}return r}},{key:"normalizeInputs",value:function(e){if(!(e instanceof S.Tensor)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=(0,N.Z)(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function vt(e){return yt.apply(this,arguments)}function yt(){return yt=(0,N.Z)(A().mark((function e(t){var n,r,a,o=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r=o.length>2&&void 0!==o[2]?o[2]:S.io,null!=t){e.next=4;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 4:return null==n&&(n={}),n.fromTFHub&&"string"===typeof t&&(t=xt(t)),a=new gt(t,n,r),e.next=9,a.load();case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),yt.apply(this,arguments)}function bt(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");var t;if(e instanceof Array){var n=(0,T.Z)(e,2),r=n[0],a=n[1];if(!r)throw new Error("modelJSON must be the first element of the array");if(!a||!(a instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");var o=S.io.getWeightSpecs(r.weightsManifest),i=S.io.getModelArtifactsForJSONSync(r,o,a);t=S.io.fromMemorySync(i)}else if("load"in e)t=e;else{if(!("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e))throw new Error("Unknown model format");t=S.io.fromMemorySync(e)}var s=new gt(t);return s.load(),s}function xt(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat("model.json").concat("?tfjs-format=file")}var kt="3.21.0"},3607:function(e,t,n){"use strict";n.d(t,{JL:function(){return o},Zu:function(){return i}});var r=n(5671),a=n(3144),o=function(){function e(t,n){(0,r.Z)(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return(0,a.Z)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),i=function(){function e(){(0,r.Z)(this,e)}return(0,a.Z)(e,[{key:"refCount",value:function(e){return s("refCount")}},{key:"incRef",value:function(e){return s("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return s("time")}},{key:"read",value:function(e){return s("read")}},{key:"readSync",value:function(e){return s("readSync")}},{key:"readToGPU",value:function(e,t){return s("readToGPU")}},{key:"numDataIds",value:function(){return s("numDataIds")}},{key:"disposeData",value:function(e,t){return s("disposeData")}},{key:"write",value:function(e,t,n){return s("write")}},{key:"move",value:function(e,t,n,r,a){return s("move")}},{key:"memory",value:function(){return s("memory")}},{key:"floatPrecision",value:function(){return s("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return s("dispose")}}]),e}();function s(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}},6381:function(e,t,n){"use strict";n.d(t,{GP:function(){return i},qP:function(){return s},pA:function(){return u}});var r=n(3433);function a(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,o=0,i=!1;for(;r<a;){var s=n(t,e[o=r+(a-r>>>1)]);s>0?r=o+1:(a=o,i=!s)}return i?r:-r-1}(e,t,n||o)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function o(e,t){return e>t?1:e<t?-1:0}function i(e,t,n,r,a){return c(e,t,n,r,a,0)}function s(e,t,n,r,a,o){return c(e,t,n,r,a,0,!1,o,!0)}function u(e,t,n,r,a,o){return c(e,t,n,r,a,o,!0)}function c(e,t,n,o,i,s){for(var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=[],m=0;m<t.length;m++)t[m]>i&&h.push({score:t[m],boxIndex:m,suppressBeginIndex:0});h.sort(p);for(var g=s>0?-.5/s:0,v=[],y=[];v.length<n&&h.length>0;){var b=h.pop(),x=b.score,k=b.boxIndex,w=b.suppressBeginIndex;if(x<i)break;for(var S=!1,C=v.length-1;C>=w;--C){var E=l(e,k,v[C]);if(E>=o){S=!0;break}if(b.score=b.score*d(o,g,E),b.score<=i)break}b.suppressBeginIndex=v.length,S||(b.score===x?(v.push(k),y.push(b.score)):b.score>i&&a(h,b,p))}var T=v.length,N=n-T;c&&N>0&&(v.push.apply(v,(0,r.Z)(new Array(N).fill(0))),y.push.apply(y,(0,r.Z)(new Array(N).fill(0))));var _={selectedIndices:v};return u&&(_.selectedScores=y),f&&(_.validOutputs=T),_}function l(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),p=Math.max(a[1],a[3]),f=(s-o)*(u-i),h=(d-c)*(p-l);if(f<=0||h<=0)return 0;var m=Math.max(o,c),g=Math.max(i,l),v=Math.min(s,d),y=Math.min(u,p),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(f+h-b)}function d(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function p(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}},1722:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(5281);function a(e,t){for(var n=[],a=0;a<t.length;a++)t[a]&&n.push(a);for(var o=(0,r.f)(e,"int32"),i=(0,r.f)([n.length,e.length],"int32"),s=0;s<n.length;s++){var u=o.indexToLoc(n[s]),c=s*e.length;i.values.set(u,c)}return i.toTensor()}},722:function(e,t,n){"use strict";n.d(t,{BV:function(){return I},wv:function(){return _}});var r=n(7762),a=n(3433),o=n(5861),i=n(5671),s=n(3144),u=n(4687),c=n.n(u),l=n(3607),d=n(6949),p=n(3078),f=n(5092),h=n(1419),m=n(9555),g=n(1368),v=n(4699),y=function(){function e(t,n){(0,i.Z)(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new b)}return(0,s.Z)(e,[{key:"profileKernel",value:function(e,t,n){var a,o,i=function(){a=n()},s=g.now();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();var u,c=(0,r.Z)(a);try{for(c.s();!(u=c.n()).done;){u.value.dataSync()}}catch(f){c.e(f)}finally{c.f()}o=Promise.resolve({kernelMs:g.now()-s})}if((0,d.OB)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var l=function(t){var n=a[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},p=0;p<a.length;p++)l(p);return{kernelName:e,outputs:a,inputs:t,timeMs:o.then((function(e){return e.kernelMs})),extraInfo:o.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,o=e.inputs,i=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,i]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],o,r[2])}))}))}}]),e}();var b=function(){function e(){(0,i.Z)(this,e)}return(0,s.Z)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,o){var i="number"===typeof r?v.oj("".concat(r,"ms"),9):r.error,s=v.oj(e,25),u=t.rank,c=t.size,l=v.oj(t.shape.toString(),14),d="";for(var p in a){var f=a[p];if(null!=f){var h=f.shape||t.shape,m=h.length;d+="".concat(p,": ").concat(m,"D ").concat(m>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(i,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function x(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(var i=0;i<e.length;i++){var s=e[i],u=s.inputs;for(var c in u){for(var l=u[c],d=!1,p=0;p<t.length;p++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var f={};f[n.id]=!0;for(var h={},m=e.length-1;m>=0;m--)for(var g=e[m],v=g.inputs,y=0;y<g.outputs.length;y++)if(f[g.outputs[y].id]){for(var b in v)f[v[b].id]=!0,h[g.id]=!0;break}for(var x=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&h[w.id]){var S={};for(var C in w.inputs){var E=w.inputs[C];r[E.id]&&(S[C]=E)}var T=Object.assign({},w);T.inputs=S,T.outputs=w.outputs,x.push(T)}}return x}function k(e,t,n,r){for(var a=function(a){var o=t[a],i=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(o.kernelName,"."));var s=o.gradient(i),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var i=o.inputs[t];if(!v.cO(a.shape,i.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(i.shape,"'"));if(null==e[i.id])e[i.id]=a;else{var u=e[i.id];e[i.id]=r(u,a),u.dispose()}};for(var c in o.inputs)u(c)},o=t.length-1;o>=0;o--)a(o)}var w=n(4965),S=n(3386);function C(e){return null!=e.kernelName}var E=function(){function e(){(0,i.Z)(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return(0,s.Z)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),T=function(){function e(t){(0,i.Z)(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new E}return(0,s.Z)(e,[{key:"ready",value:function(){var e=(0,o.Z)(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(m.Z("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=(0,o.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new y(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;(0,h.tr)(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;(0,h.tr)(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof l.Zu||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,o=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,m.Z("Initialization of backend ".concat(e," failed")),m.Z(n.stack||n.message)),!1}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}catch(i){return m.Z("Initialization of backend ".concat(e," failed")),m.Z(i.stack||i.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(o||a)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=I.runKernel(f.iJz,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return I.runKernel(f.RFZ,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=(0,h.pI)(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-o;if(i>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(i," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,o=[],i=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=C(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(C(e)){var l=e.kernelName,d=e.inputs,p=e.attrs;null==this.backendName&&this.backend;var f=(0,h.pI)(l,this.backendName);v.hu(null!=f,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=f.kernelFunc({inputs:d,attrs:p,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(i){var s=a.getTensorsForGradient(l,d,n);o=a.saveTensorsForBackwardMode(s)}return n}}else{var m=e.forwardFunc,g=function(e){i&&(o=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return m(a.backend,g)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var y,b=e.inputs,x=e.attrs,k=C(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(y=a.profiler.profileKernel(c,b,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(y),t=y.outputs):t=n()})),i&&this.addTapeNode(c,b,t,k,o,x),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(b).map((function(e){return null!=b[e]?b[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:y.timeMs,extraInfo:y.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n}},{key:"getTensorsForGradient",value:function(e,t,n){var r=(0,h.uk)(e);if(null!=r){var a,o=r.inputsToSave||[],i=r.outputsToSave||[];r.saveAllInputs?(v.hu(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=o.map((function(e){return t[e]}));var s=n.filter((function(e,t){return i[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&v.HD(e[0])&&(a=e.map((function(e){return g.encodeString(e)})));var o=r.write(a,t,n),i=new w.es(t,n,o,this.nextTensorId());if(this.trackTensor(i,r),"string"===n){var s=this.state.tensorInfo.get(o),u=(0,v.Ub)(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return i}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,o=new w.es(r,a,n,this.nextTensorId());return this.trackTensor(o,t),o}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new w._w(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*v.bT(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof w._w||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*v.bT(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=(0,o.Z)(c().mark((function e(t){var n,o,i,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,o=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,a.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-o,i=(0,r.Z)(this.state.activeProfile.kernels),e.prev=12,i.s();case 14:if((s=i.n()).done){e.next=24;break}return u=s.value,e.next=18,u.kernelTimeMs;case 18:return u.kernelTimeMs=e.sent,e.next=21,u.extraInfo;case 21:u.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),i.e(e.t0);case 29:return e.prev=29,i.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,o){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=(0,h.uk)(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=v.wT(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,o)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=(0,S.getTensorsInContainer)(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||r.has(o.id)||o.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var a=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(v.hu(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));v.hu(i instanceof w.es,(function(){return"The result y returned by f() must be a tensor."}));var s=x(this.state.activeTape,t,i);if(!o&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?N(i.shape):n,k(e,s,(function(e){return a.tidy(e)}),R);var o=t.map((function(t){return e[t.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){var t,n=(0,r.Z)(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(a){n.e(a)}finally{n.f()}})),a.state.activeTape=null),{value:i,grads:o}}))}},{key:"customGrad",value:function(e){var t=this;return v.hu(v.mf(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o;v.hu(r.every((function(e){return e instanceof w.es})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};r.forEach((function(e,t){i[t]=e}));var s=function(t,n){return o=e.apply(void 0,[].concat(r,[n])),v.hu(o.value instanceof w.es,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),v.hu(v.mf(o.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),o.value},u=function(e,t){var n=o.gradFunc(e,t),a=Array.isArray(n)?n:[n];v.hu(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),v.hu(a.every((function(e){return e instanceof w.es})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:i})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=(0,o.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,g.now)(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=(0,g.now)()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new E,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function N(e){var t=(0,v.p8)((0,v.NA)(e),"float32");return I.makeTensor(t,e,"float32")}function _(){var e=(0,p.D)();if(null==e._tfengine){var t=new d.qA(e);e._tfengine=new T(t)}return(0,d.iG)(e._tfengine.ENV),(0,w.Vi)((function(){return e._tfengine})),e._tfengine}T.nextTensorId=0,T.nextVariableId=0;var I=_();function R(e,t){var n={a:e,b:t};return I.runKernel(f.mm_,n)}},6949:function(e,t,n){"use strict";n.d(t,{OB:function(){return h},Vi:function(){return m},iG:function(){return g},qA:function(){return d}});var r=n(9439),a=n(5861),o=n(5671),i=n(3144),s=n(4687),u=n.n(s),c=n(4699),l="tfjsflags",d=function(){function e(t){(0,o.Z)(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=p,this.populateURLFlags()}return(0,i.Z)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(h().getBool("IS_TEST")||h().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];h().getBool("IS_TEST")||h().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=(0,a.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if((0,c.tI)(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(l in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),a=(0,r.Z)(n,2),o=a[0],i=a[1];e.urlFlags[o]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(o,i)}))}}}]),e}();function p(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return f(t,r[0],r[1]),r.join("=")})),t}function f(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function h(){return m}var m=null;function g(e){m=e}},3078:function(e,t,n){"use strict";var r;function a(){if(null==r){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}r=e}return r}function o(e,t){var n=function(){var e=a();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}n.d(t,{D:function(){return a},R:function(){return o}})},2433:function(e,t,n){"use strict";n.d(t,{B9:function(){return g},CQ:function(){return b},Cd:function(){return x},Cn:function(){return v},G4:function(){return s},MX:function(){return l},N5:function(){return h},N8:function(){return d},N_:function(){return k},R:function(){return u},SR:function(){return p},VY:function(){return N},XV:function(){return y},cF:function(){return c},cj:function(){return w},jq:function(){return E},lu:function(){return m},sq:function(){return f},x3:function(){return S},y3:function(){return T},ze:function(){return C}});var r=n(722),a=n(6949),o=n(4965),i=n(3386);function s(){(0,a.OB)().set("PROD",!0)}function u(){(0,a.OB)().set("DEBUG",!0)}function c(){(0,a.OB)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(e){(0,a.OB)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function d(){r.BV.disposeVariables()}function p(){return r.BV}function f(){return r.BV.memory()}function h(e){return r.BV.profile(e)}function m(e,t){return r.BV.tidy(e,t)}function g(e){(0,i.getTensorsInContainer)(e).forEach((function(e){return e.dispose()}))}function v(e){return r.BV.keep(e)}function y(e){return r.BV.time(e)}function b(e){return r.BV.setBackend(e)}function x(){return r.BV.ready()}function k(){return r.BV.backendName}function w(e){r.BV.removeBackend(e)}function S(e){return r.BV.findBackend(e)}function C(e){return r.BV.findBackendFactory(e)}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r.BV.registerBackend(e,t,n)}function T(){return r.BV.backend}function N(e,t){(0,a.OB)().setPlatform(e,t)}(0,o.FZ)(l)},6378:function(e,t,n){"use strict";n.d(t,{UQ:function(){return u},cb:function(){return f},fN:function(){return d},h7:function(){return l},pn:function(){return p},ti:function(){return c}});var r=n(3433),a=n(722),o=n(4965),i=n(3157),s=n(4699);function u(e){return s.hu(s.mf(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=(0,i._1)(t,"x","tf.grad","string_or_numeric"),o=null!=n?(0,i._1)(n,"dy","tf.grad"):null;return a.BV.tidy((function(){var t=a.BV.gradients((function(){return e(r)}),[r],o),n=t.value,i=t.grads;return null!=o&&s.k5(n.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),h(i),i[0]}))}}function c(e){return s.hu(s.mf(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){s.hu(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var o=(0,i.sI)(t,"args","tf.grads","string_or_numeric"),u=null!=n?(0,i._1)(n,"dy","tf.grads"):null;return a.BV.tidy((function(){var t=a.BV.gradients((function(){return e.apply(void 0,(0,r.Z)(o))}),o,u),n=t.value,i=t.grads;return null!=u&&s.k5(n.shape,u.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(i),i}))}}function l(e){return s.hu(s.mf(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){s.hu(t instanceof o.es,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),s.hu(null==n||n instanceof o.es,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=a.BV.gradients((function(){return e(t)}),[t],n),i=r.grads,u=r.value;return h(i),{grad:i[0],value:u}}}function d(e){return s.hu(s.mf(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){s.hu(Array.isArray(t)&&t.every((function(e){return e instanceof o.es})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),s.hu(null==n||n instanceof o.es,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var i=a.BV.gradients((function(){return e.apply(void 0,(0,r.Z)(t))}),t,n);return null!=n&&s.k5(i.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),h(i.grads),i}}function p(e,t){s.hu(s.mf(e),(function(){return"The f passed in variableGrads(f) must be a function"})),s.hu(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof o._w})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],a.BV.registeredVariables)t.push(a.BV.registeredVariables[r]);var i=n?t.filter((function(e){return!e.trainable})):null,u=t.length;t=t.filter((function(e){return e.trainable})),s.hu(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(u," variables is ")+"trainable."}));var c=a.BV.gradients(e,t,null,!0),l=c.value,d=c.grads;s.hu(d.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),s.hu(0===l.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(l.rank," tensor")}));var p={};return t.forEach((function(e,t){null!=d[t]&&(p[e.name]=d[t])})),null!=i&&i.forEach((function(e){return p[e.name]=null})),{value:l,grads:p}}function f(e){return a.BV.customGrad(e)}function h(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},2795:function(e,t,n){"use strict";n.r(t),n.d(t,{Abs:function(){return wt.SYM},Acos:function(){return wt.VGw},Acosh:function(){return wt.SpW},AdadeltaOptimizer:function(){return Rn},AdagradOptimizer:function(){return On},AdamOptimizer:function(){return Ln},AdamaxOptimizer:function(){return Bn},Add:function(){return wt.mm_},AddN:function(){return wt.Xze},All:function(){return wt.oT6},Any:function(){return wt.IKK},ArgMax:function(){return wt.sJF},ArgMin:function(){return wt.aJk},Asin:function(){return wt.M2y},Asinh:function(){return wt.qw7},Atan:function(){return wt.jMg},Atan2:function(){return wt.QCc},Atanh:function(){return wt.Oyi},AvgPool:function(){return wt.JhU},AvgPool3D:function(){return wt._k9},AvgPool3DGrad:function(){return wt.IMb},AvgPoolGrad:function(){return wt.ROF},BatchMatMul:function(){return wt.XLW},BatchToSpaceND:function(){return wt.zws},Bincount:function(){return wt.zvY},BroadcastArgs:function(){return wt.eEB},BroadcastTo:function(){return wt.Ly9},Cast:function(){return wt.RFZ},Ceil:function(){return wt.gJX},ClipByValue:function(){return wt.xnO},Complex:function(){return wt.Zz9},ComplexAbs:function(){return wt.yj2},Concat:function(){return wt.Eh3},Conv2D:function(){return wt.mhS},Conv2DBackpropFilter:function(){return wt.wUP},Conv2DBackpropInput:function(){return wt.wm},Conv3D:function(){return wt.x12},Conv3DBackpropFilterV2:function(){return wt.o2y},Conv3DBackpropInputV2:function(){return wt.ik2},Cos:function(){return wt.mc4},Cosh:function(){return wt.TR1},CropAndResize:function(){return wt.VcC},Cumprod:function(){return wt.Byc},Cumsum:function(){return wt.iHb},DataStorage:function(){return aa.JL},DenseBincount:function(){return wt.QRR},DepthToSpace:function(){return wt.T0n},DepthwiseConv2dNative:function(){return wt.cie},DepthwiseConv2dNativeBackpropFilter:function(){return wt.sL$},DepthwiseConv2dNativeBackpropInput:function(){return wt.y7R},Diag:function(){return wt.$w},Dilation2D:function(){return wt.p4S},Dilation2DBackpropFilter:function(){return wt.Vn9},Dilation2DBackpropInput:function(){return wt.ekb},ENV:function(){return b.Vi},Einsum:function(){return wt.$g6},Elu:function(){return wt.SX0},EluGrad:function(){return wt.HEU},Environment:function(){return b.qA},Equal:function(){return wt.hdR},Erf:function(){return wt.Omj},Exp:function(){return wt.NEP},ExpandDims:function(){return wt.YFo},Expm1:function(){return wt.Y0y},FFT:function(){return wt.vwp},Fill:function(){return wt.deh},FlipLeftRight:function(){return wt.Uyb},Floor:function(){return wt.OR},FloorDiv:function(){return wt.jeX},FromPixels:function(){return wt.eBW},FusedBatchNorm:function(){return wt.sHE},FusedConv2D:function(){return wt._V0},FusedDepthwiseConv2D:function(){return wt.luS},GatherNd:function(){return wt.q1x},GatherV2:function(){return wt.qi_},Greater:function(){return wt.iZT},GreaterEqual:function(){return wt.Acj},IFFT:function(){return wt.Qg5},Identity:function(){return wt.iJz},Imag:function(){return wt.J_u},IsFinite:function(){return wt.avt},IsInf:function(){return wt.iWB},IsNan:function(){return wt.r7n},KernelBackend:function(){return aa.Zu},LRN:function(){return wt.eZ0},LRNGrad:function(){return wt.Hhh},LeakyRelu:function(){return wt.J$2},Less:function(){return wt.vtC},LessEqual:function(){return wt.CAk},LinSpace:function(){return wt.e7N},Log:function(){return wt.ZbH},Log1p:function(){return wt.kU},LogSoftmax:function(){return wt.qCd},LogicalAnd:function(){return wt.PYm},LogicalNot:function(){return wt.VfG},LogicalOr:function(){return wt.MZg},LogicalXor:function(){return wt.w6g},LowerBound:function(){return wt.qIC},Max:function(){return wt.YoZ},MaxPool:function(){return wt.mTV},MaxPool3D:function(){return wt.OAf},MaxPool3DGrad:function(){return wt.OU7},MaxPoolGrad:function(){return wt.OV7},MaxPoolWithArgmax:function(){return wt.vFR},Maximum:function(){return wt.BMI},Mean:function(){return wt.q2K},Min:function(){return wt.c17},Minimum:function(){return wt.q8u},MirrorPad:function(){return wt.jQs},Mod:function(){return wt.Vbg},MomentumOptimizer:function(){return zn},Multinomial:function(){return wt.NZg},Multiply:function(){return wt.wYn},Neg:function(){return wt.kuV},NonMaxSuppressionV3:function(){return wt.uv1},NonMaxSuppressionV4:function(){return wt.cye},NonMaxSuppressionV5:function(){return wt.W0H},NotEqual:function(){return wt.yQU},OP_SCOPE_SUFFIX:function(){return Un.zvA},OneHot:function(){return wt.we_},OnesLike:function(){return wt.qWM},Optimizer:function(){return In},OptimizerConstructors:function(){return Wn},Pack:function(){return wt.QiL},PadV2:function(){return wt.lyA},Pool:function(){return wt.Kgp},Pow:function(){return wt.pe_},Prelu:function(){return wt.o0g},Prod:function(){return wt.DlI},RMSPropOptimizer:function(){return Vn},RaggedGather:function(){return wt.dDz},RaggedTensorToTensor:function(){return wt.BiW},Range:function(){return wt.e6w},Rank:function(){return Zn.yw},Real:function(){return wt.xJR},RealDiv:function(){return wt.oHH},Reciprocal:function(){return wt.$HU},Reduction:function(){return Hn.I},Relu:function(){return wt.qkr},Relu6:function(){return wt.SbG},Reshape:function(){return wt.HZH},ResizeBilinear:function(){return wt._Yw},ResizeBilinearGrad:function(){return wt.zbQ},ResizeNearestNeighbor:function(){return wt.dpD},ResizeNearestNeighborGrad:function(){return wt.Hmb},Reverse:function(){return wt.mKl},RotateWithOffset:function(){return wt.b9H},Round:function(){return wt.e07},Rsqrt:function(){return wt.bV0},SGDOptimizer:function(){return jn},ScatterNd:function(){return wt.xQA},SearchSorted:function(){return wt.nr8},Select:function(){return wt.PhF},Selu:function(){return wt.oFR},Sigmoid:function(){return wt.a5O},Sign:function(){return wt.i5y},Sin:function(){return wt.RQH},Sinh:function(){return wt.wYB},Slice:function(){return wt.p2w},Softmax:function(){return wt.Gcp},Softplus:function(){return wt.MRv},SpaceToBatchND:function(){return wt.TQc},SparseFillEmptyRows:function(){return wt.O3z},SparseReshape:function(){return wt.nhH},SparseSegmentMean:function(){return wt.w3H},SparseSegmentSum:function(){return wt.ZjV},SparseToDense:function(){return wt.D2d},SplitV:function(){return wt.L8s},Sqrt:function(){return wt.FKq},Square:function(){return wt.bK0},SquaredDifference:function(){return wt._tC},Step:function(){return wt.h8e},StridedSlice:function(){return wt.jQk},StringNGrams:function(){return wt._JP},StringSplit:function(){return wt.s1s},StringToHashBucketFast:function(){return wt.XkS},Sub:function(){return wt.Tr8},Sum:function(){return wt.GBy},Tan:function(){return wt.sEM},Tanh:function(){return wt.MIZ},Tensor:function(){return Ze.es},TensorBuffer:function(){return Ze.YD},Tile:function(){return wt.n9L},TopK:function(){return wt.cWu},Transform:function(){return wt.wx7},Transpose:function(){return wt.G3Y},Unique:function(){return wt.kpP},Unpack:function(){return wt.ToN},UnsortedSegmentSum:function(){return wt.Qvg},UpperBound:function(){return wt.XDQ},Variable:function(){return Ze._w},ZerosLike:function(){return wt.RuY},_FusedMatMul:function(){return wt.usg},abs:function(){return Un.WnP},acos:function(){return Un.Khb},acosh:function(){return Un.__u},add:function(){return Un.IHx},addN:function(){return Un.QBD},all:function(){return Un.$6P},any:function(){return Un.YjB},argMax:function(){return Un.NqF},argMin:function(){return Un.vHJ},asin:function(){return Un.ZRM},asinh:function(){return Un.VfV},atan:function(){return Un.z4N},atan2:function(){return Un.fvJ},atanh:function(){return Un.C80},avgPool:function(){return Un.wS1},avgPool3d:function(){return Un.uR5},backend:function(){return xn.y3},backend_util:function(){return p},basicLSTMCell:function(){return Un.zEQ},batchNorm:function(){return Un.tgs},batchNorm2d:function(){return Un.Dxk},batchNorm3d:function(){return Un.JY5},batchNorm4d:function(){return Un.p3b},batchToSpaceND:function(){return Un.E4h},bincount:function(){return Un.yE8},booleanMaskAsync:function(){return Un.anm},broadcastArgs:function(){return Un.XsQ},broadcastTo:function(){return Un.UFq},broadcast_util:function(){return kt},browser:function(){return i},buffer:function(){return Un.f3b},cast:function(){return Un.pju},ceil:function(){return Un.mDi},clipByValue:function(){return Un.iUl},clone:function(){return Un.d9v},complex:function(){return Un.PYB},concat:function(){return Un.zoF},concat1d:function(){return Un.gME},concat2d:function(){return Un.Izb},concat3d:function(){return Un.MNy},concat4d:function(){return Un.ZaL},conv1d:function(){return Un.PAt},conv2d:function(){return Un.Tek},conv2dTranspose:function(){return Un.bc},conv3d:function(){return Un.pdZ},conv3dTranspose:function(){return Un.$QV},copyRegisteredKernels:function(){return St.T3},cos:function(){return Un.mCk},cosh:function(){return Un.f9Y},cosineWindow:function(){return Un.mew},cumprod:function(){return Un.$Gn},cumsum:function(){return Un.zbp},customGrad:function(){return Nn.cb},denseBincount:function(){return Un.ppE},deprecationWarn:function(){return xn.MX},depthToSpace:function(){return Un.nTT},depthwiseConv2d:function(){return Un.B10},device_util:function(){return r},diag:function(){return Un.Ka3},dilation2d:function(){return Un.WmZ},disableDeprecationWarnings:function(){return xn.cF},dispose:function(){return xn.B9},disposeVariables:function(){return xn.N8},div:function(){return Un.hiC},divNoNan:function(){return Un.NTj},dot:function(){return Un.AKD},dropout:function(){return Un.rvX},einsum:function(){return Un.WYO},elu:function(){return Un.pyx},enableDebugMode:function(){return xn.R},enableProdMode:function(){return xn.G4},enclosingPowerOfTwo:function(){return Un.GRh},engine:function(){return xn.SR},env:function(){return b.OB},equal:function(){return Un.DgJ},erf:function(){return Un.qNN},euclideanNorm:function(){return Un.d2q},exp:function(){return Un.Qqt},expandDims:function(){return Un.dt4},expm1:function(){return Un.t$B},eye:function(){return Un.iyy},fft:function(){return Un.kp_},fill:function(){return Un.hlL},findBackend:function(){return xn.x3},findBackendFactory:function(){return xn.ze},floor:function(){return Un.GWj},floorDiv:function(){return Un.qPi},fused:function(){return Un.imm},gather:function(){return Un.Iqj},gatherND:function(){return Un.dbB},gather_util:function(){return s},getBackend:function(){return xn.N_},getGradient:function(){return St.uk},getKernel:function(){return St.pI},getKernelsForBackend:function(){return St.tr},grad:function(){return Nn.UQ},grads:function(){return Nn.ti},greater:function(){return Un.pjt},greaterEqual:function(){return Un.brS},ifft:function(){return Un.Sxn},imag:function(){return Un.asL},image:function(){return Un.BHj},inTopKAsync:function(){return Un.V3u},io:function(){return a},irfft:function(){return Un.wx0},isFinite:function(){return Un.xVT},isInf:function(){return Un.UWc},isNaN:function(){return Un.i2d},keep:function(){return xn.Cn},kernel_impls:function(){return f},leakyRelu:function(){return Un.hi7},less:function(){return Un.d9m},lessEqual:function(){return Un.zN1},linalg:function(){return Un.$r2},linspace:function(){return Un.SX3},localResponseNormalization:function(){return Un.G9k},log:function(){return Un.cM7},log1p:function(){return Un.Krr},logSigmoid:function(){return Un.e_t},logSoftmax:function(){return Un.CmS},logSumExp:function(){return Un.l_t},logicalAnd:function(){return Un.HvI},logicalNot:function(){return Un.hJK},logicalOr:function(){return Un.K5V},logicalXor:function(){return Un.egP},losses:function(){return Un.MB5},lowerBound:function(){return Un.eab},matMul:function(){return Un.OI3},math:function(){return o},max:function(){return Un.Fp7},maxPool:function(){return Un._sB},maxPool3d:function(){return Un.YQQ},maxPoolWithArgmax:function(){return Un.Ip$},maximum:function(){return Un.gWQ},mean:function(){return Un.J69},memory:function(){return xn.sq},meshgrid:function(){return Un.ry_},min:function(){return Un.VV$},minimum:function(){return Un.LTh},mirrorPad:function(){return Un.VdP},mod:function(){return Un.wQq},moments:function(){return Un.Gi7},movingAverage:function(){return Un.p_},mul:function(){return Un.dC7},multiRNNCell:function(){return Un.rq4},multinomial:function(){return Un.SJ_},neg:function(){return Un.W76},nextFrame:function(){return Xn},norm:function(){return Un.KOy},notEqual:function(){return Un.Quu},oneHot:function(){return Un.lfX},ones:function(){return Un.iUs},onesLike:function(){return Un.JpU},op:function(){return Un.op},outerProduct:function(){return Un.N2O},pad:function(){return Un.vku},pad1d:function(){return Un.pNR},pad2d:function(){return Un.koy},pad3d:function(){return Un.t1L},pad4d:function(){return Un.lGY},pool:function(){return Un.d_R},pow:function(){return Un.sQ3},prelu:function(){return Un.AL3},print:function(){return Un.S0v},prod:function(){return Un.WVs},profile:function(){return xn.N5},raggedGather:function(){return Un.$gW},raggedTensorToTensor:function(){return Un.N89},rand:function(){return Un.TN_},randomGamma:function(){return Un.wzB},randomNormal:function(){return Un.nGf},randomStandardNormal:function(){return Un.ruB},randomUniform:function(){return Un.LGj},range:function(){return Un.w6H},ready:function(){return xn.Cd},real:function(){return Un.kwC},reciprocal:function(){return Un.M25},registerBackend:function(){return xn.jq},registerGradient:function(){return St.Li},registerKernel:function(){return St.wC},relu:function(){return Un.UYe},relu6:function(){return Un.btT},removeBackend:function(){return xn.cj},reshape:function(){return Un.XLQ},reverse:function(){return Un.GYS},reverse1d:function(){return Un.SDf},reverse2d:function(){return Un.diP},reverse3d:function(){return Un.sx7},reverse4d:function(){return Un.mG2},rfft:function(){return Un.QEs},round:function(){return Un.NMM},rsqrt:function(){return Un.bp0},scalar:function(){return Un.iD$},scatterND:function(){return Un.snQ},scatter_util:function(){return Pt},searchSorted:function(){return Un.zcT},selu:function(){return Un.U8D},separableConv2d:function(){return Un.U_I},serialization:function(){return c},setBackend:function(){return xn.CQ},setPlatform:function(){return xn.VY},setdiff1dAsync:function(){return Un.ODp},sigmoid:function(){return Un.XD2},sign:function(){return Un.Xxe},signal:function(){return Un.tdS},sin:function(){return Un.O$l},sinh:function(){return Un.R_K},slice:function(){return Un.tPi},slice1d:function(){return Un.jZU},slice2d:function(){return Un.SmN},slice3d:function(){return Un.CnO},slice4d:function(){return Un.p0P},slice_util:function(){return u},softmax:function(){return Un.XAC},softplus:function(){return Un.Wvh},spaceToBatchND:function(){return Un.fBT},sparse:function(){return Un.rVs},sparseToDense:function(){return Un.ers},spectral:function(){return Un.uN7},split:function(){return Un.Vl2},sqrt:function(){return Un._b3},square:function(){return Un.h62},squaredDifference:function(){return Un.$i},squeeze:function(){return Un.L9e},stack:function(){return Un.knu},step:function(){return Un.Nbs},stridedSlice:function(){return Un.NXj},string:function(){return Un.Z_8},sub:function(){return Un.luU},sum:function(){return Un.Smz},sumOutType:function(){return Zn.z4},tan:function(){return Un.ORZ},tanh:function(){return Un.AEp},tensor:function(){return Un.XeE},tensor1d:function(){return Un.RRF},tensor2d:function(){return Un.odF},tensor3d:function(){return Un.wOQ},tensor4d:function(){return Un.yXz},tensor5d:function(){return Un.Bfx},tensor6d:function(){return Un.xZs},tensor_util:function(){return en},test_util:function(){return l},tidy:function(){return xn.lu},tile:function(){return Un.Gg6},time:function(){return xn.XV},topk:function(){return Un.hg7},train:function(){return Gn},transpose:function(){return Un.p4s},truncatedNormal:function(){return Un.Xu6},unique:function(){return Un.Two},unregisterGradient:function(){return St.bt},unregisterKernel:function(){return St.nE},unsortedSegmentSum:function(){return Un.pUJ},unstack:function(){return Un.HHK},upcastType:function(){return Zn.x8},upperBound:function(){return Un.GaM},util:function(){return tn},valueAndGrad:function(){return Nn.h7},valueAndGrads:function(){return Nn.fN},variable:function(){return Un.VD$},variableGrads:function(){return Nn.pn},version_core:function(){return vn},where:function(){return Un.arb},whereAsync:function(){return Un.itS},zeros:function(){return Un.lls},zerosLike:function(){return Un.P84}});var r={};n.r(r),n.d(r,{isBrowser:function(){return y},isMobile:function(){return v},mockIsMobile:function(){return g}});var a={};n.r(a),n.d(a,{browserFiles:function(){return Xe},browserHTTPRequest:function(){return it},concatenateArrayBuffers:function(){return V},copyModel:function(){return Ae},decodeWeights:function(){return L},encodeWeights:function(){return P},fromMemory:function(){return lt},fromMemorySync:function(){return dt},getLoadHandlers:function(){return ee},getModelArtifactsForJSON:function(){return H},getModelArtifactsForJSONSync:function(){return U},getModelArtifactsInfoForJSON:function(){return q},getSaveHandlers:function(){return J},getWeightSpecs:function(){return X},http:function(){return ot},isHTTPScheme:function(){return rt},listModels:function(){return Ne},loadWeights:function(){return $e},moveModel:function(){return Pe},registerLoadRouter:function(){return $},registerSaveRouter:function(){return Q},removeModel:function(){return Ie},weightsLoaderFactory:function(){return et},withSaveHandler:function(){return pt},withSaveHandlerSync:function(){return ft}});var o={};n.r(o),n.d(o,{confusionMatrix:function(){return xt}});var i={};n.r(i),n.d(i,{fromPixels:function(){return At},fromPixelsAsync:function(){return Nt},toPixels:function(){return It}});var s={};n.r(s),n.d(s,{prepareAndValidate:function(){return Ot}});var u={};n.r(u),n.d(u,{assertParamsValid:function(){return Dt},computeFlatOffset:function(){return qt},computeOutShape:function(){return Mt},getNormalizedAxes:function(){return zt},isSliceContinous:function(){return Gt},maskToAxes:function(){return Lt},parseSliceParams:function(){return Xt},sliceInfo:function(){return Kt},startForAxis:function(){return Ut},startIndicesWithElidedDims:function(){return Vt},stopForAxis:function(){return Ht},stopIndicesWithElidedDims:function(){return Wt},stridesForAxis:function(){return Zt},stridesWithElidedDims:function(){return Ft}});var c={};n.r(c),n.d(c,{Serializable:function(){return Qt},SerializationMap:function(){return $t},registerClass:function(){return Jt}});var l={};n.r(l),n.d(l,{TEST_EPSILON_FLOAT16:function(){return nn},createVideoElement:function(){return hn},encodeStrings:function(){return fn},expectArrayBuffersEqual:function(){return pn},expectArraysClose:function(){return rn},expectArraysEqual:function(){return un},expectNumbersClose:function(){return cn},expectPromiseToFail:function(){return sn},expectValuesInRange:function(){return dn},play:function(){return mn},testEpsilon:function(){return an}});var d={};n.r(d),n.d(d,{collectGatherOpShapeInfo:function(){return Jr},computeOutShape:function(){return $r},segOpComputeOptimalWindowSize:function(){return Qr}});var p={};n.r(p),n.d(p,{ERF_A1:function(){return gr},ERF_A2:function(){return vr},ERF_A3:function(){return yr},ERF_A4:function(){return br},ERF_A5:function(){return xr},ERF_P:function(){return mr},PARALLELIZE_THRESHOLD:function(){return or},RowPartitionType:function(){return $n},SELU_SCALE:function(){return hr},SELU_SCALEALPHA:function(){return fr},applyActivation:function(){return er.QH},assertAndGetBroadcastShape:function(){return kt.assertAndGetBroadcastShape},assertAxesAreInnerMostDims:function(){return Kn.lB},assertParamsConsistent:function(){return Yn},assignToTypedArray:function(){return Nr},axesAreInnerMostDims:function(){return Kn.YB},calculateShapes:function(){return Pt.calculateShapes},checkEinsumDimSizes:function(){return Dr},checkPadOnDimRoundingMode:function(){return Jn.m},combineLocations:function(){return Kn.Vh},combineRaggedTensorToTensorShapes:function(){return tr},complexWithEvenIndex:function(){return Cr},complexWithOddIndex:function(){return Er},computeConv2DInfo:function(){return Jn.Ix},computeConv3DInfo:function(){return Jn.jw},computeDefaultPad:function(){return Jn.aO},computeDilation2DInfo:function(){return Jn.Rf},computeOptimalWindowSize:function(){return ir},computeOutAndReduceShapes:function(){return Kn.kz},computeOutShape:function(){return Qn},computePool2DInfo:function(){return Jn.Xw},computePool3DInfo:function(){return Jn.pl},convertConv2DDataFormat:function(){return Jn.sl},decodeEinsumEquation:function(){return Or},eitherStridesOrDilationsAreOne:function(){return Jn.jT},expandShapeToKeepDim:function(){return Kn.rv},exponent:function(){return Ir},exponents:function(){return _r},fromStringArrayToUint8:function(){return ta},fromUint8ToStringArray:function(){return ea},getAxesPermutation:function(){return Kn.Q3},getBroadcastDims:function(){return kt.getBroadcastDims},getComplexWithIndex:function(){return Tr},getEinsumComputePath:function(){return Lr},getEinsumPermutation:function(){return Pr},getFusedBiasGradient:function(){return er.pf},getFusedDyActivation:function(){return er.Fr},getImageCenter:function(){return sr},getInnerMostAxes:function(){return Kn.sY},getPermuted:function(){return cr},getRaggedRank:function(){return rr},getReductionAxes:function(){return kt.getReductionAxes},getReshaped:function(){return ur},getReshapedPermuted:function(){return lr},getRowPartitionTypesHelper:function(){return nr},getSliceBeginCoords:function(){return dr},getSliceSize:function(){return pr},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return jr},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return zr},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return Vr},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return Ur},getSparseReshapeInputOutputMismatchErrorMessage:function(){return Gr},getSparseReshapeInputOutputMultipleErrorMessage:function(){return Hr},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return Wr},getSparseReshapeNegativeOutputDimErrorMessage:function(){return Zr},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return Yr},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return qr},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return Xr},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return Kr},getUndoAxesPermutation:function(){return Kn.LJ},isIdentityPermutation:function(){return Mr},log:function(){return kr.c},mergeRealAndImagArrays:function(){return wr},prepareAndValidate:function(){return Ot},prepareSplitSize:function(){return Br},segment_util:function(){return d},shouldFuse:function(){return er.uy},slice_util:function(){return u},splitRealAndImagArrays:function(){return Sr},tupleValuesAreOne:function(){return Jn.I0},upcastType:function(){return Zn.x8},validateDefaultValueShape:function(){return ar},validateInput:function(){return Pt.validateInput},validateUpdateShape:function(){return Pt.validateUpdateShape},warn:function(){return kr.Z}});var f={};n.r(f),n.d(f,{nonMaxSuppressionV3Impl:function(){return na.GP},nonMaxSuppressionV4Impl:function(){return na.qP},nonMaxSuppressionV5Impl:function(){return na.pA},whereImpl:function(){return ra.Z}});var h,m=n(722);function g(e){h=e}function v(e){if(void 0!==h)return h;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function y(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var b=n(6949),x=(0,b.OB)();x.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),x.registerFlag("IS_BROWSER",(function(){return y()})),x.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),x.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),x.registerFlag("PROD",(function(){return!1})),x.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return x.getBool("DEBUG")})),x.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),x.registerFlag("IS_TEST",(function(){return!1})),x.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),x.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),x.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1})),x.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(function(){return!1})),x.registerFlag("USE_SETTIMEOUTCUSTOM",(function(){return!1}));var k=n(5671),w=n(3144),S=n(7762),C=n(5861),E=n(4687),T=n.n(E),N=n(9439),_=n(3433),I=n(2529),R=n(6689),A=n(4699),O={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function P(e,t){return D.apply(this,arguments)}function D(){return D=(0,C.Z)(T().mark((function e(t,n){var r,a,o,i,s,u;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],o=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),i=function(e){var i=o[e],s=Array.isArray(t)?t[e].tensor:t[i];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(i,"': ").concat(s.dtype));var u={name:i,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var c=new Promise(function(){var e=(0,C.Z)(T().mark((function e(t){var n,r,a,o,i,u,c;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),o=0,i=0;i<n.length;i++)u=n[i],c=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(c,o),o+=4,a.set(u,o),o+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(c)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<o.length;++s)i(s);return e.next=7,Promise.all(a);case 7:return u=e.sent,e.abrupt("return",{data:M(u),specs:r});case 9:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function L(e,t){var n,r,a={},o=0,i=(0,S.Z)(t);try{for(i.s();!(r=i.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,d=(0,A.NA)(l),p=void 0;if("quantization"in s){var f=s.quantization;if("uint8"===f.dtype||"uint16"===f.dtype){if(!("min"in f)||!("scale"in f))throw new Error("Weight ".concat(s.name," with quantization ").concat(f.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==f.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(f.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(f.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var h=O[f.dtype],m=e.slice(o,o+d*h),g="uint8"===f.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===c)if("uint8"===f.dtype||"uint16"===f.dtype){p=new Float32Array(g.length);for(var v=0;v<g.length;v++){var y=g[v];p[v]=y*f.scale+f.min}}else{if("float16"!==f.dtype)throw new Error("Unsupported quantization type ".concat(f.dtype," ")+"for weight type float32.");void 0===n&&(n=K()),p=n(g)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==f.dtype&&"uint16"!==f.dtype)throw new Error("Unsupported quantization type ".concat(f.dtype," ")+"for weight type int32.");p=new Int32Array(g.length);for(var b=0;b<g.length;b++){var x=g[b];p[b]=Math.round(x*f.scale+f.min)}}o+=d*h}else if("string"===c){var k=(0,A.NA)(s.shape);p=[];for(var w=0;w<k;w++){var C=new Uint32Array(e.slice(o,o+4))[0];o+=4;var E=new Uint8Array(e.slice(o,o+C));p.push(E),o+=C}}else{var T=O[c],N=e.slice(o,o+d*T);if("float32"===c)p=new Float32Array(N);else if("int32"===c)p=new Int32Array(N);else if("bool"===c)p=new Uint8Array(N);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));p=new Float32Array(N);for(var _=new Float32Array(p.length/2),P=new Float32Array(p.length/2),D=0;D<_.length;D++)_[D]=p[2*D],P[D]=p[2*D+1];var L=(0,R.X)(_,l,"float32"),M=(0,R.X)(P,l,"float32");a[u]=(0,I.P)(L,M),L.dispose(),M.dispose()}o+=d*T}"complex64"!==c&&(a[u]=(0,R.X)(p,l,c))}}catch(F){i.e(F)}finally{i.f()}return a}function M(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var F="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function B(e){return F?Buffer.byteLength(e):new Blob([e]).size}function j(e){if(F)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function z(e){if(F){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function V(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function W(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Z(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function U(e,t,n){var r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),r}function H(e,t){return G.apply(this,arguments)}function G(){return G=(0,C.Z)(T().mark((function e(t,n){var r,a,o,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.weightsManifest){e.next=7;break}return e.next=3,n(t.weightsManifest);case 3:o=e.sent,i=(0,N.Z)(o,2),r=i[0],a=i[1];case 7:return e.abrupt("return",U(t,r,a));case 8:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function q(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:B(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:B(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function X(e){var t,n=[],r=(0,S.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push.apply(n,(0,_.Z)(a.weights))}}catch(o){r.e(o)}finally{r.f()}return n}function K(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),o=new Uint32Array(a),i=0;i<r.length;i++){var s=r[i],u=e[n[s>>10]+(1023&s)]+t[s>>10];o[i]=u}return new Float32Array(a)}}var Y=function(){function e(){(0,k.Z)(this,e),this.saveRouters=[],this.loadRouters=[]}return(0,w.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),Q=function(e){return Y.registerSaveRouter(e)},$=function(e){return Y.registerLoadRouter(e)},J=function(e){return Y.getSaveHandlers(e)},ee=function(e,t){return Y.getLoadHandlers(e,t)},te="tensorflowjs",ne="models_store",re="model_info_store";function ae(){if(!(0,b.OB)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function oe(e){var t=e.result;t.createObjectStore(ne,{keyPath:"modelPath"}),t.createObjectStore(re,{keyPath:"modelPath"})}var ie=function(){function e(t){if((0,k.Z)(this,e),this.indexedDB=ae(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,C.Z)(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,C.Z)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(te,1);a.onupgradeneeded=function(){return oe(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction(ne,"readonly"),s=i.objectStore(ne).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},i.oncomplete=function(){return o.close()}}else{var u,c=q(t),l=o.transaction(re,"readwrite"),d=l.objectStore(re),p=d.put({modelPath:n.modelPath,modelArtifactsInfo:c});p.onsuccess=function(){var a=(u=o.transaction(ne,"readwrite")).objectStore(ne).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(d=l.objectStore(re)).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(a.error)},t.onerror=function(e){return o.close(),r(a.error)}}},p.onerror=function(e){return o.close(),r(p.error)},l.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();ie.URL_SCHEME="indexeddb://";var se=function(e){return(0,b.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ie.URL_SCHEME)?(t=e.slice(ie.URL_SCHEME.length),new ie(t)):null;var t};Y.registerSaveRouter(se),Y.registerLoadRouter(se);var ue=function(){function e(){(0,k.Z)(this,e),this.indexedDB=ae()}return(0,w.Z)(e,[{key:"listModels",value:function(){var e=(0,C.Z)(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(te,1);r.onupgradeneeded=function(){return oe(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(re,"readonly"),o=a.objectStore(re).getAll();o.onsuccess=function(){var t,n={},r=(0,S.Z)(o.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(i){r.e(i)}finally{r.f()}e(n)},o.onerror=function(e){return t.close(),n(o.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,C.Z)(T().mark((function e(t){var n=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(ie.URL_SCHEME)?r.slice(ie.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(te,1);a.onupgradeneeded=function(){return oe(a)},a.onsuccess=function(){var n,o=a.result,i=o.transaction(re,"readwrite"),s=i.objectStore(re),u=s.get(t);u.onsuccess=function(){if(null==u.result)return o.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),i=function(){var a=(n=o.transaction(ne,"readwrite")).objectStore(ne).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),r(u.error)}},u.onerror=function(e){return o.close(),r(u.error)},i.oncomplete=function(){null==n?o.close():n.oncomplete=function(){return o.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ce="/",le="tensorflowjs_models",de="info",pe="model_topology",fe="weight_specs",he="weight_data",me="model_metadata";function ge(e){return{info:[le,e,de].join(ce),topology:[le,e,pe].join(ce),weightSpecs:[le,e,fe].join(ce),weightData:[le,e,he].join(ce),modelMetadata:[le,e,me].join(ce)}}function ve(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function ye(e){var t=e.split(ce);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(ce)}var be=function(){function e(t){if((0,k.Z)(this,e),!(0,b.OB)().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=ge(this.modelPath)}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,C.Z)(T().mark((function e(t){var n,r,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=q(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,j(t.weightData)),o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),ve(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,C.Z)(T().mark((function e(){var t,n,r,a,o,i,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,null!=i.signature&&(n.signature=i.signature),null!=i.userDefinedMetadata&&(n.userDefinedMetadata=i.userDefinedMetadata),null!=i.modelInitializer&&(n.modelInitializer=i.modelInitializer),null!=i.trainingConfig&&(n.trainingConfig=i.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=z(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();be.URL_SCHEME="localstorage://";var xe=function(e){return(0,b.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(be.URL_SCHEME)?(t=e.slice(be.URL_SCHEME.length),new be(t)):null;var t};Y.registerSaveRouter(xe),Y.registerLoadRouter(xe);var ke=function(){function e(){(0,k.Z)(this,e),(0,A.hu)((0,b.OB)().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),(0,A.hu)("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return(0,w.Z)(e,[{key:"listModels",value:function(){var e=(0,C.Z)(T().mark((function e(){var t,n,r,a,o,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=le+ce,r=ce+de,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(n)&&o.endsWith(r)&&(i=ye(o),t[i]=JSON.parse(this.LS.getItem(o)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=(0,C.Z)(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(be.URL_SCHEME)?a.slice(be.URL_SCHEME.length):a,n=ge(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),ve(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),we="://",Se=function(){function e(){(0,k.Z)(this,e),this.managers={}}return(0,w.Z)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){(0,A.hu)(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(we)&&(t=t.slice(0,t.indexOf(we))),(0,A.hu)(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();(0,A.hu)(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(t){var n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(e.getInstance().managers)}}]),e}();function Ce(e){if(-1===e.indexOf(we))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(Se.getSchemes().join(",")));return{scheme:e.split(we)[0],path:e.split(we)[1]}}function Ee(e,t){return Te.apply(this,arguments)}function Te(){return Te=(0,C.Z)(T().mark((function e(t,n){var r,a,o,i,s,u,c,l,d,p,f=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>2&&void 0!==f[2]&&f[2],(0,A.hu)(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),a=Y.getLoadHandlers(t),(0,A.hu)(a.length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),(0,A.hu)(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),o=a[0],i=Y.getSaveHandlers(n),(0,A.hu)(i.length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),(0,A.hu)(i.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=i[0],u=Ce(t).scheme,c=Ce(t).path,l=u===Ce(t).scheme,e.next=15,o.load();case 15:if(d=e.sent,!r||!l){e.next=19;break}return e.next=19,Se.getManager(u).removeModel(c);case 19:return e.next=21,s.save(d);case 21:if(p=e.sent,!r||l){e.next=25;break}return e.next=25,Se.getManager(u).removeModel(c);case 25:return e.abrupt("return",p.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),Te.apply(this,arguments)}function Ne(){return _e.apply(this,arguments)}function _e(){return(_e=(0,C.Z)(T().mark((function e(){var t,n,r,a,o,i,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Se.getSchemes(),n={},r=(0,S.Z)(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return o=a.value,e.next=9,Se.getManager(o).listModels();case 9:for(s in i=e.sent)n[o+we+s]=i[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function Ie(e){return Re.apply(this,arguments)}function Re(){return(Re=(0,C.Z)(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ce(t),r=Se.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,C.Z)(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",Ee(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t){return De.apply(this,arguments)}function De(){return(De=(0,C.Z)(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",Ee(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Le=function(){function e(){(0,k.Z)(this,e),this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}return(0,w.Z)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}},{key:"setTimeoutCustom",value:function(e,t){var n=this;window&&(0,b.OB)().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((function(){window.postMessage({name:n.messageName,index:n.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(function(e){e.source===window&&e.data.name===n.messageName&&(e.stopPropagation(),(0,n.functionRefs[e.data.index])(),n.handledMessageCount++,n.handledMessageCount===n.functionRefs.length&&(n.functionRefs=[],n.handledMessageCount=0))}),!0))):setTimeout(e,t)}}]),e}();if((0,b.OB)().get("IS_BROWSER")){(0,b.OB)().setPlatform("browser",new Le);try{Se.registerManager(be.URL_SCHEME,new ke)}catch(oa){}try{Se.registerManager(ie.URL_SCHEME,new ue)}catch(oa){}}var Me,Fe=function(){return n(5410)};var Be=function(){function e(){(0,k.Z)(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return(0,w.Z)(e,[{key:"fetch",value:function(e,t){return null!=(0,b.OB)().global.fetch?(0,b.OB)().global.fetch(e,t):(null==Me&&(Me=Fe()),Me(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();(0,b.OB)().get("IS_NODE")&&!(0,b.OB)().get("IS_BROWSER")&&(0,b.OB)().setPlatform("node",new Be);var je=n(5281),ze=n(8982),Ve=n(5402),We=n(8891),Ze=n(4965);(0,m.wv)();var Ue={buffer:je.f,cast:ze.p,clone:Ve.d,print:We.S};(0,Ze.Vp)(Ue);function He(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Ge=function(){function e(t){if((0,k.Z)(this,e),!(0,b.OB)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,C.Z)(T().mark((function e(t){var n,r,a,o,i,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Z(t,r),o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,i.href=o,e.next=15,He((function(){return i.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,He((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:q(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Ge.URL_SCHEME="downloads://";var qe=function(){function e(t){if((0,k.Z)(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return(0,w.Z)(e,[{key:"load",value:function(){var e=(0,C.Z)(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),o=a.modelTopology;if(null!=o)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var i=H(a,(function(e){return t.loadWeights(e)}));e(i)}else e({modelTopology:o});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],o=(0,S.Z)(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.push.apply(r,(0,_.Z)(i.weights)),a.push.apply(a,(0,_.Z)(i.paths))}}catch(oa){o.e(oa)}finally{o.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,V(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return W(e.name)})),o={},i=(0,S.Z)(e);try{for(i.s();!(t=i.n()).done;){t.value.paths.forEach((function(e){var t=W(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));o[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(oa){i.e(oa)}finally{i.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return o}}]),e}();function Xe(e){return new qe(e)}function Ke(e,t,n,r){!function(e){(0,A.hu)(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){(0,A.hu)(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),(0,A.hu)(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),(0,A.hu)(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(o){return o.then((function(o){var i=n+ ++a/e.length*(r-n);return t(i),o})),o})))}function Ye(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,C.Z)(T().mark((function e(t,n){var r,a,o,i,s,u,c,l,d;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?(0,b.OB)().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),o=0,i=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,Ke(a,n.onProgress,o,i);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,Ke(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return d=e.t1,e.abrupt("return",d);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e){return Je.apply(this,arguments)}function Je(){return Je=(0,C.Z)(T().mark((function e(t){var n,r,a,o,i=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,o=et((function(e){return Ye(e,{requestInit:a})})),e.abrupt("return",o(t,n,r));case 6:case"end":return e.stop()}}),e)}))),Je.apply(this,arguments)}function et(e){return function(){var t=(0,C.Z)(T().mark((function t(n){var r,a,o,i,s,u,c,l,d,p,f,h,m=arguments;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,o=n.map((function(){return!1})),i={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=O[r]*A.NA(e.shape),l=function(){o[t]=!0,null==i[t]&&(i[t]=[]),i[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return l=o.reduce((function(e,t,n){return t&&e.push(n),e}),[]),d=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;d.push(t)}))})),t.next=15,e(d);case 15:return p=t.sent,f={},h=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=p[h+a].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),u=0,c=0;c<t;c++){var l=new Uint8Array(p[h+c]);s.set(l,u),u+=l.byteLength}i[e].forEach((function(e){var t=L(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)f[n]=t[n]})),h+=t})),t.abrupt("return",f);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}Y.registerSaveRouter((function(e){return(0,b.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ge.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Ge(e)}(e.slice(Ge.URL_SCHEME.length)):null}));var tt=function(){function e(t,n){if((0,k.Z)(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?((0,A.hu)("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=(0,b.OB)().platform.fetch,(0,A.hu)(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&(0,A.hu)(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return(0,w.Z)(e,[{key:"save",value:function(){var e=(0,C.Z)(T().mark((function e(t){var n,r,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Z(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(o=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:q(t),responses:[o]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(o.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=(0,C.Z)(T().mark((function e(){var t,n,r,a,o,i=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,o=n.weightsManifest,null!=a||null!=o){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",H(n,(function(e){return i.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=(0,C.Z)(T().mark((function e(t){var n,r,a,o,i,s,u,c,l,d,p,f,h,m,g,v;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=nt(n),a=(0,N.Z)(r,2),o=a[0],i=a[1],s=this.weightPathPrefix||o,u=X(t),c=[],l=[],d=(0,S.Z)(t);try{for(d.s();!(p=d.n()).done;){f=p.value,h=(0,S.Z)(f.paths);try{for(h.s();!(m=h.n()).done;)g=m.value,null!=this.weightUrlConverter?l.push(this.weightUrlConverter(g)):c.push(s+g+i)}catch(oa){h.e(oa)}finally{h.f()}}}catch(oa){d.e(oa)}finally{d.f()}if(!this.weightUrlConverter){e.next=17;break}return e.t0=c.push,e.t1=c,e.t2=_.Z,e.next=14,Promise.all(l);case 14:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 17:return e.next=19,Ye(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 19:return v=e.sent,e.abrupt("return",[u,V(v)]);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function nt(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function rt(e){return null!=e.match(tt.URL_SCHEME_REGEX)}tt.URL_SCHEME_REGEX=/^https?:\/\//;var at=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return rt(e)})):rt(e))?ot(e,t):null};function ot(e,t){return new tt(e,t)}function it(e,t){return ot(e,t)}Y.registerSaveRouter(at),Y.registerLoadRouter(at);var st=function(){function e(t){(0,k.Z)(this,e),this.modelArtifacts=t}return(0,w.Z)(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),ut=function(){function e(t){(0,k.Z)(this,e),this.saveHandler=t}return(0,w.Z)(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),ct=(0,w.Z)((function e(t){(0,k.Z)(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function lt(e,t,n,r){var a=arguments;return new ct(dt.apply(void 0,(0,_.Z)(a)))}function dt(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new st(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new st({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new st({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function pt(e){return new ut(e)}function ft(e){return new ut(e)}var ht=n(3157),mt=n(4085),gt=n(3808),vt=n(5094),yt=n(1231);var bt,xt=(0,vt.op)({confusionMatrix_:function(e,t,n){var r=(0,ht._1)(e,"labels","confusionMatrix"),a=(0,ht._1)(t,"predictions","confusionMatrix");A.hu(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),A.hu(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),A.hu(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),A.hu(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),A.hu(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var o=(0,gt.l)((0,ze.p)(r,"int32"),n),i=(0,gt.l)((0,ze.p)(a,"int32"),n),s=(0,yt.p)(o),u=(0,mt.O)(s,i);return(0,ze.p)(u,"int32")}}),kt=n(7144),wt=n(5092),St=n(1419),Ct=n(62);function Et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,o=!1,i=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)i=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}var u=(0,St.pI)(wt.eBW,m.BV.backendName);if(null!=u){var c={pixels:e},l={numChannels:t};return m.BV.runKernel(wt.eBW,c,l)}var d,p,f=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],h=(0,N.Z)(f,2),g=h[0],v=h[1];if(i)d=e.getContext("2d").getImageData(0,0,g,v).data;else if(r||n)d=e.data;else if(o||a||s){if(null==bt)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");bt=new OffscreenCanvas(1,1).getContext("2d")}else bt=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});bt.canvas.width=g,bt.canvas.height=v,bt.drawImage(e,0,0,g,v),d=bt.getImageData(0,0,g,v).data}if(4===t)p=new Int32Array(d);else{var y=g*v;p=new Int32Array(y*t);for(var b=0;b<y;b++)for(var x=0;x<t;++x)p[b*t+x]=d[4*b+x]}var k=[v,g,t];return(0,Ct.w)(p,k,"int32")}function Tt(e){return"undefined"!==typeof window&&"undefined"!==typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}function Nt(e){return _t.apply(this,arguments)}function _t(){return _t=(0,C.Z)(T().mark((function e(t){var n,r,a,o=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:3,r=null,!(0,b.OB)().getBool("WRAP_TO_IMAGEBITMAP")||!Tt(t)){e.next=15;break}return e.prev=3,e.next=6,createImageBitmap(t,{premultiplyAlpha:"none"});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=null;case 12:r=null!=a&&a.width===t.width&&a.height===t.height?a:t,e.next=16;break;case 15:r=t;case 16:return e.abrupt("return",Et(r,n));case 17:case"end":return e.stop()}}),e,null,[[3,9]])}))),_t.apply(this,arguments)}function It(e,t){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,C.Z)(T().mark((function e(t,n){var r,a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,ht._1)(t,"img","toPixels"),t instanceof Ze.es||(a=r,r=(0,ze.p)(a,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(o=r.shape.slice(0,2),i=(0,N.Z)(o,2),s=i[0],u=i[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){e.next=8;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(c));case 8:if("float32"===r.dtype||"int32"===r.dtype){e.next=10;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 10:return e.next=12,r.data();case 12:l=e.sent,d="float32"===r.dtype?255:1,p=new Uint8ClampedArray(u*s*4),f=0;case 16:if(!(f<s*u)){e.next=41;break}h=[0,0,0,255],m=0;case 19:if(!(m<c)){e.next=33;break}if(g=l[f*c+m],"float32"!==r.dtype){e.next=26;break}if(!(g<0||g>1)){e.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(g,"."));case 24:e.next=29;break;case 26:if("int32"!==r.dtype){e.next=29;break}if(!(g<0||g>255)){e.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(g,"."));case 29:1===c?(h[0]=g*d,h[1]=g*d,h[2]=g*d):h[m]=g*d;case 30:m++,e.next=19;break;case 33:p[(v=4*f)+0]=Math.round(h[0]),p[v+1]=Math.round(h[1]),p[v+2]=Math.round(h[2]),p[v+3]=Math.round(h[3]);case 38:++f,e.next=16;break;case 41:return null!=n&&(n.width=u,n.height=s,y=n.getContext("2d"),b=new ImageData(p,u,s),y.putImageData(b,0,0)),r!==t&&r.dispose(),e.abrupt("return",p);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var At=(0,vt.op)({fromPixels_:Et});function Ot(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===(0,A.NA)(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,o=a[a.length-1],i=1,s=0;s<a.length-1;++s)i*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,d=o;d<n;++d)l*=u[d],c.push(u[d]);var p=[].concat((0,_.Z)((0,A.e3)(e.shape).map((function(e){return e/l}))),[1]).slice(0,o);return[c,i,l,p]}var Pt=n(2361);function Dt(e,t,n){var r=e.shape.length;A.hu(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),A.hu(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){A.hu(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},o=0;o<r;++o)a(o)}function Lt(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Mt(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Ft(e,t,n,r){for(var a=(0,_.Z)(e),o=a.length;o<r.length;o++)a.push(1);for(var i=0;i<n;i++)0===i?a[t]=1:(a.splice(t,0,1),a.pop());return a}function Bt(e,t,n){return n<=e?n:n-(t-1)}function jt(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function zt(e,t,n,r,a,o,i,s,u){var c=e.length,l=new Array(c),d=new Array(c),p=new Array(c);if(t.length&&n>0){var f=t[0],h=n+1;l=Vt(i,f,h,r,e),d=Wt(s,f,h,a,e),p=Ft(o,f,h,e)}else for(var m=0;m<c;m++)l[m]=Ut(i,r,o,e,m,u),d[m]=Ht(s,a,o,e,m,u),p[m]=Zt(o,m,u);return{begin:l,end:d,strides:p}}function Vt(e,t,n,r,a){for(var o=(0,_.Z)(a),i=jt(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=0;else{var u=Bt(t,n,s),c=r[u];e&1<<u&&(c=0),o[s]=c}return o}function Wt(e,t,n,r,a){for(var o=(0,_.Z)(a),i=jt(n,t),s=0;s<o.length;s++)if(i.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{var u=Bt(t,n,s),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),o[s]=c}for(var l=0;l<o.length;l++){var d=a[l];o[l]<0&&(o[l]+=d),o[l]=A.uZ(0,o[l],a[l])}return o}function Zt(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Ut(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=A.uZ(0,i,u-1)}function Ht(e,t,n,r,a,o){var i=t[a],s=n[a]||1;(e&1<<a||o&1<<a||null==i)&&(i=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=s>0?A.uZ(0,i,u):A.uZ(-1,i,u-1)}function Gt(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function qt(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Xt(e,t,n){var r,a,o=e.shape.length;return(r="number"===typeof t?[t].concat((0,_.Z)(new Array(o-1).fill(0))):t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice()).forEach((function(e){A.hu(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(o).fill(-1):"number"===typeof n?[n].concat((0,_.Z)(new Array(o-1).fill(-1))):n.length<o?n.concat(new Array(o-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(A.hu(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function Kt(e,t,n,r,a,o,i,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=i&&0!==(i&i-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:o,ellipsisMask:i,newAxisMask:s,shrinkAxisMask:u},p=0;p<d.dims;p++)l&&0!==(1<<p&s)&&d.numAddAxisAfterEllipsis++,1<<p&i&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);var f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,f);for(var h=!0,m=!0,g=!0,v=[],y=[],b=0;b<e.length;++b){if(0===f.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(f.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var w=[f.beginMask&1<<b,f.endMask&1<<b],S=[f.strides[b]>0?0:-1,f.strides[b]>0?k:k-1];if(x&&f.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===f.strides[b];var C=!!(f.beginMask&1<<b&&f.endMask&1<<b);if(f.beginValid&&f.endValid){if(x){var E=f.begin[b]<0?k+f.begin[b]:f.begin[b];if(f.begin[b]=E,f.end[b]=f.begin[b]+1,E<0||E>=k)throw Error("slice index ".concat(f.begin[b]," of dimension ").concat(b," out of bounds."))}else f.begin[b]=Yt(f.begin[b],0,f.strides[b],k,w,S),f.end[b]=Yt(f.end[b],1,f.strides[b],k,w,S);var T=1===f.strides[b]&&0===f.begin[b]&&f.end[b]===k;h=h&&T,m=m&&(0===b&&1===f.strides[b]||T)}else h=h&&1===f.strides[b]&&C,m=m&&(0===b&&1===f.strides[b]||C);var N=void 0,_=!1;if(f.beginValid&&f.endValid?(N=f.end[b]-f.begin[b],_=!0):x?(N=1,_=!0):C&&k>=0&&(N=f.strides[b]<0?-k:k,_=!0),_){var I=void 0;I=0===N||N<0!==f.strides[b]<0?0:Math.trunc(N/f.strides[b])+(N%f.strides[b]!==0?1:0),v.push(I)}else v.push(-1)}else v.push(x?1:-1)}for(var R=0;R<f.finalShapeGatherIndices.length;++R){var A=f.finalShapeGatherIndices[R];A>=0?y.push(v[A]):-2===A&&y.push(1)}var O=y.filter((function(e,t){return-2!==f.finalShapeGatherIndices[t]}));return{finalShapeSparse:O,finalShape:y,isIdentity:h,sliceDim0:m,isSimpleSlice:g,begin:f.begin,end:f.end,strides:f.strides}}function Yt(e,t,n,r,a,o){if(a[t])return n>0?o[t]:o[t+1&1];var i=e<0?r+e:e;return i<o[0]?o[0]:i>o[1]?o[1]:i}var Qt=function(){function e(){(0,k.Z)(this,e)}return(0,w.Z)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),$t=function(){function e(){(0,k.Z)(this,e),this.classNameMap={}}return(0,w.Z)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function Jt(e){(0,A.hu)(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),(0,A.hu)("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),(0,A.hu)(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),$t.register(e)}var en=n(3386),tn=n(1368),nn=.1;function rn(e,t,n){return null==n&&(n=an()),on(e,t,(function(e,t){return ln(e,t,n)}))}function an(){return 32===m.BV.backend.floatPrecision()?.001:nn}function on(e,t,n){var r=!0;if(((0,A.fU)(e)||(0,A.fU)(t))&&(r=!1),(0,A.fU)(e)&&(0,A.fU)(t)&&(r=!0),r){var a=e.constructor.name,o=t.constructor.name;if(a!==o)throw new Error("Arrays are of different type. Actual: ".concat(a,". ")+"Expected: ".concat(o))}if(Array.isArray(e)&&Array.isArray(t)){var i=(0,ht.C)(e),s=(0,ht.C)(t);if(!(0,A.cO)(i,s))throw new Error("Arrays have different shapes. "+"Actual: [".concat(i,"]. Expected: [").concat(s,"]"))}var u=(0,A.fU)(e)?e:(0,A.xH)(e),c=(0,A.fU)(t)?t:(0,A.xH)(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: ".concat(u.length," vs ")+"expected: ".concat(c.length,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."));for(var l=0;l<c.length;++l){var d=u[l],p=c[l];if(!n(d,p))throw new Error("Arrays differ: actual[".concat(l,"] = ").concat(d,", expected[").concat(l,"] = ").concat(p,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."))}"undefined"!==typeof expect&&expect().nothing()}function sn(e,t){e().then((function(){return t.fail()}),(function(){return t()})),"undefined"!==typeof expect&&expect().nothing()}function un(e,t){var n="string"===typeof t||"number"===typeof t||"boolean"===typeof t?[t]:t;return(0,A.HD)(e)||(0,A.HD)(e[0])||(0,A.HD)(t)||(0,A.HD)(t[0])?on(e,n,(function(e,t){return e==t})):on(e,t,(function(e,t){return ln(e,t,0)}))}function cn(e,t,n){if(null==n&&(n=an()),!ln(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t));"undefined"!==typeof expect&&expect().nothing()}function ln(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function dn(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function pn(e,t){var n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length "+"".concat(r.length,", but it was ").concat(n.length));for(var a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ")+"".concat(r[a]," but got ").concat(n[a]," instead"))}function fn(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?fn(n):e[t]=(0,tn.encodeString)(n)}return e}function hn(e){var t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise((function(e){t.addEventListener("loadeddata",(function(n){return e(t)})),t.load()}))}function mn(e){return gn.apply(this,arguments)}function gn(){return(gn=(0,C.Z)(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.play();case 2:if(!("requestVideoFrameCallback"in t)){e.next=5;break}return e.next=5,new Promise((function(e){t.requestVideoFrameCallback(e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vn="3.21.0",yn=n(136),bn=n(3668),xn=n(2433),kn=n(4032),wn=n(3339),Sn=n(5301),Cn=n(6613),En=n(9651),Tn=n(4970),Nn=n(6378),_n=n(7297),In=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(){return(0,k.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,o=r.grads;if(null!=n){var i=n.map((function(e){return{name:e.name,tensor:o[e.name]}}));this.applyGradients(i)}else this.applyGradients(o);return(0,xn.B9)(o),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return(0,Nn.pn)(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&(0,xn.B9)(this.iterations_)}},{key:"saveIterations",value:function(){var e=(0,C.Z)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:(0,_n.i)(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=(0,C.Z)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=(0,C.Z)(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Qt);Object.defineProperty(In,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Rn=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,k.Z)(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=o,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==o&&(a.epsilon=m.BV.backend.epsilon()),a}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=m.BV.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:(0,xn.lu)((function(){return(0,Tn.P)(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:(0,xn.lu)((function(){return(0,Tn.P)(a).variable(false)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;(0,xn.lu)((function(){var e=(0,kn.I)((0,Sn.d)(i,t.rho),(0,Sn.d)((0,En.h)(o),1-t.rho)),n=(0,Sn.d)((0,wn.h)((0,Cn._)((0,kn.I)(s,t.epsilon)),(0,Cn._)((0,kn.I)(i,t.epsilon))),o),r=(0,kn.I)((0,Sn.d)(s,t.rho),(0,Sn.d)((0,En.h)(n),1-t.rho));i.assign(e),s.assign(r);var u=(0,kn.I)((0,Sn.d)(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&((0,xn.B9)(this.accumulatedGrads.map((function(e){return e.variable}))),(0,xn.B9)(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=(0,C.Z)(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,_.Z)(this.accumulatedGrads),(0,_.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(In);Rn.className="Adadelta",Jt(Rn);var An=n(1790),On=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return(0,k.Z)(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=m.BV.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:(0,xn.lu)((function(){return(0,An.h)(a.shape,t.initialAccumulatorValue).variable(false)}))}}var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable;(0,xn.lu)((function(){var e=(0,kn.I)(i,(0,En.h)(o));i.assign(e);var n=(0,kn.I)((0,Sn.d)((0,wn.h)(o,(0,Cn._)((0,kn.I)(e,m.BV.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&(0,xn.B9)(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,C.Z)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(In);On.className="Adagrad",Jt(On);var Pn=n(4022),Dn=n(7848),Ln=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,k.Z)(this,n),(o=t.call(this)).learningRate=e,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],(0,xn.lu)((function(){o.accBeta1=(0,_n.i)(r).variable(),o.accBeta2=(0,_n.i)(a).variable()})),null==i&&(o.epsilon=m.BV.backend.epsilon()),o}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);(0,xn.lu)((function(){var r=(0,Dn.l)(1,t.accBeta1),a=(0,Dn.l)(1,t.accBeta2);n.forEach((function(n,o){var i=m.BV.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:"".concat(n,"/m"),variable:(0,xn.lu)((function(){return(0,Tn.P)(i).variable(false)}))}),null==t.accumulatedSecondMoment[o]&&(t.accumulatedSecondMoment[o]={originalName:"".concat(n,"/v"),variable:(0,xn.lu)((function(){return(0,Tn.P)(i).variable(false)}))});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,c=t.accumulatedSecondMoment[o].variable,l=(0,kn.I)((0,Sn.d)(u,t.beta1),(0,Sn.d)(s,1-t.beta1)),d=(0,kn.I)((0,Sn.d)(c,t.beta2),(0,Sn.d)((0,En.h)(s),1-t.beta2)),p=(0,wn.h)(l,r),f=(0,wn.h)(d,a);u.assign(l),c.assign(d);var h=(0,kn.I)((0,Sn.d)((0,wn.h)(p,(0,kn.I)((0,Cn._)(f),t.epsilon)),-t.learningRate),i);i.assign(h)}})),t.accBeta1.assign((0,Sn.d)(t.accBeta1,t.beta1)),t.accBeta2.assign((0,Sn.d)(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,xn.B9)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&(0,xn.B9)(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,C.Z)(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,_.Z)(this.accumulatedFirstMoment),(0,_.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)(T().mark((function e(t){var n,r=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,(0,xn.lu)((function(){r.accBeta1.assign((0,Pn.s)(r.beta1,r.iterations_+1)),r.accBeta2.assign((0,Pn.s)(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(In);Ln.className="Adam",Jt(Ln);var Mn=n(3743),Fn=n(5569),Bn=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return(0,k.Z)(this,n),(o=t.call(this)).learningRate=e,o.beta1=r,o.beta2=a,o.epsilon=i,o.decay=s,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],(0,xn.lu)((function(){o.iteration=(0,_n.i)(0).variable(),o.accBeta1=(0,_n.i)(r).variable()})),null==i&&(o.epsilon=m.BV.backend.epsilon()),o}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);(0,xn.lu)((function(){var r=(0,Dn.l)(1,t.accBeta1),a=(0,wn.h)(-t.learningRate,(0,kn.I)((0,Sn.d)(t.iteration,t.decay),1));n.forEach((function(n,o){var i=m.BV.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:"".concat(n,"/m"),variable:(0,Tn.P)(i).variable(false)}),null==t.accumulatedWeightedInfNorm[o]&&(t.accumulatedWeightedInfNorm[o]={originalName:"".concat(n,"/v"),variable:(0,Tn.P)(i).variable(false)});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,c=t.accumulatedWeightedInfNorm[o].variable,l=(0,kn.I)((0,Sn.d)(u,t.beta1),(0,Sn.d)(s,1-t.beta1)),d=(0,Sn.d)(c,t.beta2),p=(0,Mn.W)(s),f=(0,Fn.g)(d,p);u.assign(l),c.assign(f);var h=(0,kn.I)((0,Sn.d)((0,wn.h)(a,r),(0,wn.h)(l,(0,kn.I)(f,t.epsilon))),i);i.assign(h)}})),t.iteration.assign((0,kn.I)(t.iteration,1)),t.accBeta1.assign((0,Sn.d)(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,xn.B9)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&(0,xn.B9)(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,C.Z)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(In);Bn.className="Adamax",Jt(Bn);var jn=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r;return(0,k.Z)(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=m.BV.registeredVariables[n];(0,xn.lu)((function(){var e=(0,kn.I)((0,Sn.d)(t.c,a),o);o.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,xn.Cn)((0,_n.i)(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=(0,C.Z)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(In);jn.className="SGD",Jt(jn);var zn=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e,r){var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,k.Z)(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=o,a.accumulations=[],a.m=(0,_n.i)(a.momentum),a}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=m.BV.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:(0,xn.lu)((function(){return(0,Tn.P)(a).variable(false)}))}}var o=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&(0,xn.lu)((function(){var e,n=(0,kn.I)((0,Sn.d)(t.m,o),i);e=t.useNesterov?(0,kn.I)((0,Sn.d)(t.c,(0,kn.I)(i,(0,Sn.d)(n,t.m))),a):(0,kn.I)((0,Sn.d)(t.c,n),a),o.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&(0,xn.B9)(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=(0,C.Z)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(jn);zn.className="Momentum",Jt(zn);var Vn=function(e){(0,yn.Z)(n,e);var t=(0,bn.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,k.Z)(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=o,r.epsilon=i,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==i&&(r.epsilon=m.BV.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return(0,w.Z)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=m.BV.registeredVariables[n],o=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:(0,xn.lu)((function(){return(0,Tn.P)(a).variable(o)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:(0,xn.lu)((function(){return(0,Tn.P)(a).variable(o)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:(0,xn.lu)((function(){return(0,Tn.P)(a).variable(o)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;(0,xn.lu)((function(){var e=(0,kn.I)((0,Sn.d)(s,t.decay),(0,Sn.d)((0,En.h)(i),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,o=(0,kn.I)((0,Sn.d)(n,t.decay),(0,Sn.d)(i,1-t.decay)),c=(0,wn.h)((0,Sn.d)(i,t.learningRate),(0,Cn._)((0,Dn.l)(e,(0,kn.I)((0,En.h)(o),t.epsilon)))),l=(0,kn.I)((0,Sn.d)(u,t.momentum),c);s.assign(e),n.assign(o),u.assign(l);var d=(0,Dn.l)(a,l);a.assign(d)}else{var p=(0,kn.I)((0,Sn.d)(s,t.decay),(0,Sn.d)((0,En.h)(i),1-t.decay)),f=(0,kn.I)((0,Sn.d)(u,t.momentum),(0,wn.h)((0,Sn.d)(i,t.learningRate),(0,Cn._)((0,kn.I)(p,t.epsilon))));s.assign(p),u.assign(f);var h=(0,Dn.l)(a,f);a.assign(h)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&(0,xn.B9)(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&(0,xn.B9)(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&(0,xn.B9)(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=(0,C.Z)(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,_.Z)(this.accumulatedMeanSquares),(0,_.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,_.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=(0,C.Z)(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(In);Vn.className="RMSProp",Jt(Vn);var Wn=function(){function e(){(0,k.Z)(this,e)}return(0,w.Z)(e,null,[{key:"sgd",value:function(e){return new jn(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new zn(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Vn(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Ln(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Rn(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new Bn(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new On(e,t)}}]),e}(),Zn=n(5529),Un=n(553),Hn=n(8108),Gn={sgd:Wn.sgd,momentum:Wn.momentum,adadelta:Wn.adadelta,adagrad:Wn.adagrad,rmsprop:Wn.rmsprop,adamax:Wn.adamax,adam:Wn.adam},qn="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function Xn(){return new Promise((function(e){return qn((function(){return e()}))}))}var Kn=n(1302);function Yn(e,t){var n=e[0].length;e.forEach((function(e,t){A.hu(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),A.hu(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var o=0;o<n;o++)A.hu(o===t||e[o]===r[o],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function Qn(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var $n,Jn=n(9282),er=n(4464);function tr(e,t,n){var r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(var a=1;a<n.length;++a){var o=n[a],i=r[r.length-n.length+a],s=r[i];if(o>=0)if(s>=0){if(s!==o)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(o," but shape[").concat(a+e,"] = ").concat(s))}else r[i]=o}return r}function nr(e){var t,n={FIRST_DIM_SIZE:$n.FIRST_DIM_SIZE,VALUE_ROWIDS:$n.VALUE_ROWIDS,ROW_LENGTHS:$n.ROW_LENGTHS,ROW_SPLITS:$n.ROW_SPLITS,ROW_LIMITS:$n.ROW_LIMITS,ROW_STARTS:$n.ROW_STARTS},r=[],a=(0,S.Z)(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(!(o in n))break;r.push(n[o])}}catch(oa){a.e(oa)}finally{a.f()}return r}function rr(e){return 0===e.length?0:e[0]===$n.FIRST_DIM_SIZE?e.length-1:e.length}function ar(e,t){if(null!=e&&null!=t){var n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(var a=0;a<Math.min(n,r-1);++a){var o=e[a],i=t[a+1];if(o>=0&&i>=0&&1!==o&&o!==i)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(o," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(i))}}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}($n||($n={}));var or=30;function ir(e){return e<=or?e:(0,A.jP)(e,Math.floor(Math.sqrt(e)))}function sr(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function ur(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var o=t.length,i=0;i<o;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(o+1))}return a}function cr(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var o=[],i=[],s=1;s<e;++s)s>=2*t+1||s%2===1?i.push(s):o.push(s);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function lr(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function dr(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function pr(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var fr=1.7580993408473768,hr=1.0507009873554805,mr=.3275911,gr=.254829592,vr=-.284496736,yr=1.421413741,br=-1.453152027,xr=1.061405429,kr=n(9555);function wr(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Sr(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Cr(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Er(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Tr(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Nr(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function _r(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}function Ir(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var Rr="->",Ar=/->/g;function Or(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(Ar,"").length)/Rr.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(Rr,'").'));var r=e.split(Rr),a=(0,N.Z)(r,2),o=a[0],i=a[1];(0,A.hu)(-1===o.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var s=o.split(","),u=s.length;if(t!==u)throw new Error("Expected ".concat(u," input tensors, received ").concat(t));if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(e){var t=i[e];if(!s.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===c.indexOf(t)&&c.push(t)},d=0;d<i.length;++d)l(d);for(var p=0;p<o.length;++p){var f=o[p];-1===c.indexOf(f)&&","!==f&&c.push(f)}for(var h=new Array(s.length),m=0;m<u;++m){if(new Set(s[m].split("")).size!==s[m].length)throw new Error("Found duplicate axes in input component ".concat(s[m],". ")+"Support for duplicate axes in input is not implemented yet.");h[m]=[];for(var g=0;g<s[m].length;++g)h[m].push(c.indexOf(s[m][g]))}for(var v=c.length,y=[],b=i.length;b<v;++b)y.push(b);return{allDims:c,summedDims:y,idDims:h}}function Pr(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],o=0;o<e;++o)-1===n[o]&&a.push(o);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function Dr(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,o=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:(0,A.hu)(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},i=0;i<t[e].length;++i)o(i)},o=0;o<n.length;++o)a(o)}function Lr(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var o=0;o<n;++o)a.push([]);for(var i=[],s=0;s<r.length;++s){var u,c=Fr(t,r[s]),l=(0,S.Z)(c);try{for(l.s();!(u=l.n()).done;){var d=u.value;-1===i.indexOf(d)&&(a[s].push(d),i.push(d))}}catch(oa){l.e(oa)}finally{l.f()}}return{path:r,steps:a}}function Mr(e){return e.every((function(e,t){return e===t}))}function Fr(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function Br(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)(0,A.hu)(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);(0,A.hu)(a<=1,(function(){return"There should be only one negative value in split array."}));var o=t.indexOf(-1);if(-1!==o){var i=t.reduce((function(e,t){return t>0?e+t:e}));t[o]=e.shape[n]-i}(0,A.hu)(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function jr(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function zr(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function Vr(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function Wr(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function Zr(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function Ur(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Hr(e,t){var n=(0,A.NA)(e),r=(0,A.NA)(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function Gr(e,t){var n=(0,A.NA)(e),r=(0,A.NA)(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function qr(){return"segment ids must be >= 0"}function Xr(){return"segment ids are not increasing"}function Kr(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function Yr(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function Qr(e,t){var n,r=!1;for(e<=or?(n=e,r=!0):n=(0,A.jP)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=(0,A.jP)(e,n+1);return n}function $r(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}function Jr(e,t,n,r){var a=t.shape.length,o=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var i=0;i<r;++i)if(e.shape[i]!==t.shape[i])throw new Error("x.shape[".concat(i,"]: ").concat(e.shape[i]," should be equal to indices.shape[").concat(i,"]: ").concat(t.shape[i],"."));for(var s=e.shape[n],u=[],c=1,l=1,d=1,p=0;p<r;++p)u.push(e.shape[p]),c*=e.shape[p];for(var f=r;f<n;f++)u.push(e.shape[f]),l*=e.shape[f];for(var h=r;h<a;h++)u.push(t.shape[h]);for(var m=n+1;m<o;m++)u.push(e.shape[m]),d*=e.shape[m];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:u}}function ea(e){try{return e.map((function(e){return(0,tn.decodeString)(e)}))}catch(oa){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(oa))}}function ta(e){return e.map((function(e){return(0,tn.encodeString)(e)}))}var na=n(6381),ra=n(1722),aa=n(3607)},5092:function(e,t,n){"use strict";n.d(t,{$HU:function(){return ht},$g6:function(){return J},$w:function(){return X},Acj:function(){return ge},BMI:function(){return Be},BiW:function(){return dt},Byc:function(){return z},CAk:function(){return Ee},D2d:function(){return Ut},DlI:function(){return ct},Eh3:function(){return A},FKq:function(){return Lt},G3Y:function(){return rn},GBy:function(){return Mt},Gcp:function(){return jt},HEU:function(){return te},HZH:function(){return gt},Hhh:function(){return Me},Hmb:function(){return yt},IKK:function(){return c},IMb:function(){return x},J$2:function(){return Se},J_u:function(){return be},JhU:function(){return v},Kgp:function(){return it},L8s:function(){return Bt},Ly9:function(){return C},M2y:function(){return p},MIZ:function(){return Jt},MRv:function(){return Dt},MZg:function(){return Ae},NEP:function(){return ae},NZg:function(){return Ke},O3z:function(){return zt},OAf:function(){return Ve},OR:function(){return le},OU7:function(){return We},OV7:function(){return ze},Omj:function(){return ne},Oyi:function(){return m},PYm:function(){return Ie},PhF:function(){return Nt},QCc:function(){return g},QRR:function(){return Z},Qg5:function(){return ye},QiL:function(){return at},Qvg:function(){return sn},RFZ:function(){return T},ROF:function(){return y},RQH:function(){return Rt},RuY:function(){return cn},SX0:function(){return ee},SYM:function(){return r},SbG:function(){return kt},SpW:function(){return o},T0n:function(){return U},TQc:function(){return Ft},TR1:function(){return j},ToN:function(){return on},Tr8:function(){return Qt},Uyb:function(){return ce},VGw:function(){return a},Vbg:function(){return Xe},VcC:function(){return W},VfG:function(){return Re},Vn9:function(){return Q},W0H:function(){return tt},XDQ:function(){return un},XLW:function(){return k},XkS:function(){return Yt},Xze:function(){return s},Y0y:function(){return ie},YFo:function(){return oe},YoZ:function(){return Fe},ZbH:function(){return Ne},ZjV:function(){return Zt},Zz9:function(){return I},_JP:function(){return Xt},_V0:function(){return hn},_Yw:function(){return bt},_k9:function(){return b},_tC:function(){return Ht},a5O:function(){return Pt},aJk:function(){return d},avt:function(){return xe},b9H:function(){return pn},bK0:function(){return Gt},bV0:function(){return Ct},c17:function(){return He},cWu:function(){return tn},cie:function(){return H},cye:function(){return et},dDz:function(){return lt},deh:function(){return ue},dpD:function(){return vt},e07:function(){return St},e6w:function(){return pt},e7N:function(){return Te},eBW:function(){return dn},eEB:function(){return E},eZ0:function(){return Le},ekb:function(){return Y},gJX:function(){return N},h8e:function(){return ln},hdR:function(){return re},i5y:function(){return Ot},iHb:function(){return V},iJz:function(){return ve},iWB:function(){return ke},iZT:function(){return me},ik2:function(){return F},jMg:function(){return h},jQk:function(){return qt},jQs:function(){return qe},jeX:function(){return de},kU:function(){return _e},kpP:function(){return an},kuV:function(){return Qe},luS:function(){return mn},lyA:function(){return ot},mKl:function(){return wt},mTV:function(){return je},mc4:function(){return B},mhS:function(){return O},mm_:function(){return i},n9L:function(){return en},nhH:function(){return Vt},nr8:function(){return Tt},o0g:function(){return ut},o2y:function(){return M},oFR:function(){return _t},oHH:function(){return $},oT6:function(){return u},p2w:function(){return It},p4S:function(){return K},pe_:function(){return st},q1x:function(){return he},q2K:function(){return Ue},q8u:function(){return Ge},qCd:function(){return Pe},qIC:function(){return De},qWM:function(){return nt},qi_:function(){return fe},qkr:function(){return mt},qw7:function(){return f},r7n:function(){return we},s1s:function(){return Kt},sEM:function(){return $t},sHE:function(){return pe},sJF:function(){return l},sL$:function(){return G},usg:function(){return fn},uv1:function(){return Je},vFR:function(){return Ze},vtC:function(){return Ce},vwp:function(){return se},w3H:function(){return Wt},w6g:function(){return Oe},wUP:function(){return P},wYB:function(){return At},wYn:function(){return Ye},we_:function(){return rt},wm:function(){return D},wx7:function(){return nn},x12:function(){return L},xJR:function(){return ft},xQA:function(){return Et},xnO:function(){return _},y7R:function(){return q},yQU:function(){return $e},yj2:function(){return R},zbQ:function(){return xt},zvY:function(){return S},zws:function(){return w}});var r="Abs",a="Acos",o="Acosh",i="Add",s="AddN",u="All",c="Any",l="ArgMax",d="ArgMin",p="Asin",f="Asinh",h="Atan",m="Atanh",g="Atan2",v="AvgPool",y="AvgPoolGrad",b="AvgPool3D",x="AvgPool3DGrad",k="BatchMatMul",w="BatchToSpaceND",S="Bincount",C="BroadcastTo",E="BroadcastArgs",T="Cast",N="Ceil",_="ClipByValue",I="Complex",R="ComplexAbs",A="Concat",O="Conv2D",P="Conv2DBackpropFilter",D="Conv2DBackpropInput",L="Conv3D",M="Conv3DBackpropFilterV2",F="Conv3DBackpropInputV2",B="Cos",j="Cosh",z="Cumprod",V="Cumsum",W="CropAndResize",Z="DenseBincount",U="DepthToSpace",H="DepthwiseConv2dNative",G="DepthwiseConv2dNativeBackpropFilter",q="DepthwiseConv2dNativeBackpropInput",X="Diag",K="Dilation2D",Y="Dilation2DBackpropInput",Q="Dilation2DBackpropFilter",$="RealDiv",J="Einsum",ee="Elu",te="EluGrad",ne="Erf",re="Equal",ae="Exp",oe="ExpandDims",ie="Expm1",se="FFT",ue="Fill",ce="FlipLeftRight",le="Floor",de="FloorDiv",pe="FusedBatchNorm",fe="GatherV2",he="GatherNd",me="Greater",ge="GreaterEqual",ve="Identity",ye="IFFT",be="Imag",xe="IsFinite",ke="IsInf",we="IsNan",Se="LeakyRelu",Ce="Less",Ee="LessEqual",Te="LinSpace",Ne="Log",_e="Log1p",Ie="LogicalAnd",Re="LogicalNot",Ae="LogicalOr",Oe="LogicalXor",Pe="LogSoftmax",De="LowerBound",Le="LRN",Me="LRNGrad",Fe="Max",Be="Maximum",je="MaxPool",ze="MaxPoolGrad",Ve="MaxPool3D",We="MaxPool3DGrad",Ze="MaxPoolWithArgmax",Ue="Mean",He="Min",Ge="Minimum",qe="MirrorPad",Xe="Mod",Ke="Multinomial",Ye="Multiply",Qe="Neg",$e="NotEqual",Je="NonMaxSuppressionV3",et="NonMaxSuppressionV4",tt="NonMaxSuppressionV5",nt="OnesLike",rt="OneHot",at="Pack",ot="PadV2",it="Pool",st="Pow",ut="Prelu",ct="Prod",lt="RaggedGather",dt="RaggedTensorToTensor",pt="Range",ft="Real",ht="Reciprocal",mt="Relu",gt="Reshape",vt="ResizeNearestNeighbor",yt="ResizeNearestNeighborGrad",bt="ResizeBilinear",xt="ResizeBilinearGrad",kt="Relu6",wt="Reverse",St="Round",Ct="Rsqrt",Et="ScatterNd",Tt="SearchSorted",Nt="Select",_t="Selu",It="Slice",Rt="Sin",At="Sinh",Ot="Sign",Pt="Sigmoid",Dt="Softplus",Lt="Sqrt",Mt="Sum",Ft="SpaceToBatchND",Bt="SplitV",jt="Softmax",zt="SparseFillEmptyRows",Vt="SparseReshape",Wt="SparseSegmentMean",Zt="SparseSegmentSum",Ut="SparseToDense",Ht="SquaredDifference",Gt="Square",qt="StridedSlice",Xt="StringNGrams",Kt="StringSplit",Yt="StringToHashBucketFast",Qt="Sub",$t="Tan",Jt="Tanh",en="Tile",tn="TopK",nn="Transform",rn="Transpose",an="Unique",on="Unpack",sn="UnsortedSegmentSum",un="UpperBound",cn="ZerosLike",ln="Step",dn="FromPixels",pn="RotateWithOffset",fn="_FusedMatMul",hn="FusedConv2D",mn="FusedDepthwiseConv2D"},1419:function(e,t,n){"use strict";n.d(t,{Li:function(){return f},T3:function(){return g},bt:function(){return m},nE:function(){return h},pI:function(){return c},tr:function(){return d},uk:function(){return l},wC:function(){return p}});var r=n(9439),a=n(6949),o=n(3078),i=n(9555),s=(0,o.R)("kernelRegistry",(function(){return new Map})),u=(0,o.R)("gradRegistry",(function(){return new Map}));function c(e,t){var n=v(e,t);return s.get(n)}function l(e){return u.get(e)}function d(e){for(var t=s.entries(),n=[];;){var a=t.next(),o=a.done,i=a.value;if(o)break;var u=(0,r.Z)(i,2),c=u[0],l=u[1],d=c.split("_");(0,r.Z)(d,1)[0]===e&&n.push(l)}return n}function p(e){var t=e.kernelName,n=e.backendName,r=v(t,n);s.has(r)&&i.Z("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),s.set(r,e)}function f(e){var t=e.kernelName;u.has(t)&&(0,a.OB)().getBool("DEBUG")&&i.Z("Overriding the gradient for '".concat(t,"'")),u.set(t,e)}function h(e,t){var n=v(e,t);if(!s.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));s.delete(n)}function m(e){if(!u.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));u.delete(e)}function g(e,t){d(e).forEach((function(e){p(Object.assign({},e,{backendName:t}))}))}function v(e,t){return"".concat(t,"_").concat(e)}},9555:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},c:function(){return o}});var r=n(6949);function a(){var e;(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||(e=console).warn.apply(e,arguments)}function o(){var e;(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||(e=console).log.apply(e,arguments)}},3743:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({abs_:function(e){var t=(0,o._1)(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return r.BV.runKernel(a.yj2,n)}var i={x:t};return r.BV.runKernel(a.SYM,i)}})},4032:function(e,t,n){"use strict";n.d(t,{I:function(){return u}});var r=n(9439),a=n(722),o=n(5092),i=n(3386),s=n(3157);var u=(0,n(5094).op)({add_:function(e,t){var n=(0,s._1)(e,"a","add"),u=(0,s._1)(t,"b","add"),c=(0,i.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),d={a:n=l[0],b:u=l[1]};return a.BV.runKernel(o.mm_,d)}})},1302:function(e,t,n){"use strict";n.d(t,{LJ:function(){return l},Q3:function(){return c},Vh:function(){return o},YB:function(){return a},kz:function(){return i},lB:function(){return u},rv:function(){return s},sY:function(){return d}});var r=n(4699);function a(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function o(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}function i(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var o=t.map((function(t){return e[t]}));return[n,o]}function s(e,t){return o(e,t.map((function(e){return 1})),t)}function u(e,t,n){r.hu(a(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function c(e,t){if(a(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function l(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function d(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}},7144:function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function a(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function o(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)n.unshift(i);else if(1===i)n.unshift(o);else{if(o!==i){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(o)}}return n}n.r(t),n.d(t,{assertAndGetBroadcastShape:function(){return o},getBroadcastDims:function(){return r},getReductionAxes:function(){return a}})},5281:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var r=n(4965),a=n(4699);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",a.Mu(e),new r.YD(e,t,n)}},8982:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(722),a=n(5092),o=n(3157),i=n(4699);var s=(0,n(5094).op)({cast_:function(e,t){var n=(0,o._1)(e,"x","cast");if(!i.LP(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var s={x:n},u={dtype:t};return r.BV.runKernel(a.RFZ,s,u)}})},5402:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({clone_:function(e){var t={x:(0,o._1)(e,"x","clone","string_or_numeric")};return r.BV.runKernel(a.iJz,t)}})},2529:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(722),a=n(5092),o=n(3157),i=n(4699);var s=(0,n(5094).op)({complex_:function(e,t){var n=(0,o._1)(e,"real","complex"),s=(0,o._1)(t,"imag","complex");i.k5(n.shape,s.shape,"real and imag shapes, ".concat(n.shape," and ").concat(s.shape,", ")+"must match in call to tf.complex().");var u={real:n,imag:s};return r.BV.runKernel(a.Zz9,u)}})},9282:function(e,t,n){"use strict";n.d(t,{I0:function(){return y},Ix:function(){return c},Rf:function(){return i},Xw:function(){return s},aO:function(){return d},jT:function(){return b},jw:function(){return l},m:function(){return k},pl:function(){return u},sl:function(){return x}});var r=n(9439),a=n(3433),o=n(4699);function i(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,s=e[3],u=[].concat((0,a.Z)(t),[s]),l=x(o);return c(e,u,n,i,r,null,null,l)}function s(e,t,n,a,o,i){var s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=p(t),d=(0,r.Z)(l,2),f=d[0],h=d[1];if("channelsLast"===u)s=[f,h,e[3],e[3]];else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));s=[f,h,e[1],e[1]]}return c(e,s,n,a,o,i,!1,u)}function u(e,t,n,a,o,i){var s,u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",d=f(t),p=(0,r.Z)(d,3),h=p[0],m=p[1],g=p[2];if("NDHWC"===c)u="channelsLast",s=[h,m,g,e[4],e[4]];else{if("NCDHW"!==c)throw new Error("Unknown dataFormat ".concat(c));u="channelsFirst",s=[h,m,g,e[1],e[1]]}return l(e,s,n,a,o,!1,u,i)}function c(e,t,n,a,o,i){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",c=-1,l=-1,d=-1,f=-1;if("channelsLast"===u){var g=(0,r.Z)(e,4);c=g[0],l=g[1],d=g[2],f=g[3]}else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));var v=(0,r.Z)(e,4);c=v[0],f=v[1],l=v[2],d=v[3]}var y,b=(0,r.Z)(t,4),x=b[0],k=b[1],w=b[3],S=p(n),C=(0,r.Z)(S,2),E=C[0],T=C[1],N=p(a),_=(0,r.Z)(N,2),I=_[0],R=_[1],A=h(x,I),O=h(k,R),P=m(o,l,d,E,T,A,O,i,u),D=P.padInfo,L=P.outHeight,M=P.outWidth,F=s?w*f:w;return"channelsFirst"===u?y=[c,F,L,M]:"channelsLast"===u&&(y=[c,L,M,F]),{batchSize:c,dataFormat:u,inHeight:l,inWidth:d,inChannels:f,outHeight:L,outWidth:M,outChannels:F,padInfo:D,strideHeight:E,strideWidth:T,filterHeight:x,filterWidth:k,effectiveFilterHeight:A,effectiveFilterWidth:O,dilationHeight:I,dilationWidth:R,inShape:e,outShape:y,filterShape:t}}function l(e,t,n,a,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=arguments.length>7?arguments[7]:void 0,c=-1,l=-1,d=-1,p=-1,m=-1;if("channelsLast"===s){var v=(0,r.Z)(e,5);c=v[0],l=v[1],d=v[2],p=v[3],m=v[4]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var y=(0,r.Z)(e,5);c=y[0],m=y[1],l=y[2],d=y[3],p=y[4]}var b,x=(0,r.Z)(t,5),k=x[0],w=x[1],S=x[2],C=x[4],E=f(n),T=(0,r.Z)(E,3),N=T[0],_=T[1],I=T[2],R=f(a),A=(0,r.Z)(R,3),O=A[0],P=A[1],D=A[2],L=h(k,O),M=h(w,P),F=h(S,D),B=g(o,l,d,p,N,_,I,L,M,F,u),j=B.padInfo,z=B.outDepth,V=B.outHeight,W=B.outWidth,Z=i?C*m:C;return"channelsFirst"===s?b=[c,Z,z,V,W]:"channelsLast"===s&&(b=[c,z,V,W,Z]),{batchSize:c,dataFormat:s,inDepth:l,inHeight:d,inWidth:p,inChannels:m,outDepth:z,outHeight:V,outWidth:W,outChannels:Z,padInfo:j,strideDepth:N,strideHeight:_,strideWidth:I,filterDepth:k,filterHeight:w,filterWidth:S,effectiveFilterDepth:L,effectiveFilterHeight:M,effectiveFilterWidth:F,dilationDepth:O,dilationHeight:P,dilationWidth:D,inShape:e,outShape:b,filterShape:t}}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=h(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function p(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function f(e){return"number"===typeof e?[e,e,e]:e}function h(e,t){return t<=1?e:e+(e-1)*(t-1)}function m(e,t,n,r,a,o,i,s,u){var c,l,p;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=d(e,t,n));var o=e[0],i=e[1];return[v((o-t+2*r)/n+1,a),v((i-t+2*r)/n+1,a)]}([t,n],o,r,e,s);l=f[0],p=f[1]}else if("same"===e){l=Math.ceil(t/r),p=Math.ceil(n/a);var h=Math.max(0,(l-1)*r+o-t),m=Math.max(0,(p-1)*a+i-n),g=Math.floor(h/2),y=h-g,b=Math.floor(m/2);c={top:g,bottom:y,left:b,right:m-b,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/r),p=Math.ceil((n-i+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var x="channelsLast"===u?e[1][0]:e[2][0],k="channelsLast"===u?e[1][1]:e[2][1],w="channelsLast"===u?e[2][0]:e[3][0],S="channelsLast"===u?e[2][1]:e[3][1];c={top:x,bottom:k,left:w,right:S,type:0===x&&0===k&&0===w&&0===S?"VALID":"EXPLICIT"},l=v((t-o+x+k)/r+1,s),p=v((n-i+w+S)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:p}}function g(e,t,n,r,a,o,i,s,u,c,l){var p,f,h,m;if("number"===typeof e){p={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var g=function(e,t,n,r,a,o){null==a&&(a=d(e,t,r));var i=e[0],s=e[1],u=e[2];return[v((i-t+2*a)/r+1,o),v((s-t+2*a)/r+1,o),v((u-t+2*a)/r+1,o),n]}([t,n,r,1],s,1,a,e,l);f=g[0],h=g[1],m=g[2]}else if("same"===e){var y=((f=Math.ceil(t/a))-1)*a+s-t,b=((h=Math.ceil(n/o))-1)*o+u-n,x=((m=Math.ceil(r/i))-1)*i+c-r,k=Math.floor(y/2),w=y-k,S=Math.floor(b/2),C=b-S,E=Math.floor(x/2);p={top:S,bottom:C,left:E,right:x-E,front:k,back:w,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));p={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/a),h=Math.ceil((n-u+1)/o),m=Math.ceil((r-c+1)/i)}return{padInfo:p,outDepth:f,outHeight:h,outWidth:m}}function v(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function y(e){var t=p(e),n=(0,r.Z)(t,3),a=n[0],o=n[1],i=n[2];return 1===a&&1===o&&1===i}function b(e,t){return y(e)||y(t)}function x(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function k(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)o.hu(o.GN(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){o.hu(o.GN(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}},3339:function(e,t,n){"use strict";n.d(t,{h:function(){return c}});var r=n(9439),a=n(722),o=n(5092),i=n(3386),s=n(3157),u=n(218);var c=(0,n(5094).op)({div_:function(e,t){var n=(0,s._1)(e,"a","div"),c=(0,s._1)(t,"b","div"),l=(0,i.makeTypesMatch)(n,c),d=(0,r.Z)(l,2);if(n=d[0],c=d[1],"int32"===n.dtype&&"int32"===c.dtype)return(0,u.q)(n,c);var p={a:n,b:c};return a.BV.runKernel(o.oHH,p,{})}})},6625:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({elu_:function(e){var t={x:(0,o._1)(e,"x","elu","float32")};return r.BV.runKernel(a.SX0,t)}})},1790:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(722),a=n(5092);function o(e,t,n){var o={shape:e,value:t,dtype:n};return r.BV.runKernel(a.deh,{},o)}},218:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var r=n(9439),a=n(722),o=n(5092),i=n(3386),s=n(3157);var u=(0,n(5094).op)({floorDiv_:function(e,t){var n=(0,s._1)(e,"a","floorDiv"),u=(0,s._1)(t,"b","floorDiv"),c=(0,i.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),d={a:n=l[0],b:u=l[1]};return a.BV.runKernel(o.jeX,d)}})},4464:function(e,t,n){"use strict";n.d(t,{Fr:function(){return h},QH:function(){return g},pf:function(){return m},uy:function(){return v}});var r=n(7144),a=n(6625),o=n(8539),i=n(5301),s=n(1943),u=n(9155),c=n(2066),l=n(627),d=n(6367),p=n(4977),f=n(3368);function h(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return(0,i.d)(e,(0,p.N)(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function m(e,t){var n=t,a=r.getReductionAxes(e.shape,t.shape);return a.length>0&&(n=(0,f.S)(n,a)),(0,l.X)(n,e.shape)}function g(e,t,n,r){if("linear"===t)return e;if("relu"===t)return(0,u.U)(e);if("elu"===t)return(0,a.p)(e);if("relu6"===t)return(0,c.b)(e);if("prelu"===t)return(0,s.A)(e,n);if("leakyrelu"===t)return(0,o.h)(e,r);if("sigmoid"===t)return(0,d.X)(e);throw new Error("Unknown fused activation ".concat(t,"."))}var v=function(e,t){return!(e>0)||"linear"===t}},9338:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({imag_:function(e){var t={input:(0,o._1)(e,"input","imag")};return r.BV.runKernel(a.J_u,t)}})},8539:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=(0,o._1)(e,"x","leakyRelu"),i={x:n},s={alpha:t};return r.BV.runKernel(a.J$2,i,s)}})},8108:function(e,t,n){"use strict";var r;n.d(t,{I:function(){return r}}),function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},4085:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var r=n(9439),a=n(722),o=n(5092),i=n(3386),s=n(3157);var u=(0,n(5094).op)({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=(0,s._1)(e,"a","matMul"),l=(0,s._1)(t,"b","matMul"),d=(0,i.makeTypesMatch)(c,l),p=(0,r.Z)(d,2),f={a:c=p[0],b:l=p[1]},h={transposeA:n,transposeB:u};return a.BV.runKernel(o.XLW,f,h)}})},5569:function(e,t,n){"use strict";n.d(t,{g:function(){return l}});var r=n(9439),a=n(722),o=n(5092),i=n(3386),s=n(3157),u=n(7144),c=n(8982);var l=(0,n(5094).op)({maximum_:function(e,t){var n=(0,s._1)(e,"a","maximum"),l=(0,s._1)(t,"b","maximum"),d=(0,i.makeTypesMatch)(n,l),p=(0,r.Z)(d,2);n=p[0],l=p[1],"bool"===n.dtype&&(n=(0,c.p)(n,"int32"),l=(0,c.p)(l,"int32")),(0,u.assertAndGetBroadcastShape)(n.shape,l.shape);var f={a:n,b:l};return a.BV.runKernel(o.BMI,f)}})},5301:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var r=n(9439),a=n(722),o=n(5092),i=n(3386),s=n(3157);var u=(0,n(5094).op)({mul_:function(e,t){var n=(0,s._1)(e,"a","mul"),u=(0,s._1)(t,"b","mul"),c=(0,i.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),d={a:n=l[0],b:u=l[1]};return a.BV.runKernel(o.wYn,d)}})},6620:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({neg_:function(e){var t={x:(0,o._1)(e,"x","neg")};return r.BV.runKernel(a.kuV,t)}})},3808:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var u=(0,o._1)(e,"indices","oneHot","int32"),c={indices:u},l={dtype:s,depth:t,onValue:n,offValue:i};return r.BV.runKernel(a.we_,c,l)}})},5094:function(e,t,n){"use strict";n.d(t,{op:function(){return i},z:function(){return o}});var r=n(722),a=n(4699),o="__op";function i(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],i=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=o;var s=function(){r.BV.startScope(n);try{var e=i.apply(void 0,arguments);return(0,a.tI)(e)&&console.error("Cannot return a Promise inside of tidy."),r.BV.endScope(e),e}catch(t){throw r.BV.endScope(null),t}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}},553:function(e,t,n){"use strict";n.d(t,{zvA:function(){return u.z},WnP:function(){return a.W},Khb:function(){return c},__u:function(){return l},IHx:function(){return d.I},QBD:function(){return f},$6P:function(){return h},YjB:function(){return m},NqF:function(){return g},vHJ:function(){return v},ZRM:function(){return y},VfV:function(){return b},z4N:function(){return x},fvJ:function(){return S},C80:function(){return C},wS1:function(){return _},uR5:function(){return I},zEQ:function(){return F},tgs:function(){return j},Dxk:function(){return z},JY5:function(){return V},p3b:function(){return W},E4h:function(){return B},yE8:function(){return Z},anm:function(){return dr},XsQ:function(){return U},UFq:function(){return H},f3b:function(){return G.f},pju:function(){return E.p},mDi:function(){return q},iUl:function(){return K},d9v:function(){return R.d},PYB:function(){return Y.P},zoF:function(){return A},gME:function(){return Q},Izb:function(){return $},MNy:function(){return J},ZaL:function(){return ee},PAt:function(){return ne},Tek:function(){return te},bc:function(){return ae},pdZ:function(){return oe},$QV:function(){return se},mCk:function(){return ue},f9Y:function(){return ce},mew:function(){return kr},$Gn:function(){return le},zbp:function(){return de},ppE:function(){return pe},nTT:function(){return fe},B10:function(){return he},Ka3:function(){return me},WmZ:function(){return ge},hiC:function(){return ve.h},NTj:function(){return we},AKD:function(){return Se},rvX:function(){return br},WYO:function(){return Ce},pyx:function(){return Ee.p},GRh:function(){return xr},DgJ:function(){return be},qNN:function(){return Te},d2q:function(){return Fe},Qqt:function(){return Be},dt4:function(){return je},t$B:function(){return ze},iyy:function(){return We},kp_:function(){return Ln},hlL:function(){return X.h},GWj:function(){return Ze},qPi:function(){return Ue.q},imm:function(){return r},Iqj:function(){return He},dbB:function(){return yr},pjt:function(){return Ge},brS:function(){return qe},Sxn:function(){return Mn},asL:function(){return Xe.a},BHj:function(){return Oa},V3u:function(){return Sr},wx0:function(){return Fn},xVT:function(){return Ke},UWc:function(){return Ye},i2d:function(){return Qe},hi7:function(){return $e.h},d9m:function(){return Je},zN1:function(){return et},$r2:function(){return Pa},SX3:function(){return tt},G9k:function(){return nt},cM7:function(){return rt},Krr:function(){return at},e_t:function(){return ut},CmS:function(){return lt},l_t:function(){return dt},HvI:function(){return pt},hJK:function(){return ft},K5V:function(){return ht},egP:function(){return mt},MB5:function(){return Da},eab:function(){return yt},OI3:function(){return O.O},Fp7:function(){return _e},_sB:function(){return bt},YQQ:function(){return xt},Ip$:function(){return kt},gWQ:function(){return wt.g},J69:function(){return St},ry_:function(){return Nt},VV$:function(){return Ie},LTh:function(){return _t},VdP:function(){return It},wQq:function(){return Rt},Gi7:function(){return At},p_:function(){return fr},dC7:function(){return P.d},rq4:function(){return Ot},SJ_:function(){return Pt},W76:function(){return it.W},KOy:function(){return Me},Quu:function(){return Dt},lfX:function(){return Lt.l},iUs:function(){return Et},JpU:function(){return Mt},op:function(){return u.op},N2O:function(){return Ft},vku:function(){return Bt},pNR:function(){return jt},koy:function(){return zt},t1L:function(){return Vt},lGY:function(){return Wt},d_R:function(){return Ut},sQ3:function(){return Re.s},AL3:function(){return Ht.A},S0v:function(){return Gt.S},WVs:function(){return qt},$gW:function(){return Xt},N89:function(){return Kt},TN_:function(){return Yt},wzB:function(){return rn},nGf:function(){return an},ruB:function(){return on},LGj:function(){return sn},w6H:function(){return un},kwC:function(){return cn.k},M25:function(){return ln},UYe:function(){return dn.U},btT:function(){return pn.b},XLQ:function(){return N.X},GYS:function(){return fn},SDf:function(){return hn},diP:function(){return mn},sx7:function(){return gn},mG2:function(){return vn},QEs:function(){return jn},NMM:function(){return yn},bp0:function(){return bn},iD$:function(){return Ae.i},snQ:function(){return mr},zcT:function(){return vt},U8D:function(){return xn},U_I:function(){return kn},ODp:function(){return Tn},XD2:function(){return D.X},Xxe:function(){return Nn},tdS:function(){return Aa},O$l:function(){return _n},R_K:function(){return In},tPi:function(){return L},jZU:function(){return Rn},SmN:function(){return An},CnO:function(){return On},p0P:function(){return Pn},XAC:function(){return Dn},Wvh:function(){return st},fBT:function(){return Zt},rVs:function(){return La},ers:function(){return vr},uN7:function(){return Ra},Vl2:function(){return Bn},_b3:function(){return Oe._},h62:function(){return Pe.h},$i:function(){return zn},L9e:function(){return Vn},knu:function(){return Wn},Nbs:function(){return Zn.N},NXj:function(){return Un},Z_8:function(){return Ma},luU:function(){return ct.l},Smz:function(){return De.S},ORZ:function(){return Hn},AEp:function(){return M},XeE:function(){return Gn.X},RRF:function(){return Xn},odF:function(){return Kn},wOQ:function(){return Yn.w},yXz:function(){return Qn},Bfx:function(){return $n},xZs:function(){return Jn},Gg6:function(){return Ve},hg7:function(){return er},p4s:function(){return pr.p},Xu6:function(){return tr},Two:function(){return nr},pUJ:function(){return rr},HHK:function(){return ar},GaM:function(){return or},VD$:function(){return ir},arb:function(){return xe},itS:function(){return cr},lls:function(){return Ct},P84:function(){return ke.P}});var r={};n.r(r),n.d(r,{conv2d:function(){return Tr},depthwiseConv2d:function(){return Ir},matMul:function(){return Rr}});var a=n(3743),o=n(722),i=n(5092),s=n(3157),u=n(5094);var c=(0,u.op)({acos_:function(e){var t={x:(0,s._1)(e,"x","acos")};return o.BV.runKernel(i.VGw,t)}});var l=(0,u.op)({acosh_:function(e){var t={x:(0,s._1)(e,"x","acosh")};return o.BV.runKernel(i.SpW,t)}}),d=n(4032),p=n(4699);var f=(0,u.op)({addN_:function(e){p.hu(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),p.hu(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return(0,s._1)(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!p.cO(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return o.BV.runKernel(i.Xze,r)}});var h=(0,u.op)({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","all","bool"),a={x:r},u={axis:t,keepDims:n};return o.BV.runKernel(i.oT6,a,u)}});var m=(0,u.op)({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","any","bool"),a={x:r},u={axis:t,keepDims:n};return o.BV.runKernel(i.IKK,a,u)}});var g=(0,u.op)({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s._1)(e,"x","argMax"),r={x:n},a={axis:t};return o.BV.runKernel(i.sJF,r,a)}});var v=(0,u.op)({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s._1)(e,"x","argMin"),r={x:n},a={axis:t};return o.BV.runKernel(i.aJk,r,a)}});var y=(0,u.op)({asin_:function(e){var t={x:(0,s._1)(e,"x","asin")};return o.BV.runKernel(i.M2y,t)}});var b=(0,u.op)({asinh_:function(e){var t={x:(0,s._1)(e,"x","asinh")};return o.BV.runKernel(i.qw7,t)}});var x=(0,u.op)({atan_:function(e){var t={x:(0,s._1)(e,"x","atan")};return o.BV.runKernel(i.jMg,t)}}),k=n(9439),w=n(3386);var S=(0,u.op)({atan2_:function(e,t){var n=(0,s._1)(e,"a","atan2"),r=(0,s._1)(t,"b","atan2"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2),c={a:n=u[0],b:r=u[1]};return o.BV.runKernel(i.QCc,c)}});var C=(0,u.op)({atanh_:function(e){var t={x:(0,s._1)(e,"x","atanh")};return o.BV.runKernel(i.Oyi,t)}}),E=n(8982),T=n(9282),N=n(627);var _=(0,u.op)({avgPool_:function(e,t,n,r,a){var u=(0,s._1)(e,"x","avgPool","float32");p.hu(T.jT(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var c=u,l=!1;3===u.rank&&(l=!0,c=(0,N.X)(u,[1,u.shape[0],u.shape[1],u.shape[2]])),p.hu(4===c.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(c.rank,".")})),T.m("avgPool",r,a);var d={x:c},f={filterSize:t,strides:n,pad:r,dimRoundingMode:a},h=o.BV.runKernel(i.JhU,d,f);return h=(0,E.p)(h,u.dtype),l?(0,N.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var I=(0,u.op)({avgPool3d_:function(e,t,n,r,a){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",c=(0,s._1)(e,"x","avgPool3d","float32"),l=c,d=!1;4===c.rank&&(d=!0,l=(0,N.X)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),p.hu(5===l.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(l.rank,".")})),p.hu("NDHWC"===u,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(u)})),(0,T.m)("avgPool3d",r,a);var f={x:l},h={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:u},m=o.BV.runKernel(i._k9,f,h);return m=(0,E.p)(m,l.dtype),d?(0,N.X)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),R=n(5402);var A=(0,u.op)({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,p.hu)(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=(0,s.sI)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return(0,R.d)(n[0]);var r=n,a={axis:t};return o.BV.runKernel(i.Eh3,r,a)}}),O=n(4085),P=n(5301),D=n(6367);var L=(0,u.op)({slice_:function(e,t,n){var r=(0,s._1)(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},u={begin:t,size:n};return o.BV.runKernel(i.p2w,a,u)}});var M=(0,u.op)({tanh_:function(e){var t={x:(0,s._1)(e,"x","tanh","float32")};return o.BV.runKernel(i.MIZ,t)}});var F=(0,u.op)({basicLSTMCell_:function(e,t,n,r,a,o){var i=(0,s._1)(e,"forgetBias","basicLSTMCell"),u=(0,s._1)(t,"lstmKernel","basicLSTMCell"),c=(0,s._1)(n,"lstmBias","basicLSTMCell"),l=(0,s._1)(r,"data","basicLSTMCell"),p=(0,s._1)(a,"c","basicLSTMCell"),f=(0,s._1)(o,"h","basicLSTMCell"),h=A([l,f],1),m=(0,O.O)(h,u),g=(0,d.I)(m,c),v=g.shape[0],y=g.shape[1]/4,b=[v,y],x=L(g,[0,0],b),k=L(g,[0,y],b),w=L(g,[0,2*y],b),S=L(g,[0,3*y],b),C=(0,d.I)((0,P.d)((0,D.X)(x),M(k)),(0,P.d)(p,(0,D.X)((0,d.I)(i,w))));return[C,(0,P.d)(M(C),(0,D.X)(S))]}});var B=(0,u.op)({batchToSpaceND_:function(e,t,n){var r=(0,s._1)(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));p.hu(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),p.hu(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),p.hu(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var u={x:r},c={blockShape:t,crops:n};return o.BV.runKernel(i.zws,u,c)}});var j=(0,u.op)({batchNorm_:function(e,t,n,r,a,u){null==u&&(u=.001);var c,l,d=(0,s._1)(e,"x","batchNorm"),f=(0,s._1)(t,"mean","batchNorm"),h=(0,s._1)(n,"variance","batchNorm");null!=a&&(c=(0,s._1)(a,"scale","batchNorm")),null!=r&&(l=(0,s._1)(r,"offset","batchNorm")),p.hu(f.rank===h.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),p.hu(null==l||f.rank===l.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),p.hu(null==c||f.rank===c.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var m=function(e){return 0===e.rank||1===e.rank?(0,N.X)(e,[1,1,1,e.size]):2===e.rank?(0,N.X)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?(0,N.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(d),g={x:m,scale:c,offset:l,mean:f,variance:h},v={varianceEpsilon:u},y=o.BV.runKernel(i.sHE,g,v);return(0,N.X)(y,d.shape)}});var z=(0,u.op)({batchNorm2d_:function(e,t,n,r,a,o){var i,u,c=(0,s._1)(e,"x","batchNorm"),l=(0,s._1)(t,"mean","batchNorm"),d=(0,s._1)(n,"variance","batchNorm");return null!=a&&(i=(0,s._1)(a,"scale","batchNorm")),null!=r&&(u=(0,s._1)(r,"offset","batchNorm")),p.hu(2===c.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(c.rank,".")})),p.hu(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(l.rank,".")})),p.hu(2===d.rank||1===d.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(d.rank,".")})),null!=i&&p.hu(2===i.rank||1===i.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=u&&p.hu(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")})),j(c,l,d,u,i,o)}});var V=(0,u.op)({batchNorm3d_:function(e,t,n,r,a,o){var i,u,c=(0,s._1)(e,"x","batchNorm"),l=(0,s._1)(t,"mean","batchNorm"),d=(0,s._1)(n,"variance","batchNorm");return null!=a&&(i=(0,s._1)(a,"scale","batchNorm")),null!=r&&(u=(0,s._1)(r,"offset","batchNorm")),p.hu(3===c.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(c.rank,".")})),p.hu(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(l.rank,".")})),p.hu(3===d.rank||1===d.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(d.rank,".")})),null!=i&&p.hu(3===i.rank||1===i.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=u&&p.hu(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")})),j(c,l,d,u,i,o)}});var W=(0,u.op)({batchNorm4d_:function(e,t,n,r,a,o){var i,u,c=(0,s._1)(e,"x","batchNorm"),l=(0,s._1)(t,"mean","batchNorm"),d=(0,s._1)(n,"variance","batchNorm");return null!=a&&(i=(0,s._1)(a,"scale","batchNorm")),null!=r&&(u=(0,s._1)(r,"offset","batchNorm")),p.hu(4===c.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(c.rank,".")})),p.hu(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(l.rank,".")})),p.hu(4===d.rank||1===d.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(d.rank,".")})),null!=i&&p.hu(4===i.rank||1===i.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(i.rank,".")})),null!=u&&p.hu(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")})),j(c,l,d,u,i,o)}});var Z=(0,u.op)({bincount_:function(e,t,n){var r=(0,s._1)(e,"x","bincount"),a=(0,s._1)(t,"weights","bincount");p.hu("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),p.hu(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),p.hu(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var u={x:r,weights:a},c={size:n};return o.BV.runKernel(i.zvY,u,c)}});var U=(0,u.op)({broadcastArgs_:function(e,t){var n=(0,s._1)(e,"s0","broadcastArgs","int32"),r=(0,s._1)(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return o.BV.runKernel(i.eEB,a)}});var H=(0,u.op)({broadcastTo_:function(e,t){var n=(0,s._1)(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=(0,N.X)(n,a)}for(var u=n.shape,c=Array.from(t),l=t.length-1;l>=0;l--)if(u[l]===t[l])c[l]=1;else if(1!==n.shape[l])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var d=c.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===d.length)return(0,R.d)(n);var p={x:n},f={reps:c};return o.BV.runKernel(i.n9L,p,f)}}),G=n(5281);var q=(0,u.op)({ceil_:function(e){var t={x:(0,s._1)(e,"x","ceil","float32")};return o.BV.runKernel(i.gJX,t)}}),X=n(1790);var K=(0,u.op)({clipByValue_:function(e,t,n){var r=(0,s._1)(e,"x","clipByValue");if(p.hu(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")})),t===n)return(0,X.h)(r.shape,t,r.dtype);var a={x:r},u={clipValueMin:t,clipValueMax:n};return o.BV.runKernel(i.xnO,a,u)}}),Y=n(2529);var Q=(0,u.op)({concat1d_:function(e){return A(e,0)}});var $=(0,u.op)({concat2d_:function(e,t){return A(e,t)}});var J=(0,u.op)({concat3d_:function(e,t){return A(e,t)}});var ee=(0,u.op)({concat4d_:function(e,t){return A(e,t)}});var te=(0,u.op)({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=(0,s._1)(e,"x","conv2d","float32"),d=(0,s._1)(t,"filter","conv2d","float32"),f=l,h=!1;3===l.rank&&(h=!0,f=(0,N.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),p.hu(4===f.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(f.rank,".")})),p.hu(4===d.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(d.rank,".")})),T.m("conv2d",r,c);var m="NHWC"===a?f.shape[3]:f.shape[1];p.hu(m===d.shape[2],(function(){return"Error in conv2d: depth of input (".concat(m,") must match ")+"input depth for filter ".concat(d.shape[2],".")})),p.hu(T.jT(n,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(u,"'")}));var g={x:f,filter:d},v={strides:n,pad:r,dataFormat:a,dilations:u,dimRoundingMode:c},y=o.BV.runKernel(i.mhS,g,v);return h?(0,N.X)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});var ne=(0,u.op)({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6?arguments[6]:void 0,u=(0,s._1)(e,"x","conv1d"),c=(0,s._1)(t,"filter","conv1d"),l=u,d=!1;2===u.rank&&(d=!0,l=(0,N.X)(u,[1,u.shape[0],u.shape[1]])),p.hu(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,".")})),p.hu(3===c.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(c.rank,".")})),T.m("conv1d",r,i),p.hu(l.shape[2]===c.shape[1],(function(){return"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(c.shape[1],".")})),p.hu(T.jT(n,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(o,"'")})),p.hu("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var f=(0,N.X)(c,[1,c.shape[0],c.shape[1],c.shape[2]]),h=(0,N.X)(l,[l.shape[0],1,l.shape[1],l.shape[2]]),m=[1,n],g=[1,o],v="NHWC",y=te(h,f,m,r,v,g,i);return d?(0,N.X)(y,[y.shape[2],y.shape[3]]):(0,N.X)(y,[y.shape[0],y.shape[2],y.shape[3]])}});var re=(0,u.op)({conv2DBackpropInput_:function(e,t,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",u=arguments.length>6?arguments[6]:void 0;p.hu(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var c=e,l=t,d=!1;3===t.rank&&(d=!0,l=(0,N.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),c=[1,e[0],e[1],e[2]]),p.hu(4===c.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(c.length,".")})),p.hu(4===l.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(l.rank)})),p.hu(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var f="NHWC"===s?c[3]:c[1],h="NHWC"===s?l.shape[3]:l.shape[1];p.hu(f===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(f,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),p.hu(h===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),T.m("conv2dDerInput",a,u);var m={dy:l,filter:n},g={strides:r,pad:a,dataFormat:s,dimRoundingMode:u,inputShape:c},v=o.BV.runKernel(i.wm,m,g);return d?(0,N.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}});var ae=(0,u.op)({conv2dTranspose_:function(e,t,n,r,a,o){var i=(0,s._1)(e,"x","conv2dTranspose"),u=(0,s._1)(t,"filter","conv2dTranspose");return re(n,i,u,r,a,"NHWC",o)}});var oe=(0,u.op)({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],c=(0,s._1)(e,"x","conv3d"),l=(0,s._1)(t,"filter","conv3d"),d=c,f=!1;4===c.rank&&(f=!0,d=(0,N.X)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),p.hu(5===d.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(d.rank,".")})),p.hu(5===l.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(l.rank,".")})),p.hu(d.shape[4]===l.shape[3],(function(){return"Error in conv3d: depth of input (".concat(d.shape[4],") must match ")+"input depth for filter ".concat(l.shape[3],".")})),p.hu((0,T.jT)(n,u),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(u,"'")})),p.hu("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var h={x:d,filter:l},m={strides:n,pad:r,dataFormat:a,dilations:u},g=o.BV.runKernel(i.x12,h,m);return f?(0,N.X)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}});var ie=(0,u.op)({conv3DBackpropInput_:function(e,t,n,r,a){p.hu(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;4===t.rank&&(c=!0,u=(0,N.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),s=[1,e[0],e[1],e[2],e[3]]);var l=s[4],d=u.shape[4];p.hu(5===s.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(s.length,".")})),p.hu(5===u.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(u.rank)})),p.hu(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),p.hu(l===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),p.hu(d===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var f={dy:u,filter:n},h={pad:a,strides:r,inputShape:s},m=o.BV.runKernel(i.ik2,f,h);return c?(0,N.X)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}});var se=(0,u.op)({conv3dTranspose_:function(e,t,n,r,a){var o=(0,s._1)(e,"x","conv3dTranspose"),i=(0,s._1)(t,"filter","conv3dTranspose");return ie(n,o,i,r,a)}});var ue=(0,u.op)({cos_:function(e){var t={x:(0,s._1)(e,"x","cos","float32")};return o.BV.runKernel(i.mc4,t)}});var ce=(0,u.op)({cosh_:function(e){var t={x:(0,s._1)(e,"x","cosh","float32")};return o.BV.runKernel(i.TR1,t)}});var le=(0,u.op)({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,s._1)(e,"x","cumprod"),u={x:a},c={axis:t,exclusive:n,reverse:r};return o.BV.runKernel(i.Byc,u,c)}});var de=(0,u.op)({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,s._1)(e,"x","cumsum"),u={x:a},c={axis:t,exclusive:n,reverse:r};return o.BV.runKernel(i.iHb,u,c)}});var pe=(0,u.op)({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,s._1)(e,"x","denseBincount"),u=(0,s._1)(t,"weights","denseBincount");p.hu("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),p.hu(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),p.hu(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),p.hu(u.size===a.size||0===u.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(u.shape,".")}));var c={x:a,weights:u},l={size:n,binaryOutput:r};return o.BV.runKernel(i.QRR,c,l)}});var fe=(0,u.op)({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=(0,s._1)(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],u="NHWC"===n?r.shape[2]:r.shape[3],c="NHWC"===n?r.shape[3]:r.shape[1];p.hu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),p.hu(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),p.hu(u*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(u," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),p.hu(c%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(c," for depthToSpace with input shape ").concat(r.shape)}));var l={x:r},d={blockSize:t,dataFormat:n};return o.BV.runKernel(i.T0n,l,d)}});var he=(0,u.op)({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=(0,s._1)(e,"x","depthwiseConv2d","float32"),d=(0,s._1)(t,"filter","depthwiseConv2d","float32"),f=l,h=!1;3===l.rank&&(h=!0,f=(0,N.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),p.hu(4===f.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(f.rank,".")})),p.hu(4===d.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(d.rank,".")}));var m="NHWC"===a?f.shape[3]:f.shape[1];p.hu(m===d.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(m,") must match the inChannels dimension in ")+"filter ".concat(d.shape[2],".")})),T.m("depthwiseConv2d",r,c);var g={x:f,filter:d},v={strides:n,pad:r,dataFormat:a,dilations:u,dimRoundingMode:c},y=o.BV.runKernel(i.cie,g,v);return h?(0,N.X)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});var me=(0,u.op)({diag_:function(e){var t={x:(0,s._1)(e,"x","diag")};return o.BV.runKernel(i.$w,t)}});var ge=(0,u.op)({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",c=(0,s._1)(e,"x","dilation2d"),l=(0,s._1)(t,"filter","dilation2d");p.hu(3===c.rank||4===c.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(c.rank,".")})),p.hu(3===l.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(l.rank,".")})),p.hu("NHWC"===u,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(u)}));var d=c,f=!1;3===c.rank&&(d=(0,N.X)(c,[1,c.shape[0],c.shape[1],c.shape[2]]),f=!0);var h={x:d,filter:l},m={strides:n,pad:r,dilations:a},g=o.BV.runKernel(i.p4S,h,m);return f?(0,N.X)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}}),ve=n(3339),ye=n(7144);var be=(0,u.op)({equal_:function(e,t){var n=(0,s._1)(e,"a","equal","string_or_numeric"),r=(0,s._1)(t,"b","equal","string_or_numeric"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ye.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return o.BV.runKernel(i.hdR,c)}});var xe=(0,u.op)({where_:function(e,t,n){var r=(0,s._1)(t,"a","where"),a=(0,s._1)(n,"b","where"),u=(0,s._1)(e,"condition","where","bool"),c=(0,ye.assertAndGetBroadcastShape)((0,ye.assertAndGetBroadcastShape)(u.shape,r.shape),a.shape),l={condition:H(u,c),t:H(r,c),e:H(a,c)};return o.BV.runKernel(i.PhF,l)}}),ke=n(4970);var we=(0,u.op)({divNoNan_:function(e,t){var n=(0,s._1)(e,"a","div"),r=(0,s._1)(t,"b","div"),a=(0,w.makeTypesMatch)(n,r),o=(0,k.Z)(a,2);n=o[0],r=o[1];var i=(0,ve.h)(n,r),u=(0,ke.P)(i),c=be(r,u);return xe(c,u,i)}});var Se=(0,u.op)({dot_:function(e,t){var n=(0,s._1)(e,"t1","dot"),r=(0,s._1)(t,"t2","dot");p.hu((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(p.hu(a===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(o,".")})),1===n.rank&&1===r.rank){var i=(0,N.X)(n,[1,-1]),u=(0,N.X)(r,[-1,1]),c=(0,O.O)(i,u);return(0,N.X)(c,[])}if(1===n.rank&&2===r.rank){var l=(0,N.X)(n,[1,-1]),d=(0,N.X)(r,[r.shape[0],r.shape[1]]),f=(0,O.O)(l,d);return(0,N.X)(f,[f.size])}if(2===n.rank&&1===r.rank){var h=(0,N.X)(r,[-1,1]),m=(0,O.O)(n,h);return(0,N.X)(m,[m.size])}var g=(0,N.X)(r,[r.shape[0],r.shape[1]]);return(0,O.O)(n,g)}});var Ce=(0,u.op)({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return(0,s._1)(e,"tensors".concat(t),"einsum")})),u={equation:e};return o.BV.runKernel(i.$g6,a,u)}}),Ee=n(6625);var Te=(0,u.op)({erf_:function(e){var t=(0,s._1)(e,"x","erf");p.hu("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=(0,E.p)(t,"float32"));var n={x:t};return o.BV.runKernel(i.Omj,n)}}),Ne=n(1302);var _e=(0,u.op)({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","max"),a={x:r},u={reductionIndices:t,keepDims:n};return o.BV.runKernel(i.YoZ,a,u)}});var Ie=(0,u.op)({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","min"),a={x:r},u={axis:t,keepDims:n};return o.BV.runKernel(i.c17,a,u)}}),Re=n(4022),Ae=n(7297),Oe=n(6613),Pe=n(9651),De=n(3368);function Le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return(0,a.W)(e);if(1!==e.rank&&null===n)return Le((0,N.X)(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return(0,De.S)((0,a.W)(e),n);if(t===1/0)return _e((0,a.W)(e),n);if(t===-1/0)return Ie((0,a.W)(e),n);if("euclidean"===t||2===t)return(0,Oe._)((0,De.S)((0,Re.s)((0,a.W)(e),(0,Ae.i)(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return _e((0,De.S)((0,a.W)(e),n[0]),n[1]-1);if(t===1/0)return _e((0,De.S)((0,a.W)(e),n[1]),n[0]);if(t===-1/0)return Ie((0,De.S)((0,a.W)(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return(0,Oe._)((0,De.S)((0,Pe.h)(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Me=(0,u.op)({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Le(e=(0,s._1)(e,"x","norm"),t,n),o=a.shape;if(r){var i=(0,p.EC)(n,e.shape);o=Ne.rv(a.shape,i)}return(0,N.X)(a,o)}});var Fe=(0,u.op)({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Me(e,"euclidean",t,n)}});var Be=(0,u.op)({exp_:function(e){var t={x:(0,s._1)(e,"x","exp")};return o.BV.runKernel(i.NEP,t)}});var je=(0,u.op)({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s._1)(e,"x","expandDims","string_or_numeric");p.hu(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return o.BV.runKernel(i.YFo,r,a)}});var ze=(0,u.op)({expm1_:function(e){var t={x:(0,s._1)(e,"x","expm1")};return o.BV.runKernel(i.Y0y,t)}});var Ve=(0,u.op)({tile_:function(e,t){var n=(0,s._1)(e,"x","tile","string_or_numeric");p.hu(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return o.BV.runKernel(i.n9L,r,a)}});var We=(0,u.op)({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=(0,G.f)([e,t],r),o=e<=t?e:t,i=0;i<o;++i)a.set(1,i,i);var s=(0,N.X)(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return Ve(je(s,0),[n[0],1,1]);if(2===n.length)return Ve(je(je(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Ve(je(je(je(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});var Ze=(0,u.op)({floor_:function(e){var t={x:(0,s._1)(e,"x","floor","float32")};return o.BV.runKernel(i.OR,t)}}),Ue=n(218);var He=(0,u.op)({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=(0,s._1)(e,"x","gather"),u=(0,s._1)(t,"indices","gather","int32"),c={x:a,indices:u},l={axis:n,batchDims:r};return o.BV.runKernel(i.qi_,c,l)}});var Ge=(0,u.op)({greater_:function(e,t){var n=(0,s._1)(e,"a","greater","string_or_numeric"),r=(0,s._1)(t,"b","greater","string_or_numeric"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ye.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return o.BV.runKernel(i.iZT,c)}});var qe=(0,u.op)({greaterEqual_:function(e,t){var n=(0,s._1)(e,"a","greaterEqual","string_or_numeric"),r=(0,s._1)(t,"b","greaterEqual","string_or_numeric"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ye.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return o.BV.runKernel(i.Acj,c)}}),Xe=n(9338);var Ke=(0,u.op)({isFinite_:function(e){var t={x:(0,s._1)(e,"x","isFinite")};return o.BV.runKernel(i.avt,t)}});var Ye=(0,u.op)({isInf_:function(e){var t={x:(0,s._1)(e,"x","isInf")};return o.BV.runKernel(i.iWB,t)}});var Qe=(0,u.op)({isNaN_:function(e){var t={x:(0,s._1)(e,"x","isNaN")};return o.BV.runKernel(i.r7n,t)}}),$e=n(8539);var Je=(0,u.op)({less_:function(e,t){var n=(0,s._1)(e,"a","less","string_or_numeric"),r=(0,s._1)(t,"b","less","string_or_numeric"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ye.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return o.BV.runKernel(i.vtC,c)}});var et=(0,u.op)({lessEqual_:function(e,t){var n=(0,s._1)(e,"a","lessEqual","string_or_numeric"),r=(0,s._1)(t,"b","lessEqual","string_or_numeric"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ye.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return o.BV.runKernel(i.CAk,c)}});function tt(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return o.BV.runKernel(i.e7N,{},r)}var nt=(0,u.op)({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,u=(0,s._1)(e,"x","localResponseNormalization");p.hu(4===u.rank||3===u.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(u.rank,".")})),p.hu(p.GN(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var c=u,l=!1;3===u.rank&&(l=!0,c=(0,N.X)(u,[1,u.shape[0],u.shape[1],u.shape[2]]));var d={x:c},f={depthRadius:t,bias:n,alpha:r,beta:a},h=o.BV.runKernel(i.eZ0,d,f);return l?(0,N.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var rt=(0,u.op)({log_:function(e){var t={x:(0,s._1)(e,"x","log","float32")};return o.BV.runKernel(i.ZbH,t)}});var at=(0,u.op)({log1p_:function(e){var t={x:(0,s._1)(e,"x","log1p")};return o.BV.runKernel(i.kU,t)}}),ot=n(6378),it=n(6620);var st=(0,u.op)({softplus_:function(e){var t={x:(0,s._1)(e,"x","softplus")};return o.BV.runKernel(i.MRv,t)}});var ut=(0,u.op)({logSigmoid_:function(e){var t=(0,s._1)(e,"x","logSigmoid"),n=(0,ot.cb)((function(e){return{value:(0,it.W)(st((0,it.W)(e))),gradFunc:function(t){return(0,P.d)(t,(0,D.X)((0,it.W)(e)))}}}));return n(t)}}),ct=n(7848);var lt=(0,u.op)({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=(0,s._1)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=(0,ot.cb)((function(e,n){var r=_e(e,t,!0),a=(0,ct.l)(e,r),o=(0,ct.l)((0,E.p)(a,"float32"),rt((0,De.S)(Be(a),t,!0)));n([o]);return{value:o,gradFunc:function(e,n){var r=(0,k.Z)(n,1)[0],a=Be(r);return(0,ct.l)(e,(0,P.d)((0,De.S)(e,t,!0),a))}}}));return r(n)}});var dt=(0,u.op)({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","logSumExp"),a=(0,p.EC)(t,r.shape),o=_e(r,a,!0),i=(0,ct.l)(r,o),u=Be(i),c=(0,De.S)(u,a),l=rt(c),f=(0,d.I)((0,N.X)(o,l.shape),l);if(n){var h=(0,Ne.rv)(f.shape,a);return(0,N.X)(f,h)}return f}});var pt=(0,u.op)({logicalAnd_:function(e,t){var n=(0,s._1)(e,"a","logicalAnd","bool"),r=(0,s._1)(t,"b","logicalAnd","bool");(0,ye.assertAndGetBroadcastShape)(n.shape,r.shape);var a={a:n,b:r};return o.BV.runKernel(i.PYm,a)}});var ft=(0,u.op)({logicalNot_:function(e){var t={x:(0,s._1)(e,"x","logicalNot","bool")};return o.BV.runKernel(i.VfG,t)}});var ht=(0,u.op)({logicalOr_:function(e,t){var n=(0,s._1)(e,"a","logicalOr","bool"),r=(0,s._1)(t,"b","logicalOr","bool");(0,ye.assertAndGetBroadcastShape)(n.shape,r.shape);var a={a:n,b:r};return o.BV.runKernel(i.MZg,a)}});var mt=(0,u.op)({logicalXor_:function(e,t){var n=(0,s._1)(e,"a","logicalXor","bool"),r=(0,s._1)(t,"b","logicalXor","bool");return(0,ye.assertAndGetBroadcastShape)(n.shape,r.shape),pt(ht(e,t),ft(pt(e,t)))}}),gt=2147483648;var vt=(0,u.op)({searchSorted_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=(0,s._1)(e,"sortedSequence","searchSorted"),a=(0,s._1)(t,"values","searchSorted"),u=r.shape[r.shape.length-1],c=a.shape[a.shape.length-1],l=(0,N.X)(r,[-1,u]),d=(0,N.X)(a,[-1,c]);if(l.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(l.shape[0]!==d.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if((0,p.NA)(d.shape)>=gt)throw new Error("values tensor size must less than ".concat(gt));if(l.shape[1]>=gt)throw new Error("trailing dim_size must less than ".concat(gt," for int32 output type, was ").concat(l.shape[1]));var f={sortedSequence:l,values:d},h={side:n};return o.BV.runKernel(i.nr8,f,h)}});function yt(e,t){return vt(e,t,"left")}var bt=(0,u.op)({maxPool_:function(e,t,n,r,a){var u=(0,s._1)(e,"x","maxPool"),c=u,l=!1;3===u.rank&&(l=!0,c=(0,N.X)(u,[1,u.shape[0],u.shape[1],u.shape[2]])),p.hu(4===c.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(c.rank,".")})),p.hu(T.jT(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),T.m("maxPool",r,a);var d={x:c},f={filterSize:t,strides:n,pad:r,dimRoundingMode:a},h=o.BV.runKernel(i.mTV,d,f);return l?(0,N.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var xt=(0,u.op)({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",c=(0,s._1)(e,"x","maxPool3d"),l=c,d=!1;4===c.rank&&(d=!0,l=(0,N.X)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),p.hu(5===l.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(l.rank,".")})),p.hu("NDHWC"===u,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(u)})),(0,T.m)("maxPool3d",r,a);var f={x:l},h={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:u},m=o.BV.runKernel(i.OAf,f,h);return d?(0,N.X)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}});var kt=(0,u.op)({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=(0,s._1)(e,"x","maxPoolWithArgmax"),c={x:u},l={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},d=o.BV.runKernel(i.vFR,c,l);return{result:d[0],indexes:d[1]}}}),wt=n(5569);var St=(0,u.op)({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","mean"),a={x:r},u={axis:t,keepDims:n};return o.BV.runKernel(i.q2K,a,u)}});function Ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Ct(e,"float32"),r=Ct(e,"float32");return(0,Y.P)(n,r)}var a=(0,p.wT)((0,p.NA)(e),t);return o.BV.makeTensor(a,e,t)}function Et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Et(e,"float32"),r=Ct(e,"float32");return(0,Y.P)(n,r)}var a=(0,p.p8)((0,p.NA)(e),t);return o.BV.makeTensor(a,e,t)}var Tt=n(4965);function Nt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var o=(0,s._1)(e,"x","meshgrid",e instanceof Tt.es?e.dtype:"float32");if(void 0===t)return[o];var i=(0,s._1)(t,"y","meshgrid",t instanceof Tt.es?t.dtype:"float32"),u=(0,p.NA)(o.shape),c=(0,p.NA)(i.shape);return"xy"===a?(o=(0,N.X)(o,[1,-1]),i=(0,N.X)(i,[-1,1]),[(0,O.O)(Et([c,1],o.dtype),o),(0,O.O)(i,Et([1,u],i.dtype))]):(o=(0,N.X)(o,[-1,1]),i=(0,N.X)(i,[1,-1]),[(0,O.O)(o,Et([1,c],o.dtype)),(0,O.O)(Et([u,1],i.dtype),i)])}var _t=(0,u.op)({minimum_:function(e,t){var n=(0,s._1)(e,"a","minimum"),r=(0,s._1)(t,"b","minimum"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],"bool"===n.dtype&&(n=(0,E.p)(n,"int32"),r=(0,E.p)(r,"int32")),(0,ye.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return o.BV.runKernel(i.q8u,c)}});var It=(0,u.op)({mirrorPad_:function(e,t,n){p.hu("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=(0,s._1)(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");p.hu(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,u=function(e){p.hu(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),p.hu(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},c=0;c<r.rank;c++)u(c);var l={paddings:t,mode:n},d={x:r};return o.BV.runKernel(i.jQs,d,l)}});var Rt=(0,u.op)({mod_:function(e,t){var n=(0,s._1)(e,"a","mod"),r=(0,s._1)(t,"b","mod"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2),c={a:n=u[0],b:r=u[1]};return o.BV.runKernel(i.Vbg,c)}});var At=(0,u.op)({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=(0,s._1)(e,"x","moments");var r=(0,p.EC)(t,e.shape),a=St(e,r,n),o=a.shape;n||(o=(0,Ne.rv)(a.shape,r));var i=(0,Pe.h)((0,ct.l)((0,E.p)(e,"float32"),(0,N.X)(a,o))),u=St(i,r,n);return{mean:a,variance:u}}});var Ot=(0,u.op)({multiRNNCell_:function(e,t,n,r){for(var a=(0,s._1)(t,"data","multiRNNCell"),o=(0,s.sI)(n,"c","multiRNNCell"),i=(0,s.sI)(r,"h","multiRNNCell"),u=a,c=[],l=0;l<e.length;l++){var d=e[l](u,o[l],i[l]);c.push(d[0]),c.push(d[1]),u=d[1]}for(var p=[],f=[],h=0;h<c.length;h+=2)p.push(c[h]),f.push(c[h+1]);return[p,f]}});var Pt=(0,u.op)({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,s._1)(e,"logits","multinomial"),u=a.size,c=a.rank;if(u<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(u,"."));if(c>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(c));n=n||Math.random();var l=1===c?(0,N.X)(a,[1,-1]):a,d={logits:l},p={numSamples:t,seed:n,normalized:r},f=o.BV.runKernel(i.NZg,d,p);return 1===c?(0,N.X)(f,[f.size]):f}});var Dt=(0,u.op)({notEqual_:function(e,t){var n=(0,s._1)(e,"a","notEqual","string_or_numeric"),r=(0,s._1)(t,"b","notEqual","string_or_numeric"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ye.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return o.BV.runKernel(i.yQU,c)}}),Lt=n(3808);var Mt=(0,u.op)({onesLike_:function(e){var t={x:(0,s._1)(e,"x","onesLike")};return o.BV.runKernel(i.qWM,t)}});var Ft=(0,u.op)({outerProduct_:function(e,t){var n=(0,s._1)(e,"v1","outerProduct"),r=(0,s._1)(t,"v2","outerProduct");p.hu(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=(0,N.X)(n,[-1,1]),o=(0,N.X)(r,[1,-1]);return(0,O.O)(a,o)}});var Bt=(0,u.op)({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(0,s._1)(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},u={x:r};return o.BV.runKernel(i.lyA,u,a)}});var jt=(0,u.op)({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,p.hu)(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),Bt(e,[t],n)}});var zt=(0,u.op)({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,p.hu)(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Bt(e,t,n)}});var Vt=(0,u.op)({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,p.hu)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Bt(e,t,n)}});var Wt=(0,u.op)({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,p.hu)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Bt(e,t,n)}});var Zt=(0,u.op)({spaceToBatchND_:function(e,t,n){var r=(0,s._1)(e,"x","spaceToBatchND");p.hu(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),p.hu(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),p.hu(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},u={blockShape:t,paddings:n};return o.BV.runKernel(i.TQc,a,u)}});var Ut=(0,u.op)({pool_:function(e,t,n,r,a,o,i){null==a&&(a=[1,1]),null==o&&(o=1),0===r&&(r="valid");var u=(0,s._1)(e,"x","maxPool"),c=u,l=!1;3===u.rank&&(l=!0,c=(0,N.X)(u,[1,u.shape[0],u.shape[1],u.shape[2]])),p.hu(T.jT(o,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(a,"'")}));var d,f=T.Xw(c.shape,t,o,a,r),h=[f.dilationHeight,f.dilationWidth];d="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([f.filterHeight,f.filterWidth],h):[[0,0],[0,0]];var m=1===h[0]&&1===h[1],g=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),o=e.concat(r,a),i=t.map((function(e,t){return(e-o[t]%e)%e})),s=a.map((function(e,t){return e+i[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,i[t]]}));return[u,c]}([f.inHeight,f.inWidth],h,d),v=(0,k.Z)(g,2),y=v[0],b=v[1],x=m?r:"valid",w=m?c:Zt(c,h,y),S=("avg"===n?function(){return _(w,t,o,x,i)}:function(){return bt(w,t,o,x,i)})(),C=m?S:B(S,h,b);return l?(0,N.X)(C,[C.shape[1],C.shape[2],C.shape[3]]):C}}),Ht=n(1943),Gt=n(8891);var qt=(0,u.op)({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,s._1)(e,"x","prod");"bool"===r.dtype&&(r=(0,E.p)(r,"int32"));var a={x:r},u={axis:t,keepDims:n};return o.BV.runKernel(i.DlI,a,u)}});var Xt=(0,u.op)({raggedGather_:function(e,t,n,r){var a={paramsNestedSplits:e.map((function(e,t){return(0,s._1)(e,"tensors".concat(t),"raggedGather","int32")})),paramsDenseValues:(0,s._1)(t,"paramsDenseValues","raggedGather"),indices:(0,s._1)(n,"indices","raggedGather","int32")},u={outputRaggedRank:r},c=o.BV.runKernel(i.dDz,a,u);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}});var Kt=(0,u.op)({raggedTensorToTensor_:function(e,t,n,r,a){var u=(0,s._1)(e,"shape","raggedTensorToTensor","int32"),c=(0,s._1)(t,"values","raggedTensorToTensor"),l={shape:u,values:c,defaultValue:(0,s._1)(n,"defaultValue","raggedTensorToTensor",c.dtype),rowPartitionTensors:r.map((function(e,t){return(0,s._1)(e,"tensors".concat(t),"raggedTensorToTensor","int32")}))},d={rowPartitionTypes:a};return o.BV.runKernel(i.BiW,l,d)}});var Yt=(0,u.op)({rand_:function(e,t,n){var r=(0,p.NA)(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return o.BV.makeTensor(a,e,n)}}),Qt=n(5671),$t=n(3144),Jt=n(4213),en=function(){function e(t,n,r,a,o){(0,Qt.Z)(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=Jt.alea(i.toString())}return(0,$t.Z)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,o=void 0,i=void 0;do{i=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),tn=function(){function e(t,n,r,a){(0,Qt.Z)(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var o=a||Math.random();this.randu=Jt.alea(o.toString()),this.randn=new en(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return(0,$t.Z)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,o;;){do{r=this.randn.nextValue(),o=1+this.c*r}while(o<=0);if(o*=o*o,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-o+Math.log(o)),(a=this.randu())<t||Math.log(a)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),nn=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if((0,Qt.Z)(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==o&&(o=Math.random()),"number"===typeof o&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=Jt.alea(o)}return(0,$t.Z)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var rn=(0,u.op)({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var o=new tn(t,n,r,a),i=(0,G.f)(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var an=(0,u.op)({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var o=new en(t,n,r,!1,a),i=(0,G.f)(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var on=(0,u.op)({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return an(e,0,1,t,n)}});var sn=(0,u.op)({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,o=(0,G.f)(e,r),i=new nn(t,n,null,a),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});function un(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return o.BV.runKernel(i.e6w,{},a)}var cn=n(2308);var ln=(0,u.op)({reciprocal_:function(e){var t={x:(0,s._1)(e,"x","reciprocal")};return o.BV.runKernel(i.$HU,t)}}),dn=n(9155),pn=n(2066);var fn=(0,u.op)({reverse_:function(e,t){var n={x:(0,s._1)(e,"x","reverse")},r={dims:t};return o.BV.runKernel(i.mKl,n,r)}});var hn=(0,u.op)({reverse1d_:function(e){var t=(0,s._1)(e,"x","reverse");return p.hu(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),fn(t,0)}});var mn=(0,u.op)({reverse2d_:function(e,t){var n=(0,s._1)(e,"x","reverse");return p.hu(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),fn(n,t)}});var gn=(0,u.op)({reverse3d_:function(e,t){var n=(0,s._1)(e,"x","reverse");return p.hu(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),fn(n,t)}});var vn=(0,u.op)({reverse4d_:function(e,t){var n=(0,s._1)(e,"x","reverse");return p.hu(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),fn(n,t)}});var yn=(0,u.op)({round_:function(e){var t={x:(0,s._1)(e,"x","round")};return o.BV.runKernel(i.e07,t)}});var bn=(0,u.op)({rsqrt_:function(e){var t={x:(0,s._1)(e,"x","rsqrt","float32")};return o.BV.runKernel(i.bV0,t)}});var xn=(0,u.op)({selu_:function(e){var t={x:(0,s._1)(e,"x","selu")};return o.BV.runKernel(i.oFR,t)}});var kn=(0,u.op)({separableConv2d_:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",u=(0,s._1)(e,"x","separableConv2d"),c=(0,s._1)(t,"depthwiseFilter","separableConv2d"),l=(0,s._1)(n,"pointwiseFilter","separableConv2d"),d=u,f=!1;if(3===u.rank&&(f=!0,d=(0,N.X)(u,[1,u.shape[0],u.shape[1],u.shape[2]])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");p.hu(4===d.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(d.rank,".")})),p.hu(4===c.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(c.rank,".")})),p.hu(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(c.rank,".")})),p.hu(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],".")})),p.hu(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],".")}));var h=c.shape[2],m=c.shape[3];p.hu(l.shape[2]===h*m,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*m,", ")+"but got ".concat(l.shape[2],".")}));var g=he(d,c,r,a,i,o),v=1,y=te(g,l,v,"valid",i);return f?(0,N.X)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}}),wn=n(5861),Sn=n(4687),Cn=n.n(Sn);function En(){return En=(0,wn.Z)(Cn().mark((function e(t,n){var r,a,o,i,u,c,l,d,f,h,m;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,s._1)(t,"x","setdiff1d"),a=(0,s._1)(n,"y","setdiff1d"),p.hu(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),p.hu(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),p.hu(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return o=e.sent,e.next=10,a.data();case 10:for(i=e.sent,u=new Set(i),c=0,l=0;l<o.length;l++)u.has(o[l])||c++;for(d=new Tt.YD([c],r.dtype),f=new Tt.YD([c],"int32"),h=0,m=0;h<o.length;h++)u.has(o[h])||(d.values[m]=o[h],f.values[m]=h,m++);return e.abrupt("return",[d.toTensor(),f.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),En.apply(this,arguments)}var Tn=function(e,t){return En.apply(this,arguments)};var Nn=(0,u.op)({sign_:function(e){var t={x:(0,s._1)(e,"x","sign")};return o.BV.runKernel(i.i5y,t)}});var _n=(0,u.op)({sin_:function(e){var t={x:(0,s._1)(e,"x","sin","float32")};return o.BV.runKernel(i.RQH,t)}});var In=(0,u.op)({sinh_:function(e){var t={x:(0,s._1)(e,"x","sinh")};return o.BV.runKernel(i.wYB,t)}});var Rn=(0,u.op)({slice1d_:function(e,t,n){var r=(0,s._1)(e,"x","slice1d");return p.hu(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),L(r,[t],[n])}});var An=(0,u.op)({slice2d_:function(e,t,n){var r=(0,s._1)(e,"x","slice2d");return p.hu(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),L(r,t,n)}});var On=(0,u.op)({slice3d_:function(e,t,n){var r=(0,s._1)(e,"x","slice3d");return p.hu(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),L(r,t,n)}});var Pn=(0,u.op)({slice4d_:function(e,t,n){var r=(0,s._1)(e,"x","slice4d");return p.hu(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),L(r,t,n)}});var Dn=(0,u.op)({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=(0,s._1)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return o.BV.runKernel(i.Gcp,r,a)}});var Ln=(0,u.op)({fft_:function(e){(0,p.hu)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return o.BV.runKernel(i.vwp,t)}});var Mn=(0,u.op)({ifft_:function(e){(0,p.hu)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return o.BV.runKernel(i.Qg5,t)}});var Fn=(0,u.op)({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=(0,N.X)(e,[r,n]);t=Mn(a)}else{var o=[r,2*(n-1)],i=(0,N.X)((0,cn.k)(e),[r,n]),s=(0,N.X)((0,Xe.a)(e),[r,n]),u=fn(L(i,[0,1],[r,n-2]),1),c=(0,P.d)(fn(L(s,[0,1],[r,n-2]),1),(0,Ae.i)(-1)),l=A([i,u],1),d=A([s,c],1),p=(0,N.X)((0,Y.P)(l,d),[o[0],o[1]]);t=Mn(p)}if(t=(0,cn.k)(t),3===e.rank&&0!==e.shape[0]){var f=t,h=e.shape[0];t=(0,N.X)(t,[h,t.shape[0]/h,t.shape[1]]),f.dispose()}return t}});var Bn=(0,u.op)({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(0,s._1)(e,"x","split"),a={x:r},u={numOrSizeSplits:t,axis:n};return o.BV.runKernel(i.L8s,a,u)}});var jn=(0,u.op)({rfft_:function(e,t){(0,p.hu)("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var o=e.shape.map((function(e){return 0})),i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t,n=L(e,o,i),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=A([e,Ct(s)],e.shape.length-1),r=t}else n=e;var u=(0,ke.P)(n),c=(0,N.X)((0,Y.P)(n,u),[a,r]),l=Ln(c),d=Math.floor(r/2)+1,f=(0,cn.k)(l),h=(0,Xe.a)(l),m=Bn(f,[d,r-d],f.shape.length-1),g=Bn(h,[d,r-d],h.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=d,(0,N.X)((0,Y.P)(m[0],g[0]),v)}});var zn=(0,u.op)({squaredDifference_:function(e,t){var n=(0,s._1)(e,"a","squaredDifference"),r=(0,s._1)(t,"b","squaredDifference"),a=(0,w.makeTypesMatch)(n,r),u=(0,k.Z)(a,2);n=u[0],r=u[1],(0,ye.assertAndGetBroadcastShape)(n.shape,r.shape);var c={a:n,b:r};return o.BV.runKernel(i._tC,c,{})}});var Vn=(0,u.op)({squeeze_:function(e,t){var n=(0,s._1)(e,"x","squeeze","string_or_numeric");return(0,N.X)(n,(0,p.bp)(n.shape,t).newShape)}});var Wn=(0,u.op)({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s.sI)(e,"tensors","stack","string_or_numeric");p.hu(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&p.hu(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return o.BV.runKernel(i.QiL,r,a)}}),Zn=n(4977);var Un=(0,u.op)({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,p=(0,s._1)(e,"x","stridedSlice","string_or_numeric"),f={x:p},h={begin:t,end:n,strides:r,beginMask:a,endMask:u,ellipsisMask:c,newAxisMask:l,shrinkAxisMask:d};return o.BV.runKernel(i.jQk,f,h)}});var Hn=(0,u.op)({tan_:function(e){var t={x:(0,s._1)(e,"x","tan","float32")};return o.BV.runKernel(i.sEM,t)}}),Gn=n(6689),qn=n(220);function Xn(e,t){(0,p.Cq)(e);var n=(0,s.C)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,qn.H)(e,null,n,t)}function Kn(e,t,n){if((0,p.Cq)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=(0,s.C)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,qn.H)(e,t,r,n)}var Yn=n(62);function Qn(e,t,n){if((0,p.Cq)(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=(0,s.C)(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,qn.H)(e,t,r,n)}function $n(e,t,n){if((0,p.Cq)(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=(0,s.C)(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,qn.H)(e,t,r,n)}function Jn(e,t,n){if((0,p.Cq)(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=(0,s.C)(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,(0,qn.H)(e,t,r,n)}var er=(0,u.op)({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,s._1)(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var u={x:r},c={k:t,sorted:n},l=o.BV.runKernel(i.cWu,u,c),d=(0,k.Z)(l,2),p=d[0],f=d[1];return{values:p,indices:f}}});var tr=(0,u.op)({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var o=new en(t,n,r,!0,a),i=(0,G.f)(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var nr=(0,u.op)({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s._1)(e,"x","unique","string_or_numeric");(0,p.hu)(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},u=o.BV.runKernel(i.kpP,r,a),c=(0,k.Z)(u,2),l=c[0],d=c[1];return{values:l,indices:d}}});var rr=(0,u.op)({unsortedSegmentSum_:function(e,t,n){var r=(0,s._1)(e,"x","unsortedSegmentSum"),a=(0,s._1)(t,"segmentIds","unsortedSegmentSum","int32");(0,p.hu)((0,p.GN)(n),(function(){return"numSegments must be of dtype int"}));var u={x:r,segmentIds:a},c={numSegments:n};return o.BV.runKernel(i.Qvg,u,c)}});var ar=(0,u.op)({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s._1)(e,"x","unstack","string_or_numeric");p.hu(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return o.BV.runKernel(i.ToN,r,a)}});function or(e,t){return vt(e,t,"right")}function ir(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return o.BV.makeVariable(e,t,n,r)}var sr=n(1722);function ur(){return(ur=(0,wn.Z)(Cn().mark((function e(t){var n,r,a;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s._1)(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=(0,sr.Z)(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cr=function(e){return ur.apply(this,arguments)};function lr(){return lr=(0,wn.Z)(Cn().mark((function e(t,n,r){var a,o,i,u,c,l,d,f,h,m,g,v,y;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=(0,s._1)(t,"tensor","boolMask"),o=(0,s._1)(n,"mask","boolMask","bool"),i=null==r?0:r,u=o.rank,c=a.shape,p.hu(u>0,(function(){return"mask cannot be scalar"})),p.k5(c.slice(i,i+u),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,d=i;d<i+u;d++)l*=c[d];return f=c.slice(0,i).concat([l],c.slice(i+u)),h=(0,N.X)(a,f),m=(0,N.X)(o,[-1]),e.next=14,cr(m);case 14:return g=e.sent,v=Vn(g,[1]),y=He(h,v,i),t!==a&&a.dispose(),n!==o&&o.dispose(),v.dispose(),h.dispose(),m.dispose(),g.dispose(),e.abrupt("return",y);case 24:case"end":return e.stop()}}),e)}))),lr.apply(this,arguments)}var dr=function(e,t,n){return lr.apply(this,arguments)},pr=n(1231);var fr=(0,u.op)({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=(0,s._1)(e,"v","movingAverage"),i=(0,s._1)(t,"x","movingAverage"),u=(0,s._1)(n,"decay","movingAverage");(0,w.assertTypesMatch)(o,i),p.hu(p.cO(o.shape,i.shape),(function(){return"Shape mismatch in v and x"}));var c=(0,Ae.i)(1),l=(0,ct.l)(c,u),f=(0,P.d)((0,ct.l)(i,o),l);if(a){p.hu(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var h=(0,s._1)(r,"step","movingAverage");f=(0,ve.h)(f,(0,ct.l)(c,(0,Re.s)(u,h)))}return(0,d.I)(o,f)}}),hr=n(2361);var mr=(0,u.op)({scatterND_:function(e,t,n){var r=(0,s._1)(e,"indices","scatterND","int32"),a=(0,s._1)(t,"updates","scatterND");hr.validateInput(a,r,n);var u={indices:r,updates:a},c={shape:n};return o.BV.runKernel(i.xQA,u,c)}});function gr(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(o,"."));var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var vr=(0,u.op)({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=(0,s._1)(e,"sparseIndices","sparseToDense","int32"),u=(0,s._1)(t,"sparseValues","sparseToDense","string_or_numeric"),c=(0,s._1)(r,"defaultValue","sparseToDense",u.dtype);gr(a,u,n,c);var l={sparseIndices:a,sparseValues:u,defaultValue:c},d={outputShape:n};return o.BV.runKernel(i.D2d,l,d)}});var yr=(0,u.op)({gatherND_:function(e,t){var n=(0,s._1)(t,"indices","gatherND","int32"),r={params:(0,s._1)(e,"x","gatherND","string_or_numeric"),indices:n};return o.BV.runKernel(i.q1x,r)}});var br=(0,u.op)({dropout_:function(e,t,n,r){var a=(0,s._1)(e,"x","dropout");if(p.hu("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),p.hu(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Tt.es?a.clone():a;var o=function(e,t){if(null==t)return e.shape.slice();if(p.cO(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),i=1-t,u=(0,ve.h)(Ze((0,d.I)(sn(o,0,1,"float32",r),i)),i);return(0,P.d)(a,u)}});function xr(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function kr(e,t,n){for(var r=1-e%2,a=new Float32Array(e),o=0;o<e;++o){var i=2*Math.PI*o/(e+r-1);a[o]=t-n*Math.cos(i)}return Xn(a,"float32")}function wr(){return wr=(0,wn.Z)(Cn().mark((function e(t,n){var r,a,o,i,u,c,l,d,f,h,m,g,v,y,b,x=arguments;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.length>2&&void 0!==x[2]?x[2]:1,a=(0,s._1)(t,"predictions","inTopK"),o=(0,s._1)(n,"targets","inTopK"),(0,p.hu)(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),(0,p.hu)(a.rank-1===o.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(o.rank)})),(0,p.k5)(a.shape.slice(0,a.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=a.shape[a.shape.length-1],(0,p.hu)(r>0&&r<=i,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(i,"), but got ").concat(r)})),e.next=10,a.data();case 10:return u=e.sent,e.next=13,o.data();case 13:c=e.sent,l=u.length/i,d=i,f=(0,p.WP)("bool",l),h=0;case 17:if(!(h<l)){e.next=35;break}for(m=h*d,g=u.subarray(m,m+d),v=[],y=0;y<g.length;y++)v.push({value:g[y],index:y});v.sort((function(e,t){return t.value-e.value})),f[h]=0,b=0;case 25:if(!(b<r)){e.next=32;break}if(v[b].index!==c[h]){e.next=29;break}return f[h]=1,e.abrupt("break",32);case 29:b++,e.next=25;break;case 32:h++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==o&&o.dispose(),e.abrupt("return",(0,Gn.X)(f,o.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),wr.apply(this,arguments)}var Sr=function(e,t){return wr.apply(this,arguments)};var Cr=(0,u.op)({conv2DBackpropFilter_:function(e,t,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",u=arguments.length>6?arguments[6]:void 0,c=e;3===e.rank&&(c=(0,N.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var l=t;3===l.rank&&(l=(0,N.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),p.hu(4===c.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(c.shape,".")})),p.hu(4===l.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(l.shape,".")})),p.hu(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var d="NHWC"===s?c.shape[3]:c.shape[1],f="NHWC"===s?l.shape[3]:l.shape[1];p.hu(d===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(d,") must ")+"match input depth in filter (".concat(n[2],".")})),p.hu(f===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(f,") must ")+"match output depth for filter (".concat(n[3],").")})),T.m("conv2dDerFilter",a,u);var h={x:c,dy:l},m={strides:r,pad:a,dataFormat:s,dimRoundingMode:u,filterShape:n};return o.BV.runKernel(i.wUP,h,m)}}),Er=n(4464);var Tr=(0,u.op)({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,u=e.dataFormat,c=void 0===u?"NHWC":u,l=e.dilations,f=void 0===l?[1,1]:l,h=e.dimRoundingMode,m=e.bias,g=e.activation,v=void 0===g?"linear":g,y=e.preluActivationWeights,b=e.leakyreluAlpha;if(v=v||"linear",!1===(0,Er.uy)(o.BV.state.gradientDepth,v)){p.hu("NHWC"===c,(function(){return"Error in fused conv2d: got dataFormat of ".concat(c," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var x=te(t,n,r,a,c,f,h);return null!=m&&(x=(0,d.I)(x,m)),(0,Er.QH)(x,v,y,b)}var S=(0,s._1)(t,"x","conv2d","float32"),C=(0,s._1)(n,"filter","conv2d","float32"),E=S,_=!1;3===S.rank&&(_=!0,E=(0,N.X)(S,[1,S.shape[0],S.shape[1],S.shape[2]])),p.hu(4===E.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(E.rank,".")})),p.hu(4===C.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(C.rank,".")})),T.m("fused conv2d",a,h);var I="NHWC"===c?E.shape[3]:E.shape[1];p.hu(C.shape[2]===I,(function(){return"Error in conv2d: depth of input (".concat(I,") must match ")+"input depth for filter ".concat(C.shape[2],".")})),p.hu(T.jT(r,f),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(f,"'")}));var R,A,O=T.Ix(E.shape,C.shape,r,f,a,h);if(null!=m){R=(0,s._1)(m,"bias","fused conv2d");var P=(0,w.makeTypesMatch)(R,S),D=(0,k.Z)(P,1);R=D[0],"NHWC"===c?ye.assertAndGetBroadcastShape(O.outShape,R.shape):(p.hu(R.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(R.shape.length,".")})),p.hu(0===R.shape.length||R.shape[0]===O.outChannels||1===R.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(R.shape,") is not ")+"compatible with the number of output channels "+"(".concat(O.outChannels,")")})))}if(null!=y){var L=y.shape;if(p.hu(L.length<=1||3===L.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(L.length,".")})),1===L.length)p.hu(1===L[0]||L[0]===O.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(L,") is not compatible with the number of output ")+"channels (".concat(O.outChannels,").")}));else if(3===L.length)try{ye.assertAndGetBroadcastShape(L,O.outShape)}catch(W){var M="Error in fused conv2d: PReLU activation weights (".concat(L,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(O.outShape,").");throw Error(M)}A=(0,s._1)(y,"prelu weights","fused conv2d")}var F=function(e,t){p.hu("NHWC"===c,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(c," but only NHWC is currently supported.")}));var n=(0,k.Z)(t,4),o=n[0],i=n[1],s=n[2],u=n[3],l=(0,Er.Fr)(e,s,v);p.hu(T.I0(f),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(f,"'")}));var d=[re(i.shape,l,o,r,a),Cr(i,l,o.shape,r,a)];if(null!=u){var h=(0,Er.pf)(u,l);d.push(h)}return d},B={x:E,filter:C,bias:R,preluActivationWeights:A},j={strides:r,pad:a,dataFormat:c,dilations:f,dimRoundingMode:h,activation:v,leakyreluAlpha:b};if(null==m){var z=(0,ot.cb)((function(e,t,n){var r=o.BV.runKernel(i._V0,B,j);return n([t,e,r]),_&&(r=(0,N.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:F}}));return z(E,C)}var V=(0,ot.cb)((function(e,t,n,r){var a=o.BV.runKernel(i._V0,B,j);return r([t,e,a,n]),_&&(a=(0,N.X)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:F}}));return V(E,C,R)}});var Nr=(0,u.op)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],u=arguments.length>6?arguments[6]:void 0,c=e;3===e.rank&&(c=(0,N.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var l=t;3===l.rank&&(l=(0,N.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d={x:c,dy:l},p={strides:r,pad:a,dimRoundingMode:u,dilations:s,filterShape:n};return o.BV.runKernel(i.sL$,d,p)}});var _r=(0,u.op)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],u=arguments.length>6?arguments[6]:void 0,c=t,l=!1;3===t.rank&&(l=!0,c=(0,N.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d={dy:c,filter:n},p={strides:r,pad:a,dimRoundingMode:u,dilations:s,inputShape:e},f=o.BV.runKernel(i.y7R,d,p);return l?(0,N.X)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var Ir=(0,u.op)({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,u=e.dataFormat,c=void 0===u?"NHWC":u,l=e.dilations,f=void 0===l?[1,1]:l,h=e.dimRoundingMode,m=e.bias,g=e.activation,v=void 0===g?"linear":g,y=e.preluActivationWeights,b=e.leakyreluAlpha;if(!1===(0,Er.uy)(o.BV.state.gradientDepth,v)){var x=he(t,n,r,a,c,f,h);return null!=m&&(x=(0,d.I)(x,m)),(0,Er.QH)(x,v,y,b)}var S=(0,s._1)(t,"x","depthwiseConv2d","float32"),C=(0,s._1)(n,"filter","depthwiseConv2d","float32"),E=S,_=!1;3===S.rank&&(_=!0,E=(0,N.X)(S,[1,S.shape[0],S.shape[1],S.shape[2]])),p.hu(4===E.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(E.rank,".")})),p.hu(4===C.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(C.rank,".")})),p.hu(E.shape[3]===C.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(E.shape[3],") must match the inChannels dimension in ")+"filter ".concat(C.shape[2],".")})),null==f&&(f=[1,1]),p.hu(T.jT(r,f),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(f,"'")})),T.m("fused depthwiseConv2d",a,h);var I,R,A=T.Ix(E.shape,C.shape,r,f,a,h,!0);if(null!=m){I=(0,s._1)(m,"bias","fused conv2d");var O=(0,w.makeTypesMatch)(I,S),P=(0,k.Z)(O,1);I=P[0],ye.assertAndGetBroadcastShape(A.outShape,I.shape)}null!=y&&(R=(0,s._1)(y,"prelu weights","fused depthwiseConv2d"));var D=function(e,t){p.hu(T.I0(f),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(f,"'")}));var n=(0,k.Z)(t,4),o=n[0],i=n[1],s=n[2],u=n[3],c=(0,Er.Fr)(e,s,v),l=_r(i.shape,c,o,r,a,f,h),d=Nr(i,c,o.shape,r,a,f,h);return null!=u?[l,d,(0,Er.pf)(I,c)]:[l,d]},L={x:E,filter:C,bias:I,preluActivationWeights:R},M={strides:r,pad:a,dataFormat:c,dilations:f,dimRoundingMode:h,activation:v,leakyreluAlpha:b};if(null==m){var F=(0,ot.cb)((function(e,t,n){var r=o.BV.runKernel(i.luS,L,M);return n([t,e,r]),_&&(r=(0,N.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:D}}));return F(E,C)}var B=(0,ot.cb)((function(e,t,n,r){var a=o.BV.runKernel(i.luS,L,M);return r([t,e,a,n]),_&&(a=(0,N.X)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:D}}));return B(E,C,I)}});var Rr=(0,u.op)({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,u=e.transposeB,c=void 0!==u&&u,l=e.bias,f=e.activation,h=void 0===f?"linear":f,m=e.preluActivationWeights,g=e.leakyreluAlpha,v=void 0===g?.2:g;if(!1===(0,Er.uy)(o.BV.state.gradientDepth,h)){var y=(0,O.O)(t,n,a,c);return null!=l&&(y=(0,d.I)(y,l)),(0,Er.QH)(y,h,m,v)}var b=(0,s._1)(t,"a","fused matMul"),x=(0,s._1)(n,"b","fused matMul"),S=(0,w.makeTypesMatch)(b,x),C=(0,k.Z)(S,2);b=C[0],x=C[1];var E=a?b.shape[b.rank-2]:b.shape[b.rank-1],T=c?x.shape[x.rank-1]:x.shape[x.rank-2],_=a?b.shape[b.rank-1]:b.shape[b.rank-2],I=c?x.shape[x.rank-2]:x.shape[x.rank-1],R=b.shape.slice(0,-2),A=x.shape.slice(0,-2),P=p.NA(R),D=p.NA(A);p.hu(E===T,(function(){return"Error in fused matMul: inner shapes (".concat(E,") and (")+"".concat(T,") of Tensors with shapes ").concat(b.shape," and ")+"".concat(x.shape," and transposeA=").concat(a)+" and transposeB=".concat(c," must match.")}));var L,M,F=ye.assertAndGetBroadcastShape(b.shape.slice(0,-2),x.shape.slice(0,-2)).concat([_,I]),B=a?(0,N.X)(b,[P,E,_]):(0,N.X)(b,[P,_,E]),j=c?(0,N.X)(x,[D,I,T]):(0,N.X)(x,[D,T,I]);if(null!=l){L=(0,s._1)(l,"bias","fused matMul");var z=(0,w.makeTypesMatch)(L,b);L=(0,k.Z)(z,1)[0],ye.assertAndGetBroadcastShape(F,L.shape)}null!=m&&(M=(0,s._1)(m,"prelu weights","fused matMul"));var V=function(e,t){var n,r,o=(0,k.Z)(t,4),i=o[0],s=o[1],u=o[2],d=o[3],p=(0,Er.Fr)((0,N.X)(e,u.shape),u,h);return a||c?!a&&c?(n=(0,O.O)(p,s,!1,!1),r=(0,O.O)(p,i,!0,!1)):a&&!c?(n=(0,O.O)(s,p,!1,!0),r=(0,O.O)(i,p,!1,!1)):(n=(0,O.O)(s,p,!0,!0),r=(0,O.O)(p,i,!0,!0)):(n=(0,O.O)(p,s,!1,!0),r=(0,O.O)(i,p,!0,!1)),null!=l?[n,r,(0,Er.pf)(d,p)]:[n,r]},W={a:B,b:j,bias:L,preluActivationWeights:M},Z={transposeA:a,transposeB:c,activation:h,leakyreluAlpha:v};if(null==l){var U=(0,ot.cb)((function(e,t,n){var r=o.BV.runKernel(i.usg,W,Z);return n([e,t,r]),{value:(0,N.X)(r,F),gradFunc:V}}));return U(B,j)}var H=(0,ot.cb)((function(e,t,n,r){var a=o.BV.runKernel(i.usg,W,Z);return r([e,t,a,n]),{value:(0,N.X)(a,F),gradFunc:V}}));return H(B,j,L)}});var Ar=(0,u.op)({hammingWindow_:function(e){return kr(e,.54,.46)}});var Or=(0,u.op)({hannWindow_:function(e){return kr(e,.5,.5)}});var Pr=(0,u.op)({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=0,i=[];o+t<=e.size;)i.push(L(e,o,t)),o+=n;if(r)for(;o<e.size;){var s=o+t-e.size,u=A([L(e,o,t-s),(0,X.h)([s],a)]);i.push(u),o+=n}return 0===i.length?Kn([],[0,t]):(0,N.X)(A(i),[i.length,t])}});var Dr=(0,u.op)({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Or;null==r&&(r=xr(t));var o=Pr(e,t,n),i=(0,P.d)(o,a(t));return jn(i,r)}});var Lr=(0,u.op)({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=(0,s._1)(e,"image","cropAndResize"),l=(0,s._1)(t,"boxes","cropAndResize","float32"),d=(0,s._1)(n,"boxInd","cropAndResize","int32"),f=l.shape[0];p.hu(4===c.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(c.rank,".")})),p.hu(2===l.rank&&4===l.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(f,",4] ")+"but had shape ".concat(l.shape,".")})),p.hu(1===d.rank&&d.shape[0]===f,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(f,"] ")+"but had shape ".concat(l.shape,".")})),p.hu(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),p.hu(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),p.hu("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var h={image:c,boxes:l,boxInd:d},m={method:a,extrapolationValue:u,cropSize:r},g=o.BV.runKernel(i.VcC,h,m);return g}});var Mr=(0,u.op)({flipLeftRight_:function(e){var t=(0,s._1)(e,"image","flipLeftRight","float32");p.hu(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return o.BV.runKernel(i.Uyb,n,{})}});var Fr=(0,u.op)({grayscaleToRGB_:function(e){var t=(0,s._1)(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];p.hu(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),p.hu(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,Ve(t,a)}});var Br=(0,u.op)({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=(0,s._1)(e,"image","rotateWithOffset","float32");p.hu(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var u={image:a},c={radians:t,fillValue:n,center:r},l=o.BV.runKernel(i.b9H,u,c);return l}});function jr(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);var i=e.shape[0];return n=Math.min(n,i),p.hu(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),p.hu(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),p.hu(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),p.hu(1===t.rank,(function(){return"scores must be a 1D tensor"})),p.hu(t.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected ".concat(i,", ")+"but was ".concat(t.shape[0])})),p.hu(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(o,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var zr=(0,u.op)({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,u=(0,s._1)(e,"boxes","nonMaxSuppression","float32"),c=(0,s._1)(t,"scores","nonMaxSuppression","float32"),l=jr(u,c,n,r,a),d={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:a=l.scoreThreshold};return o.BV.runKernel(i.uv1,{boxes:u,scores:c},d)}}),Vr=n(6381);function Wr(){return Wr=(0,wn.Z)(Cn().mark((function e(t,n,r){var a,o,i,u,c,l,d,p,f,h,m=arguments;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,o=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,i=(0,s._1)(t,"boxes","nonMaxSuppressionAsync"),u=(0,s._1)(n,"scores","nonMaxSuppressionAsync"),c=jr(i,u,r,a,o),r=c.maxOutputSize,a=c.iouThreshold,o=c.scoreThreshold,e.next=10,Promise.all([i.data(),u.data()]);case 10:return l=e.sent,d=l[0],p=l[1],f=(0,Vr.GP)(d,p,r,a,o),h=f.selectedIndices,i!==t&&i.dispose(),u!==n&&u.dispose(),e.abrupt("return",Xn(h,"int32"));case 17:case"end":return e.stop()}}),e)}))),Wr.apply(this,arguments)}var Zr=function(e,t,n){return Wr.apply(this,arguments)};var Ur=(0,u.op)({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=(0,s._1)(e,"boxes","nonMaxSuppression"),l=(0,s._1)(t,"scores","nonMaxSuppression"),d=jr(c,l,n,r,a,u),p={boxes:c,scores:l},f={maxOutputSize:n=d.maxOutputSize,iouThreshold:r=d.iouThreshold,scoreThreshold:a=d.scoreThreshold,softNmsSigma:u=d.softNmsSigma},h=o.BV.runKernel(i.W0H,p,f);return{selectedIndices:h[0],selectedScores:h[1]}}});function Hr(){return Hr=(0,wn.Z)(Cn().mark((function e(t,n,r){var a,o,i,u,c,l,d,p,f,h,m,g,v=arguments;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,o=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,i=v.length>5&&void 0!==v[5]?v[5]:0,u=(0,s._1)(t,"boxes","nonMaxSuppressionAsync"),c=(0,s._1)(n,"scores","nonMaxSuppressionAsync"),l=jr(u,c,r,a,o,i),r=l.maxOutputSize,a=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma,e.next=12,Promise.all([u.data(),c.data()]);case 12:return d=e.sent,p=d[0],f=d[1],h=(0,Vr.pA)(p,f,r,a,o,i),m=h.selectedIndices,g=h.selectedScores,u!==t&&u.dispose(),c!==n&&c.dispose(),e.abrupt("return",{selectedIndices:Xn(m,"int32"),selectedScores:Xn(g)});case 19:case"end":return e.stop()}}),e)}))),Hr.apply(this,arguments)}var Gr=function(e,t,n){return Hr.apply(this,arguments)};var qr=(0,u.op)({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=(0,s._1)(e,"boxes","nonMaxSuppression"),l=(0,s._1)(t,"scores","nonMaxSuppression"),d=jr(c,l,n,r,a,null),p=d.maxOutputSize,f=d.iouThreshold,h=d.scoreThreshold,m={boxes:c,scores:l},g={maxOutputSize:p,iouThreshold:f,scoreThreshold:h,padToMaxOutputSize:u},v=o.BV.runKernel(i.cye,m,g);return{selectedIndices:v[0],validOutputs:v[1]}}});function Xr(){return Xr=(0,wn.Z)(Cn().mark((function e(t,n,r){var a,o,i,u,c,l,d,p,f,h,m,g,v,y,b,x,w=arguments;return Cn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w.length>3&&void 0!==w[3]?w[3]:.5,o=w.length>4&&void 0!==w[4]?w[4]:Number.NEGATIVE_INFINITY,i=w.length>5&&void 0!==w[5]&&w[5],u=(0,s._1)(t,"boxes","nonMaxSuppressionAsync"),c=(0,s._1)(n,"scores","nonMaxSuppressionAsync"),l=jr(u,c,r,a,o,null),d=l.maxOutputSize,p=l.iouThreshold,f=l.scoreThreshold,e.next=11,Promise.all([u.data(),c.data()]);case 11:return h=e.sent,m=(0,k.Z)(h,2),g=m[0],v=m[1],y=(0,Vr.qP)(g,v,d,p,f,i),b=y.selectedIndices,x=y.validOutputs,u!==t&&u.dispose(),c!==n&&c.dispose(),e.abrupt("return",{selectedIndices:Xn(b,"int32"),validOutputs:(0,Ae.i)(x,"int32")});case 19:case"end":return e.stop()}}),e)}))),Xr.apply(this,arguments)}var Kr=function(e,t,n){return Xr.apply(this,arguments)},Yr=n(3878),Qr=n(9199),$r=n(181),Jr=n(5267);function ea(e){return(0,Yr.Z)(e)||(0,Qr.Z)(e)||(0,$r.Z)(e)||(0,Jr.Z)()}var ta=(0,u.op)({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,s._1)(e,"images","resizeBilinear");p.hu(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),p.hu(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),p.hu(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var u=a,c=!1;3===a.rank&&(c=!0,u=(0,N.X)(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ea(t);var l={images:u},d={alignCorners:n,halfPixelCenters:r,size:t},f=o.BV.runKernel(i._Yw,l,d);return c?(0,N.X)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var na=(0,u.op)({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,s._1)(e,"images","resizeNearestNeighbor");p.hu(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),p.hu(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),p.hu("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),p.hu(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var u=a,c=!1;3===a.rank&&(c=!0,u=(0,N.X)(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ea(t);var l={images:u},d={alignCorners:n,halfPixelCenters:r,size:t},f=o.BV.runKernel(i.dpD,l,d);return c?(0,N.X)(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});function ra(e,t){for(var n,r,a,o,i,s,u=Xn([-1]),c=Xn([0]),l=Xn([0]),p=0;p<e.size-1;p++){n=L(e,0,p+1),r=L(e,p+1),i=(0,ve.h)((0,De.S)(n),t),s=(0,ve.h)((0,De.S)(r),t);var f=(0,De.S)((0,P.d)(n,un(0,n.size)));a=(0,ve.h)(f,(0,De.S)(n));var h=(0,X.h)(r.shape,n.size),m=(0,d.I)(un(0,r.size),h),g=(0,P.d)(r,m);o=(0,ve.h)((0,De.S)(g),(0,De.S)(r));var v=(0,ct.l)(a,o),y=(0,ct.l)(a,o),b=(0,P.d)(i,s);l=(0,P.d)((0,P.d)(b,v),y);var x=Ge(l,c);c=xe(x,l,c),u=xe(x,Xn([p]),u)}return u}var aa=(0,u.op)({threshold_:function(e){var t,n,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,c=(0,s._1)(e,"image","threshold"),l=.2989,f=.587,h=.114,m=c.shape[0]*c.shape[1],g=(0,P.d)(Xn([u]),255);if(p.hu(3===c.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(c.rank,".")})),p.hu(3===c.shape[2]||1===c.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(c.shape[2],".")})),p.hu("int32"===c.dtype||"float32"===c.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(c.dtype,".")})),p.hu("otsu"===o||"binary"===o,(function(){return"Method must be binary or otsu, but was ".concat(o)})),3===c.shape[2]){var v=Bn(c,[1,1,1],-1),y=(0,k.Z)(v,3);t=y[0],n=y[1],r=y[2];var b=(0,P.d)(t,l),x=(0,P.d)(n,f),w=(0,P.d)(r,h);a=(0,d.I)((0,d.I)(b,x),w)}else a=e;if("otsu"===o){var S=Z((0,E.p)(yn(a),"int32"),(0,Gn.X)([]),256);g=ra(S,m)}var C=i?et(a,g):Ge(a,g),T=(0,E.p)((0,P.d)(C,255),"int32");return T}});var oa=(0,u.op)({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5?arguments[5]:void 0,c=(0,s._1)(e,"image","transform","float32"),l=(0,s._1)(t,"transforms","transform","float32");p.hu(4===c.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(c.rank,".")})),p.hu(2===l.rank&&(l.shape[0]===c.shape[0]||1===l.shape[0])&&8===l.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),p.hu(null==u||2===u.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(u,".")}));var d={image:c,transforms:l},f={interpolation:n,fillMode:r,fillValue:a,outputShape:u};return o.BV.runKernel(i.wx7,d,f)}});var ia=(0,u.op)({bandPart_:function(e,t,n){(0,p.hu)(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),(0,p.hu)(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=(0,s._1)(e,"a","bandPart");(0,p.hu)(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,o=r.shape.slice(-2),i=(0,k.Z)(o,2),u=i[0],c=i[1];if(!(t<=u))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(u,")."));if(!(n<=c))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(c,")."));t<0&&(t=u),n<0&&(n=c);var l=(0,N.X)(un(0,u,1,"int32"),[-1,1]),d=un(0,c,1,"int32"),f=(0,ct.l)(l,d),h=pt(et(f,(0,Ae.i)(+t,"int32")),qe(f,(0,Ae.i)(-n,"int32"))),m=Ct([u,c],r.dtype);return(0,N.X)(Wn(ar((0,N.X)(r,[-1,u,c])).map((function(e){return xe(h,e,m)}))),a)}});var sa=(0,u.op)({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,(0,p.hu)(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){(0,p.hu)(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=Bn(e,e.shape[0],0).map((function(e){return Vn(e,[0])}))),(0,p.hu)(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(o.BV.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var o=(0,P.d)((0,De.S)((0,P.d)(n[a],t)),n[a]);t=(0,ct.l)(t,o)}return(0,ve.h)(t,Me(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?Wn(n,0):n}}),ua=n(2433);function ca(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.BV.tidy((function(){(0,p.hu)(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=We(n),i=(0,R.d)(e),s=Kn([[1]],[1,1]),u=(0,R.d)(s),c=n>=r?r:n,l=function(e){var t=i,c=u,l=a,d=o.BV.tidy((function(){var t=L(i,[e,e],[n-e,1]),o=Me(t),c=L(i,[e,e],[1,1]),l=xe(Ge(c,0),Kn([[-1]]),Kn([[1]])),d=(0,ct.l)(c,(0,P.d)(l,o)),p=(0,ve.h)(t,d);u=1===p.shape[0]?(0,R.d)(s):A([s,L(p,[1,0],[p.shape[0]-1,p.shape[1]])],0);var f=(0,it.W)((0,ve.h)((0,O.O)(l,d),o)),h=L(i,[e,0],[n-e,r]),m=(0,P.d)(f,u),g=(0,pr.p)(u);if(0===e)i=(0,ct.l)(h,(0,O.O)(m,(0,O.O)(g,h)));else{var v=(0,ct.l)(h,(0,O.O)(m,(0,O.O)(g,h)));i=A([L(i,[0,0],[e,r]),v],0)}var y=(0,pr.p)(m),b=L(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=(0,ct.l)(b,(0,O.O)((0,O.O)(b,u),y));else{var x=(0,ct.l)(b,(0,O.O)((0,O.O)(b,u),y));a=A([L(a,[0,0],[n,e]),x],1)}return[u,i,a]})),p=(0,k.Z)(d,3);u=p[0],i=p[1],a=p[2],(0,ua.B9)([t,c,l])},d=0;d<c;++d)l(d);return!t&&n>r&&(a=L(a,[0,0],[n,r]),i=L(i,[0,0],[r,r])),[a,i]}))}var la=(0,u.op)({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,p.hu)(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return ca(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=ar((0,N.X)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];r.forEach((function(e){var n=ca(e,t),r=(0,k.Z)(n,2),i=r[0],s=r[1];a.push(i),o.push(s)}));var i=(0,N.X)(Wn(a,0),e.shape),s=(0,N.X)(Wn(o,0),e.shape);return[i,s]}}),da=n(8108);var pa=(0,u.op)({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:da.I.SUM_BY_NONZERO_WEIGHTS,r=(0,s._1)(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=(0,s._1)(t,"weights","computeWeightedLoss"));var o=null==a?r:(0,P.d)(r,a);if(n===da.I.NONE)return o;if(n===da.I.SUM)return(0,De.S)(o);if(n===da.I.MEAN){if(null==a)return St(o);var i=r.size/a.size,u=(0,ve.h)((0,De.S)(o),(0,De.S)(a));return i>1?(0,ve.h)(u,(0,Ae.i)(i)):u}if(n===da.I.SUM_BY_NONZERO_WEIGHTS){if(null==a)return(0,ve.h)((0,De.S)(o),(0,Ae.i)(r.size));var c=(0,P.d)(a,Et(r.shape)),l=(0,E.p)((0,De.S)(Dt(c,(0,Ae.i)(0))),"float32");return(0,ve.h)((0,De.S)(o),l)}throw Error("Unknown reduction: ".concat(n))}});var fa=(0,u.op)({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:da.I.SUM_BY_NONZERO_WEIGHTS,o=(0,s._1)(e,"labels","absoluteDifference"),i=(0,s._1)(t,"predictions","absoluteDifference"),u=null;null!=n&&(u=(0,s._1)(n,"weights","absoluteDifference")),(0,p.k5)(o.shape,i.shape,"Error in absoluteDifference: ");var c=(0,a.W)((0,ct.l)(o,i));return pa(c,u,r)}});var ha=(0,u.op)({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:da.I.SUM_BY_NONZERO_WEIGHTS,o=(0,s._1)(e,"labels","cosineDistance"),i=(0,s._1)(t,"predictions","cosineDistance"),u=null;null!=r&&(u=(0,s._1)(r,"weights","cosineDistance")),(0,p.k5)(o.shape,i.shape,"Error in cosineDistance: ");var c=(0,Ae.i)(1),l=(0,ct.l)(c,(0,De.S)((0,P.d)(o,i),n,!0));return pa(l,u,a)}});var ma=(0,u.op)({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:da.I.SUM_BY_NONZERO_WEIGHTS,a=(0,s._1)(e,"labels","hingeLoss"),o=(0,s._1)(t,"predictions","hingeLoss"),i=null;null!=n&&(i=(0,s._1)(n,"weights","hingeLoss")),(0,p.k5)(a.shape,o.shape,"Error in hingeLoss: ");var u=(0,Ae.i)(1);a=(0,ct.l)((0,P.d)((0,Ae.i)(2),a),u);var c=(0,dn.U)((0,ct.l)(u,(0,P.d)(a,o)));return pa(c,i,r)}});var ga=(0,u.op)({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:da.I.SUM_BY_NONZERO_WEIGHTS,i=(0,s._1)(e,"labels","huberLoss"),u=(0,s._1)(t,"predictions","huberLoss"),c=null;null!=n&&(c=(0,s._1)(n,"weights","huberLoss")),(0,p.k5)(i.shape,u.shape,"Error in huberLoss: ");var l=(0,Ae.i)(r),f=(0,a.W)((0,ct.l)(u,i)),h=_t(f,l),m=(0,ct.l)(f,h),g=(0,d.I)((0,P.d)((0,Ae.i)(.5),(0,Pe.h)(h)),(0,P.d)(l,m));return pa(g,c,o)}});var va=(0,u.op)({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:da.I.SUM_BY_NONZERO_WEIGHTS,o=(0,s._1)(e,"labels","logLoss"),i=(0,s._1)(t,"predictions","logLoss"),u=null;null!=n&&(u=(0,s._1)(n,"weights","logLoss")),(0,p.k5)(o.shape,i.shape,"Error in logLoss: ");var c=(0,Ae.i)(1),l=(0,Ae.i)(r),f=(0,it.W)((0,P.d)(o,rt((0,d.I)(i,l)))),h=(0,P.d)((0,ct.l)(c,o),rt((0,d.I)((0,ct.l)(c,i),l))),m=(0,ct.l)(f,h);return pa(m,u,a)}});var ya=(0,u.op)({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:da.I.SUM_BY_NONZERO_WEIGHTS,a=(0,s._1)(e,"labels","meanSquaredError"),o=(0,s._1)(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=(0,s._1)(n,"weights","meanSquaredError")),(0,p.k5)(a.shape,o.shape,"Error in meanSquaredError: ");var u=zn(a,o);return pa(u,i,r)}});function ba(e,t){var n=(0,s._1)(e,"labels","sigmoidCrossEntropyWithLogits"),r=(0,s._1)(t,"logits","sigmoidCrossEntropyWithLogits");(0,p.k5)(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=(0,dn.U)(r),i=(0,P.d)(r,n),u=at(Be((0,it.W)((0,a.W)(r))));return(0,d.I)((0,ct.l)(o,i),u)}var xa=(0,u.op)({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:da.I.SUM_BY_NONZERO_WEIGHTS,o=(0,s._1)(e,"multiClassLabels","sigmoidCrossEntropy"),i=(0,s._1)(t,"logits","sigmoidCrossEntropy"),u=null;if(null!=n&&(u=(0,s._1)(n,"weights","sigmoidCrossEntropy")),(0,p.k5)(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=(0,Ae.i)(r),l=(0,Ae.i)(1),f=(0,Ae.i)(.5);o=(0,d.I)((0,P.d)(o,(0,ct.l)(l,c)),(0,P.d)(f,c))}var h=ba(o,i);return pa(h,u,a)}});function ka(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=(0,ot.cb)((function(e,t,r){var a=dt(t,[n],!0),o=(0,ct.l)((0,E.p)(t,"float32"),a);r([e,o]);var i=(0,it.W)((0,P.d)(o,e));return{value:(0,De.S)(i,[n]),gradFunc:function(e,t){var r=(0,k.Z)(t,2),a=r[0],o=r[1],i=(0,Ne.rv)(e.shape,[n]);return[(0,P.d)((0,N.X)(e,i),(0,ct.l)((0,E.p)(a,"float32"),Be(o))),(0,P.d)((0,N.X)(e,i),(0,ct.l)(Be(o),(0,E.p)(a,"float32")))]}}}));return r(e,t)}var wa=(0,u.op)({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:da.I.SUM_BY_NONZERO_WEIGHTS,o=(0,s._1)(e,"onehotLabels","softmaxCrossEntropy"),i=(0,s._1)(t,"logits","softmaxCrossEntropy"),u=null;if(null!=n&&(u=(0,s._1)(n,"weights","softmaxCrossEntropy")),(0,p.k5)(o.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var c=(0,Ae.i)(r),l=(0,Ae.i)(1),f=(0,Ae.i)(o.shape[1]);o=(0,d.I)((0,P.d)(o,(0,ct.l)(l,c)),(0,ve.h)(c,f))}var h=ka(o,i);return pa(h,u,a)}});var Sa=(0,u.op)({sparseFillEmptyRows_:function(e,t,n,r){var a=(0,s._1)(e,"indices","sparseFillEmptyRows","int32"),u=(0,s._1)(t,"values","sparseFillEmptyRows"),c=(0,s._1)(n,"denseShape","sparseFillEmptyRows","int32"),l=(0,s._1)(r,"defaultValue","sparseFillEmptyRows",u.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==u.rank)throw new Error("Values should be Tensor1D but received shape ".concat(u.shape));if(1!==c.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(c.shape));if(0!==l.rank)throw new Error("Default value should be a scalar but received shape ".concat(l.shape));var d={indices:a,values:u,denseShape:c,defaultValue:l},p=o.BV.runKernel(i.O3z,d);return{outputIndices:p[0],outputValues:p[1],emptyRowIndicator:p[2],reverseIndexMap:p[3]}}});var Ca=(0,u.op)({sparseReshape_:function(e,t,n){var r=(0,s._1)(e,"inputIndices","sparseReshape","int32"),a=(0,s._1)(t,"inputShape","sparseReshape","int32"),u=(0,s._1)(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==u.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(u.shape));var c={inputIndices:r,inputShape:a,newShape:u},l=o.BV.runKernel(i.nhH,c);return{outputIndices:l[0],outputShape:l[1]}}});var Ea=(0,u.op)({sparseSegmentMean_:function(e,t,n){var r=(0,s._1)(e,"data","sparseSegmentMean"),a=(0,s._1)(t,"indices","sparseSegmentMean","int32"),u=(0,s._1)(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==u.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(u.shape));var c={data:r,indices:a,segmentIds:u};return o.BV.runKernel(i.w3H,c)}});var Ta=(0,u.op)({sparseSegmentSum_:function(e,t,n){var r=(0,s._1)(e,"data","sparseSegmentSum"),a=(0,s._1)(t,"indices","sparseSegmentSum","int32"),u=(0,s._1)(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==u.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(u.shape));var c={data:r,indices:a,segmentIds:u};return o.BV.runKernel(i.ZjV,c)}});var Na=(0,u.op)({stringNGrams_:function(e,t,n,r,a,u,c,l){var d=(0,s._1)(e,"data","stringNGrams","string");if("string"!==d.dtype)throw new Error("Data must be of datatype string");if(1!==d.shape.length)throw new Error("Data must be a vector, saw: ".concat(d.shape));var p=(0,s._1)(t,"dataSplits","stringNGrams");if("int32"!==p.dtype)throw new Error("Data splits must be of datatype int32");var f={separator:n,nGramWidths:r,leftPad:a,rightPad:u,padWidth:c,preserveShortSequences:l},h={data:d,dataSplits:p},m=o.BV.runKernel(i._JP,h,f);return{nGrams:m[0],nGramsSplits:m[1]}}});var _a=(0,u.op)({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,s._1)(e,"input","stringSplit","string"),a=(0,s._1)(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var u={skipEmpty:n},c={input:r,delimiter:a},l=o.BV.runKernel(i.s1s,c,u);return{indices:l[0],values:l[1],shape:l[2]}}});var Ia=(0,u.op)({stringToHashBucketFast_:function(e,t){var n=(0,s._1)(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return o.BV.runKernel(i.XkS,a,r)}}),Ra={fft:Ln,ifft:Mn,rfft:jn,irfft:Fn},Aa={hammingWindow:Ar,hannWindow:Or,frame:Pr,stft:Dr},Oa={flipLeftRight:Mr,grayscaleToRGB:Fr,resizeNearestNeighbor:na,resizeBilinear:ta,rotateWithOffset:Br,cropAndResize:Lr,nonMaxSuppression:zr,nonMaxSuppressionAsync:Zr,nonMaxSuppressionWithScore:Ur,nonMaxSuppressionWithScoreAsync:Gr,nonMaxSuppressionPadded:qr,nonMaxSuppressionPaddedAsync:Kr,threshold:aa,transform:oa},Pa={bandPart:ia,gramSchmidt:sa,qr:la},Da={absoluteDifference:fa,computeWeightedLoss:pa,cosineDistance:ha,hingeLoss:ma,huberLoss:ga,logLoss:va,meanSquaredError:ya,sigmoidCrossEntropy:xa,softmaxCrossEntropy:wa},La={sparseFillEmptyRows:Sa,sparseReshape:Ca,sparseSegmentMean:Ea,sparseSegmentSum:Ta},Ma={stringNGrams:Na,stringSplit:_a,stringToHashBucketFast:Ia}},4022:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var r=n(9439),a=n(722),o=n(5092),i=n(3386),s=n(3157);var u=(0,n(5094).op)({pow_:function(e,t){var n=(0,s._1)(e,"base","pow"),u=(0,s._1)(t,"exp","pow"),c=(0,i.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),d={a:n=l[0],b:u=l[1]};return a.BV.runKernel(o.pe_,d)}})},1943:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({prelu_:function(e,t){var n={x:(0,o._1)(e,"x","prelu"),alpha:(0,o._1)(t,"alpha","prelu")};return r.BV.runKernel(a.o0g,n)}})},8891:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}n.d(t,{S:function(){return r}})},2308:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({real_:function(e){var t={input:(0,o._1)(e,"input","real")};return r.BV.runKernel(a.xJR,t)}})},9155:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({relu_:function(e){var t={x:(0,o._1)(e,"x","relu")};return r.BV.runKernel(a.qkr,t)}})},2066:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({relu6_:function(e){var t={x:(0,o._1)(e,"x","relu6")};return r.BV.runKernel(a.SbG,t)}})},627:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({reshape_:function(e,t){var n={x:(0,o._1)(e,"x","reshape","string_or_numeric")},i={shape:t};return r.BV.runKernel(a.HZH,n,i)}})},7297:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var r=n(4699),a=n(220);function o(e,t){if(((0,r.fU)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&(0,r.fU)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,a.H)(e,[],[],t)}},2361:function(e,t,n){"use strict";n.r(t),n.d(t,{calculateShapes:function(){return s},validateInput:function(){return i},validateUpdateShape:function(){return o}});var r=n(3433),a=n(4699);function o(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(o+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != ".concat(a+e.length-r));for(var i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape[".concat(i,"] (").concat(n.shape[i],") != indices.shape[").concat(i,"] (").concat(t.shape[i],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(o+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function i(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}o(n,t,e)}function s(e,t,n){for(var o=t.shape.length,i=o>1?t.shape[o-1]:1,s=n.length,u=1,c=i;c<s;++c)u*=n[c];var l=i<1?1:i;return{sliceRank:i,numUpdates:(0,a.NA)(t.shape)/l,sliceSize:u,strides:[].concat((0,r.Z)((0,a.e3)(n.slice(0,i))),[1]),outputSize:(0,a.NA)(n)}}},6367:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({sigmoid_:function(e){var t={x:(0,o._1)(e,"x","sigmoid","float32")};return r.BV.runKernel(a.a5O,t)}})},6613:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({sqrt_:function(e){var t={x:(0,o._1)(e,"x","sqrt","float32")};return r.BV.runKernel(a.FKq,t)}})},9651:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(722),a=n(3157);var o=(0,n(5094).op)({square_:function(e){var t=(0,a._1)(e,"x","square");return r.BV.runKernel("Square",{x:t},{})}})},4977:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,o._1)(e,"x","step"),i={x:n},s={alpha:t};return r.BV.runKernel(a.h8e,i,s)}})},7848:function(e,t,n){"use strict";n.d(t,{l:function(){return u}});var r=n(9439),a=n(722),o=n(5092),i=n(3386),s=n(3157);var u=(0,n(5094).op)({sub_:function(e,t){var n=(0,s._1)(e,"a","sub"),u=(0,s._1)(t,"b","sub"),c=(0,i.makeTypesMatch)(n,u),l=(0,r.Z)(c,2),d={a:n=l[0],b:u=l[1]};return a.BV.runKernel(o.Tr8,d)}})},3368:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var r=n(722),a=n(5092),o=n(3157),i=n(8982);var s=(0,n(5094).op)({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(0,o._1)(e,"x","sum");"bool"===s.dtype&&(s=(0,i.p)(s,"int32"));var u={x:s},c={axis:t,keepDims:n};return r.BV.runKernel(a.GBy,u,c)}})},6689:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(3157),a=n(220);function o(e,t,n){var o=(0,r.C)(e,n);return(0,a.H)(e,t,o,n)}},62:function(e,t,n){"use strict";n.d(t,{w:function(){return i}});var r=n(3157),a=n(4699),o=n(220);function i(e,t,n){if((0,a.Cq)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var i=(0,r.C)(e,n);if(3!==i.length&&1!==i.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===i.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,o.H)(e,t,i,n)}},220:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var r=n(722),a=n(4699),o=n(1368);function i(e,t,n,i){if(null==i&&(i=(0,a.D2)(e)),"complex64"===i)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,a.fU)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){(0,a.Mu)(t);var s=(0,a.NA)(t),u=(0,a.NA)(n);(0,a.hu)(s===u,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(s," values but has ").concat(u)}));for(var c=0;c<n.length;++c){var l=n[c],d=c!==n.length-1||l!==(0,a.NA)(t.slice(c));(0,a.hu)(n[c]===t[c]||!d,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return(0,a.fU)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==i?(0,o.toTypedArray)(e,i):(0,a.xH)(e,[],!0),r.BV.makeTensor(e,t,i)}},1231:function(e,t,n){"use strict";n.d(t,{p:function(){return f}});var r=n(722),a=n(2433),o=n(5092),i=n(3157),s=n(4699),u=n(2529),c=n(9338),l=n(6620),d=n(5094),p=n(2308);var f=(0,d.op)({transpose_:function(e,t,n){var d=(0,i._1)(e,"x","transpose");if(null==t&&(t=d.shape.map((function(e,t){return t})).reverse()),s.hu(d.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(d.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){s.hu(e>=0&&e<d.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(d.rank-1)+" but got ".concat(t)}))})),d.rank<=1)return d.clone();var f={x:d},h={perm:t};return"complex64"===d.dtype?(0,a.lu)((function(){var e=(0,p.k)(d),t=(0,c.a)(d);return e=r.BV.runKernel(o.G3Y,{x:e},h),t=r.BV.runKernel(o.G3Y,{x:t},h),n&&(t=(0,l.W)(t)),(0,u.P)(e,t)})):r.BV.runKernel(o.G3Y,f,h)}})},4970:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var r=n(722),a=n(5092),o=n(3157);var i=(0,n(5094).op)({zerosLike_:function(e){var t={x:(0,o._1)(e,"x","zerosLike")};return r.BV.runKernel(a.RuY,t)}})},4965:function(e,t,n){"use strict";n.d(t,{es:function(){return E},YD:function(){return b},_w:function(){return T},FZ:function(){return C},Vp:function(){return S},Vi:function(){return w}});var r=n(136),a=n(3668),o=n(5861),i=n(5671),s=n(3144),u=n(4687),c=n.n(u),l=n(3078),d=n(3433),p=n(4699);function f(e,t,n,r){var a=(0,p.e3)(t),o=function(e,t,n,r){var a=(0,p.NA)(t),o=r[r.length-1],i=new Array(o).fill(0),s=t.length,u="complex64"===n?v(e):e;if(s>1)for(var c=0;c<a/o;c++)for(var l=c*o,d=0;d<o;d++)i[d]=Math.max(i[d],h(u[l+d],0,n).length);return i}(e,t,n,a),i=t.length,s=g(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(i)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function h(e,t,n){var r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):(0,p.HD)(e)?"'".concat(e,"'"):"bool"===n?m(e):parseFloat(e.toFixed(7)).toString(),(0,p.oj)(r,t)}function m(e){return 0===e?"false":"true"}function g(e,t,n,r,a){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=v(e);return[h(c[0],0,n)]}return"bool"===n?[m(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var l=3*i,p=Array.from(e.slice(0,l)),f=Array.from(e.slice((s-3)*i,s*i));return"complex64"===n&&(p=v(p),f=v(f)),["["+p.map((function(e,t){return h(e,a[t],n)})).join(", ")+", ..., "+f.map((function(e,t){return h(e,a[s-3+t],n)})).join(", ")+"]"]}var y="complex64"===n?v(e):Array.from(e);return["["+y.map((function(e,t){return h(e,a[t],n)})).join(", ")+"]"]}var b=t.slice(1),x=r.slice(1),k=r[0]*i,w=[];if(s>20){for(var S=0;S<3;S++){var C=S*k,E=C+k;w.push.apply(w,(0,d.Z)(g(e.slice(C,E),b,n,x,a,!1)))}w.push("...");for(var T=s-3;T<s;T++){var N=T*k,_=N+k;w.push.apply(w,(0,d.Z)(g(e.slice(N,_),b,n,x,a,T===s-1)))}}else for(var I=0;I<s;I++){var R=I*k,A=R+k;w.push.apply(w,(0,d.Z)(g(e.slice(R,A),b,n,x,a,I===s-1)))}var O=2===u?",":"";w[0]="["+w[0]+O;for(var P=1;P<w.length-1;P++)w[P]=" "+w[P]+O;for(var D=",\n",L=2;L<u;L++)D+="\n";return w[w.length-1]=" "+w[w.length-1]+"]"+(o?"":D),w}function v(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var y=n(1368),b=function(){function e(t,n,r){var a=this;if((0,i.Z)(this,e),this.dtype=n,this.shape=t.slice(),this.size=p.NA(t),null!=r){var o=r.length;p.hu(o===this.size,(function(){return"Length of values '".concat(o,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||p.rQ(n,this.size),this.strides=(0,p.e3)(t)}return(0,s.Z)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),p.hu(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var o=this.locToIndex(r);this.values[o]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,o=t;a<o.length;a++){var i=o[a];if(i<0||i>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return x().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),x=null,k=null;function w(e){x=e}function S(e){k=e}function C(e){e}var E=function(){function e(t,n,r,a){(0,i.Z)(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=p.NA(t),this.strides=(0,p.e3)(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return(0,s.Z)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=(0,o.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",k.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return k.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=(0,o.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",(0,p.GX)(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return(0,p.GX)(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=(0,o.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=x().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return y.decodeString(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),x().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=x().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return y.decodeString(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=(0,o.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,x().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(x().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return k.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),k.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return f(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),k.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),x().makeVariable(this,e,t,n)}}]),e}();Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),(0,l.R)("Tensor",(function(){return E}));var T=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(e,r,a,o){var s;return(0,i.Z)(this,n),(s=t.call(this,e.shape,e.dtype,e.dataId,o)).trainable=r,s.name=a,s}return(0,s.Z)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!p.cO(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));x().disposeTensor(this),this.dataId=e.dataId,x().incRef(this,null)}},{key:"dispose",value:function(){x().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(E);Object.defineProperty(T,Symbol.hasInstance,{value:function(e){return e instanceof E&&null!=e.assign&&e.assign instanceof Function}})},3386:function(e,t,n){"use strict";n.r(t),n.d(t,{assertTypesMatch:function(){return s},getTensorsInContainer:function(){return c},isTensorInList:function(){return u},makeTypesMatch:function(){return i}});var r=n(4965),a=n(5529),o=n(4699);function i(e,t){if(e.dtype===t.dtype)return[e,t];var n=(0,a.x8)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function s(e,t){(0,o.hu)(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function u(e,t){return t.some((function(t){return t.id===e.id}))}function c(e){var t=[];return l(e,t,new Set),t}function l(e,t,n){if(null!=e)if(e instanceof r.es)t.push(e);else if(a=e,Array.isArray(a)||"object"===typeof a){var a,o=e;for(var i in o){var s=o[i];n.has(s)||(n.add(s),l(s,t,n))}}}},3157:function(e,t,n){"use strict";n.d(t,{C:function(){return u},_1:function(){return d},sI:function(){return p}});var r=n(722),a=n(6949),o=n(4965),i=n(4699),s=n(1368);function u(e,t){var n=e;if((0,i.fU)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||(0,i.fU)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&(0,a.OB)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&c(e,r,[]),r}function c(e,t,n){if(n=n||[],Array.isArray(e)||(0,i.fU)(e)){(0,i.hu)(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),(0,i.hu)(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)c(e[a],r,n.concat(a))}else(0,i.hu)(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function l(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function d(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof o.es)return l(a,e.dtype,t,n),e;var c=(0,i.D2)(e);if("string"!==c&&["bool","int32","float32"].indexOf(a)>=0&&(c=a),l(a,c,t,n),null==e||!(0,i.fU)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var d=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(d,"'"))}var p=u(e,c);(0,i.fU)(e)||Array.isArray(e)||(e=[e]);var f=!0,h="string"!==c?(0,s.toTypedArray)(e,c):(0,i.xH)(e,[],f);return r.BV.makeTensor(h,p,c)}function p(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return d(e,"".concat(t,"[").concat(a,"]"),n,r)}))}},5529:function(e,t,n){"use strict";var r,a,o,i,s;n.d(t,{x8:function(){return c},yw:function(){return r},z4:function(){return l}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(a||(a={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(o||(o={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(i||(i={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(s||(s={}));var u={float32:i,int32:a,bool:o,complex64:s};function c(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return u[e][t]}function l(e){return c(e,"int32")}},1368:function(e,t,n){"use strict";n.r(t),n.d(t,{arraysEqual:function(){return a.cO},assert:function(){return a.hu},assertNonNegativeIntegerDimensions:function(){return a.Mu},assertNonNull:function(){return a.Cq},assertShapesMatch:function(){return a.k5},bytesFromStringArray:function(){return a.Ub},bytesPerElement:function(){return a.bT},checkConversionForErrors:function(){return a.D5},clamp:function(){return a.uZ},computeStrides:function(){return a.e3},createScalarValue:function(){return w},createShuffledIndices:function(){return a.U$},decodeString:function(){return N},distSquared:function(){return a.E7},encodeString:function(){return T},fetch:function(){return E},fingerPrint64:function(){return k},flatten:function(){return a.xH},getArrayFromDType:function(){return a.rQ},getTypedArrayFromDType:function(){return a.WP},hasEncodingLoss:function(){return a.QB},hexToLong:function(){return s},indexToLoc:function(){return a.NE},inferDtype:function(){return a.D2},inferFromImplicitShape:function(){return a.JZ},isBoolean:function(){return a.jn},isFunction:function(){return a.mf},isInt:function(){return a.GN},isNumber:function(){return a.hj},isPromise:function(){return a.tI},isScalarShape:function(){return a.N9},isString:function(){return a.HD},isTypedArray:function(){return a.fU},isValidDtype:function(){return a.LP},locToIndex:function(){return a.qy},makeOnesTypedArray:function(){return a.p8},makeZerosNestedTypedArray:function(){return a.l6},makeZerosTypedArray:function(){return a.wT},nearestDivisor:function(){return a.jP},nearestLargerEven:function(){return a.nY},now:function(){return C},parseAxisParam:function(){return a.EC},randUniform:function(){return a.bj},repeatedTry:function(){return a.WD},rightPad:function(){return a.oj},shuffle:function(){return a.TV},shuffleCombo:function(){return a.d7},sizeFromShape:function(){return a.NA},sizeToSquarishShape:function(){return a.YP},squeezeShape:function(){return a.bp},sum:function(){return a.Sm},swap:function(){return a.LF},tanh:function(){return a.AE},toNestedArray:function(){return a.GX},toTypedArray:function(){return S}});var r=n(6949),a=n(4699),o=n(9849),i=n.n(o)()||o;function s(e){return i.fromString(e,!0,16)}var u=s("c3a5c85c97cb3127"),c=s("b492b66fbe98f273"),l=s("9ae16a3b2f90404f");function d(e){return e.xor(e.shru(47))}function p(e,t,n){var r=e.slice(t,t+n);return i.fromBytes(Array.from(r),!0,!0)}function f(e,t){return p(e,t,8)}function h(e,t){return p(e,t,4)}function m(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function v(e,t,n,r){return function(e,t,n,r,a,o){a=a.add(e),o=m(o.add(a).add(r),21);var i=a;return a=(a=a.add(t)).add(n),o=o.add(m(a,44)),[a.add(r),o.add(i)]}(f(e,t),f(e,t+8),f(e,t+16),f(e,t+24),n,r)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=l.add(2*t),r=f(e,0).add(l),a=f(e,t-8),o=m(a,37).mul(n).add(r),i=m(r,25).add(a).mul(n);return g(o,i,n)}if(t>=4){var s=l.add(2*t),c=h(e,0);return g(c.shl(3).add(t),h(e,t-4),s)}if(t>0){var p=e[0],v=e[t>>1],y=e[t-1],b=p+(v<<8),x=t+(y<<2);return d(l.mul(b).xor(u.mul(x))).mul(l)}return l}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=l.add(2*t),r=f(e,0).mul(c),a=f(e,8),o=f(e,t-8).mul(n),i=f(e,t-16).mul(l);return g(m(r.add(a),43).add(m(o,30)).add(i),r.add(m(a.add(l),18)).add(o),n)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=l.add(2*t),r=f(e,0).mul(l),a=f(e,8),o=f(e,t-8).mul(n),i=f(e,t-16).mul(l),s=m(r.add(a),43).add(m(o,30)).add(i),u=g(s,r.add(m(a.add(l),18)).add(o),n),c=f(e,16).mul(n),d=f(e,24),p=s.add(f(e,t-32)).mul(n),h=u.add(f(e,t-24)).mul(n);return g(m(c.add(d),43).add(m(p,30)).add(h),c.add(m(d.add(r),18)).add(p),n)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=i.fromNumber(81,!0);if(t<=32)return t<=16?y(e,t):b(e,t);if(t<=64)return x(e,t);var r=n,a=n.mul(c).add(113),o=d(a.mul(l).add(113)).mul(l),s=[i.UZERO,i.UZERO],p=[i.UZERO,i.UZERO];r=r.mul(l).add(f(e,0));var h=0,k=64*(t-1>>6),w=k+(t-1&63)-63;do{r=m(r.add(a).add(s[0]).add(f(e,h+8)),37).mul(c),a=m(a.add(s[1]).add(f(e,h+48)),42).mul(c),r=r.xor(p[1]),a=a.add(s[0]).add(f(e,h+40)),o=m(o.add(p[0]),33).mul(c),s=v(e,h,s[1].mul(c),r.add(p[0])),p=v(e,h+32,o.add(p[1]),a.add(f(e,h+16)));var S=[r,o];o=S[0],r=S[1],h+=64}while(h!==k);var C=c.add(o.and(255).shl(1));h=w,p[0]=p[0].add(t-1&63),s[0]=s[0].add(p[0]),p[0]=p[0].add(s[0]),r=m(r.add(a).add(s[0]).add(f(e,h+8)),37).mul(C),a=m(a.add(s[1]).add(f(e,h+48)),42).mul(C),r=r.xor(p[1].mul(9)),a=a.add(s[0].mul(9).add(f(e,h+40))),o=m(o.add(p[0]),33).mul(C),s=v(e,h,s[1].mul(C),r.add(p[0])),p=v(e,h+32,o.add(p[1]),a.add(f(e,h+16)));var E=[r,o];return o=E[0],r=E[1],g(g(s[0],p[0],C).add(d(a).mul(u)).add(o),g(s[1],p[1],C).add(r),C)}function w(e,t){return"string"===t?T(e):S([e],t)}function S(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=a.xH(e)),(0,r.OB)().getBool("DEBUG")&&a.D5(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),o=0;o<n.length;++o)0!==Math.round(e[o])&&(n[o]=1);return n}throw new Error("Unknown data type ".concat(t))}function C(){return(0,r.OB)().platform.now()}function E(e,t){return(0,r.OB)().platform.fetch(e,t)}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",(0,r.OB)().platform.encode(e,t)}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",(0,r.OB)().platform.decode(e,t)}},4699:function(e,t,n){"use strict";function r(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,s(e,--t,n)}function a(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,s(e,--n,r),s(t,n,r)}function o(e,t,n){return Math.max(e,Math.min(t,n))}function i(e){return e%2===0?e:e+1}function s(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function u(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function c(e,t){var n=Math.random();return t*n+(1-n)*e}function l(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function d(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";d(v(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function f(e){d(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||O(e)&&!n)for(var r=0;r<e.length;++r)h(e[r],t,n);else t.push(e);return t}function m(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function g(e){return 0===e.length}function v(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function y(e){return e%1===0}function b(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function x(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function k(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return r(t),t}function w(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:setTimeout;return new Promise((function(a,o){var i=0;!function s(){if(e())a();else{i++;var u=t(i);null!=n&&i>=n?o():r(s,u)}}()}))}function C(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var o=e.slice();return o[r]=t/n,o}function E(e,t){var n=t.length;return d((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),d(e.every((function(e){return y(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function T(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:E(t,e).sort(),i=0,s=0;s<e.length;++s){if(null!=o){if(o[i]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==o[i]||o[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function N(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function _(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function I(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function R(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function A(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function O(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function P(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function D(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function L(e){return"string"===typeof e||e instanceof String}function M(e){return"boolean"===typeof e}function F(e){return"number"===typeof e}function B(e){return Array.isArray(e)?B(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":F(e)?"float32":L(e)?"string":M(e)?"bool":"float32"}function j(e){return!!(e&&e.constructor&&e.call&&e.apply)}function z(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function V(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function W(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var o=t[0]*(r?2:1),i=0;i<o;i++)a[i]=n[e+i];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=W(e+l*c,u,n,r);return a}function Z(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return W(0,e,t,n)}function U(e,t){for(var n=H(e,t),r=0;r<n.length;r++)n[r]=1;return n}function H(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function G(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return Z(e,new Float32Array(n));if("int32"===t)return Z(e,new Int32Array(n));if("bool"===t)return Z(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function q(e){e.forEach((function(t){d(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function X(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function K(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function Y(e){return e&&e.then&&"function"===typeof e.then}n.d(t,{AE:function(){return b},Cq:function(){return f},D2:function(){return B},D5:function(){return I},E7:function(){return l},EC:function(){return E},GN:function(){return y},GX:function(){return Z},HD:function(){return L},JZ:function(){return C},LF:function(){return s},LP:function(){return R},Mu:function(){return q},N9:function(){return g},NA:function(){return m},NE:function(){return K},QB:function(){return A},Sm:function(){return u},TV:function(){return r},U$:function(){return k},Ub:function(){return D},WD:function(){return S},WP:function(){return N},YP:function(){return x},bT:function(){return P},bj:function(){return c},bp:function(){return T},cO:function(){return v},d7:function(){return a},e3:function(){return V},fU:function(){return O},hj:function(){return F},hu:function(){return d},jP:function(){return z},jn:function(){return M},k5:function(){return p},l6:function(){return G},mf:function(){return j},nY:function(){return i},oj:function(){return w},p8:function(){return U},qy:function(){return X},rQ:function(){return _},tI:function(){return Y},uZ:function(){return o},wT:function(){return H},xH:function(){return h}})},3061:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}n.r(t),n.d(t,{clsx:function(){return a}}),t.default=a},3406:function(e){"use strict";var t=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?u((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function a(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function i(e,t){try{return t in e}catch(n){return!1}}function s(e,t,n){var a={};return n.isMergeableObject(e)&&o(e).forEach((function(t){a[t]=r(e[t],n)})),o(t).forEach((function(o){(function(e,t){return i(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(i(e,o)&&n.isMergeableObject(t[o])?a[o]=function(e,t){if(!t.customMerge)return u;var n=t.customMerge(e);return"function"===typeof n?n:u}(o,n)(e[o],t[o],n):a[o]=r(t[o],n))})),a}function u(e,n,o){(o=o||{}).arrayMerge=o.arrayMerge||a,o.isMergeableObject=o.isMergeableObject||t,o.cloneUnlessOtherwiseSpecified=r;var i=Array.isArray(n);return i===Array.isArray(e)?i?o.arrayMerge(e,n,o):s(e,n,o):r(n,o)}u.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return u(e,n,t)}),{})};var c=u;e.exports=c},5538:function(e,t,n){var r;!function(){"use strict";var a=!("undefined"===typeof window||!window.document||!window.document.createElement),o={canUseDOM:a,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:a&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:a&&!!window.screen};void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},7861:function(e,t,n){"use strict";var r=n(9456),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?i:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=i;var c=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var a=f(n);a&&a!==h&&e(t,a,r)}var i=l(n);d&&(i=i.concat(d(n)));for(var s=u(t),m=u(n),g=0;g<i.length;++g){var v=i[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!s||!s[v])){var y=p(n,v);try{c(t,v,y)}catch(b){}}}}return t}},229:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function k(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case o:case s:case i:case f:return e;default:switch(e=e&&e.$$typeof){case c:case p:case g:case m:case u:return e;default:return t}}case a:return t}}}function w(e){return k(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=p,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=a,t.Profiler=s,t.StrictMode=i,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||k(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return k(e)===c},t.isContextProvider=function(e){return k(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return k(e)===p},t.isFragment=function(e){return k(e)===o},t.isLazy=function(e){return k(e)===g},t.isMemo=function(e){return k(e)===m},t.isPortal=function(e){return k(e)===a},t.isProfiler=function(e){return k(e)===s},t.isStrictMode=function(e){return k(e)===i},t.isSuspense=function(e){return k(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===i||e===f||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===p||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===v)},t.typeOf=k},9456:function(e,t,n){"use strict";e.exports=n(229)},8630:function(e){function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function n(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,r,a){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");"function"===typeof r&&(a=r,r={}),r=r||{},a=a||function(){},i.type=r.type||"text/javascript",i.charset=r.charset||"utf8",i.async=!("async"in r)||!!r.async,i.src=e,r.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(i,r.attrs),r.text&&(i.text=""+r.text),("onload"in i?t:n)(i,a),i.onload||t(i,a),o.appendChild(i)}},9849:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(E){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},o={};function i(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=u(e,(0|e)<0?-1:0,!0),i&&(o[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),i&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?v:g;if(t){if(e<0)return v;if(e>=f)return w}else{if(e<=-h)return S;if(e+1>=h)return k}return e<0?s(-e,t).neg():u(e%p|0,e/p|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=i,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=s(c(n,8)),o=g,i=0;i<e.length;i+=8){var u=Math.min(8,e.length-i),d=parseInt(e.substring(i,i+u),n);if(u<8){var p=s(c(n,u));o=o.mul(p).add(s(d))}else o=(o=o.mul(a)).add(s(d))}return o.unsigned=t,o}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=d;var p=4294967296,f=p*p,h=f/2,m=i(1<<24),g=i(0);n.ZERO=g;var v=i(0,!0);n.UZERO=v;var y=i(1);n.ONE=y;var b=i(1,!0);n.UONE=b;var x=i(-1);n.NEG_ONE=x;var k=u(-1,2147483647,!1);n.MAX_VALUE=k;var w=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var C=n.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(c(e,6),this.unsigned),o=this,i="";;){var u=o.div(a),l=(o.sub(u.mul(a)).toInt()>>>0).toString(e);if((o=u).isZero())return l+i;for(;l.length<6;)l="0"+l;i=""+l+i}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1===(1&this.low)},C.isEven=function(){return 0===(1&this.low)},C.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},C.neg=C.negate,C.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,p=0,f=0,h=0;return f+=(h+=o+(65535&e.low))>>>16,p+=(f+=a+c)>>>16,l+=(p+=n+s)>>>16,l+=t+i,u((f&=65535)<<16|(h&=65535),(l&=65535)<<16|(p&=65535),this.unsigned)},C.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=d(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,o=this.low>>>16,i=65535&this.low,c=e.high>>>16,l=65535&e.high,p=e.low>>>16,f=65535&e.low,h=0,v=0,y=0,b=0;return y+=(b+=i*f)>>>16,v+=(y+=o*f)>>>16,y&=65535,v+=(y+=i*p)>>>16,h+=(v+=a*f)>>>16,v&=65535,h+=(v+=o*p)>>>16,v&=65535,h+=(v+=i*l)>>>16,h+=n*f+a*p+o*l+i*c,u((y&=65535)<<16|(b&=65535),(h&=65535)<<16|(v&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,a,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return b;o=v}else{if(this.eq(S))return e.eq(y)||e.eq(x)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),o=n.add(a.div(e)));if(e.eq(S))return this.unsigned?v:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),l=i<=48?1:c(2,i-48),p=s(n),f=p.mul(e);f.isNegative()||f.gt(a);)f=(p=s(n-=l,this.unsigned)).mul(e);p.isZero()&&(p=y),o=o.add(p),a=a.sub(f)}return o},C.div=C.divide,C.modulo=function(e){return r(e)||(e=d(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return u(~this.low,~this.high,this.unsigned)},C.and=function(e){return r(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return r(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return r(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},6912:function(e,t,n){"use strict";n.r(t);var r=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function a(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(a=e[n],o=t[n],!(a===o||r(a)&&r(o)))return!1;var a,o;return!0}t.default=function(e,t){var n;void 0===t&&(t=a);var r,o=[],i=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return i&&n===this&&t(a,o)||(r=e.apply(this,a),i=!0,n=this,o=a),r}}},1843:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,o){for(var i,s,u=a(e),c=1;c<arguments.length;c++){for(var l in i=Object(arguments[c]))n.call(i,l)&&(u[l]=i[l]);if(t){s=t(i);for(var d=0;d<s.length;d++)r.call(i,s[d])&&(u[s[d]]=i[s[d]])}}return u}},1729:function(e,t,n){"use strict";var r=n(9165);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},5192:function(e,t,n){e.exports=n(1729)()},9165:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3084:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){for(var r=!0;r;){var a=e,o=t,i=n;c=u=void 0,r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(i)}var c=Object.getPrototypeOf(a);if(null===c)return;e=c,t=o,n=i,r=!0}},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=i(n(7313)),l=i(n(7839));function d(e){return e.displayName||e.name||"Component"}function p(e){if("undefined"===typeof window)return null;for(var t=e.split("."),n=window,r=0;r<t.length;r++){var a=n[t[r]];if("undefined"===typeof a)return null;n=a}return n}t.default=function(e){function t(t){var n=e(t);return Object.keys(n).reduce((function(e,t){return o({},e,u({},t,p(n[t].globalPath)))}),{})}return function(n){var o=function(o){function i(){s(this,i),a(Object.getPrototypeOf(i.prototype),"constructor",this).apply(this,arguments),this.displayName="AsyncLoaded("+d(n)+")",this.state=t(this.props)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o),r(i,[{key:"loadScripts",value:function(e){var t=this;return Object.keys(e).filter((function(e){return null===t.state[e]})).map((function(n){var r=e[n];return function(e,t){var n=this;if("undefined"===typeof document)return null;var r=e.globalPath,a=e.url,o=e.jsonp,i=document.createElement("script");if(o){var s=e.callbackName,u=void 0===s?"_async_"+r.replace(".","_"):s;a=a+(a.indexOf("?")>-1?"&":"?")+"callback="+u,window[u]=t}else i.onload=t,i.onreadystatechange=function(){"loaded"===n.readyState&&window.setTimeout(i.onload,0)};return i.async=1,i.src=a,i}(r,t.loadHandler.bind(t,n,r.globalPath))})).map((function(e){"undefined"!==typeof document&&document.body.appendChild(e)}))}},{key:"componentDidMount",value:function(){this.loadScripts(e(this.props))}},{key:"loadHandler",value:function(e,t){var n=p(t);null!==n&&this.setState(u({},e,n))}},{key:"injectScripts",value:function(e){return c.default.cloneElement(c.default.createElement(e,this.props),this.state)}},{key:"render",value:function(){return this.injectScripts(n)}}]),i}(c.default.Component);return(0,l.default)(o,n)}},e.exports=t.default},7839:function(e){"use strict";var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},r="function"===typeof Object.getOwnPropertySymbols;e.exports=function(e,a,o){if("string"!==typeof a){var i=Object.getOwnPropertyNames(a);r&&(i=i.concat(Object.getOwnPropertySymbols(a)));for(var s=0;s<i.length;++s)if(!t[i[s]]&&!n[i[s]]&&(!o||!o[i[s]]))try{e[i[s]]=a[i[s]]}catch(u){}}return e}},534:function(e,t,n){"use strict";var r=n(7313),a=n(2224);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function m(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(h,e)||!d.call(f,e)&&(p.test(e)?h[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),N=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function B(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function z(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||a[i]!==o[s]){var u="\n"+a[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=i&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function V(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case E:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function Z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=U(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Q(e,t);var n=U(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+U(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:U(n)}}function oe(e,t){var n=U(t.value),r=U(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,de=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Ce=null;function Ee(e){if(e=ba(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=ka(t),we(e.stateNode,e.type,t))}}function Te(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function Ne(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function _e(e,t){return e(t)}function Ie(){}var Re=!1;function Ae(e,t,n){if(Re)return e(t,n);Re=!0;try{return _e(e,t,n)}finally{Re=!1,(null!==Se||null!==Ce)&&(Ie(),Ne())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=ka(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Pe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Pe=!1}function Le(e,t,n,r,a,o,i,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Be=!1,je=null,ze={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,a,o,i,s,u){Me=!1,Fe=null,Le.apply(ze,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(We(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Ue(a),e;if(i===r)return Ue(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,Xe=a.unstable_cancelCallback,Ke=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Qe=a.unstable_now,$e=a.unstable_getCurrentPriorityLevel,Je=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,ot=null;var it=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~a;0!==s?r=dt(s):0!==(o&=i)&&(r=dt(o))}else 0!==(i=n&~a)?r=dt(i):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(o=t&-t)||16===a&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,wt,St,Ct,Et,Tt=!1,Nt=[],_t=null,It=null,Rt=null,At=new Map,Ot=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ft(e){var t=ya(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function jt(e,t,n){Bt(e)&&n.delete(t)}function zt(){Tt=!1,null!==_t&&Bt(_t)&&(_t=null),null!==It&&Bt(It)&&(It=null),null!==Rt&&Bt(Rt)&&(Rt=null),At.forEach(jt),Ot.forEach(jt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zt)))}function Wt(e){function t(t){return Vt(t,e)}if(0<Nt.length){Vt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Vt(_t,e),null!==It&&Vt(It,e),null!==Rt&&Vt(Rt,e),At.forEach(t),Ot.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var Zt=x.ReactCurrentBatchConfig,Ut=!0;function Ht(e,t,n,r){var a=bt,o=Zt.transition;Zt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=a,Zt.transition=o}}function Gt(e,t,n,r){var a=bt,o=Zt.transition;Zt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=a,Zt.transition=o}}function qt(e,t,n,r){if(Ut){var a=Kt(e,t,n,r);if(null===a)Ur(e,t,r,Xt,n),Lt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return _t=Mt(_t,e,t,n,r,a),!0;case"dragenter":return It=Mt(It,e,t,n,r,a),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return At.set(o,Mt(At.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Ot.set(o,Mt(Ot.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==a;){var o=ba(a);if(null!==o&&kt(o),null===(o=Kt(e,t,n,r))&&Ur(e,t,r,Xt,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Ur(e,t,r,null,n)}}var Xt=null;function Kt(e,t,n,r){if(Xt=null,null!==(e=ya(e=ke(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,r=n.length,a="value"in Qt?Qt.value:Qt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return Jt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),dn=F({},cn,{view:0,detail:0}),pn=an(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),hn=an(fn),mn=an(F({},fn,{dataTransfer:0})),gn=an(F({},dn,{relatedTarget:0})),vn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(F({},cn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return Cn}var Tn=F({},dn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(Tn),_n=an(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Rn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(An),Pn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Bn=String.fromCharCode(32),jn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Zn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,qn=null;function Xn(e){Br(e,0)}function Kn(e){if(q(xa(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(l){var $n;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}$n=Jn}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),qn=Gn=null)}function nr(e){if("value"===e.propertyName&&Kn(qn)){var t=[];Hn(t,qn,e,ke(e)),Ae(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(qn)}function or(e,t){if("click"===e)return Kn(t)}function ir(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=void 0===r.end?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=lr(n,o);var i=lr(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=l&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Sr={},Cr={};function Er(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}l&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Tr=Er("animationend"),Nr=Er("animationiteration"),_r=Er("animationstart"),Ir=Er("transitionend"),Rr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Rr.set(e,t),u(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Dr=Ar[Pr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(Nr,"onAnimationIteration"),Or(_r,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,u,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(o(198));var l=Fe;Me=!1,Fe=null,Be||(Be=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&a.isPropagationStopped())break e;Fr(a,s,c),o=u}else for(i=0;i<r.length;i++){if(u=(s=r[i]).instance,c=s.currentTarget,s=s.listener,u!==o&&a.isPropagationStopped())break e;Fr(a,s,c),o=u}}}if(Be)throw e=je,Be=!1,je=null,e}function jr(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Zr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Zr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Vr]){e[Vr]=!0,i.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function Zr(e,t,n,r){switch(Yt(t)){case 1:var a=Ht;break;case 4:a=Gt;break;default:a=qt}n=a.bind(null,t,n,e),a=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ur(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var u=i.tag;if((3===u||4===u)&&((u=i.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;i=i.return}for(;null!==s;){if(null===(i=ya(s)))return;if(5===(u=i.tag)||6===u){r=o=i;continue e}s=s.parentNode}}r=r.return}Ae((function(){var r=o,a=ke(n),i=[];e:{var s=Rr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Nn;break;case"focusin":c="focus",u=gn;break;case"focusout":c="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=In;break;case Tr:case Nr:case _r:u=vn;break;case Ir:u=Rn;break;case"scroll":u=pn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=_n}var l=0!==(4&t),d=!l&&"scroll"===e,p=l?null!==s?s+"Capture":null:s;l=[];for(var f,h=r;null!==h;){var m=(f=h).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==p&&(null!=(m=Oe(h,p))&&l.push(Hr(h,m,f)))),d)break;h=h.return}0<l.length&&(s=new u(s,c,null,n,a),i.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[ha])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=hn,m="onMouseLeave",p="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=_n,m="onPointerLeave",p="onPointerEnter",h="pointer"),d=null==u?s:xa(u),f=null==c?s:xa(c),(s=new l(m,h+"leave",u,n,a)).target=d,s.relatedTarget=f,m=null,ya(a)===r&&((l=new l(p,h+"enter",c,n,a)).target=f,l.relatedTarget=d,m=l),d=m,u&&c)e:{for(p=c,h=0,f=l=u;f;f=qr(f))h++;for(f=0,m=p;m;m=qr(m))f++;for(;0<h-f;)l=qr(l),h--;for(;0<f-h;)p=qr(p),f--;for(;h--;){if(l===p||null!==p&&l===p.alternate)break e;l=qr(l),p=qr(p)}l=null}else l=null;null!==u&&Xr(i,s,u,l,!1),null!==c&&null!==d&&Xr(i,d,c,l,!0)}if("select"===(u=(s=r?xa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Yn;else if(Un(s))if(Qn)g=ir;else{g=ar;var v=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(i,g,n,a):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?xa(r):window,e){case"focusin":(Un(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(i,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(i,n,a)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):($t="value"in(Qt=a)?Qt.value:Qt.textContent,Wn=!0)),0<(v=Gr(r,b)).length&&(b=new xn(b,e,null,n,a),i.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(jn=!0,Bn);case"textInput":return(e=t.data)===Bn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),Jt=$t=Qt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}Br(i,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=Oe(e,n))&&r.unshift(Hr(e,o,a)),null!=(o=Oe(e,t))&&r.push(Hr(e,o,a))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=Oe(n,o))&&i.unshift(Hr(n,u,s)):a||null!=(u=Oe(n,o))&&i.push(Hr(n,u,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Kr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Yr,"")}function $r(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Jr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oa?function(e){return oa.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Wt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function la(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),pa="__reactFiber$"+da,fa="__reactProps$"+da,ha="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,va="__reactHandles$"+da;function ya(e){var t=e[pa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ha]||n[pa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=la(e);null!==e;){if(n=e[pa])return n;e=la(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[pa]||e[ha])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ka(e){return e[fa]||null}var wa=[],Sa=-1;function Ca(e){return{current:e}}function Ea(e){0>Sa||(e.current=wa[Sa],wa[Sa]=null,Sa--)}function Ta(e,t){Sa++,wa[Sa]=e.current,e.current=t}var Na={},_a=Ca(Na),Ia=Ca(!1),Ra=Na;function Aa(e,t){var n=e.type.contextTypes;if(!n)return Na;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pa(){Ea(Ia),Ea(_a)}function Da(e,t,n){if(_a.current!==Na)throw Error(o(168));Ta(_a,t),Ta(Ia,n)}function La(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(o(108,Z(e)||"Unknown",a));return F({},n,r)}function Ma(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Na,Ra=_a.current,Ta(_a,e),Ta(Ia,Ia.current),!0}function Fa(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=La(e,t,Ra),r.__reactInternalMemoizedMergedChildContext=e,Ea(Ia),Ea(_a),Ta(_a,e)):Ea(Ia),Ta(Ia,n)}var Ba=null,ja=!1,za=!1;function Va(e){null===Ba?Ba=[e]:Ba.push(e)}function Wa(){if(!za&&null!==Ba){za=!0;var e=0,t=bt;try{var n=Ba;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ba=null,ja=!1}catch(a){throw null!==Ba&&(Ba=Ba.slice(e+1)),qe(Je,Wa),a}finally{bt=t,za=!1}}return null}var Za=[],Ua=0,Ha=null,Ga=0,qa=[],Xa=0,Ka=null,Ya=1,Qa="";function $a(e,t){Za[Ua++]=Ga,Za[Ua++]=Ha,Ha=e,Ga=t}function Ja(e,t,n){qa[Xa++]=Ya,qa[Xa++]=Qa,qa[Xa++]=Ka,Ka=e;var r=Ya;e=Qa;var a=32-it(r)-1;r&=~(1<<a),n+=1;var o=32-it(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Ya=1<<32-it(t)+a|n<<a|r,Qa=o+e}else Ya=1<<o|n<<a|r,Qa=e}function eo(e){null!==e.return&&($a(e,1),Ja(e,1,0))}function to(e){for(;e===Ha;)Ha=Za[--Ua],Za[Ua]=null,Ga=Za[--Ua],Za[Ua]=null;for(;e===Ka;)Ka=qa[--Xa],qa[Xa]=null,Qa=qa[--Xa],qa[Xa]=null,Ya=qa[--Xa],qa[Xa]=null}var no=null,ro=null,ao=!1,oo=null;function io(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ka?{id:Ya,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ao){var t=ro;if(t){var n=t;if(!so(e,t)){if(uo(e))throw Error(o(418));t=ca(n.nextSibling);var r=no;t&&so(e,t)?io(r,n):(e.flags=-4097&e.flags|2,ao=!1,no=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ao=!1,no=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function po(e){if(e!==no)return!1;if(!ao)return lo(e),ao=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ro)){if(uo(e))throw fo(),Error(o(418));for(;t;)io(e,t),t=ca(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ca(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ca(e.nextSibling)}function ho(){ro=no=null,ao=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Ca(null),bo=null,xo=null,ko=null;function wo(){ko=xo=bo=null}function So(e){var t=yo.current;Ea(yo),e._currentValue=t}function Co(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){bo=e,ko=xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function To(e){var t=e._currentValue;if(ko!==e)if(e={context:e,memoizedValue:t,next:null},null===xo){if(null===bo)throw Error(o(308));xo=e,bo.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return t}var No=null;function _o(e){null===No?No=[e]:No.push(e)}function Io(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,_o(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ro(e,r)}function Ro(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ao=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Po(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Do(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_u)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ro(e,n)}return null===(a=r.interleaved)?(t.next=t,_o(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ro(e,n)}function Mo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bo(e,t,n,r){var a=e.updateQueue;Ao=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,c=u.next;u.next=null,null===i?o=c:i.next=c,i=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==i&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==o){var d=a.baseState;for(i=0,l=c=u=null,s=o;;){var p=s.lane,f=s.eventTime;if((r&p)===p){null!==l&&(l=l.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,m=s;switch(p=t,f=n,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(f,d,p);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(p="function"===typeof(h=m.payload)?h.call(f,d,p):h)||void 0===p)break e;d=F({},d,p);break e;case 2:Ao=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=f,u=d):l=l.next=f,i|=p;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(p=s).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===l&&(u=d),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===o&&(a.shared.lanes=0);Mu|=i,e.lanes=i,e.memoizedState=d}}function jo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var zo=(new r.Component).refs;function Vo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Wo={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),o=Do(r,a);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,a))&&(nc(t,e,a,r),Mo(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),o=Do(r,a);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,a))&&(nc(t,e,a,r),Mo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=Do(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Lo(e,a,r))&&(nc(t,e,r,n),Mo(t,e,r))}};function Zo(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,o))}function Uo(e,t,n){var r=!1,a=Na,o=t.contextType;return"object"===typeof o&&null!==o?o=To(o):(a=Oa(t)?Ra:_a.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Aa(e,a):Na),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Wo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ho(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wo.enqueueReplaceState(t,t.state,null)}function Go(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=zo,Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=To(o):(o=Oa(t)?Ra:_a.current,a.context=Aa(e,o)),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Vo(e,t,o,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Wo.enqueueReplaceState(a,a.state,null),Bo(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function qo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;t===zo&&(t=a.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Xo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ko(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&Ko(o)===t.type)?((r=a(t,n.props)).ref=qo(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=qo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=qo(e,null,t),n.return=e,n;case w:return(t=Bc(t,e.mode,n)).return=e,t;case O:return p(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Xo(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===a?c(e,t,n,r):null;case w:return n.key===a?l(e,t,n,r):null;case O:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||L(n))return null!==a?null:d(e,t,n,r,null);Xo(e,n)}return null}function h(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case O:return h(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,a,null);Xo(t,r)}return null}function m(a,o,s,u){for(var c=null,l=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(a,d,s[m],u);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),o=i(v,o,m),null===l?c=v:l.sibling=v,l=v,d=g}if(m===s.length)return n(a,d),ao&&$a(a,m),c;if(null===d){for(;m<s.length;m++)null!==(d=p(a,s[m],u))&&(o=i(d,o,m),null===l?c=d:l.sibling=d,l=d);return ao&&$a(a,m),c}for(d=r(a,d);m<s.length;m++)null!==(g=h(d,a,m,s[m],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=i(g,o,m),null===l?c=g:l.sibling=g,l=g);return e&&d.forEach((function(e){return t(a,e)})),ao&&$a(a,m),c}function g(a,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var d=l=null,m=s,g=s=0,v=null,y=u.next();null!==m&&!y.done;g++,y=u.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(a,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(a,m),s=i(b,s,g),null===d?l=b:d.sibling=b,d=b,m=v}if(y.done)return n(a,m),ao&&$a(a,g),l;if(null===m){for(;!y.done;g++,y=u.next())null!==(y=p(a,y.value,c))&&(s=i(y,s,g),null===d?l=y:d.sibling=y,d=y);return ao&&$a(a,g),l}for(m=r(a,m);!y.done;g++,y=u.next())null!==(y=h(m,a,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=i(y,s,g),null===d?l=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(a,e)})),ao&&$a(a,g),l}return function e(r,o,i,u){if("object"===typeof i&&null!==i&&i.type===S&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case k:e:{for(var c=i.key,l=o;null!==l;){if(l.key===c){if((c=i.type)===S){if(7===l.tag){n(r,l.sibling),(o=a(l,i.props.children)).return=r,r=o;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Ko(c)===l.type){n(r,l.sibling),(o=a(l,i.props)).ref=qo(r,l,i),o.return=r,r=o;break e}n(r,l);break}t(r,l),l=l.sibling}i.type===S?((o=Lc(i.props.children,r.mode,u,i.key)).return=r,r=o):((u=Dc(i.type,i.key,i.props,null,r.mode,u)).ref=qo(r,o,i),u.return=r,r=u)}return s(r);case w:e:{for(l=i.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){n(r,o.sibling),(o=a(o,i.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bc(i,r.mode,u)).return=r,r=o}return s(r);case O:return e(r,o,(l=i._init)(i._payload),u)}if(te(i))return m(r,o,i,u);if(L(i))return g(r,o,i,u);Xo(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(n(r,o.sibling),(o=a(o,i)).return=r,r=o):(n(r,o),(o=Fc(i,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var Qo=Yo(!0),$o=Yo(!1),Jo={},ei=Ca(Jo),ti=Ca(Jo),ni=Ca(Jo);function ri(e){if(e===Jo)throw Error(o(174));return e}function ai(e,t){switch(Ta(ni,t),Ta(ti,e),Ta(ei,Jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ea(ei),Ta(ei,t)}function oi(){Ea(ei),Ea(ti),Ea(ni)}function ii(e){ri(ni.current);var t=ri(ei.current),n=ue(t,e.type);t!==n&&(Ta(ti,e),Ta(ei,n))}function si(e){ti.current===e&&(Ea(ei),Ea(ti))}var ui=Ca(0);function ci(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var li=[];function di(){for(var e=0;e<li.length;e++)li[e]._workInProgressVersionPrimary=null;li.length=0}var pi=x.ReactCurrentDispatcher,fi=x.ReactCurrentBatchConfig,hi=0,mi=null,gi=null,vi=null,yi=!1,bi=!1,xi=0,ki=0;function wi(){throw Error(o(321))}function Si(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Ci(e,t,n,r,a,i){if(hi=i,mi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pi.current=null===e||null===e.memoizedState?ss:us,e=n(r,a),bi){i=0;do{if(bi=!1,xi=0,25<=i)throw Error(o(301));i+=1,vi=gi=null,t.updateQueue=null,pi.current=cs,e=n(r,a)}while(bi)}if(pi.current=is,t=null!==gi&&null!==gi.next,hi=0,vi=gi=mi=null,yi=!1,t)throw Error(o(300));return e}function Ei(){var e=0!==xi;return xi=0,e}function Ti(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vi?mi.memoizedState=vi=e:vi=vi.next=e,vi}function Ni(){if(null===gi){var e=mi.alternate;e=null!==e?e.memoizedState:null}else e=gi.next;var t=null===vi?mi.memoizedState:vi.next;if(null!==t)vi=t,gi=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gi=e).memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},null===vi?mi.memoizedState=vi=e:vi=vi.next=e}return vi}function _i(e,t){return"function"===typeof t?t(e):t}function Ii(e){var t=Ni(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=gi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var u=s=null,c=null,l=i;do{var d=l.lane;if((hi&d)===d)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var p={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=p,s=r):c=c.next=p,mi.lanes|=d,Mu|=d}l=l.next}while(null!==l&&l!==i);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,mi.lanes|=i,Mu|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ri(e){var t=Ni(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);sr(i,t.memoizedState)||(xs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ai(){}function Oi(e,t){var n=mi,r=Ni(),a=t(),i=!sr(r.memoizedState,a);if(i&&(r.memoizedState=a,xs=!0),r=r.queue,Ui(Li.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==vi&&1&vi.memoizedState.tag){if(n.flags|=2048,ji(9,Di.bind(null,n,r,a,t),void 0,null),null===Iu)throw Error(o(349));0!==(30&hi)||Pi(n,t,a)}return a}function Pi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mi.updateQueue)?(t={lastEffect:null,stores:null},mi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Di(e,t,n,r){t.value=n,t.getSnapshot=r,Mi(t)&&Fi(e)}function Li(e,t,n){return n((function(){Mi(t)&&Fi(e)}))}function Mi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fi(e){var t=Ro(e,1);null!==t&&nc(t,e,1,-1)}function Bi(e){var t=Ti();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mi,e),[t.memoizedState,e]}function ji(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mi.updateQueue)?(t={lastEffect:null,stores:null},mi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zi(){return Ni().memoizedState}function Vi(e,t,n,r){var a=Ti();mi.flags|=e,a.memoizedState=ji(1|t,n,void 0,void 0===r?null:r)}function Wi(e,t,n,r){var a=Ni();r=void 0===r?null:r;var o=void 0;if(null!==gi){var i=gi.memoizedState;if(o=i.destroy,null!==r&&Si(r,i.deps))return void(a.memoizedState=ji(t,n,o,r))}mi.flags|=e,a.memoizedState=ji(1|t,n,o,r)}function Zi(e,t){return Vi(8390656,8,e,t)}function Ui(e,t){return Wi(2048,8,e,t)}function Hi(e,t){return Wi(4,2,e,t)}function Gi(e,t){return Wi(4,4,e,t)}function qi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wi(4,4,qi.bind(null,t,e),n)}function Ki(){}function Yi(e,t){var n=Ni();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Si(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qi(e,t){var n=Ni();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Si(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $i(e,t,n){return 0===(21&hi)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mi.lanes|=n,Mu|=n,e.baseState=!0),t)}function Ji(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fi.transition;fi.transition={};try{e(!1),t()}finally{bt=n,fi.transition=r}}function es(){return Ni().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))as(t,n);else if(null!==(n=Io(e,t,n,r))){nc(n,e,r,ec()),os(n,t,r)}}function ns(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,i)){var u=t.interleaved;return null===u?(a.next=a,_o(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Io(e,t,a,r))&&(nc(n,e,r,a=ec()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===mi||null!==t&&t===mi}function as(e,t){bi=yi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var is={readContext:To,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useInsertionEffect:wi,useLayoutEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useMutableSource:wi,useSyncExternalStore:wi,useId:wi,unstable_isNewReconciler:!1},ss={readContext:To,useCallback:function(e,t){return Ti().memoizedState=[e,void 0===t?null:t],e},useContext:To,useEffect:Zi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vi(4194308,4,qi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vi(4,2,e,t)},useMemo:function(e,t){var n=Ti();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ti();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ti().memoizedState=e},useState:Bi,useDebugValue:Ki,useDeferredValue:function(e){return Ti().memoizedState=e},useTransition:function(){var e=Bi(!1),t=e[0];return e=Ji.bind(null,e[1]),Ti().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mi,a=Ti();if(ao){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Iu)throw Error(o(349));0!==(30&hi)||Pi(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Zi(Li.bind(null,r,i,e),[e]),r.flags|=2048,ji(9,Di.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Ti(),t=Iu.identifierPrefix;if(ao){var n=Qa;t=":"+t+"R"+(n=(Ya&~(1<<32-it(Ya)-1)).toString(32)+n),0<(n=xi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ki++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:To,useCallback:Yi,useContext:To,useEffect:Ui,useImperativeHandle:Xi,useInsertionEffect:Hi,useLayoutEffect:Gi,useMemo:Qi,useReducer:Ii,useRef:zi,useState:function(){return Ii(_i)},useDebugValue:Ki,useDeferredValue:function(e){return $i(Ni(),gi.memoizedState,e)},useTransition:function(){return[Ii(_i)[0],Ni().memoizedState]},useMutableSource:Ai,useSyncExternalStore:Oi,useId:es,unstable_isNewReconciler:!1},cs={readContext:To,useCallback:Yi,useContext:To,useEffect:Ui,useImperativeHandle:Xi,useInsertionEffect:Hi,useLayoutEffect:Gi,useMemo:Qi,useReducer:Ri,useRef:zi,useState:function(){return Ri(_i)},useDebugValue:Ki,useDeferredValue:function(e){var t=Ni();return null===gi?t.memoizedState=e:$i(t,gi.memoizedState,e)},useTransition:function(){return[Ri(_i)[0],Ni().memoizedState]},useMutableSource:Ai,useSyncExternalStore:Oi,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ps(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Do(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Uu||(Uu=!0,Hu=r),ps(0,t)},n}function ms(e,t,n){(n=Do(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ps(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ps(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Do(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bs=x.ReactCurrentOwner,xs=!1;function ks(e,t,n,r){t.child=null===e?$o(t,null,n,r):Qo(t,e.child,n,r)}function ws(e,t,n,r,a){n=n.render;var o=t.ref;return Eo(t,a),r=Ci(e,t,n,r,o,a),n=Ei(),null===e||xs?(ao&&n&&eo(t),t.flags|=1,ks(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Us(e,t,a))}function Ss(e,t,n,r,a){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Cs(e,t,o,r,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(i,r)&&e.ref===t.ref)return Us(e,t,a)}return t.flags|=1,(e=Pc(o,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=o,0===(e.lanes&a))return t.lanes=e.lanes,Us(e,t,a);0!==(131072&e.flags)&&(xs=!0)}}return Ns(e,t,n,r,a)}function Es(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ta(Pu,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ta(Pu,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ta(Pu,Ou),Ou|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ta(Pu,Ou),Ou|=r;return ks(e,t,a,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,r,a){var o=Oa(n)?Ra:_a.current;return o=Aa(t,o),Eo(t,a),n=Ci(e,t,n,r,o,a),r=Ei(),null===e||xs?(ao&&r&&eo(t),t.flags|=1,ks(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Us(e,t,a))}function _s(e,t,n,r,a){if(Oa(n)){var o=!0;Ma(t)}else o=!1;if(Eo(t,a),null===t.stateNode)Zs(e,t),Uo(t,n,r),Go(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var u=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=To(c):c=Aa(t,c=Oa(n)?Ra:_a.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||u!==c)&&Ho(t,i,r,c),Ao=!1;var p=t.memoizedState;i.state=p,Bo(t,r,i,a),u=t.memoizedState,s!==r||p!==u||Ia.current||Ao?("function"===typeof l&&(Vo(t,n,l,r),u=t.memoizedState),(s=Ao||Zo(t,n,s,r,p,u,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Po(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:vo(t.type,s),i.props=c,d=t.pendingProps,p=i.context,"object"===typeof(u=n.contextType)&&null!==u?u=To(u):u=Aa(t,u=Oa(n)?Ra:_a.current);var f=n.getDerivedStateFromProps;(l="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||p!==u)&&Ho(t,i,r,u),Ao=!1,p=t.memoizedState,i.state=p,Bo(t,r,i,a);var h=t.memoizedState;s!==d||p!==h||Ia.current||Ao?("function"===typeof f&&(Vo(t,n,f,r),h=t.memoizedState),(c=Ao||Zo(t,n,c,r,p,h,u)||!1)?(l||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,u),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=u,r=c):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,o,a)}function Is(e,t,n,r,a,o){Ts(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Fa(t,n,!1),Us(e,t,o);r=t.stateNode,bs.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Qo(t,e.child,null,o),t.child=Qo(t,null,s,o)):ks(e,t,s,o),t.memoizedState=r.state,a&&Fa(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Da(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(0,t.context,!1),ai(e,t.containerInfo)}function As(e,t,n,r,a){return ho(),mo(a),t.flags|=256,ks(e,t,n,r),t.child}var Os,Ps,Ds,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,a=t.pendingProps,i=ui.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ta(ui,1&i),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,s?(a=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,a,0,null),e=Lc(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):Bs(t,u));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,r=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Mc({mode:"visible",children:r.children},a,0,null),(i=Lc(i,a,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&Qo(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,i);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var u=r.dgst;return r=u,js(e,t,s,r=ds(i=Error(o(419)),r,void 0))}if(u=0!==(s&e.childLanes),xs||u){if(null!==(r=Iu)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Ro(e,a),nc(r,e,a,-1))}return mc(),js(e,t,s,r=ds(Error(o(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ro=ca(a.nextSibling),no=t,ao=!0,oo=null,null!==e&&(qa[Xa++]=Ya,qa[Xa++]=Qa,qa[Xa++]=Ka,Ya=e.id,Qa=e.overflow,Ka=t),(t=Bs(t,r.children)).flags|=4096,t)}(e,t,u,a,r,i,n);if(s){s=a.fallback,u=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Pc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Pc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,a}return e=(s=e.child).sibling,a=Pc(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Bs(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){return null!==r&&mo(r),Qo(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Co(e.return,t,n)}function Vs(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Ws(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(ks(e,t,r.children,n),0!==(2&(r=ui.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ta(ui,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ci(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Vs(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ci(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Vs(t,!0,n,null,o);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Us(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ao)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Oa(t.type)&&Pa(),Gs(t),null;case 3:return r=t.stateNode,oi(),Ea(Ia),Ea(_a),di(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(po(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ic(oo),oo=null))),Gs(t),null;case 5:si(t);var a=ri(ni.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Gs(t),null}if(e=ri(ei.current),po(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[pa]=t,r[fa]=i,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(a=0;a<Lr.length;a++)jr(Lr[a],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,i),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},jr("invalid",r);break;case"textarea":ae(r,i),jr("invalid",r)}for(var u in ye(n,i),a=null,i)if(i.hasOwnProperty(u)){var c=i[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&$r(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&$r(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&jr("scroll",r)}switch(n){case"input":G(r),J(r,i,!0);break;case"textarea":G(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Jr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[pa]=t,e[fa]=r,Os(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":jr("cancel",e),jr("close",e),a=r;break;case"iframe":case"object":case"embed":jr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Lr.length;a++)jr(Lr[a],e);a=r;break;case"source":jr("error",e),a=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),a=r;break;case"details":jr("toggle",e),a=r;break;case"input":Y(e,r),a=K(e,r),jr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),jr("invalid",e)}for(i in ye(n,a),c=a)if(c.hasOwnProperty(i)){var l=c[i];"style"===i?ge(e,l):"dangerouslySetInnerHTML"===i?null!=(l=l?l.__html:void 0)&&de(e,l):"children"===i?"string"===typeof l?("textarea"!==n||""!==l)&&pe(e,l):"number"===typeof l&&pe(e,""+l):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=l&&"onScroll"===i&&jr("scroll",e):null!=l&&b(e,i,l,u))}switch(n){case"input":G(e),J(e,r,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+U(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ds(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ri(ni.current),ri(ei.current),po(t)){if(r=t.stateNode,n=t.memoizedProps,r[pa]=t,(i=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pa]=t,t.stateNode=r}return Gs(t),null;case 13:if(Ea(ui),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ao&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),ho(),t.flags|=98560,i=!1;else if(i=po(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[pa]=t}else ho(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),i=!1}else null!==oo&&(ic(oo),oo=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ui.current)?0===Du&&(Du=3):mc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return oi(),null===e&&Wr(t.stateNode.containerInfo),Gs(t),null;case 10:return So(t.type._context),Gs(t),null;case 19:if(Ea(ui),null===(i=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=i.rendering))if(r)Hs(i,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ci(e))){for(t.flags|=128,Hs(i,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(u=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,e=u.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ta(ui,1&ui.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>Wu&&(t.flags|=128,r=!0,Hs(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ci(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(i,!0),null===i.tail&&"hidden"===i.tailMode&&!u.alternate&&!ao)return Gs(t),null}else 2*Qe()-i.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=128,r=!0,Hs(i,!1),t.lanes=4194304);i.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=i.last)?n.sibling=u:t.child=u,i.last=u)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,n=ui.current,Ta(ui,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xs(e,t){switch(to(t),t.tag){case 1:return Oa(t.type)&&Pa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oi(),Ea(Ia),Ea(_a),di(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return si(t),null;case 13:if(Ea(ui),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ho()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ea(ui),null;case 4:return oi(),null;case 10:return So(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ps=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ri(ei.current);var o,i=null;switch(n){case"input":a=K(e,a),r=K(e,r),i=[];break;case"select":a=F({},a,{value:void 0}),r=F({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ye(n,r),n=null,a)if(!r.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var u=a[l];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=a?a[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(i=i||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),i||u===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(t.updateQueue=l)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,Ys=!1,Qs="function"===typeof WeakSet?WeakSet:Set,$s=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&eu(t,n,o)}a=a.next}while(a!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pa],delete t[fa],delete t[ma],delete t[ga],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iu(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||iu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,du=!1;function pu(e,t,n){for(n=n.child;null!==n;)fu(e,t,n),n=n.sibling}function fu(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Ys||Js(n,t);case 6:var r=lu,a=du;lu=null,pu(e,t,n),du=a,null!==(lu=r)&&(du?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(du?(e=lu,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Wt(e)):ua(lu,n.stateNode));break;case 4:r=lu,a=du,lu=n.stateNode.containerInfo,du=!0,pu(e,t,n),lu=r,du=a;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&eu(n,t,i),a=a.next}while(a!==r)}pu(e,t,n);break;case 1:if(!Ys&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cc(n,t,s)}pu(e,t,n);break;case 21:pu(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,pu(e,t,n),Ys=r):pu(e,t,n);break;default:pu(e,t,n)}}function hu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=_c.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,du=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===lu)throw Error(o(160));fu(i,s,a),lu=null,du=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){Cc(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),vu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(g){Cc(e,e.return,g)}try{nu(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:mu(t,e),vu(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(mu(t,e),vu(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var a=e.stateNode;try{pe(a,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===i.type&&null!=i.name&&Q(a,i),be(u,s);var l=be(u,i);for(s=0;s<c.length;s+=2){var d=c[s],p=c[s+1];"style"===d?ge(a,p):"dangerouslySetInnerHTML"===d?de(a,p):"children"===d?pe(a,p):b(a,d,p,l)}switch(u){case"input":$(a,i);break;case"textarea":oe(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var h=i.value;null!=h?ne(a,!!i.multiple,h,!1):f!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[fa]=i}catch(g){Cc(e,e.return,g)}}break;case 6:if(mu(t,e),vu(e),4&r){if(null===e.stateNode)throw Error(o(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Cc(e,e.return,g)}}break;case 3:if(mu(t,e),vu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:mu(t,e),vu(e);break;case 13:mu(t,e),vu(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Vu=Qe())),4&r&&hu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(l=Ys)||d,mu(t,e),Ys=l):mu(t,e),vu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(p=$s=d;null!==$s;){switch(h=(f=$s).child,f.tag){case 0:case 11:case 14:case 15:nu(4,f,f.return);break;case 1:Js(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:Js(f,f.return);break;case 22:if(null!==f.memoizedState){ku(p);continue}}null!==h?(h.return=f,$s=h):ku(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{a=p.stateNode,l?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(u=p.stateNode,s=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=me("display",s))}catch(g){Cc(e,e.return,g)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=l?"":p.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mu(t,e),vu(e),4&r&&hu(e);case 21:}}function vu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(iu(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(pe(a,""),r.flags&=-33),cu(e,su(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;uu(e,su(e),i);break;default:throw Error(o(161))}}catch(s){Cc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){$s=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var a=$s,o=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Ks;if(!i){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Ys;s=Ks;var c=Ys;if(Ks=i,(Ys=u)&&!c)for($s=a;null!==$s;)u=(i=$s).child,22===i.tag&&null!==i.memoizedState?wu(a):null!==u?(u.return=i,$s=u):wu(a);for(;null!==o;)$s=o,bu(o,t,n),o=o.sibling;$s=a,Ks=s,Ys=c}xu(e)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,$s=o):xu(e)}}function xu(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&jo(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}jo(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Wt(p)}}}break;default:throw Error(o(163))}Ys||512&t.flags&&au(t)}catch(f){Cc(t,t.return,f)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function ku(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function wu(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Cc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){Cc(t,a,u)}}var o=t.return;try{au(t)}catch(u){Cc(t,o,u)}break;case 5:var i=t.return;try{au(t)}catch(u){Cc(t,i,u)}}}catch(u){Cc(t,t.return,u)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Su,Cu=Math.ceil,Eu=x.ReactCurrentDispatcher,Tu=x.ReactCurrentOwner,Nu=x.ReactCurrentBatchConfig,_u=0,Iu=null,Ru=null,Au=0,Ou=0,Pu=Ca(0),Du=0,Lu=null,Mu=0,Fu=0,Bu=0,ju=null,zu=null,Vu=0,Wu=1/0,Zu=null,Uu=!1,Hu=null,Gu=null,qu=!1,Xu=null,Ku=0,Yu=0,Qu=null,$u=-1,Ju=0;function ec(){return 0!==(6&_u)?Qe():-1!==$u?$u:$u=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&_u)&&0!==Au?Au&-Au:null!==go.transition?(0===Ju&&(Ju=mt()),Ju):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yu)throw Yu=0,Qu=null,Error(o(185));vt(e,n,r),0!==(2&_u)&&e===Iu||(e===Iu&&(0===(2&_u)&&(Fu|=n),4===Du&&sc(e,Au)),rc(e,r),1===n&&0===_u&&0===(1&t.mode)&&(Wu=Qe()+500,ja&&Wa()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-it(o),s=1<<i,u=a[i];-1===u?0!==(s&n)&&0===(s&r)||(a[i]=ft(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=pt(e,e===Iu?Au:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){ja=!0,Va(e)}(uc.bind(null,e)):Va(uc.bind(null,e)),ia((function(){0===(6&_u)&&Wa()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if($u=-1,Ju=0,0!==(6&_u))throw Error(o(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=pt(e,e===Iu?Au:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=_u;_u|=2;var i=hc();for(Iu===e&&Au===t||(Zu=null,Wu=Qe()+500,pc(e,t));;)try{yc();break}catch(u){fc(e,u)}wo(),Eu.current=i,_u=a,null!==Ru?t=0:(Iu=null,Au=0,t=Du)}if(0!==t){if(2===t&&(0!==(a=ht(e))&&(r=a,t=oc(e,a))),1===t)throw n=Lu,pc(e,0),sc(e,r),rc(e,Qe()),n;if(6===t)sc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!sr(o(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(i=ht(e))&&(r=i,t=oc(e,i))),1===t))throw n=Lu,pc(e,0),sc(e,r),rc(e,Qe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:kc(e,zu,Zu);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Vu+500-Qe())){if(0!==pt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(kc.bind(null,e,zu,Zu),t);break}kc(e,zu,Zu);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>a&&(a=s),r&=~i}if(r=a,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cu(r/1960))-r)){e.timeoutHandle=ra(kc.bind(null,e,zu,Zu),r);break}kc(e,zu,Zu);break;default:throw Error(o(329))}}}return rc(e,Qe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=ju;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zu,zu=n,null!==t&&ic(t)),e}function ic(e){null===zu?zu=e:zu.push.apply(zu,e)}function sc(e,t){for(t&=~Bu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&_u))throw Error(o(327));wc();var t=pt(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Lu,pc(e,0),sc(e,t),rc(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,zu,Zu),rc(e,Qe()),null}function cc(e,t){var n=_u;_u|=1;try{return e(t)}finally{0===(_u=n)&&(Wu=Qe()+500,ja&&Wa())}}function lc(e){null!==Xu&&0===Xu.tag&&0===(6&_u)&&wc();var t=_u;_u|=1;var n=Nu.transition,r=bt;try{if(Nu.transition=null,bt=1,e)return e()}finally{bt=r,Nu.transition=n,0===(6&(_u=t))&&Wa()}}function dc(){Ou=Pu.current,Ea(Pu)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pa();break;case 3:oi(),Ea(Ia),Ea(_a),di();break;case 5:si(r);break;case 4:oi();break;case 13:case 19:Ea(ui);break;case 10:So(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Iu=e,Ru=e=Pc(e.current,null),Au=Ou=t,Du=0,Lu=null,Bu=Fu=Mu=0,zu=ju=null,null!==No){for(t=0;t<No.length;t++)if(null!==(r=(n=No[t]).interleaved)){n.interleaved=null;var a=r.next,o=n.pending;if(null!==o){var i=o.next;o.next=a,r.next=i}n.pending=r}No=null}return e}function fc(e,t){for(;;){var n=Ru;try{if(wo(),pi.current=is,yi){for(var r=mi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}yi=!1}if(hi=0,vi=gi=mi=null,bi=!1,xi=0,Tu.current=null,null===n||null===n.return){Du=1,Lu=t,Ru=null;break}e:{var i=e,s=n.return,u=n,c=t;if(t=Au,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,d=u,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=vs(s);if(null!==h){h.flags&=-257,ys(h,s,u,0,t),1&h.mode&&gs(i,l,t),c=l;var m=(t=h).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){gs(i,l,t),mc();break e}c=Error(o(426))}else if(ao&&1&u.mode){var v=vs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ys(v,s,u,0,t),mo(ls(c,u));break e}}i=c=ls(c,u),4!==Du&&(Du=2),null===ju?ju=[i]:ju.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Fo(i,hs(0,c,t));break e;case 1:u=c;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gu||!Gu.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Fo(i,ms(i,u,t));break e}}i=i.return}while(null!==i)}xc(n)}catch(x){t=x,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function hc(){var e=Eu.current;return Eu.current=is,null===e?is:e}function mc(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Iu||0===(268435455&Mu)&&0===(268435455&Fu)||sc(Iu,Au)}function gc(e,t){var n=_u;_u|=2;var r=hc();for(Iu===e&&Au===t||(Zu=null,pc(e,t));;)try{vc();break}catch(a){fc(e,a)}if(wo(),_u=n,Eu.current=r,null!==Ru)throw Error(o(261));return Iu=null,Au=0,Du}function vc(){for(;null!==Ru;)bc(Ru)}function yc(){for(;null!==Ru&&!Ke();)bc(Ru)}function bc(e){var t=Su(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?xc(e):Ru=t,Tu.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Ou)))return void(Ru=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Du=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Du&&(Du=5)}function kc(e,t,n){var r=bt,a=Nu.transition;try{Nu.transition=null,bt=1,function(e,t,n,r){do{wc()}while(null!==Xu);if(0!==(6&_u))throw Error(o(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}(e,i),e===Iu&&(Ru=Iu=null,Au=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qu||(qu=!0,Ic(tt,(function(){return wc(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Nu.transition,Nu.transition=null;var s=bt;bt=1;var u=_u;_u|=4,Tu.current=null,function(e,t){if(ea=Ut,fr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(k){n=null;break e}var s=0,u=-1,c=-1,l=0,d=0,p=e,f=null;t:for(;;){for(var h;p!==n||0!==a&&3!==p.nodeType||(u=s+a),p!==i||0!==r&&3!==p.nodeType||(c=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(h=p.firstChild);)f=p,p=h;for(;;){if(p===e)break t;if(f===n&&++l===a&&(u=s),f===i&&++d===r&&(c=s),null!==(h=p.nextSibling))break;f=(p=f).parentNode}p=h}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ut=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:vo(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(k){Cc(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}m=tu,tu=!1}(e,n),gu(n,e),hr(ta),Ut=!!ea,ta=ea=null,e.current=n,yu(n,e,a),Ye(),_u=u,bt=s,Nu.transition=i}else e.current=n;if(qu&&(qu=!1,Xu=e,Ku=a),0===(i=e.pendingLanes)&&(Gu=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((a=t[n]).value,{componentStack:a.stack,digest:a.digest});if(Uu)throw Uu=!1,e=Hu,Hu=null,e;0!==(1&Ku)&&0!==e.tag&&wc(),0!==(1&(i=e.pendingLanes))?e===Qu?Yu++:(Yu=0,Qu=e):Yu=0,Wa()}(e,t,n,r)}finally{Nu.transition=a,bt=r}return null}function wc(){if(null!==Xu){var e=xt(Ku),t=Nu.transition,n=bt;try{if(Nu.transition=null,bt=16>e?16:e,null===Xu)var r=!1;else{if(e=Xu,Xu=null,Ku=0,0!==(6&_u))throw Error(o(331));var a=_u;for(_u|=4,$s=e.current;null!==$s;){var i=$s,s=i.child;if(0!==(16&$s.flags)){var u=i.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for($s=l;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:nu(8,d,i)}var p=d.child;if(null!==p)p.return=d,$s=p;else for(;null!==$s;){var f=(d=$s).sibling,h=d.return;if(ou(d),d===l){$s=null;break}if(null!==f){f.return=h,$s=f;break}$s=h}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$s=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,$s=s;else e:for(;null!==$s;){if(0!==(2048&(i=$s).flags))switch(i.tag){case 0:case 11:case 15:nu(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,$s=y;break e}$s=i.return}}var b=e.current;for($s=b;null!==$s;){var x=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,$s=x;else e:for(s=b;null!==$s;){if(0!==(2048&(u=$s).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(w){Cc(u,u.return,w)}if(u===s){$s=null;break e}var k=u.sibling;if(null!==k){k.return=u.return,$s=k;break e}$s=u.return}}if(_u=a,Wa(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(at,e)}catch(w){}r=!0}return r}finally{bt=n,Nu.transition=t}}return!1}function Sc(e,t,n){e=Lo(e,t=hs(0,t=ls(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Lo(t,e=ms(t,e=ls(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Iu===e&&(Au&n)===n&&(4===Du||3===Du&&(130023424&Au)===Au&&500>Qe()-Vu?pc(e,0):Bu|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Ro(e,t))&&(vt(e,t,n),rc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function _c(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Tc(e,n)}function Ic(e,t){return qe(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Rc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,a,i){var s=2;if(r=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Lc(n.children,a,i,t);case C:s=8,a|=8;break;case E:return(e=Ac(12,n,t,2|a)).elementType=E,e.lanes=i,e;case I:return(e=Ac(13,n,t,a)).elementType=I,e.lanes=i,e;case R:return(e=Ac(19,n,t,a)).elementType=R,e.lanes=i,e;case P:return Mc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case N:s=9;break e;case _:s=11;break e;case A:s=14;break e;case O:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ac(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Lc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,a,o,i,s,u){return e=new jc(e,t,n,s,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ac(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function Vc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Wc(e){if(!e)return Na;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oa(n))return La(e,n,t)}return t}function Zc(e,t,n,r,a,o,i,s,u){return(e=zc(n,r,!0,e,0,o,0,s,u)).context=Wc(null),n=e.current,(o=Do(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,a),e.current.lanes=a,vt(e,a,r),rc(e,r),e}function Uc(e,t,n,r){var a=t.current,o=ec(),i=tc(a);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Do(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Lo(a,t,i))&&(nc(e,a,i,o),Mo(e,a,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ia.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),ho();break;case 5:ii(t);break;case 1:Oa(t.type)&&Ma(t);break;case 4:ai(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ta(yo,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ta(ui,1&ui.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ta(ui,1&ui.current),null!==(e=Us(e,t,n))?e.sibling:null);Ta(ui,1&ui.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ta(ui,ui.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Us(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ao&&0!==(1048576&t.flags)&&Ja(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Zs(e,t),e=t.pendingProps;var a=Aa(t,_a.current);Eo(t,n),a=Ci(null,t,r,e,a,n);var i=Ei();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oa(r)?(i=!0,Ma(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Oo(t),a.updater=Wo,t.stateNode=a,a._reactInternals=t,Go(t,r,e,n),t=Is(null,t,r,!0,i,n)):(t.tag=0,ao&&i&&eo(t),ks(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Zs(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===A)return 14}return 2}(r),e=vo(r,e),a){case 0:t=Ns(null,t,r,e,n);break e;case 1:t=_s(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ns(e,t,r,a=t.elementType===r?a:vo(r,a),n);case 1:return r=t.type,a=t.pendingProps,_s(e,t,r,a=t.elementType===r?a:vo(r,a),n);case 3:e:{if(Rs(t),null===e)throw Error(o(387));r=t.pendingProps,a=(i=t.memoizedState).element,Po(e,t),Bo(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=As(e,t,r,n,a=ls(Error(o(423)),t));break e}if(r!==a){t=As(e,t,r,n,a=ls(Error(o(424)),t));break e}for(ro=ca(t.stateNode.containerInfo.firstChild),no=t,ao=!0,oo=null,n=$o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ho(),r===a){t=Us(e,t,n);break e}ks(e,t,r,n)}t=t.child}return t;case 5:return ii(t),null===e&&co(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==i&&na(r,i)&&(t.flags|=32),Ts(e,t),ks(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fs(e,t,n);case 4:return ai(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qo(t,null,r,n):ks(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ws(e,t,r,a=t.elementType===r?a:vo(r,a),n);case 7:return ks(e,t,t.pendingProps,n),t.child;case 8:case 12:return ks(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,Ta(yo,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===a.children&&!Ia.current){t=Us(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var u=i.dependencies;if(null!==u){s=i.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Do(-1,n&-n)).tag=2;var l=i.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),l.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Co(i.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Co(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}ks(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Eo(t,n),r=r(a=To(a)),t.flags|=1,ks(e,t,r,n),t.child;case 14:return a=vo(r=t.type,t.pendingProps),Ss(e,t,r,a=vo(r.type,a),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vo(r,a),Zs(e,t),t.tag=1,Oa(r)?(e=!0,Ma(t)):e=!1,Eo(t,n),Uo(t,r,a),Go(t,r,a,n),Is(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function el(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if("function"===typeof a){var s=a;a=function(){var e=Hc(i);s.call(e)}}Uc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var o=r;r=function(){var e=Hc(i);o.call(e)}}var i=Zc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=i,e[ha]=i.current,Wr(8===e.nodeType?e.parentNode:e),lc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Hc(u);s.call(e)}}var u=zc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=u,e[ha]=u.current,Wr(8===e.nodeType?e.parentNode:e),lc((function(){Uc(t,u,n,r)})),u}(n,t,e,a,r);return Hc(i)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Uc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Uc(null,e,null,null)})),t[ha]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Qe()),0===(6&_u)&&(Wu=Qe()+500,Wa()))}break;case 13:lc((function(){var t=Ro(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},wt=function(e){if(13===e.tag){var t=Ro(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ro(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},Ct=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ka(r);if(!a)throw Error(o(90));q(r),$(r,a)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=cc,Ie=lc;var tl={usingClientEntryPoint:!1,Events:[ba,xa,ka,Te,Ne,cc]},nl={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{at=al.inject(rl),ot=al}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(o(200));return Vc(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(o(299));var n=!1,r="",a=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,a),e[ha]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(o(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",s=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Zc(t,null,e,1,null!=n?n:null,a,0,i,s),e[ha]=t.current,Wr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(o(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(o(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[ha]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1739:function(e,t,n){"use strict";var r=n(1168);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1168:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(534)},4561:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return d.default}}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(7313)),o=h(n(5192)),i=h(n(1168)),s=h(n(3061)),u=n(1407),c=n(9873),l=n(3579),d=h(n(4303)),p=h(n(7776)),f=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function h(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){s=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var a=N(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(l,e);var t,n,r,o=C(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),_(T(t=o.call(this,e)),"onDragStart",(function(e,n){if((0,p.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,c.createDraggableData)(T(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),_(T(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,p.default)("Draggable: onDrag: %j",n);var r=(0,c.createDraggableData)(T(t),n),a={x:r.x,y:r.y};if(t.props.bounds){var o=a.x,i=a.y;a.x+=t.state.slackX,a.y+=t.state.slackY;var s=x((0,c.getBoundPosition)(T(t),a.x,a.y),2),u=s[0],l=s[1];a.x=u,a.y=l,a.slackX=t.state.slackX+(o-a.x),a.slackY=t.state.slackY+(i-a.y),r.x=a.x,r.y=a.y,r.deltaX=a.x-t.state.x,r.deltaY=a.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(a)})),_(T(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,c.createDraggableData)(T(t),n)))return!1;(0,p.default)("Draggable: onDragStop: %j",n);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var a=t.props.position,o=a.x,i=a.y;r.x=o,r.y=i}t.setState(r)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:b({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=l,r=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,r=t.prevPropsPosition;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,p.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:b({},n)})}}],(n=[{key:"componentDidMount",value:function(){"undefined"!==typeof window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:i.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props,n=(t.axis,t.bounds,t.children),r=t.defaultPosition,o=t.defaultClassName,i=t.defaultClassNameDragging,l=t.defaultClassNameDragged,p=t.position,h=t.positionOffset,m=(t.scale,v(t,f)),y={},x=null,k=!Boolean(p)||this.state.dragging,w=p||r,S={x:(0,c.canDragX)(this)&&k?this.state.x:w.x,y:(0,c.canDragY)(this)&&k?this.state.y:w.y};this.state.isElementSVG?x=(0,u.createSVGTransform)(S,h):y=(0,u.createCSSTransform)(S,h);var C=(0,s.default)(n.props.className||"",o,(_(e={},i,this.state.dragging),_(e,l,this.state.dragged),e));return a.createElement(d.default,g({},m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),a.cloneElement(a.Children.only(n),{className:C,style:b(b({},n.props.style),y),transform:x}))}}])&&w(t.prototype,n),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(a.Component);t.default=I,_(I,"displayName","Draggable"),_(I,"propTypes",b(b({},d.default.propTypes),{},{axis:o.default.oneOf(["both","x","y","none"]),bounds:o.default.oneOfType([o.default.shape({left:o.default.number,right:o.default.number,top:o.default.number,bottom:o.default.number}),o.default.string,o.default.oneOf([!1])]),defaultClassName:o.default.string,defaultClassNameDragging:o.default.string,defaultClassNameDragged:o.default.string,defaultPosition:o.default.shape({x:o.default.number,y:o.default.number}),positionOffset:o.default.shape({x:o.default.oneOfType([o.default.number,o.default.string]),y:o.default.oneOfType([o.default.number,o.default.string])}),position:o.default.shape({x:o.default.number,y:o.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe})),_(I,"defaultProps",b(b({},d.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},4303:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(7313)),o=d(n(5192)),i=d(n(1168)),s=n(1407),u=n(9873),c=n(3579),l=d(n(7776));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){s=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={start:"touchstart",move:"touchmove",stop:"touchend"},C={start:"mousedown",move:"mousemove",stop:"mouseup"},E=C,T=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(c,e);var t,n,r,o=y(c);function c(){var e;m(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return w(x(e=o.call.apply(o,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),w(x(e),"mounted",!1),w(x(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"===typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof r.defaultView.Node)||e.props.handle&&!(0,s.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,s.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var a=(0,s.getTouchIdentifier)(t);e.setState({touchIdentifier:a});var o=(0,u.getControlPosition)(t,a,x(e));if(null!=o){var i=o.x,c=o.y,d=(0,u.createCoreData)(x(e),i,c);(0,l.default)("DraggableCore: handleDragStart: %j",d),(0,l.default)("calling",e.props.onStart),!1!==e.props.onStart(t,d)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,s.addUserSelectStyles)(r),e.setState({dragging:!0,lastX:i,lastY:c}),(0,s.addEvent)(r,E.move,e.handleDrag),(0,s.addEvent)(r,E.stop,e.handleDragStop))}}})),w(x(e),"handleDrag",(function(t){var n=(0,u.getControlPosition)(t,e.state.touchIdentifier,x(e));if(null!=n){var r=n.x,a=n.y;if(Array.isArray(e.props.grid)){var o=r-e.state.lastX,i=a-e.state.lastY,s=f((0,u.snapToGrid)(e.props.grid,o,i),2);if(o=s[0],i=s[1],!o&&!i)return;r=e.state.lastX+o,a=e.state.lastY+i}var c=(0,u.createCoreData)(x(e),r,a);if((0,l.default)("DraggableCore: handleDrag: %j",c),!1!==e.props.onDrag(t,c)&&!1!==e.mounted)e.setState({lastX:r,lastY:a});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(p){var d=document.createEvent("MouseEvents");d.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(d)}}})),w(x(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,u.getControlPosition)(t,e.state.touchIdentifier,x(e));if(null!=n){var r=n.x,a=n.y;if(Array.isArray(e.props.grid)){var o=r-e.state.lastX||0,i=a-e.state.lastY||0,c=f((0,u.snapToGrid)(e.props.grid,o,i),2);o=c[0],i=c[1],r=e.state.lastX+o,a=e.state.lastY+i}var d=(0,u.createCoreData)(x(e),r,a);if(!1===e.props.onStop(t,d)||!1===e.mounted)return!1;var p=e.findDOMNode();p&&e.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(p.ownerDocument),(0,l.default)("DraggableCore: handleDragStop: %j",d),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),p&&((0,l.default)("DraggableCore: Removing handlers"),(0,s.removeEvent)(p.ownerDocument,E.move,e.handleDrag),(0,s.removeEvent)(p.ownerDocument,E.stop,e.handleDragStop))}}})),w(x(e),"onMouseDown",(function(t){return E=C,e.handleDragStart(t)})),w(x(e),"onMouseUp",(function(t){return E=C,e.handleDragStop(t)})),w(x(e),"onTouchStart",(function(t){return E=S,e.handleDragStart(t)})),w(x(e),"onTouchEnd",(function(t){return E=S,e.handleDragStop(t)})),e}return t=c,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,s.addEvent)(e,S.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,s.removeEvent)(t,C.move,this.handleDrag),(0,s.removeEvent)(t,S.move,this.handleDrag),(0,s.removeEvent)(t,C.stop,this.handleDragStop),(0,s.removeEvent)(t,S.stop,this.handleDragStop),(0,s.removeEvent)(e,S.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current:i.default.findDOMNode(this)}},{key:"render",value:function(){return a.cloneElement(a.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&g(t.prototype,n),r&&g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(a.Component);t.default=T,w(T,"displayName","DraggableCore"),w(T,"propTypes",{allowAnyClick:o.default.bool,disabled:o.default.bool,enableUserSelectHack:o.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:o.default.arrayOf(o.default.number),handle:o.default.string,cancel:o.default.string,nodeRef:o.default.object,onStart:o.default.func,onDrag:o.default.func,onStop:o.default.func,onMouseDown:o.default.func,scale:o.default.number,className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),w(T,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},9461:function(e,t,n){"use strict";var r=n(4561),a=r.default,o=r.DraggableCore;e.exports=a,e.exports.default=a,e.exports.DraggableCore=o},1407:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=f,t.addEvent=function(e,t,n,r){if(!e)return;var a=u({capture:!0},r);e.addEventListener?e.addEventListener(t,n,a):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},t.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&f(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){var n=p(e,t,"px");return c({},(0,o.browserPrefixToKey)("transform",o.default),n)},t.createSVGTransform=function(e,t){return p(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,a.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,a.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},t.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},t.getTranslation=p,t.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,a.int)(n.paddingTop),t-=(0,a.int)(n.paddingBottom)},t.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,a.int)(n.paddingLeft),t-=(0,a.int)(n.paddingRight)},t.matchesSelector=d,t.matchesSelectorAndParentsTo=function(e,t,n){var r=e;do{if(d(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},t.offsetXYFromParent=function(e,t,n){var r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-r.left)/n,o=(e.clientY+t.scrollTop-r.top)/n;return{x:a,y:o}},t.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,a.int)(n.borderTopWidth),t+=(0,a.int)(n.borderBottomWidth)},t.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,a.int)(n.borderLeftWidth),t+=(0,a.int)(n.borderRightWidth)},t.removeClassName=h,t.removeEvent=function(e,t,n,r){if(!e)return;var a=u({capture:!0},r);e.removeEventListener?e.removeEventListener(t,n,a):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&h(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(n){}};var a=n(3579),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(a,s,u):a[s]=e[s]}a.default=e,n&&n.set(e,a);return a}(n(4580));function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l="";function d(e,t){return l||(l=(0,a.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,a.isFunction)(e[t])}))),!!(0,a.isFunction)(e[l])&&e[l](t)}function p(e,t,n){var r=e.x,a=e.y,o="translate(".concat(r).concat(n,",").concat(a).concat(n,")");if(t){var i="".concat("string"===typeof t.x?t.x:t.x+n),s="".concat("string"===typeof t.y?t.y:t.y+n);o="translate(".concat(i,", ").concat(s,")")+o}return o}function f(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function h(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},4580:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=a,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=r;var n=["Moz","Webkit","O","ms"];function r(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"===typeof window)return"";var o=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!o)return"";if(r in o)return"";for(var i=0;i<n.length;i++)if(a(r,n[i])in o)return n[i];return""}function a(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}var o=r();t.default=o},7776:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){0}},9873:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){var a=e.state,i=!(0,r.isNum)(a.lastX),s=o(e);return i?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:s,deltaX:t-a.lastX,deltaY:n-a.lastY,lastX:a.lastX,lastY:a.lastY,x:t,y:n}},t.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var i=e.props.bounds;i="string"===typeof i?i:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(i);var s=o(e);if("string"===typeof i){var u,c=s.ownerDocument,l=c.defaultView;if(!((u="parent"===i?s.parentNode:c.querySelector(i))instanceof l.HTMLElement))throw new Error('Bounds selector "'+i+'" could not find an element.');var d=u,p=l.getComputedStyle(s),f=l.getComputedStyle(d);i={left:-s.offsetLeft+(0,r.int)(f.paddingLeft)+(0,r.int)(p.marginLeft),top:-s.offsetTop+(0,r.int)(f.paddingTop)+(0,r.int)(p.marginTop),right:(0,a.innerWidth)(d)-(0,a.outerWidth)(s)-s.offsetLeft+(0,r.int)(f.paddingRight)-(0,r.int)(p.marginRight),bottom:(0,a.innerHeight)(d)-(0,a.outerHeight)(s)-s.offsetTop+(0,r.int)(f.paddingBottom)-(0,r.int)(p.marginBottom)}}(0,r.isNum)(i.right)&&(t=Math.min(t,i.right));(0,r.isNum)(i.bottom)&&(n=Math.min(n,i.bottom));(0,r.isNum)(i.left)&&(t=Math.max(t,i.left));(0,r.isNum)(i.top)&&(n=Math.max(n,i.top));return[t,n]},t.getControlPosition=function(e,t,n){var r="number"===typeof t?(0,a.getTouch)(e,t):null;if("number"===typeof t&&!r)return null;var i=o(n),s=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,a.offsetXYFromParent)(r||e,s,n.props.scale)},t.snapToGrid=function(e,t,n){var r=Math.round(t/e[0])*e[0],a=Math.round(n/e[1])*e[1];return[r,a]};var r=n(3579),a=n(1407);function o(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},3579:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"===typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"===typeof e&&!isNaN(e)}},6939:function(e){var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,a="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var s,u,c,l;if(Array.isArray(e)){if((s=e.length)!=i.length)return!1;for(u=s;0!==u--;)if(!o(e[u],i[u]))return!1;return!0}if(n&&e instanceof Map&&i instanceof Map){if(e.size!==i.size)return!1;for(l=e.entries();!(u=l.next()).done;)if(!i.has(u.value[0]))return!1;for(l=e.entries();!(u=l.next()).done;)if(!o(u.value[1],i.get(u.value[0])))return!1;return!0}if(r&&e instanceof Set&&i instanceof Set){if(e.size!==i.size)return!1;for(l=e.entries();!(u=l.next()).done;)if(!i.has(u.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(i)){if((s=e.length)!=i.length)return!1;for(u=s;0!==u--;)if(e[u]!==i[u])return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();if((s=(c=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(u=s;0!==u--;)if(!Object.prototype.hasOwnProperty.call(i,c[u]))return!1;if(t&&e instanceof Element)return!1;for(u=s;0!==u--;)if(("_owner"!==c[u]&&"__v"!==c[u]&&"__o"!==c[u]||!e.$$typeof)&&!o(e[c[u]],i[c[u]]))return!1;return!0}return e!==e&&i!==i}e.exports=function(e,t){try{return o(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},1624:function(e,t){"use strict";var n=60103,r=60106,a=60107,o=60108,i=60114,s=60109,u=60110,c=60112,l=60113,d=60120,p=60115,f=60116,h=60121,m=60122,g=60117,v=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),a=b("react.fragment"),o=b("react.strict_mode"),i=b("react.profiler"),s=b("react.provider"),u=b("react.context"),c=b("react.forward_ref"),l=b("react.suspense"),d=b("react.suspense_list"),p=b("react.memo"),f=b("react.lazy"),h=b("react.block"),m=b("react.server.block"),g=b("react.fundamental"),v=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case i:case o:case l:case d:return e;default:switch(e=e&&e.$$typeof){case u:case c:case f:case p:case s:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===i||e===v||e===o||e===l||e===d||e===y||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===p||e.$$typeof===s||e.$$typeof===u||e.$$typeof===c||e.$$typeof===g||e.$$typeof===h||e[0]===m)},t.typeOf=x},6214:function(e,t,n){"use strict";e.exports=n(1624)},5886:function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function a(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function o(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function i(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,i=null,s=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?i="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(i="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?s="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==i||null!==s){var u=e.displayName||e.name,c="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+u+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==i?"\n  "+i:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=a),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;l.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:function(){return i}}),r.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},3304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(7313),i=h(o),s=h(n(1168)),u=h(n(5192)),c=h(n(2248)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3745)),d=n(6166),p=h(d),f=n(5886);function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var v=t.portalClassName="ReactModalPortal",y=t.bodyOpenClassName="ReactModal__Body--open",b=d.canUseDOM&&void 0!==s.default.createPortal,x=function(e){return document.createElement(e)},k=function(){return b?s.default.createPortal:s.default.unstable_renderSubtreeIntoContainer};function w(e){return e()}var S=function(e){function t(){var e,n,a;m(this,t);for(var o=arguments.length,u=Array(o),l=0;l<o;l++)u[l]=arguments[l];return n=a=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.removePortal=function(){!b&&s.default.unmountComponentAtNode(a.node);var e=w(a.props.parentSelector);e&&e.contains(a.node)?e.removeChild(a.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},a.portalRef=function(e){a.portal=e},a.renderPortal=function(e){var n=k()(a,i.default.createElement(c.default,r({defaultStyles:t.defaultStyles},e)),a.node);a.portalRef(n)},g(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){d.canUseDOM&&(b||(this.node=x("div")),this.node.className=this.props.portalClassName,w(this.props.parentSelector).appendChild(this.node),!b&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:w(e.parentSelector),nextParent:w(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(d.canUseDOM){var r=this.props,a=r.isOpen,o=r.portalClassName;e.portalClassName!==o&&(this.node.className=o);var i=n.prevParent,s=n.nextParent;s!==i&&(i.removeChild(this.node),s.appendChild(this.node)),(e.isOpen||a)&&!b&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(d.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return d.canUseDOM&&b?(!this.node&&b&&(this.node=x("div")),k()(i.default.createElement(c.default,r({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){l.setElement(e)}}]),t}(o.Component);S.propTypes={isOpen:u.default.bool.isRequired,style:u.default.shape({content:u.default.object,overlay:u.default.object}),portalClassName:u.default.string,bodyOpenClassName:u.default.string,htmlOpenClassName:u.default.string,className:u.default.oneOfType([u.default.string,u.default.shape({base:u.default.string.isRequired,afterOpen:u.default.string.isRequired,beforeClose:u.default.string.isRequired})]),overlayClassName:u.default.oneOfType([u.default.string,u.default.shape({base:u.default.string.isRequired,afterOpen:u.default.string.isRequired,beforeClose:u.default.string.isRequired})]),appElement:u.default.oneOfType([u.default.instanceOf(p.default),u.default.instanceOf(d.SafeHTMLCollection),u.default.instanceOf(d.SafeNodeList),u.default.arrayOf(u.default.instanceOf(p.default))]),onAfterOpen:u.default.func,onRequestClose:u.default.func,closeTimeoutMS:u.default.number,ariaHideApp:u.default.bool,shouldFocusAfterRender:u.default.bool,shouldCloseOnOverlayClick:u.default.bool,shouldReturnFocusAfterClose:u.default.bool,preventScroll:u.default.bool,parentSelector:u.default.func,aria:u.default.object,data:u.default.object,role:u.default.string,contentLabel:u.default.string,shouldCloseOnEsc:u.default.bool,overlayRef:u.default.func,contentRef:u.default.func,id:u.default.string,overlayElement:u.default.func,contentElement:u.default.func},S.defaultProps={isOpen:!1,portalClassName:v,bodyOpenClassName:y,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return i.default.createElement("div",e,t)},contentElement:function(e,t){return i.default.createElement("div",e,t)}},S.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,f.polyfill)(S),t.default=S},2248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(7313),s=g(n(5192)),u=m(n(5018)),c=g(n(8208)),l=m(n(3745)),d=m(n(4606)),p=n(6166),f=g(p),h=g(n(1970));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}n(9080);var v={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},y=0,b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,r=e.ariaHideApp,a=e.htmlOpenClassName,o=e.bodyOpenClassName,i=e.parentSelector,s=i&&i().ownerDocument||document;o&&d.remove(s.body,o),a&&d.remove(s.getElementsByTagName("html")[0],a),r&&y>0&&0===(y-=1)&&l.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(u.returnFocus(n.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose(),h.default.deregister(n)},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(u.setupScopedFocus(n.node),u.markForFocusLater()),n.setState({isOpen:!0},(function(){n.openAnimationFrame=requestAnimationFrame((function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen({overlayEl:n.overlay,contentEl:n.content})}))})))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus({preventScroll:!0})},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},(function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())}))},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){(function(e){return"Tab"===e.code||9===e.keyCode})(e)&&(0,c.default)(n.content,e),n.props.shouldCloseOnEsc&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var r="object"===("undefined"===typeof t?"undefined":a(t))?t:{base:v[e],afterOpen:v[e]+"--after-open",beforeClose:v[e]+"--before-close"},o=r.base;return n.state.afterOpen&&(o=o+" "+r.afterOpen),n.state.beforeClose&&(o=o+" "+r.beforeClose),"string"===typeof t&&t?o+" "+t:o},n.attributesFromObject=function(e,t){return Object.keys(t).reduce((function(n,r){return n[e+"-"+r]=t[r],n}),{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,a=e.bodyOpenClassName,o=e.parentSelector,i=o&&o().ownerDocument||document;a&&d.add(i.body,a),r&&d.add(i.getElementsByTagName("html")[0],r),n&&(y+=1,l.hide(t)),h.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,a=e.overlayClassName,o=e.defaultStyles,i=e.children,s=n?{}:o.content,u=a?{}:o.overlay;if(this.shouldBeClosed())return null;var c={ref:this.setOverlayRef,className:this.buildClassName("overlay",a),style:r({},u,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},l=r({id:t,ref:this.setContentRef,style:r({},s,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),d=this.props.contentElement(l,i);return this.props.overlayElement(c,d)}}]),t}(i.Component);b.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},b.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),parentSelector:s.default.func,bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(f.default),s.default.instanceOf(p.SafeHTMLCollection),s.default.instanceOf(p.SafeNodeList),s.default.arrayOf(s.default.instanceOf(f.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},t.default=b,e.exports=t.default},3745:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){s&&(s.removeAttribute?s.removeAttribute("aria-hidden"):null!=s.length?s.forEach((function(e){return e.removeAttribute("aria-hidden")})):document.querySelectorAll(s).forEach((function(e){return e.removeAttribute("aria-hidden")})));s=null},t.log=function(){0},t.assertNodeList=u,t.setElement=function(e){var t=e;if("string"===typeof t&&i.canUseDOM){var n=document.querySelectorAll(t);u(n,t),t=n}return s=t||s},t.validateElement=c,t.hide=function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=c(e)[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){a.value.setAttribute("aria-hidden","true")}}catch(i){n=!0,r=i}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}},t.show=function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=c(e)[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){a.value.removeAttribute("aria-hidden")}}catch(i){n=!0,r=i}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}},t.documentNotReadyOrSSRTesting=function(){s=null};var r,a=n(1024),o=(r=a)&&r.__esModule?r:{default:r},i=n(6166);var s=null;function u(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function c(e){var t=e||s;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,o.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},9080:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){for(var e=[i,s],t=0;t<e.length;t++){var n=e[t];n&&(n.parentNode&&n.parentNode.removeChild(n))}i=s=null,u=[]},t.log=function(){console.log("bodyTrap ----------"),console.log(u.length);for(var e=[i,s],t=0;t<e.length;t++){var n=e[t]||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")};var r,a=n(1970),o=(r=a)&&r.__esModule?r:{default:r};var i=void 0,s=void 0,u=[];function c(){0!==u.length&&u[u.length-1].focusContent()}o.default.subscribe((function(e,t){i||s||((i=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),i.style.position="absolute",i.style.opacity="0",i.setAttribute("tabindex","0"),i.addEventListener("focus",c),(s=i.cloneNode()).addEventListener("focus",c)),(u=t).length>0?(document.body.firstChild!==i&&document.body.insertBefore(i,document.body.firstChild),document.body.lastChild!==s&&document.body.appendChild(s)):(i.parentElement&&i.parentElement.removeChild(i),s.parentElement&&s.parentElement.removeChild(s))}))},4606:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){var e=document.getElementsByTagName("html")[0];for(var t in n)a(e,n[t]);var o=document.body;for(var i in r)a(o,r[i]);n={},r={}},t.log=function(){0};var n={},r={};function a(e,t){e.classList.remove(t)}t.add=function(e,t){return a=e.classList,o="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach((function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(o,e),a.add(e)}));var a,o},t.remove=function(e,t){return a=e.classList,o="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach((function(e){!function(e,t){e[t]&&(e[t]-=1)}(o,e),0===o[e]&&a.remove(e)}));var a,o}},5018:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){i=[]},t.log=function(){0},t.handleBlur=c,t.handleFocus=l,t.markForFocusLater=function(){i.push(document.activeElement)},t.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;try{return void(0!==i.length&&(t=i.pop()).focus({preventScroll:e}))}catch(n){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){i.length>0&&i.pop()},t.setupScopedFocus=function(e){s=e,window.addEventListener?(window.addEventListener("blur",c,!1),document.addEventListener("focus",l,!0)):(window.attachEvent("onBlur",c),document.attachEvent("onFocus",l))},t.teardownScopedFocus=function(){s=null,window.addEventListener?(window.removeEventListener("blur",c),document.removeEventListener("focus",l)):(window.detachEvent("onBlur",c),document.detachEvent("onFocus",l))};var r,a=n(3980),o=(r=a)&&r.__esModule?r:{default:r};var i=[],s=null,u=!1;function c(){u=!0}function l(){if(u){if(u=!1,!s)return;setTimeout((function(){s.contains(document.activeElement)||((0,o.default)(s)[0]||s).focus()}),0)}}},1970:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(){console.log("portalOpenInstances ----------"),console.log(r.openInstances.length),r.openInstances.forEach((function(e){return console.log(e)})),console.log("end portalOpenInstances ----------")},t.resetState=function(){r=new n};var n=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var n=t.openInstances.indexOf(e);-1!==n&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach((function(n){return n(e,t.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]},r=new n;t.default=r},6166:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=t.SafeNodeList=t.SafeHTMLCollection=void 0;var r,a=n(5538);var o=((r=a)&&r.__esModule?r:{default:r}).default,i=o.canUseDOM?window.HTMLElement:{};t.SafeHTMLCollection=o.canUseDOM?window.HTMLCollection:{},t.SafeNodeList=o.canUseDOM?window.NodeList:{},t.canUseDOM=o.canUseDOM;t.default=i},8208:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,o.default)(e);if(!n.length)return void t.preventDefault();var r=void 0,a=t.shiftKey,s=n[0],u=n[n.length-1],c=i();if(e===c){if(!a)return;r=u}u!==c||a||(r=s);s===c&&a&&(r=u);if(r)return t.preventDefault(),void r.focus();var l=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==l||"Chrome"==l[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var d=n.indexOf(c);d>-1&&(d+=a?-1:1);if("undefined"===typeof(r=n[d]))return t.preventDefault(),void(r=a?u:s).focus();t.preventDefault(),r.focus()};var r,a=n(3980),o=(r=a)&&r.__esModule?r:{default:r};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.activeElement.shadowRoot?i(e.activeElement.shadowRoot):e.activeElement}e.exports=t.default},3980:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=[].slice.call(t.querySelectorAll("*"),0).reduce((function(t,n){return t.concat(n.shadowRoot?e(n.shadowRoot):[n])}),[]);return n.filter(o)};var n=/input|select|textarea|button|object|iframe/;function r(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;try{var n=window.getComputedStyle(e),r=n.getPropertyValue("display");return t?"contents"!==r&&function(e,t){return"visible"!==t.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0}(e,n):"none"===r}catch(a){return console.warn("Failed to inspect element style"),!1}}function a(e,t){var a=e.nodeName.toLowerCase();return(n.test(a)&&!e.disabled||"a"===a&&e.href||t)&&function(e){for(var t=e,n=e.getRootNode&&e.getRootNode();t&&t!==document.body;){if(n&&t===n&&(t=n.host.parentNode),r(t))return!1;t=t.parentNode}return!0}(e)}function o(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&a(e,!n)}e.exports=t.default},9284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(3304),o=(r=a)&&r.__esModule?r:{default:r};t.default=o.default,e.exports=t.default},2056:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(7313)),i=(a=n(6939))&&a.__esModule?a:{default:a},s=n(2116),u=n(8222);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,n,r,a=h(s);function s(){var e;d(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(g(e=a.call.apply(a,[this].concat(n))),"mounted",!1),y(g(e),"isReady",!1),y(g(e),"isPlaying",!1),y(g(e),"isLoading",!0),y(g(e),"loadOnReady",null),y(g(e),"startOnPlay",!0),y(g(e),"seekOnPlay",null),y(g(e),"onDurationCalled",!1),y(g(e),"handlePlayerMount",(function(t){e.player||(e.player=t,e.player.load(e.props.url)),e.progress()})),y(g(e),"getInternalPlayer",(function(t){return e.player?e.player[t]:null})),y(g(e),"progress",(function(){if(e.props.url&&e.player&&e.isReady){var t=e.getCurrentTime()||0,n=e.getSecondsLoaded(),r=e.getDuration();if(r){var a={playedSeconds:t,played:t/r};null!==n&&(a.loadedSeconds=n,a.loaded=n/r),a.playedSeconds===e.prevPlayed&&a.loadedSeconds===e.prevLoaded||e.props.onProgress(a),e.prevPlayed=a.playedSeconds,e.prevLoaded=a.loadedSeconds}}e.progressTimeout=setTimeout(e.progress,e.props.progressFrequency||e.props.progressInterval)})),y(g(e),"handleReady",(function(){if(e.mounted){e.isReady=!0,e.isLoading=!1;var t=e.props,n=t.onReady,r=t.playing,a=t.volume,o=t.muted;n(),o||null===a||e.player.setVolume(a),e.loadOnReady?(e.player.load(e.loadOnReady,!0),e.loadOnReady=null):r&&e.player.play(),e.handleDurationCheck()}})),y(g(e),"handlePlay",(function(){e.isPlaying=!0,e.isLoading=!1;var t=e.props,n=t.onStart,r=t.onPlay,a=t.playbackRate;e.startOnPlay&&(e.player.setPlaybackRate&&1!==a&&e.player.setPlaybackRate(a),n(),e.startOnPlay=!1),r(),e.seekOnPlay&&(e.seekTo(e.seekOnPlay),e.seekOnPlay=null),e.handleDurationCheck()})),y(g(e),"handlePause",(function(t){e.isPlaying=!1,e.isLoading||e.props.onPause(t)})),y(g(e),"handleEnded",(function(){var t=e.props,n=t.activePlayer,r=t.loop,a=t.onEnded;n.loopOnEnded&&r&&e.seekTo(0),r||(e.isPlaying=!1,a())})),y(g(e),"handleError",(function(){var t;e.isLoading=!1,(t=e.props).onError.apply(t,arguments)})),y(g(e),"handleDurationCheck",(function(){clearTimeout(e.durationCheckTimeout);var t=e.getDuration();t?e.onDurationCalled||(e.props.onDuration(t),e.onDurationCalled=!0):e.durationCheckTimeout=setTimeout(e.handleDurationCheck,100)})),y(g(e),"handleLoaded",(function(){e.isLoading=!1})),e}return t=s,n=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.player){var n=this.props,r=n.url,a=n.playing,o=n.volume,s=n.muted,c=n.playbackRate,l=n.pip,d=n.loop,p=n.activePlayer,f=n.disableDeferredLoading;if(!(0,i.default)(e.url,r)){if(this.isLoading&&!p.forceLoad&&!f&&!(0,u.isMediaStream)(r))return console.warn("ReactPlayer: the attempt to load ".concat(r," is being deferred until the player has loaded")),void(this.loadOnReady=r);this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(r,this.isReady)}e.playing||!a||this.isPlaying||this.player.play(),e.playing&&!a&&this.isPlaying&&this.player.pause(),!e.pip&&l&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!l&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==o&&null!==o&&this.player.setVolume(o),e.muted!==s&&(s?this.player.mute():(this.player.unmute(),null!==o&&setTimeout((function(){return t.player.setVolume(o)})))),e.playbackRate!==c&&this.player.setPlaybackRate&&this.player.setPlaybackRate(c),e.loop!==d&&this.player.setLoop&&this.player.setLoop(d)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(e,t){var n=this;if(this.isReady){if(t?"fraction"===t:e>0&&e<1){var r=this.player.getDuration();return r?void this.player.seekTo(r*e):void console.warn("ReactPlayer: could not seek using fraction \u2013\xa0duration not yet available")}this.player.seekTo(e)}else 0!==e&&(this.seekOnPlay=e,setTimeout((function(){n.seekOnPlay=null}),5e3))}},{key:"render",value:function(){var e=this.props.activePlayer;return e?o.default.createElement(e,l({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}],n&&p(t.prototype,n),r&&p(t,r),s}(o.Component);t.default=b,y(b,"displayName","Player"),y(b,"propTypes",s.propTypes),y(b,"defaultProps",s.defaultProps)},6555:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.createReactPlayer=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(7313)),o=d(n(3406)),i=d(n(6912)),s=d(n(6939)),u=n(2116),c=n(8222),l=d(n(2056));function d(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var a=C(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=(0,a.lazy)((function(){return n.e(664).then(n.bind(n,1394))})),N="undefined"!==typeof window&&window.document,_="undefined"!==typeof n.g&&n.g.window&&n.g.window.document,I=Object.keys(u.propTypes),R=N||_?a.Suspense:function(){return null},A=[];t.createReactPlayer=function(e,t){var n,r;return r=n=function(n){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(v,n);var r,d,p,f=k(v);function v(){var n;y(this,v);for(var r=arguments.length,s=new Array(r),d=0;d<r;d++)s[d]=arguments[d];return E(S(n=f.call.apply(f,[this].concat(s))),"state",{showPreview:!!n.props.light}),E(S(n),"references",{wrapper:function(e){n.wrapper=e},player:function(e){n.player=e}}),E(S(n),"handleClickPreview",(function(e){n.setState({showPreview:!1}),n.props.onClickPreview(e)})),E(S(n),"showPreview",(function(){n.setState({showPreview:!0})})),E(S(n),"getDuration",(function(){return n.player?n.player.getDuration():null})),E(S(n),"getCurrentTime",(function(){return n.player?n.player.getCurrentTime():null})),E(S(n),"getSecondsLoaded",(function(){return n.player?n.player.getSecondsLoaded():null})),E(S(n),"getInternalPlayer",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return n.player?n.player.getInternalPlayer(e):null})),E(S(n),"seekTo",(function(e,t){if(!n.player)return null;n.player.seekTo(e,t)})),E(S(n),"handleReady",(function(){n.props.onReady(S(n))})),E(S(n),"getActivePlayer",(0,i.default)((function(n){for(var r=0,a=[].concat(A,g(e));r<a.length;r++){var o=a[r];if(o.canPlay(n))return o}return t||null}))),E(S(n),"getConfig",(0,i.default)((function(e,t){var r=n.props.config;return o.default.all([u.defaultProps.config,u.defaultProps.config[t]||{},r,r[t]||{}])}))),E(S(n),"getAttributes",(0,i.default)((function(e){return(0,c.omit)(n.props,I)}))),E(S(n),"renderActivePlayer",(function(e){if(!e)return null;var t=n.getActivePlayer(e);if(!t)return null;var r=n.getConfig(e,t.key);return a.default.createElement(l.default,m({},n.props,{key:t.key,ref:n.references.player,config:r,activePlayer:t.lazyPlayer||t,onReady:n.handleReady}))})),n}return r=v,d=[{key:"shouldComponentUpdate",value:function(e,t){return!(0,s.default)(this.props,e)||!(0,s.default)(this.state,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props.light;!e.light&&t&&this.setState({showPreview:!0}),e.light&&!t&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(e){if(!e)return null;var t=this.props,n=t.light,r=t.playIcon,o=t.previewTabIndex,i=t.oEmbedUrl;return a.default.createElement(T,{url:e,light:n,playIcon:r,previewTabIndex:o,oEmbedUrl:i,onClick:this.handleClickPreview})}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.style,r=e.width,o=e.height,i=e.fallback,s=e.wrapper,u=this.state.showPreview,c=this.getAttributes(t),l="string"===typeof s?this.references.wrapper:void 0;return a.default.createElement(s,m({ref:l,style:h(h({},n),{},{width:r,height:o})},c),a.default.createElement(R,{fallback:i},u?this.renderPreview(t):this.renderActivePlayer(t)))}}],d&&b(r.prototype,d),p&&b(r,p),v}(a.Component),E(n,"displayName","ReactPlayer"),E(n,"propTypes",u.propTypes),E(n,"defaultProps",u.defaultProps),E(n,"addCustomPlayer",(function(e){A.push(e)})),E(n,"removeCustomPlayers",(function(){A.length=0})),E(n,"canPlay",(function(t){for(var n=0,r=[].concat(A,g(e));n<r.length;n++){if(r[n].canPlay(t))return!0}return!1})),E(n,"canEnablePIP",(function(t){for(var n=0,r=[].concat(A,g(e));n<r.length;n++){var a=r[n];if(a.canEnablePIP&&a.canEnablePIP(t))return!0}return!1})),r}},689:function(e,t,n){"use strict";t.Z=void 0;var r,a=(r=n(5487))&&r.__esModule?r:{default:r},o=n(6555);var i=a.default[a.default.length-1],s=(0,o.createReactPlayer)(a.default,i);t.Z=s},2494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canPlay=t.FLV_EXTENSIONS=t.DASH_EXTENSIONS=t.HLS_EXTENSIONS=t.VIDEO_EXTENSIONS=t.AUDIO_EXTENSIONS=t.MATCH_URL_KALTURA=t.MATCH_URL_VIDYARD=t.MATCH_URL_MIXCLOUD=t.MATCH_URL_DAILYMOTION=t.MATCH_URL_TWITCH_CHANNEL=t.MATCH_URL_TWITCH_VIDEO=t.MATCH_URL_WISTIA=t.MATCH_URL_STREAMABLE=t.MATCH_URL_FACEBOOK_WATCH=t.MATCH_URL_FACEBOOK=t.MATCH_URL_VIMEO=t.MATCH_URL_SOUNDCLOUD=t.MATCH_URL_YOUTUBE=void 0;var r=n(8222);function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;t.MATCH_URL_YOUTUBE=i;var s=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;t.MATCH_URL_SOUNDCLOUD=s;var u=/vimeo\.com\/(?!progressive_redirect).+/;t.MATCH_URL_VIMEO=u;var c=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;t.MATCH_URL_FACEBOOK=c;var l=/^https?:\/\/fb\.watch\/.+$/;t.MATCH_URL_FACEBOOK_WATCH=l;var d=/streamable\.com\/([a-z0-9]+)$/;t.MATCH_URL_STREAMABLE=d;var p=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?(.*)$/;t.MATCH_URL_WISTIA=p;var f=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;t.MATCH_URL_TWITCH_VIDEO=f;var h=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;t.MATCH_URL_TWITCH_CHANNEL=h;var m=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?$/;t.MATCH_URL_DAILYMOTION=m;var g=/mixcloud\.com\/([^/]+\/[^/]+)/;t.MATCH_URL_MIXCLOUD=g;var v=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;t.MATCH_URL_VIDYARD=v;var y=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;t.MATCH_URL_KALTURA=y;var b=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;t.AUDIO_EXTENSIONS=b;var x=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;t.VIDEO_EXTENSIONS=x;var k=/\.(m3u8)($|\?)/i;t.HLS_EXTENSIONS=k;var w=/\.(mpd)($|\?)/i;t.DASH_EXTENSIONS=w;var S=/\.(flv)($|\?)/i;t.FLV_EXTENSIONS=S;var C={youtube:function(e){return e instanceof Array?e.every((function(e){return i.test(e)})):i.test(e)},soundcloud:function(e){return s.test(e)&&!b.test(e)},vimeo:function(e){return u.test(e)&&!x.test(e)&&!k.test(e)},facebook:function(e){return c.test(e)||l.test(e)},streamable:function(e){return d.test(e)},wistia:function(e){return p.test(e)},twitch:function(e){return f.test(e)||h.test(e)},dailymotion:function(e){return m.test(e)},mixcloud:function(e){return g.test(e)},vidyard:function(e){return v.test(e)},kaltura:function(e){return y.test(e)},file:function e(t){if(t instanceof Array){var n,o=a(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("string"===typeof i&&e(i))return!0;if(e(i.src))return!0}}catch(s){o.e(s)}finally{o.f()}return!1}return!(!(0,r.isMediaStream)(t)&&!(0,r.isBlobUrl)(t))||(b.test(t)||x.test(t)||k.test(t)||w.test(t)||S.test(t))}};t.canPlay=C},5487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(7313),a=n(8222),o=n(2494),i=[{key:"youtube",name:"YouTube",canPlay:o.canPlay.youtube,lazyPlayer:(0,r.lazy)((function(){return n.e(439).then(n.bind(n,6110))}))},{key:"soundcloud",name:"SoundCloud",canPlay:o.canPlay.soundcloud,lazyPlayer:(0,r.lazy)((function(){return n.e(125).then(n.bind(n,2808))}))},{key:"vimeo",name:"Vimeo",canPlay:o.canPlay.vimeo,lazyPlayer:(0,r.lazy)((function(){return n.e(743).then(n.bind(n,8223))}))},{key:"facebook",name:"Facebook",canPlay:o.canPlay.facebook,lazyPlayer:(0,r.lazy)((function(){return n.e(121).then(n.bind(n,2951))}))},{key:"streamable",name:"Streamable",canPlay:o.canPlay.streamable,lazyPlayer:(0,r.lazy)((function(){return n.e(546).then(n.bind(n,5135))}))},{key:"wistia",name:"Wistia",canPlay:o.canPlay.wistia,lazyPlayer:(0,r.lazy)((function(){return n.e(55).then(n.bind(n,1608))}))},{key:"twitch",name:"Twitch",canPlay:o.canPlay.twitch,lazyPlayer:(0,r.lazy)((function(){return n.e(216).then(n.bind(n,3594))}))},{key:"dailymotion",name:"DailyMotion",canPlay:o.canPlay.dailymotion,lazyPlayer:(0,r.lazy)((function(){return n.e(596).then(n.bind(n,3855))}))},{key:"mixcloud",name:"Mixcloud",canPlay:o.canPlay.mixcloud,lazyPlayer:(0,r.lazy)((function(){return n.e(667).then(n.bind(n,9569))}))},{key:"vidyard",name:"Vidyard",canPlay:o.canPlay.vidyard,lazyPlayer:(0,r.lazy)((function(){return n.e(888).then(n.bind(n,3413))}))},{key:"kaltura",name:"Kaltura",canPlay:o.canPlay.kaltura,lazyPlayer:(0,r.lazy)((function(){return n.e(261).then(n.bind(n,3483))}))},{key:"file",name:"FilePlayer",canPlay:o.canPlay.file,canEnablePIP:function(e){return o.canPlay.file(e)&&(document.pictureInPictureEnabled||(0,a.supportsWebKitPresentationMode)())&&!o.AUDIO_EXTENSIONS.test(e)},lazyPlayer:(0,r.lazy)((function(){return n.e(11).then(n.bind(n,9937))}))}];t.default=i},2116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=t.propTypes=void 0;var r,a=(r=n(5192))&&r.__esModule?r:{default:r};var o=a.default.string,i=a.default.bool,s=a.default.number,u=a.default.array,c=a.default.oneOfType,l=a.default.shape,d=a.default.object,p=a.default.func,f=a.default.node,h={url:c([o,u,d]),playing:i,loop:i,controls:i,volume:s,muted:i,playbackRate:s,width:c([o,s]),height:c([o,s]),style:d,progressInterval:s,playsinline:i,pip:i,stopOnUnmount:i,light:c([i,o,d]),playIcon:f,previewTabIndex:s,fallback:f,oEmbedUrl:o,wrapper:c([o,p,l({render:p.isRequired})]),config:l({soundcloud:l({options:d}),youtube:l({playerVars:d,embedOptions:d,onUnstarted:p}),facebook:l({appId:o,version:o,playerId:o,attributes:d}),dailymotion:l({params:d}),vimeo:l({playerOptions:d,title:o}),file:l({attributes:d,tracks:u,forceVideo:i,forceAudio:i,forceHLS:i,forceDASH:i,forceFLV:i,hlsOptions:d,hlsVersion:o,dashVersion:o,flvVersion:o}),wistia:l({options:d,playerId:o,customControls:u}),mixcloud:l({options:d}),twitch:l({options:d,playerId:o}),vidyard:l({options:d})}),onReady:p,onStart:p,onPlay:p,onPause:p,onBuffer:p,onBufferEnd:p,onEnded:p,onError:p,onDuration:p,onSeek:p,onPlaybackRateChange:p,onProgress:p,onClickPreview:p,onEnablePIP:p,onDisablePIP:p};t.propTypes=h;var m=function(){},g={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:m},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0"},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:m,onStart:m,onPlay:m,onPause:m,onBuffer:m,onBufferEnd:m,onEnded:m,onError:m,onDuration:m,onSeek:m,onPlaybackRateChange:m,onProgress:m,onClickPreview:m,onEnablePIP:m,onDisablePIP:m};t.defaultProps=g},8222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStartTime=function(e){return p(e,u)},t.parseEndTime=function(e){return p(e,c)},t.randomString=function(){return Math.random().toString(36).substr(2,5)},t.queryString=function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")},t.getSDK=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.default,i=f(t);if(i&&a(i))return Promise.resolve(i);return new Promise((function(r,a){if(h[e])h[e].push({resolve:r,reject:a});else{h[e]=[{resolve:r,reject:a}];var i=function(t){h[e].forEach((function(e){return e.resolve(t)}))};if(n){var s=window[n];window[n]=function(){s&&s(),i(f(t))}}o(e,(function(r){r?(h[e].forEach((function(e){return e.reject(r)})),h[e]=null):n||i(f(t))}))}}))},t.getConfig=function(e,t){return(0,a.default)(t.config,e.config)},t.omit=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var o=(t=[]).concat.apply(t,r),i={},s=Object.keys(e),u=0,c=s;u<c.length;u++){var l=c[u];-1===o.indexOf(l)&&(i[l]=e[l])}return i},t.callPlayer=function(e){var t;if(!this.player||!this.player[e]){var n="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(e,"%c \u2013 ");return this.player?this.player[e]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return(t=this.player)[e].apply(t,a)},t.isMediaStream=function(e){return"undefined"!==typeof window&&"undefined"!==typeof window.MediaStream&&e instanceof window.MediaStream},t.isBlobUrl=function(e){return/^blob:/.test(e)},t.supportsWebKitPresentationMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("video"),t=!1===/iPhone|iPod/.test(navigator.userAgent);return e.webkitSupportsPresentationMode&&"function"===typeof e.webkitSetPresentationMode&&t};var r=o(n(8630)),a=o(n(3406));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){a=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=/[?&#](?:start|t)=([0-9hms]+)/,c=/[?&#]end=([0-9hms]+)/,l=/(\d+)(h|m|s)/g,d=/^\d+$/;function p(e,t){if(!(e instanceof Array)){var n=e.match(t);if(n){var r=n[1];if(r.match(l))return function(e){var t=0,n=l.exec(e);for(;null!==n;){var r=i(n,3),a=r[1],o=r[2];"h"===o&&(t+=60*parseInt(a,10)*60),"m"===o&&(t+=60*parseInt(a,10)),"s"===o&&(t+=parseInt(a,10)),n=l.exec(e)}return t}(r);if(d.test(r))return parseInt(r)}}}function f(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}var h={}},5918:function(e,t,n){"use strict";var r=n(7313),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)i.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},306:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var k=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var a,o={},i=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,a)&&!C.hasOwnProperty(a)&&(o[a]=t[a]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===o[a]&&(o[a]=u[a]);return{$$typeof:n,type:e,key:i,ref:s,props:o,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return i=i(u=e),e=""===o?"."+_(u,0):o,k(i)?(a="",null!=e&&(a=e.replace(N,"$&/")+"/"),I(i,t,a,"",(function(e){return e}))):null!=i&&(T(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(N,"$&/")+"/")+e)),t.push(i)),1;if(u=0,o=""===o?".":o+":",k(e))for(var c=0;c<e.length;c++){var l=o+_(s=e[c],c);u+=I(s,t,a,l,i)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=I(s=s.value,t,a,l=o+_(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,n){if(null==e)return e;var r=[],a=0;return I(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},P={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),o=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!C.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}return{$$typeof:n,type:e.type,key:o,ref:i,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},7313:function(e,t,n){"use strict";e.exports=n(306)},6417:function(e,t,n){"use strict";e.exports=n(5918)},3095:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<o(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>o(u,n))c<a&&0>o(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<a&&0>o(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],d=1,p=null,f=3,h=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function k(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,P(w);else{var t=r(l);null!==t&&D(k,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(T),T=-1),h=!0;var o=f;try{for(x(n),p=r(c);null!==p&&(!(p.expirationTime>n)||e&&!I());){var i=p.callback;if("function"===typeof i){p.callback=null,f=p.priorityLevel;var s=i(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?p.callback=s:p===r(c)&&a(c),x(n)}else a(c);p=r(c)}if(null!==p)var u=!0;else{var d=r(l);null!==d&&D(k,d.startTime-n),u=!1}return u}finally{p=null,f=o,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,E=null,T=-1,N=5,_=-1;function I(){return!(t.unstable_now()-_<N)}function R(){if(null!==E){var e=t.unstable_now();_=e;var n=!0;try{n=E(!0,e)}finally{n?S():(C=!1,E=null)}}else C=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=R,S=function(){O.postMessage(null)}}else S=function(){v(R,0)};function P(e){E=e,C||(C=!0,S())}function D(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,P(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(e.sortIndex=o,n(l,e),null===r(c)&&e===r(l)&&(g?(y(T),T=-1):g=!0,D(k,o-i))):(e.sortIndex=s,n(c,e),m||h||(m=!0,P(w))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},2224:function(e,t,n){"use strict";e.exports=n(3095)},4213:function(e,t,n){var r=n(8039),a=n(3035),o=n(518),i=n(7578),s=n(2707),u=n(2152),c=n(6359);c.alea=r,c.xor128=a,c.xorwow=o,c.xorshift7=i,c.xor4096=s,c.tychei=u,e.exports=c},8039:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new i(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},2152:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},3035:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},2707:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},7578:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},518:function(e,t,n){var r;!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},6359:function(e,t,n){var r;!function(a,o,i){var s,u=256,c=i.pow(u,6),l=i.pow(2,52),d=2*l,p=255;function f(e,t,n){var r=[],p=v(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(u):(e=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(o)]}}():e,3),r),f=new h(r),b=function(){for(var e=f.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=f.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|f.g(4)},b.quick=function(){return f.g(4)/4294967296},b.double=b,v(y(f.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,f),e.state=function(){return m(f,{})}),n?(i.random=e,t):e})(b,p,"global"in t?t.global:this==i,t.state)}function h(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);a<u;)i[a]=a++;for(a=0;a<u;a++)i[a]=i[o=p&o+e[a%n]+(t=i[a])],i[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,i=r.S;e--;)t=i[a=p&a+1],n=n*u+i[p&(i[a]=i[o=p&o+t])+(i[o]=t)];return r.i=a,r.j=o,n})(u)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(o){}return r.length?r:"string"==a?e:e+"\0"}function v(e,t){for(var n,r=e+"",a=0;a<r.length;)t[p&a]=p&(n^=19*t[p&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(v(i.random(),o),e.exports){e.exports=f;try{s=n(5042)}catch(b){}}else void 0===(r=function(){return f}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},9767:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<o.length;u++){var c=o[u];if(!s(c))return!1;var l=e[c],d=t[c];if(!1===(a=n?n.call(r,l,d,c):void 0)||void 0===a&&l!==d)return!1}return!0}},1024:function(e){"use strict";var t=function(){};e.exports=t},5410:function(){},8628:function(){},5042:function(){},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(a,o){var i=e.apply(n,r);function s(e){t(i,a,o,s,u,"next",e)}function u(e){t(i,a,o,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){s=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(I){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),i=new T(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return _()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var s=S(i,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,i),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}t.wrap=d;var f={};function h(){}function m(){}function g(){}var v={};l(v,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(N([])));b&&b!==n&&o.call(b,s)&&(v=b);var x=g.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,i,s,u){var c=p(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=p(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function N(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:_}}function _(){return{value:void 0,done:!0}}return m.prototype=g,l(x,"constructor",g),l(g,"constructor",m),m.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},k(w.prototype),l(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new w(d(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(x),l(x,c,"Generator"),l(x,s,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),a=n(8872),o=n(6116),i=n(2218);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},4687:function(e,t,n){var r=n(7061)();e.exports=r;try{regeneratorRuntime=r}catch(a){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function s(e){r(i,a,o,s,u,"next",e)}function u(e){r(i,a,o,s,u,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return a}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return a}})},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(181);function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}},3668:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(1120),a=n(8814);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i=n(7326);function s(e,t){if(t&&("object"===o(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}function u(e){var t=(0,a.Z)();return function(){var n,a=(0,r.Z)(e);if(t){var o=(0,r.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return s(this,n)}}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9611);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3878);var a=n(181),o=n(5267);function i(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(u){s=!0,a=u}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}}(e,t)||(0,a.Z)(e,t)||(0,o.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);var a=n(9199),o=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+{11:"reactPlayerFilePlayer",55:"reactPlayerWistia",121:"reactPlayerFacebook",125:"reactPlayerSoundCloud",216:"reactPlayerTwitch",261:"reactPlayerKaltura",439:"reactPlayerYouTube",546:"reactPlayerStreamable",596:"reactPlayerDailyMotion",664:"reactPlayerPreview",667:"reactPlayerMixcloud",743:"reactPlayerVimeo",888:"reactPlayerVidyard"}[e]+"."+{11:"80de3862",55:"0bde6cf0",121:"2f6a631a",125:"11eed60f",216:"6ae6f984",261:"f1fcb194",439:"6d6fe601",546:"91abcad6",596:"3aa0dd2e",664:"d9391f8e",667:"21cc58a8",743:"6295d427",888:"221564de"}[e]+".chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="react-boiler-starter:";n.l=function(r,a,o,i){if(e[r])e[r].push(a);else{var s,u;if(void 0!==o)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[a];var p=function(t,n){s.onerror=s.onload=null,clearTimeout(f);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=o);var i=n.p+n.u(t),s=new Error;n.l(i,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var a,o,i=r[0],s=r[1],u=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)u(n)}for(t&&t(r);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkreact_boiler_starter=self.webpackChunkreact_boiler_starter||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{Decoder:function(){return Ir},Encoder:function(){return _r},PacketType:function(){return Tr},protocol:function(){return Nr}});var t=n(7313),r=n(1739);function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(7762),i=n(9439),s=n(6214),u=n(9767),c=n.n(u);var l=function(e){function t(e,r,u,c,p){for(var f,h,m,g,x,w=0,S=0,C=0,E=0,T=0,O=0,D=m=f=0,M=0,F=0,B=0,j=0,z=u.length,V=z-1,W="",Z="",U="",H="";M<z;){if(h=u.charCodeAt(M),M===V&&0!==S+E+C+w&&(0!==S&&(h=47===S?10:47),E=C=w=0,z++,V++),0===S+E+C+w){if(M===V&&(0<F&&(W=W.replace(d,"")),0<W.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:W+=u.charAt(M)}h=59}switch(h){case 123:for(f=(W=W.trim()).charCodeAt(0),m=1,j=++M;M<z;){switch(h=u.charCodeAt(M)){case 123:m++;break;case 125:m--;break;case 47:switch(h=u.charCodeAt(M+1)){case 42:case 47:e:{for(D=M+1;D<V;++D)switch(u.charCodeAt(D)){case 47:if(42===h&&42===u.charCodeAt(D-1)&&M+2!==D){M=D+1;break e}break;case 10:if(47===h){M=D+1;break e}}M=D}}break;case 91:h++;case 40:h++;case 34:case 39:for(;M++<V&&u.charCodeAt(M)!==h;);}if(0===m)break;M++}if(m=u.substring(j,M),0===f&&(f=(W=W.replace(l,"").trim()).charCodeAt(0)),64===f){switch(0<F&&(W=W.replace(d,"")),h=W.charCodeAt(1)){case 100:case 109:case 115:case 45:F=r;break;default:F=A}if(j=(m=t(r,F,m,h,p+1)).length,0<P&&(x=s(3,m,F=n(A,W,B),r,_,N,j,h,p,c),W=F.join(""),void 0!==x&&0===(j=(m=x.trim()).length)&&(h=0,m="")),0<j)switch(h){case 115:W=W.replace(k,i);case 100:case 109:case 45:m=W+"{"+m+"}";break;case 107:m=(W=W.replace(v,"$1 $2"))+"{"+m+"}",m=1===R||2===R&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=W+m,112===c&&(Z+=m,m="")}else m=""}else m=t(r,n(r,W,B),m,c,p+1);U+=m,m=B=F=D=f=0,W="",h=u.charCodeAt(++M);break;case 125:case 59:if(1<(j=(W=(0<F?W.replace(d,""):W).trim()).length))switch(0===D&&(f=W.charCodeAt(0),45===f||96<f&&123>f)&&(j=(W=W.replace(" ",":")).length),0<P&&void 0!==(x=s(1,W,r,e,_,N,Z.length,c,p,c))&&0===(j=(W=x.trim()).length)&&(W="\0\0"),f=W.charCodeAt(0),h=W.charCodeAt(1),f){case 0:break;case 64:if(105===h||99===h){H+=W+u.charAt(M);break}default:58!==W.charCodeAt(j-1)&&(Z+=a(W,f,h,W.charCodeAt(2)))}B=F=D=f=0,W="",h=u.charCodeAt(++M)}}switch(h){case 13:case 10:47===S?S=0:0===1+f&&107!==c&&0<W.length&&(F=1,W+="\0"),0<P*L&&s(0,W,r,e,_,N,Z.length,c,p,c),N=1,_++;break;case 59:case 125:if(0===S+E+C+w){N++;break}default:switch(N++,g=u.charAt(M),h){case 9:case 32:if(0===E+w+S)switch(T){case 44:case 58:case 9:case 32:g="";break;default:32!==h&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===E+S+w&&(F=B=1,g="\f"+g);break;case 108:if(0===E+S+w+I&&0<D)switch(M-D){case 2:112===T&&58===u.charCodeAt(M-3)&&(I=T);case 8:111===O&&(I=O)}break;case 58:0===E+S+w&&(D=M);break;case 44:0===S+C+E+w&&(F=1,g+="\r");break;case 34:case 39:0===S&&(E=E===h?0:0===E?h:E);break;case 91:0===E+S+C&&w++;break;case 93:0===E+S+C&&w--;break;case 41:0===E+S+w&&C--;break;case 40:if(0===E+S+w){if(0===f)if(2*T+3*O===533);else f=1;C++}break;case 64:0===S+C+E+w+D+m&&(m=1);break;case 42:case 47:if(!(0<E+w+C))switch(S){case 0:switch(2*h+3*u.charCodeAt(M+1)){case 235:S=47;break;case 220:j=M,S=42}break;case 42:47===h&&42===T&&j+2!==M&&(33===u.charCodeAt(j+2)&&(Z+=u.substring(j,M+1)),g="",S=0)}}0===S&&(W+=g)}O=T,T=h,M++}if(0<(j=Z.length)){if(F=r,0<P&&(void 0!==(x=s(2,Z,F,e,_,N,j,c,p,c))&&0===(Z=x).length))return H+Z+U;if(Z=F.join(",")+"{"+Z+"}",0!==R*I){switch(2!==R||o(Z,2)||(I=0),I){case 111:Z=Z.replace(b,":-moz-$1")+Z;break;case 112:Z=Z.replace(y,"::-webkit-input-$1")+Z.replace(y,"::-moz-$1")+Z.replace(y,":-ms-input-$1")+Z}I=0}}return H+Z+U}function n(e,t,n){var a=t.trim().split(m);t=a;var o=a.length,i=e.length;switch(i){case 0:case 1:var s=0;for(e=0===i?"":e[0]+" ";s<o;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<o;++s)for(var c=0;c<i;++c)t[u++]=r(e[c]+" ",a[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function a(e,t,n,r){var i=e+";",s=2*t+3*n+4*r;if(944===s){e=i.indexOf(":",9)+1;var u=i.substring(e,i.length-1).trim();return u=i.substring(0,e).trim()+u+";",1===R||2===R&&o(u,1)?"-webkit-"+u+u:u}if(0===R||2===R&&!o(i,1))return i;switch(s){case 1015:return 97===i.charCodeAt(10)?"-webkit-"+i+i:i;case 951:return 116===i.charCodeAt(3)?"-webkit-"+i+i:i;case 963:return 110===i.charCodeAt(5)?"-webkit-"+i+i:i;case 1009:if(100!==i.charCodeAt(4))break;case 969:case 942:return"-webkit-"+i+i;case 978:return"-webkit-"+i+"-moz-"+i+i;case 1019:case 983:return"-webkit-"+i+"-moz-"+i+"-ms-"+i+i;case 883:if(45===i.charCodeAt(8))return"-webkit-"+i+i;if(0<i.indexOf("image-set(",11))return i.replace(T,"$1-webkit-$2")+i;break;case 932:if(45===i.charCodeAt(4))switch(i.charCodeAt(5)){case 103:return"-webkit-box-"+i.replace("-grow","")+"-webkit-"+i+"-ms-"+i.replace("grow","positive")+i;case 115:return"-webkit-"+i+"-ms-"+i.replace("shrink","negative")+i;case 98:return"-webkit-"+i+"-ms-"+i.replace("basis","preferred-size")+i}return"-webkit-"+i+"-ms-"+i+i;case 964:return"-webkit-"+i+"-ms-flex-"+i+i;case 1023:if(99!==i.charCodeAt(8))break;return"-webkit-box-pack"+(u=i.substring(i.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+i+"-ms-flex-pack"+u+i;case 1005:return f.test(i)?i.replace(p,":-webkit-")+i.replace(p,":-moz-")+i:i;case 1e3:switch(t=(u=i.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=i.replace(x,"tb");break;case 232:u=i.replace(x,"tb-rl");break;case 220:u=i.replace(x,"lr");break;default:return i}return"-webkit-"+i+"-ms-"+u+i;case 1017:if(-1===i.indexOf("sticky",9))break;case 975:switch(t=(i=e).length-10,s=(u=(33===i.charCodeAt(t)?i.substring(0,t):i).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:i=i.replace(u,"-webkit-"+u)+";"+i;break;case 207:case 102:i=i.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+i.replace(u,"-webkit-"+u)+";"+i.replace(u,"-ms-"+u+"box")+";"+i}return i+";";case 938:if(45===i.charCodeAt(5))switch(i.charCodeAt(6)){case 105:return u=i.replace("-items",""),"-webkit-"+i+"-webkit-box-"+u+"-ms-flex-"+u+i;case 115:return"-webkit-"+i+"-ms-flex-item-"+i.replace(S,"")+i;default:return"-webkit-"+i+"-ms-flex-line-pack"+i.replace("align-content","").replace(S,"")+i}break;case 973:case 989:if(45!==i.charCodeAt(3)||122===i.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):i.replace(u,"-webkit-"+u)+i.replace(u,"-moz-"+u.replace("fill-",""))+i;break;case 962:if(i="-webkit-"+i+(102===i.charCodeAt(5)?"-ms-"+i:"")+i,211===n+r&&105===i.charCodeAt(13)&&0<i.indexOf("transform",10))return i.substring(0,i.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+i}return i}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),D(2!==t?r:r.replace(C,"$1"),n,t)}function i(e,t){var n=a(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,a,o,i,s,u,l){for(var d,p=0,f=t;p<P;++p)switch(d=O[p].call(c,e,f,n,r,a,o,i,s,u,l)){case void 0:case!1:case!0:case null:break;default:f=d}if(f!==t)return f}function u(e){return void 0!==(e=e.prefix)&&(D=null,e?"function"!==typeof e?R=1:(R=2,D=e):R=0),u}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<P){var a=s(-1,n,r,r,_,N,0,0,0,0);void 0!==a&&"string"===typeof a&&(n=a)}var o=t(A,r,n,0,0);return 0<P&&(void 0!==(a=s(-2,o,r,r,_,N,o.length,0,0,0))&&(o=a)),"",I=0,N=_=1,o}var l=/^\0+/g,d=/[\0\r\f]/g,p=/: */g,f=/zoo|gra/,h=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,k=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,T=/([^-])(image-set\()/,N=1,_=1,I=0,R=1,A=[],O=[],P=0,D=null,L=0;return c.use=function e(t){switch(t){case void 0:case null:P=O.length=0;break;default:if("function"===typeof t)O[P++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else L=0|!!t}return e},c.set=u,void 0!==e&&u(e),c},d={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var p=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},f=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,h=p((function(e){return f.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),m=n(7861),g=n.n(m);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var y=function(e,t){for(var n=[e[0]],r=0,a=t.length;r<a;r+=1)n.push(t[r],e[r+1]);return n},b=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,s.typeOf)(e)},x=Object.freeze([]),k=Object.freeze({});function w(e){return"function"==typeof e}function S(e){return e.displayName||e.name||"Component"}function C(e){return e&&"string"==typeof e.styledComponentId}var E="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTO_SYNC_CLIENT_PORT:"41234",REACT_APP_AUTO_SYNC_SERVER_PORT:"41235",REACT_APP_GOOGLE_API_KEY:"AIzaSyAgy5PmgjcCDTvQywjMlBRyFg8APSrvkN0",REACT_APP_HTTP_PORT:"5001",REACT_APP_IO_PORT:"3501",REACT_APP_PROXY_SERVER_PORT:"5000",REACT_APP_TOWN_WEATHER_API_KEY:"A%2BRfjZFOzYps3gVx2JEcKLZbqgPefWevhMYCUMgdk2XLFH414dG5rzva9nzYfaLE6d7WSq0Ta1Y1pwLQkSgPrA%3D%3D",REACT_APP_WEBRTC_PORT:"3500"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTO_SYNC_CLIENT_PORT:"41234",REACT_APP_AUTO_SYNC_SERVER_PORT:"41235",REACT_APP_GOOGLE_API_KEY:"AIzaSyAgy5PmgjcCDTvQywjMlBRyFg8APSrvkN0",REACT_APP_HTTP_PORT:"5001",REACT_APP_IO_PORT:"3501",REACT_APP_PROXY_SERVER_PORT:"5000",REACT_APP_TOWN_WEATHER_API_KEY:"A%2BRfjZFOzYps3gVx2JEcKLZbqgPefWevhMYCUMgdk2XLFH414dG5rzva9nzYfaLE6d7WSq0Ta1Y1pwLQkSgPrA%3D%3D",REACT_APP_WEBRTC_PORT:"3500"}.SC_ATTR)||"data-styled",T="undefined"!=typeof window&&"HTMLElement"in window,N=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTO_SYNC_CLIENT_PORT:"41234",REACT_APP_AUTO_SYNC_SERVER_PORT:"41235",REACT_APP_GOOGLE_API_KEY:"AIzaSyAgy5PmgjcCDTvQywjMlBRyFg8APSrvkN0",REACT_APP_HTTP_PORT:"5001",REACT_APP_IO_PORT:"3501",REACT_APP_PROXY_SERVER_PORT:"5000",REACT_APP_TOWN_WEATHER_API_KEY:"A%2BRfjZFOzYps3gVx2JEcKLZbqgPefWevhMYCUMgdk2XLFH414dG5rzva9nzYfaLE6d7WSq0Ta1Y1pwLQkSgPrA%3D%3D",REACT_APP_WEBRTC_PORT:"3500"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTO_SYNC_CLIENT_PORT:"41234",REACT_APP_AUTO_SYNC_SERVER_PORT:"41235",REACT_APP_GOOGLE_API_KEY:"AIzaSyAgy5PmgjcCDTvQywjMlBRyFg8APSrvkN0",REACT_APP_HTTP_PORT:"5001",REACT_APP_IO_PORT:"3501",REACT_APP_PROXY_SERVER_PORT:"5000",REACT_APP_TOWN_WEATHER_API_KEY:"A%2BRfjZFOzYps3gVx2JEcKLZbqgPefWevhMYCUMgdk2XLFH414dG5rzva9nzYfaLE6d7WSq0Ta1Y1pwLQkSgPrA%3D%3D",REACT_APP_WEBRTC_PORT:"3500"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTO_SYNC_CLIENT_PORT:"41234",REACT_APP_AUTO_SYNC_SERVER_PORT:"41235",REACT_APP_GOOGLE_API_KEY:"AIzaSyAgy5PmgjcCDTvQywjMlBRyFg8APSrvkN0",REACT_APP_HTTP_PORT:"5001",REACT_APP_IO_PORT:"3501",REACT_APP_PROXY_SERVER_PORT:"5000",REACT_APP_TOWN_WEATHER_API_KEY:"A%2BRfjZFOzYps3gVx2JEcKLZbqgPefWevhMYCUMgdk2XLFH414dG5rzva9nzYfaLE6d7WSq0Ta1Y1pwLQkSgPrA%3D%3D",REACT_APP_WEBRTC_PORT:"3500"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTO_SYNC_CLIENT_PORT:"41234",REACT_APP_AUTO_SYNC_SERVER_PORT:"41235",REACT_APP_GOOGLE_API_KEY:"AIzaSyAgy5PmgjcCDTvQywjMlBRyFg8APSrvkN0",REACT_APP_HTTP_PORT:"5001",REACT_APP_IO_PORT:"3501",REACT_APP_PROXY_SERVER_PORT:"5000",REACT_APP_TOWN_WEATHER_API_KEY:"A%2BRfjZFOzYps3gVx2JEcKLZbqgPefWevhMYCUMgdk2XLFH414dG5rzva9nzYfaLE6d7WSq0Ta1Y1pwLQkSgPrA%3D%3D",REACT_APP_WEBRTC_PORT:"3500"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTO_SYNC_CLIENT_PORT:"41234",REACT_APP_AUTO_SYNC_SERVER_PORT:"41235",REACT_APP_GOOGLE_API_KEY:"AIzaSyAgy5PmgjcCDTvQywjMlBRyFg8APSrvkN0",REACT_APP_HTTP_PORT:"5001",REACT_APP_IO_PORT:"3501",REACT_APP_PROXY_SERVER_PORT:"5000",REACT_APP_TOWN_WEATHER_API_KEY:"A%2BRfjZFOzYps3gVx2JEcKLZbqgPefWevhMYCUMgdk2XLFH414dG5rzva9nzYfaLE6d7WSq0Ta1Y1pwLQkSgPrA%3D%3D",REACT_APP_WEBRTC_PORT:"3500"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTO_SYNC_CLIENT_PORT:"41234",REACT_APP_AUTO_SYNC_SERVER_PORT:"41235",REACT_APP_GOOGLE_API_KEY:"AIzaSyAgy5PmgjcCDTvQywjMlBRyFg8APSrvkN0",REACT_APP_HTTP_PORT:"5001",REACT_APP_IO_PORT:"3501",REACT_APP_PROXY_SERVER_PORT:"5000",REACT_APP_TOWN_WEATHER_API_KEY:"A%2BRfjZFOzYps3gVx2JEcKLZbqgPefWevhMYCUMgdk2XLFH414dG5rzva9nzYfaLE6d7WSq0Ta1Y1pwLQkSgPrA%3D%3D",REACT_APP_WEBRTC_PORT:"3500"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTO_SYNC_CLIENT_PORT:"41234",REACT_APP_AUTO_SYNC_SERVER_PORT:"41235",REACT_APP_GOOGLE_API_KEY:"AIzaSyAgy5PmgjcCDTvQywjMlBRyFg8APSrvkN0",REACT_APP_HTTP_PORT:"5001",REACT_APP_IO_PORT:"3501",REACT_APP_PROXY_SERVER_PORT:"5000",REACT_APP_TOWN_WEATHER_API_KEY:"A%2BRfjZFOzYps3gVx2JEcKLZbqgPefWevhMYCUMgdk2XLFH414dG5rzva9nzYfaLE6d7WSq0Ta1Y1pwLQkSgPrA%3D%3D",REACT_APP_WEBRTC_PORT:"3500"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTO_SYNC_CLIENT_PORT:"41234",REACT_APP_AUTO_SYNC_SERVER_PORT:"41235",REACT_APP_GOOGLE_API_KEY:"AIzaSyAgy5PmgjcCDTvQywjMlBRyFg8APSrvkN0",REACT_APP_HTTP_PORT:"5001",REACT_APP_IO_PORT:"3501",REACT_APP_PROXY_SERVER_PORT:"5000",REACT_APP_TOWN_WEATHER_API_KEY:"A%2BRfjZFOzYps3gVx2JEcKLZbqgPefWevhMYCUMgdk2XLFH414dG5rzva9nzYfaLE6d7WSq0Ta1Y1pwLQkSgPrA%3D%3D",REACT_APP_WEBRTC_PORT:"3500"}.SC_DISABLE_SPEEDY));function _(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var I=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,a=r;e>=a;)(a<<=1)<0&&_(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var o=r;o<a;o++)this.groupSizes[o]=0}for(var i=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(i,t[s])&&(this.groupSizes[e]++,i++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var a=n;a<r;a++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n,o=r;o<a;o++)t+=this.tag.getRule(o)+"/*!sc*/\n";return t},e}(),R=new Map,A=new Map,O=1,P=function(e){if(R.has(e))return R.get(e);for(;A.has(O);)O++;var t=O++;return R.set(e,t),A.set(t,e),t},D=function(e){return A.get(e)},L=function(e,t){t>=O&&(O=t+1),R.set(e,t),A.set(t,e)},M="style["+E+'][data-styled-version="5.3.5"]',F=new RegExp("^"+E+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),B=function(e,t,n){for(var r,a=n.split(","),o=0,i=a.length;o<i;o++)(r=a[o])&&e.registerName(t,r)},j=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],a=0,o=n.length;a<o;a++){var i=n[a].trim();if(i){var s=i.match(F);if(s){var u=0|parseInt(s[1],10),c=s[2];0!==u&&(L(c,u),B(e,c,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(i)}}},z=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},V=function(e){var t=document.head,n=e||t,r=document.createElement("style"),a=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(E))return r}}(n),o=void 0!==a?a.nextSibling:null;r.setAttribute(E,"active"),r.setAttribute("data-styled-version","5.3.5");var i=z();return i&&r.setAttribute("nonce",i),n.insertBefore(r,o),r},W=function(){function e(e){var t=this.element=V(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var a=t[n];if(a.ownerNode===e)return a}_(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),Z=function(){function e(e){var t=this.element=V(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),U=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),H=T,G={isServer:!T,useCSSOMInjection:!N},q=function(){function e(e,t,n){void 0===e&&(e=k),void 0===t&&(t={}),this.options=v({},G,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&T&&H&&(H=!1,function(e){for(var t=document.querySelectorAll(M),n=0,r=t.length;n<r;n++){var a=t[n];a&&"active"!==a.getAttribute(E)&&(j(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return P(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(v({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,a=t.target,e=n?new U(a):r?new W(a):new Z(a),new I(e)));var e,t,n,r,a},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(P(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(P(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(P(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",a=0;a<n;a++){var o=D(a);if(void 0!==o){var i=e.names.get(o),s=t.getGroup(a);if(i&&s&&i.size){var u=E+".g"+a+'[id="'+o+'"]',c="";void 0!==i&&i.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+u+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),X=/(a)(d)/gi,K=function(e){return String.fromCharCode(e+(e>25?39:97))};function Y(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=K(t%52)+n;return(K(t%52)+n).replace(X,"$1-$2")}var Q=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},$=function(e){return Q(5381,e)};function J(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(w(n)&&!C(n))return!1}return!0}var ee=$("5.3.5"),te=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&J(e),this.componentId=t,this.baseHash=Q(ee,t),this.baseStyle=n,q.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var o=be(this.rules,e,t,n).join(""),i=Y(Q(this.baseHash,o)>>>0);if(!t.hasNameForId(r,i)){var s=n(o,"."+i,void 0,r);t.insertRules(r,i,s)}a.push(i),this.staticRulesId=i}else{for(var u=this.rules.length,c=Q(this.baseHash,n.hash),l="",d=0;d<u;d++){var p=this.rules[d];if("string"==typeof p)l+=p;else if(p){var f=be(p,e,t,n),h=Array.isArray(f)?f.join(""):f;c=Q(c,h+d),l+=h}}if(l){var m=Y(c>>>0);if(!t.hasNameForId(r,m)){var g=n(l,"."+m,void 0,r);t.insertRules(r,m,g)}a.push(m)}}return a.join(" ")},e}(),ne=/^\s*\/\/.*$/gm,re=[":","[",".","#"];function ae(e){var t,n,r,a,o=void 0===e?k:e,i=o.options,s=void 0===i?k:i,u=o.plugins,c=void 0===u?x:u,d=new l(s),p=[],f=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,a,o,i,s,u,c,l,d){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(a[0]+r),"";default:return r+(0===d?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){p.push(e)})),h=function(e,r,o){return 0===r&&-1!==re.indexOf(o[n.length])||o.match(a)?e:"."+t};function m(e,o,i,s){void 0===s&&(s="&");var u=e.replace(ne,""),c=o&&i?i+" "+o+" { "+u+" }":u;return t=s,n=o,r=new RegExp("\\"+n+"\\b","g"),a=new RegExp("(\\"+n+"\\b){2,}"),d(i||!o?"":o,c)}return d.use([].concat(c,[function(e,t,a){2===e&&a.length&&a[0].lastIndexOf(n)>0&&(a[0]=a[0].replace(r,h))},f,function(e){if(-2===e){var t=p;return p=[],t}}])),m.hash=c.length?c.reduce((function(e,t){return t.name||_(15),Q(e,t.name)}),5381).toString():"",m}var oe=t.createContext(),ie=(oe.Consumer,t.createContext()),se=(ie.Consumer,new q),ue=ae();function ce(){return(0,t.useContext)(oe)||se}function le(){return(0,t.useContext)(ie)||ue}function de(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],a=n[1],o=ce(),i=(0,t.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),s=(0,t.useMemo)((function(){return ae({options:{prefix:!e.disableVendorPrefixes},plugins:r})}),[e.disableVendorPrefixes,r]);return(0,t.useEffect)((function(){c()(r,e.stylisPlugins)||a(e.stylisPlugins)}),[e.stylisPlugins]),t.createElement(oe.Provider,{value:i},t.createElement(ie.Provider,{value:s},e.children))}var pe=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ue);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return _(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=ue),this.name+e.hash},e}(),fe=/([A-Z])/,he=/([A-Z])/g,me=/^ms-/,ge=function(e){return"-"+e.toLowerCase()};function ve(e){return fe.test(e)?e.replace(he,ge).replace(me,"-ms-"):e}var ye=function(e){return null==e||!1===e||""===e};function be(e,t,n,r){if(Array.isArray(e)){for(var a,o=[],i=0,s=e.length;i<s;i+=1)""!==(a=be(e[i],t,n,r))&&(Array.isArray(a)?o.push.apply(o,a):o.push(a));return o}return ye(e)?"":C(e)?"."+e.styledComponentId:w(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:be(e(t),t,n,r):e instanceof pe?n?(e.inject(n,r),e.getName(r)):e:b(e)?function e(t,n){var r,a,o=[];for(var i in t)t.hasOwnProperty(i)&&!ye(t[i])&&(Array.isArray(t[i])&&t[i].isCss||w(t[i])?o.push(ve(i)+":",t[i],";"):b(t[i])?o.push.apply(o,e(t[i],i)):o.push(ve(i)+": "+(r=i,(null==(a=t[i])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in d?String(a).trim():a+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(e):e.toString();var u}var xe=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function ke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return w(e)||b(e)?xe(be(y(x,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:xe(be(y(e,n)))}new Set;var we=function(e,t,n){return void 0===n&&(n=k),e.theme!==n.theme&&e.theme||t||n.theme},Se=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Ce=/(^-|-$)/g;function Ee(e){return e.replace(Se,"-").replace(Ce,"")}var Te=function(e){return Y($(e)>>>0)};function Ne(e){return"string"==typeof e&&!0}var _e=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Ie=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Re(e,t,n){var r=e[n];_e(t)&&_e(r)?Ae(r,t):e[n]=t}function Ae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,o=n;a<o.length;a++){var i=o[a];if(_e(i))for(var s in i)Ie(s)&&Re(e,i[s],s)}return e}var Oe=t.createContext();Oe.Consumer;var Pe={};function De(e,n,r){var a=C(e),o=!Ne(e),i=n.attrs,s=void 0===i?x:i,u=n.componentId,c=void 0===u?function(e,t){var n="string"!=typeof e?"sc":Ee(e);Pe[n]=(Pe[n]||0)+1;var r=n+"-"+Te("5.3.5"+n+Pe[n]);return t?t+"-"+r:r}(n.displayName,n.parentComponentId):u,l=n.displayName,d=void 0===l?function(e){return Ne(e)?"styled."+e:"Styled("+S(e)+")"}(e):l,p=n.displayName&&n.componentId?Ee(n.displayName)+"-"+n.componentId:n.componentId||c,f=a&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,m=n.shouldForwardProp;a&&e.shouldForwardProp&&(m=n.shouldForwardProp?function(t,r,a){return e.shouldForwardProp(t,r,a)&&n.shouldForwardProp(t,r,a)}:e.shouldForwardProp);var y,b=new te(r,p,a?e.componentStyle:void 0),E=b.isStatic&&0===s.length,T=function(e,n){return function(e,n,r,a){var o=e.attrs,i=e.componentStyle,s=e.defaultProps,u=e.foldedComponentIds,c=e.shouldForwardProp,l=e.styledComponentId,d=e.target,p=function(e,t,n){void 0===e&&(e=k);var r=v({},t,{theme:e}),a={};return n.forEach((function(e){var t,n,o,i=e;for(t in w(i)&&(i=i(r)),i)r[t]=a[t]="className"===t?(n=a[t],o=i[t],n&&o?n+" "+o:n||o):i[t]})),[r,a]}(we(n,(0,t.useContext)(Oe),s)||k,n,o),f=p[0],m=p[1],g=function(e,t,n,r){var a=ce(),o=le();return t?e.generateAndInjectStyles(k,a,o):e.generateAndInjectStyles(n,a,o)}(i,a,f),y=r,b=m.$as||n.$as||m.as||n.as||d,x=Ne(b),S=m!==n?v({},n,{},m):n,C={};for(var E in S)"$"!==E[0]&&"as"!==E&&("forwardedAs"===E?C.as=S[E]:(c?c(E,h,b):!x||h(E))&&(C[E]=S[E]));return n.style&&m.style!==n.style&&(C.style=v({},n.style,{},m.style)),C.className=Array.prototype.concat(u,l,g!==l?g:null,n.className,m.className).filter(Boolean).join(" "),C.ref=y,(0,t.createElement)(b,C)}(y,e,n,E)};return T.displayName=d,(y=t.forwardRef(T)).attrs=f,y.componentStyle=b,y.displayName=d,y.shouldForwardProp=m,y.foldedComponentIds=a?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):x,y.styledComponentId=p,y.target=a?e.target:e,y.withComponent=function(e){var t=n.componentId,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(n,["componentId"]),o=t&&t+"-"+(Ne(e)?e:Ee(S(e)));return De(e,v({},a,{attrs:f,componentId:o}),r)},Object.defineProperty(y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=a?Ae({},e.defaultProps,t):t}}),y.toString=function(){return"."+y.styledComponentId},o&&g()(y,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),y}var Le=function(e){return function e(t,n,r){if(void 0===r&&(r=k),!(0,s.isValidElementType)(n))return _(1,String(n));var a=function(){return t(n,r,ke.apply(void 0,arguments))};return a.withConfig=function(a){return e(t,n,v({},r,{},a))},a.attrs=function(a){return e(t,n,v({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},a}(De,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Le[e]=Le(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=J(e),q.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var a=r(be(this.rules,t,n,r).join(""),""),o=this.componentId+e;n.insertRules(o,o,a)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&q.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=z();return"<style "+[n&&'nonce="'+n+'"',E+'="true"','data-styled-version="5.3.5"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?_(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return _(2);var r=((n={})[E]="",n["data-styled-version"]="5.3.5",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),a=z();return a&&(r.nonce=a),[t.createElement("style",v({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new q({isServer:!0}),this.sealed=!1}var n=e.prototype;n.collectStyles=function(e){return this.sealed?_(2):t.createElement(de,{sheet:this.instance},e)},n.interleaveWithNodeStream=function(e){return _(3)}}();var Me,Fe=Le,Be=n(3433),je=n(1843),ze=n.n(je),Ve=function(e){for(var n=e.url,r=e.allowFullScreen,a=e.position,o=e.display,i=e.height,s=e.width,u=e.overflow,c=e.styles,l=e.onLoad,d=e.onMouseOver,p=e.onMouseOut,f=e.scrolling,h=e.id,m=e.frameBorder,g=e.ariaHidden,v=e.sandbox,y=e.allow,b=e.className,x=e.title,k=e.ariaLabel,w=e.ariaLabelledby,S=e.name,C=e.target,E=e.loading,T=e.importance,N=e.referrerpolicy,_=e.allowpaymentrequest,I=e.src,R=e.key,A=ze()({src:I||n,target:C||null,style:{position:a||null,display:o||"initial",overflow:u||null},scrolling:f||null,allowpaymentrequest:_||null,importance:T||null,sandbox:v&&(0,Be.Z)(v).join(" ")||null,loading:E||null,styles:c||null,name:S||null,className:b||null,allowFullScreen:"allowFullScreen",referrerpolicy:N||null,title:x||null,allow:y||null,id:h||null,"aria-labelledby":w||null,"aria-hidden":g||null,"aria-label":k||null,width:s||null,height:i||null,onLoad:l||null,onMouseOver:d||null,onMouseOut:p||null,key:R||"iframe"}),O=Object.create(null),P=0,D=Object.keys(A);P<D.length;P++){var L=D[P];null!=A[L]&&(O[L]=A[L])}for(var M=0,F=Object.keys(O.style);M<F.length;M++){var B=F[M];null==O.style[B]&&delete O.style[B]}if(O.styles)for(var j=0,z=Object.keys(O.styles);j<z.length;j++){var V=z[j];O.styles.hasOwnProperty(V)&&(O.style[V]=O.styles[V]),Object.keys(O.styles).pop()==V&&delete O.styles}if(r)if("allow"in O){var W=O.allow.replace("fullscreen","");O.allow="fullscreen ".concat(W.trim()).trim()}else O.allow="fullscreen";return m>=0&&(O.style.hasOwnProperty("border")||(O.style.border=m)),t.createElement("iframe",Object.assign({},O))},We=n(6417),Ze=function(e){var n=e.appLayout,r=e.carStatusView,a=e.mapView,o=(0,t.useState)(!0),s=(0,i.Z)(o,2),u=s[0],c=s[1],l=(0,t.useState)(!1),d=(0,i.Z)(l,2),p=d[0],f=d[1],h=(0,t.useState)(!1),m=(0,i.Z)(h,2),g=m[0],v=m[1],y=(0,t.useState)(!1),b=(0,i.Z)(y,2),x=b[0],k=b[1],w=(0,t.useState)(0),S=(0,i.Z)(w,2),C=S[0],E=S[1],T=0,N=1,_=2;var I={lblTop:152,lblLeft:442,vlTop:205,vlLeft:474,vlWidth:1},R={width:200,height:120,top:340,left:170,lblTop:295,lblLeft:176,vlTop:295,vlLeft:240,vlWidth:1},A={width:120,height:60,top:250,left:570,lblTop:192,lblLeft:640,vlTop:192,vlLeft:640,vlWidth:1},O={width:50,height:40,top:315,left:660,vlTop:335,vlLeft:690,vlHeight:1,vlWidth:32,lblTop:300,lblLeft:712},P=(0,t.useState)(I),D=(0,i.Z)(P,2),L=D[0],M=D[1],F=(0,t.useState)(R),B=(0,i.Z)(F,2),j=B[0],z=B[1],V=(0,t.useState)(A),W=(0,i.Z)(V,2),Z=W[0],U=W[1],H=(0,t.useState)(O),G=(0,i.Z)(H,2),q=G[0],X=G[1];function K(){f(!p)}function Y(){v(!g)}function Q(){k(!x)}(0,t.useEffect)((function(){var e,t,n,r,o;1===(e=a?1:5/3)?(t=I,n=R,r=A,o=O):(t={lblTop:62,lblLeft:760,vlTop:115,vlLeft:792,vlWidth:2},n={width:200*e,height:120*e,top:300,left:270,lblTop:300,lblLeft:252,vlTop:300,vlLeft:318,vlWidth:2},r={width:120*e,height:60*e,top:140,left:755,lblTop:108,lblLeft:1050,vlTop:108,vlLeft:1048,vlWidth:2},o={width:50*e,height:40*e,top:255,left:1085,lblTop:245,lblLeft:1192,vlHeight:2,vlWidth:32*e,vlTop:280,vlLeft:1148}),p&&(n.width=350*e,n.height=300*e,1===e?(n.top=245,n.left=170):(n.top=145,n.left=275)),g&&(r.width=225*e,r.height=150*e,1===e?(r.top=240,r.left=450):(r.top=140,r.left=755)),x&&(o.width=220*e,o.height=150*e,o.vlWidth=380*e,1===e?(o.top=270,o.left=150,o.vlLeft=345):(o.top=185,o.left=245,o.vlLeft=570));var i=16;t.lblTop+=i,t.vlTop+=i,n.top+=i,n.lblTop+=i,n.vlTop+=i,r.top+=i,r.lblTop+=i,r.vlTop+=i,o.top+=i,o.vlTop+=i,o.lblTop+=i,M(t),z(n),U(r),X(o)}),[a,p,g,x]);var $=["http://vr.ff.com/us/","https://carvisualizer.plus360degrees.com/threejs/","https://www.plus360degrees.com/uxcars/","http://renaultespace.littleworkshop.fr/"],J=(0,t.useState)(-1),ee=(0,i.Z)(J,2),te=ee[0],ne=ee[1];return(0,We.jsx)(Ue,{frunkOpen:p,chargingDoorOpen:x,doorLockPos:L,frunkPos:j,trunkPos:Z,chargingDoorPos:q,appLayout:n,carStatusView:r,mapView:a,children:r&&(0,We.jsxs)(We.Fragment,{children:[te>=0?(0,We.jsx)("div",{style:{width:n.carSideWidth,height:n.carSideHeight,borderTopRightRadius:a?0:8},children:(0,We.jsx)(Ve,{url:$[te],width:"100%",height:"100%",id:"my-iframe",className:"",display:"block",position:"relative"})}):(0,We.jsxs)("div",{className:"tesla-standstill-container",children:[(0,We.jsx)("img",{id:"tesla-standstill-img",className:"tesla-standstill-img",src:p?g?"./tesla/model-y-frunk-trunk-open.jpg":"./tesla/model-y-frunk-open.webp":g?p?"./tesla/model-y-frunk-trunk-open.jpg":"./tesla/model-y-trunk-open.jpg":x?"./tesla/model-y-charge-open.jpg":"./tesla/model-y.jpg",alt:""}),!p&&!g&&!x&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("div",{className:"doorlock",onClick:function(){c(!u)},children:(0,We.jsx)("img",{src:u?"./images/padlock-locked.png":"./images/padlock-unlocked.png",alt:""})}),(0,We.jsx)("div",{className:"doorlock-vl"})]}),!g&&!x&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("button",{className:"frunk",onClick:K,children:[(0,We.jsx)("span",{children:"Frunk"}),(0,We.jsx)("br",{}),(0,We.jsx)("span",{className:"open-close",children:p?"Close":"Open"})]}),(0,We.jsx)("div",{className:"frunk-vl"}),(0,We.jsx)("button",{className:"frunk-btn",onClick:K})]}),!p&&!x&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("button",{className:"trunk",onClick:Y,children:[(0,We.jsx)("span",{children:"Trunk"}),(0,We.jsx)("br",{}),(0,We.jsx)("span",{className:"open-close",children:g?"Close":"Open"})]}),(0,We.jsx)("div",{className:"trunk-vl"}),(0,We.jsx)("button",{className:"trunk-btn",onClick:Y})]}),!p&&!g&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("div",{className:"charging-door",onClick:Q,children:(0,We.jsx)("img",{src:"./images/thunder.png",alt:"thunder"})}),(0,We.jsx)("div",{className:"charging-door-vl"}),(0,We.jsx)("button",{className:"charging-door-btn",onClick:Q})]})]}),(0,We.jsx)("div",{style:{position:"absolute",zIndex:2,right:8,top:"40%",width:40,height:40,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"gray",opacity:.5,borderRadius:40,fontSize:20,color:"white",cursor:"pointer"},onClick:function(){var e=te+1;e===$.length&&(e=-1),ne(e)},children:"3D"}),(0,We.jsx)("div",{className:"microphone",children:(0,We.jsx)("button",{onClick:function(){E(C!==_?_:T)},children:(0,We.jsx)("img",{src:"./images/microphone.png",alt:"microphone"})})}),(0,We.jsxs)("div",{className:"options",children:[C===N&&(0,We.jsxs)("div",{className:"options-charge",children:[(0,We.jsxs)("div",{className:"time",children:[(0,We.jsx)("span",{}),(0,We.jsxs)("p",{children:["since"," ",(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})]}),(0,We.jsx)("img",{src:"./images/option.png",alt:""})]}),(0,We.jsxs)("div",{className:"miles",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{children:"1.2"}),(0,We.jsx)("br",{}),(0,We.jsx)("span",{children:"mi"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{children:"4"}),(0,We.jsx)("br",{}),(0,We.jsx)("span",{children:"min"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{children:"270"}),(0,We.jsx)("br",{}),(0,We.jsx)("span",{children:"min"})]})]}),(0,We.jsx)("span",{className:"options-charge-line"}),(0,We.jsx)("p",{className:"last-charge",children:" since last charge"})]}),C===_&&(0,We.jsxs)("div",{className:"options-mic",children:[(0,We.jsx)("span",{children:(0,We.jsx)("img",{src:"./images/microphone.png",alt:""})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{children:(0,We.jsx)("b",{children:"Voice Command:"})}),(0,We.jsx)("p",{children:"Navigate to office"})]})]})]})]})})},Ue=Fe.div(Me||(Me=a(["\n\tposition: relative;\n\theight: ","px;\n\twidth: ","px;\n\tcolor: #6f6f6f;\n\tbackground: #f8f8f8;\n\t//border-top-left-radius: 8px;\n\tborder-top-right-radius: ",";\n\tdisplay: flex;\n\tflex-direction: column;\n\tfont-size: 0.8rem;\n\tline-height: 1;\n\tcolor: #707070;\n\n\t.tesla-standstill-container {\n\t\theight: ","px;\n\t\twidth: ","px;\n\t\tz-index: 1;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\t.tesla-standstill-img {\n\t\t\twidth: ","px;\n\t\t\theight: ","px;\n\t\t\ttransition: all 0.6s ease-in;\n\t\t}\n\t}\n\n\t.doorlock {\n\t\tcursor: pointer;\n\t\tposition: absolute;\n\t\tbackground: transparent;\n\t\t//background: yellow;\n\t\t//opacity: 0.5;\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\twidth: 64px;\n\t\theight: 64px;\n\t\tpadding: 8px;\n\t\timg {\n\t\t\twidth: 48px;\n\t\t}\n\t}\n\t.doorlock-vl {\n\t\tposition: absolute;\n\t\tbackground: darkgray;\n\t\twidth: ","px;\n\t\theight: 50px;\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t}\n\n\t.frunk {\n\t\tcursor: pointer;\n\t\tposition: absolute;\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\ttext-align: right;\n\t\tborder: 0;\n\t\tcolor: inherit;\n\t\tbackground: transparent;\n\t\t//background: yellow;\n\t\t//opacity: 0.5;\n\t\tfont-size: 16px;\n\t\tfont-weight: 500;\n\t\t.open-close {\n\t\t\tfont-size: 20px;\n\t\t\tfont-weight: 700;\n\t\t}\n\t}\n\t.frunk-vl {\n\t\tposition: absolute;\n\t\tbackground: darkgray;\n\t\theight: 90px;\n\t\twidth: ","px;\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t}\n\t.frunk-btn {\n\t\tposition: absolute;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\tbackground: transparent;\n\t\t//background: yellow;\n\t\t//opacity: 0.5;\n\t\tborder: 0;\n\t\tcursor: pointer;\n\t}\n\n\t.trunk {\n\t\tcursor: pointer;\n\t\tposition: absolute;\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\ttext-align: left;\n\t\tborder: 0;\n\t\tcolor: inherit;\n\t\tbackground: transparent;\n\t\t//background: yellow;\n\t\t//opacity: 0.5;\n\t\tfont-size: 16px;\n\t\tfont-weight: 500;\n\t\t.open-close {\n\t\t\tfont-size: 20px;\n\t\t\tfont-weight: 700;\n\t\t}\n\t}\n\t.trunk-vl {\n\t\tposition: absolute;\n\t\tbackground: darkgray;\n\t\theight: 90px;\n\t\twidth: ","px;\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t}\n\t.trunk-btn {\n\t\tposition: absolute;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\tbackground: transparent;\n\t\t//background: yellow;\n\t\t//opacity: 0.5;\n\t\tborder: 0;\n\t\tcursor: pointer;\n\t}\n\n\t.charging-door {\n\t\tcursor: pointer;\n\t\tposition: absolute;\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\twidth: 64px;\n\t\theight: 64px;\n\t\tpadding: 12px;\n\t\tcolor: inherit;\n\t\tbackground: transparent;\n\t\t//background: yellow;\n\t\t//opacity: 0.5;\n\t\timg {\n\t\t\twidth: 40px;\n\t\t}\n\t}\n\t.charging-door-vl {\n\t\tposition: absolute;\n\t\tbackground: ",";\n\t\theight: ","px;\n\t\twidth: ","px;\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\ttransition: ",";\n\t}\n\t.charging-door-btn {\n\t\tposition: absolute;\n\t\twidth: ","px;\n\t\theight: ","px;\n\t\ttop: ","px;\n\t\tleft: ","px;\n\t\tbackground: transparent;\n\t\t//background: yellow;\n\t\t//opacity: 0.5;\n\t\tborder: 0;\n\t\tcursor: pointer;\n\t}\n\n\t.microphone {\n\t\tposition: absolute;\n\t\tleft: 0px;\n\t\tbottom: 0px;\n\t\theight: 96px;\n\t\tdisplay: flex;\n\t\t//justify-content: space-between;\n\t\tgap: 48px;\n\t\tpadding: 24px;\n\t\tz-index: 2;\n\t\tbutton {\n\t\t\twidth: 48px;\n\t\t\theight: 48px;\n\t\t\tborder: 0;\n\t\t\tpadding: 8px;\n\t\t\tbackground: inherit;\n\t\t}\n\t\timg {\n\t\t\twidth: 32px;\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n\n\t.options {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmargin-top: auto;\n\t\talign-self: stretch;\n\t\tz-index: 2;\n\n\t\t.options-spans {\n\t\t\ttext-align: center;\n\t\t\tspan {\n\t\t\t\tdisplay: inline-block;\n\t\t\t\twidth: 10px;\n\t\t\t\theight: 10px;\n\t\t\t\tborder-radius: 100%;\n\t\t\t\tbackground: #707070;\n\t\t\t\tcursor: pointer;\n\t\t\t\tmargin: 0 4px;\n\t\t\t}\n\n\t\t\t.active {\n\t\t\t\tbackground: #0080ff;\n\t\t\t}\n\t\t}\n\t}\n\n\t.options-charge {\n\t\t//width: 95%;\n\t\twidth: ","px;\n\t\theight: 145px;\n\t\tborder-radius: 16px;\n\t\tbottom: 80px;\n\t\tleft: 12px;\n\t\tposition: absolute;\n\t\tbackground: #f8f8f8;\n\t\tpadding: 12px;\n\t\tbox-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n\t\t\n\t\t.time {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: space-between;\n\n\t\t\timg {\n\t\t\t\twidth: 25px;\n\t\t\t}\n\t\t}\n\n\t\t.miles {\n\t\t\tdisplay: flex;\n\n\t\t\tjustify-content: space-between;\n\t\t\twidth: 80%;\n\t\t\tmargin: 0 auto;\n\n\t\t\tdiv {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tline-height: 0.7;\n\t\t\t\tspan:first-of-type {\n\t\t\t\t\tfont-size: 1.3rem;\n\t\t\t\t\tfont-weight: 700;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.options-charge-line {\n\t\t\theight: 2px;\n\t\t\tbackground: #626161;\n\t\t\twidth: 100%;\n\t\t\tdisplay: inline-block;\n\t\t\tmargin: 18px 0;\n\t\t}\n\n\t\t.last-charge {\n\t\t\ttext-align: center;\n\t\t}\n\t}\n\n\t.options-mic {\n\t\twidth: ","px;\n\t\theight: 145px;\n\t\tborder-radius: 16px;\n\t\tbottom: 80px;\n\t\tleft: 12px;\n\t\tposition: absolute;\n\t\tbackground: #f8f8f8;\n\t\tbox-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n\t\t\n\t\t& > span {\n\t\t\tposition: absolute;\n\t\t\ttop: 12px;\n\t\t\tleft: 16px;\n\n\t\t\twidth: 60px;\n\t\t\theight: 60px;\n\t\t\tborder-radius: 100%;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tbackground: #f8f8f8;\n\t\t\tbox-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n\t\t\tborder: 1px solid #6F6F6F;\n\t\t}\n\n\t\timg {\n\t\t\twidth: 35px;\n\t\t}\n\n\t\tdiv {\n\t\t\tposition: absolute;\n\t\t\tleft: 92px;\n\t\t\ttop: 16px;\n\t\t\twidth: 384px;\n\t\t\tfont-size: 16px;\n\t\t}\n\t}\n"])),(function(e){return e.appLayout.carSideHeight}),(function(e){return e.appLayout.carSideWidth}),(function(e){return e.carStatusView&&!e.mapView?"border-top-right-radius: 8px;":""}),(function(e){return e.appLayout.carSideHeight}),(function(e){return e.appLayout.carSideWidth}),(function(e){return e.mapView?592:2960/3}),(function(e){return e.mapView?320:1600/3}),(function(e){return e.doorLockPos.lblTop}),(function(e){return e.doorLockPos.lblLeft}),(function(e){return e.doorLockPos.vlWidth}),(function(e){return e.doorLockPos.vlTop}),(function(e){return e.doorLockPos.vlLeft}),(function(e){return e.frunkPos.lblTop}),(function(e){return e.frunkPos.lblLeft}),(function(e){return e.frunkPos.vlWidth}),(function(e){return e.frunkPos.vlTop}),(function(e){return e.frunkPos.vlLeft}),(function(e){return e.frunkPos.width}),(function(e){return e.frunkPos.height}),(function(e){return e.frunkPos.top}),(function(e){return e.frunkPos.left}),(function(e){return e.trunkPos.lblTop}),(function(e){return e.trunkPos.lblLeft}),(function(e){return e.trunkPos.vlWidth}),(function(e){return e.trunkPos.vlTop}),(function(e){return e.trunkPos.vlLeft}),(function(e){return e.trunkPos.width}),(function(e){return e.trunkPos.height}),(function(e){return e.trunkPos.top}),(function(e){return e.trunkPos.left}),(function(e){return e.chargingDoorPos.lblTop}),(function(e){return e.chargingDoorPos.lblLeft}),(function(e){return e.chargingDoorOpen?"yellow":"darkgray"}),(function(e){return e.chargingDoorPos.vlHeight}),(function(e){return e.chargingDoorPos.vlWidth}),(function(e){return e.chargingDoorPos.vlTop}),(function(e){return e.chargingDoorPos.vlLeft}),(function(e){return e.chargingDoorOpen?"all 1.0s ease":"none"}),(function(e){return e.chargingDoorPos.width}),(function(e){return e.chargingDoorPos.height}),(function(e){return e.chargingDoorPos.top}),(function(e){return e.chargingDoorPos.left}),(function(e){return.95*e.appLayout.carSideWidthStd}),(function(e){return.95*e.appLayout.carSideWidthStd})),He=n(9284),Ge=n.n(He),qe=n(5861);function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qe=n(4687),$e=n.n(Qe),Je=n(5671),et=n(3144),tt=n(7326),nt=n(136),rt=n(3668),at=n(1120),ot=n(9611);var it=n(8814);function st(e,t,n){return st=(0,it.Z)()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&(0,ot.Z)(a,n.prototype),a},st.apply(null,arguments)}function ut(e){var t="function"===typeof Map?new Map:void 0;return ut=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return st(e,arguments,(0,at.Z)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,ot.Z)(r,e)},ut(e)}var ct,lt=/(?:(?![\0- \$'\+\x2D\/-9<->A-Z\^`-z\|~-\xA0\xA2-\xA6\xA8-\xAA\xAC-\xB5\xB8-\xBA\xBC-\xBE\xC0-\u037D\u037F-\u0386\u0388-\u0559\u0560-\u0588\u058B-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7-\u05F2\u05F5-\u0608\u060B\u060E-\u061A\u061C\u0620-\u0669\u066E-\u06D3\u06D5-\u06FF\u070E-\u07F6\u07FA-\u082F\u083F-\u085D\u085F-\u0963\u0966-\u096F\u0971-\u09FC\u09FE-\u0A75\u0A77-\u0AEF\u0AF1-\u0C76\u0C78-\u0C83\u0C85-\u0DF3\u0DF5-\u0E4E\u0E50-\u0E59\u0E5C-\u0F03\u0F13\u0F15-\u0F39\u0F3E-\u0F84\u0F86-\u0FCF\u0FD5-\u0FD8\u0FDB-\u1049\u1050-\u10FA\u10FC-\u135F\u1369-\u13FF\u1401-\u166D\u166F-\u169A\u169D-\u16EA\u16EE-\u1734\u1737-\u17D3\u17D7\u17DB-\u17FF\u180B-\u1943\u1946-\u1A1D\u1A20-\u1A9F\u1AA7\u1AAE-\u1B59\u1B61-\u1B7C\u1B7F-\u1BFB\u1C00-\u1C3A\u1C40-\u1C7D\u1C80-\u1CBF\u1CC8-\u1CD2\u1CD4-\u200F\u2028-\u202F\u2044\u2052\u205F-\u207C\u207F-\u208C\u208F-\u2307\u230C-\u2328\u232B-\u2767\u2776-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2CF8\u2CFD\u2D00-\u2D6F\u2D71-\u2DFF\u2E2F\u2E50\u2E51\u2E5E-\u3000\u3004-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303C\u303E-\u309F\u30A1-\u30FA\u30FC-\uA4FD\uA500-\uA60C\uA610-\uA672\uA674-\uA67D\uA67F-\uA6F1\uA6F8-\uA873\uA878-\uA8CD\uA8D0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA95E\uA960-\uA9C0\uA9CE-\uA9DD\uA9E0-\uAA5B\uAA60-\uAADD\uAAE0-\uAAEF\uAAF2-\uABEA\uABEC-\uD7FF\uE000-\uFD3D\uFD40-\uFE0F\uFE1A-\uFE2F\uFE53\uFE62\uFE64-\uFE67\uFE69\uFE6C-\uFF00\uFF04\uFF0B\uFF10-\uFF19\uFF1C-\uFF1E\uFF21-\uFF3A\uFF3E\uFF40-\uFF5A\uFF5C\uFF5E\uFF66-\uFFFF]|\uD800[\uDC00-\uDCFF\uDD03-\uDF9E\uDFA0-\uDFCF\uDFD1-\uDFFF]|\uD801[\uDC00-\uDD6E\uDD70-\uDFFF]|\uD802[\uDC00-\uDC56\uDC58-\uDD1E\uDD20-\uDD3E\uDD40-\uDE4F\uDE59-\uDE7E\uDE80-\uDEEF\uDEF7-\uDF38\uDF40-\uDF98\uDF9D-\uDFFF]|\uD803[\uDC00-\uDEAC\uDEAE-\uDF54\uDF5A-\uDF85\uDF8A-\uDFFF]|\uD804[\uDC00-\uDC46\uDC4E-\uDCBA\uDCBD\uDCC2-\uDD3F\uDD44-\uDD73\uDD76-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDDE0-\uDE37\uDE3E-\uDEA8\uDEAA-\uDFFF]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5C\uDC5E-\uDCC5\uDCC7-\uDDC0\uDDD8-\uDE40\uDE44-\uDE5F\uDE6D-\uDEB8\uDEBA-\uDF3B\uDF3F-\uDFFF]|\uD806[\uDC00-\uDC3A\uDC3C-\uDD43\uDD47-\uDDE1\uDDE3-\uDE3E\uDE47-\uDE99\uDE9D\uDEA3-\uDFFF]|\uD807[\uDC00-\uDC40\uDC46-\uDC6F\uDC72-\uDEF6\uDEF9-\uDFFE]|[\uD808\uD80A\uD80C-\uD819\uD81C-\uD82E\uD830-\uD835\uD837-\uD839\uD83B-\uDBFF][\uDC00-\uDFFF]|\uD809[\uDC00-\uDC6F\uDC75-\uDFFF]|\uD80B[\uDC00-\uDFF0\uDFF3-\uDFFF]|\uD81A[\uDC00-\uDE6D\uDE70-\uDEF4\uDEF6-\uDF36\uDF3C-\uDF43\uDF45-\uDFFF]|\uD81B[\uDC00-\uDE96\uDE9B-\uDFE1\uDFE3-\uDFFF]|\uD82F[\uDC00-\uDC9E\uDCA0-\uDFFF]|\uD836[\uDC00-\uDE86\uDE8C-\uDFFF]|\uD83A[\uDC00-\uDD5D\uDD60-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])[\s\S])+/g,dt=function(e){return e.replace(lt,"")};function pt(e,t){ht(e,t),t.add(e)}function ft(e,t,n){ht(e,t),t.set(e,n)}function ht(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function mt(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function gt(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,yt(e,t,"get"))}function vt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,yt(e,t,"set"),n),n}function yt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}!function(e){e.BOUNDARY="boundary",e.END="end",e.ERROR="error",e.PAUSED="paused",e.PITCH="pitch",e.PLAYING="playing",e.RATE="rate",e.READY="ready",e.VOLUME="volume"}(ct||(ct={}));var bt=new WeakMap,xt=new WeakMap,kt=new WeakMap,wt=new WeakMap,St=new WeakMap,Ct=new WeakMap,Et=new WeakMap,Tt=new WeakMap,Nt=new WeakMap,_t=new WeakSet,It=new WeakSet,Rt=new WeakSet,At=new WeakSet,Ot=new WeakSet,Pt=new WeakSet,Dt=new WeakSet,Lt=new WeakSet,Mt=new WeakSet,Ft=new WeakSet,Bt=new WeakSet,jt=new WeakSet,zt=new WeakSet,Vt=new WeakSet,Wt=new WeakSet,Zt=new WeakSet,Ut=new WeakSet,Ht=new WeakSet,Gt=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e){var r,a,o;return(0,Je.Z)(this,n),o=t.call(this),pt((0,tt.Z)(o),Ht),pt((0,tt.Z)(o),Ut),pt((0,tt.Z)(o),Zt),pt((0,tt.Z)(o),Wt),pt((0,tt.Z)(o),Vt),pt((0,tt.Z)(o),zt),pt((0,tt.Z)(o),jt),pt((0,tt.Z)(o),Bt),pt((0,tt.Z)(o),Ft),pt((0,tt.Z)(o),Mt),pt((0,tt.Z)(o),Lt),pt((0,tt.Z)(o),Dt),pt((0,tt.Z)(o),Pt),pt((0,tt.Z)(o),Ot),pt((0,tt.Z)(o),At),pt((0,tt.Z)(o),Rt),pt((0,tt.Z)(o),It),pt((0,tt.Z)(o),_t),ft((0,tt.Z)(o),bt,{writable:!0,value:void 0}),ft((0,tt.Z)(o),xt,{writable:!0,value:void 0}),ft((0,tt.Z)(o),kt,{writable:!0,value:!0}),ft((0,tt.Z)(o),wt,{writable:!0,value:function(){var e=(0,qe.Z)($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{audio:"",marks:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),ft((0,tt.Z)(o),St,{writable:!0,value:[]}),ft((0,tt.Z)(o),Ct,{writable:!0,value:""}),ft((0,tt.Z)(o),Et,{writable:!0,value:""}),ft((0,tt.Z)(o),Tt,{writable:!0,value:new AbortController}),ft((0,tt.Z)(o),Nt,{writable:!0,value:!1}),vt((0,tt.Z)(o),Et,null!==(r=null===e||void 0===e?void 0:e.lang)&&void 0!==r?r:gt((0,tt.Z)(o),Et)),vt((0,tt.Z)(o),xt,window.speechSynthesis),vt((0,tt.Z)(o),bt,new SpeechSynthesisUtterance(gt((0,tt.Z)(o),Ct))),vt((0,tt.Z)(o),kt,null!==(a=null===e||void 0===e?void 0:e.dispatchBoundaries)&&void 0!==a?a:gt((0,tt.Z)(o),kt)),null!==e&&void 0!==e&&e.fetchAudioData?(vt((0,tt.Z)(o),bt,vt((0,tt.Z)(o),xt,new Audio)),vt((0,tt.Z)(o),wt,e.fetchAudioData)):(mt((0,tt.Z)(o),_t,qt).call((0,tt.Z)(o),null===e||void 0===e?void 0:e.voice),window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=function(){mt((0,tt.Z)(o),_t,qt).call((0,tt.Z)(o),null===e||void 0===e?void 0:e.voice)})),o}return(0,et.Z)(n,[{key:"synthesizer",get:function(){return gt(this,xt)}},{key:"target",get:function(){return gt(this,bt)}},{key:"text",set:function(e){vt(this,Ct,e),gt(this,bt)instanceof SpeechSynthesisUtterance&&(gt(this,bt).text=e)}},{key:"paused",get:function(){return gt(this,xt).paused}},{key:"rate",get:function(){return gt(this,xt)instanceof HTMLAudioElement?gt(this,xt).playbackRate:gt(this,bt).rate},set:function(e){var t=mt(this,Wt,ln).call(this,parseFloat(e.toPrecision(3)),.1,10);Number.isNaN(t)||(mt(this,Ft,rn).call(this,t),gt(this,xt)instanceof HTMLAudioElement&&(gt(this,xt).defaultPlaybackRate=t,gt(this,xt).playbackRate=t),gt(this,bt)instanceof SpeechSynthesisUtterance&&(gt(this,bt).rate=t))}},{key:"pitch",get:function(){return gt(this,bt)instanceof SpeechSynthesisUtterance?gt(this,bt).pitch:-1},set:function(e){if(gt(this,bt)instanceof SpeechSynthesisUtterance){var t=mt(this,Wt,ln).call(this,parseFloat(e.toPrecision(2)),0,2);Number.isNaN(t)||(mt(this,Bt,an).call(this,t),gt(this,bt).pitch=t)}}},{key:"volumeMin",get:function(){return.01}},{key:"volumeMax",get:function(){return.99}},{key:"volume",get:function(){return gt(this,bt).volume},set:function(e){var t=mt(this,Wt,ln).call(this,parseFloat(e.toPrecision(2)),this.volumeMin,this.volumeMax);Number.isNaN(t)||(mt(this,Mt,nn).call(this,t),gt(this,bt).volume=t)}},{key:"preservesPitch",get:function(){return gt(this,xt)instanceof HTMLAudioElement&&gt(this,xt).preservesPitch},set:function(e){gt(this,xt)instanceof HTMLAudioElement&&(gt(this,xt).preservesPitch=e)}},{key:"lang",get:function(){return gt(this,Et)},set:function(e){gt(this,bt)instanceof SpeechSynthesisUtterance&&(vt(this,Et,e),gt(this,bt).lang=e,gt(this,bt).voice=null,mt(this,_t,qt).call(this))}},{key:"init",value:function(){var e=(0,qe.Z)($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gt(this,Nt)){e.next=6;break}if(gt(this,bt)instanceof SpeechSynthesisUtterance&&mt(this,Ut,pn).call(this),!(gt(this,bt)instanceof HTMLAudioElement)){e.next=5;break}return e.next=5,mt(this,Ht,fn).call(this);case 5:vt(this,Nt,!0);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"play",value:function(){var e=(0,qe.Z)($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(gt(this,xt)instanceof HTMLAudioElement)){e.next=5;break}return e.next=3,mt(this,jt,on).call(this);case 3:e.next=6;break;case 5:gt(this,xt).speak(gt(this,bt));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pause",value:function(){gt(this,xt).pause()}},{key:"resume",value:function(){var e=(0,qe.Z)($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(gt(this,xt)instanceof HTMLAudioElement)){e.next=5;break}return e.next=3,mt(this,jt,on).call(this);case 3:e.next=6;break;case 5:gt(this,xt).resume();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"replay",value:function(){var e=(0,qe.Z)($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(gt(this,xt)instanceof HTMLAudioElement)){e.next=6;break}return gt(this,xt).load(),e.next=4,mt(this,jt,on).call(this);case 4:e.next=9;break;case 6:gt(this,xt).resume(),gt(this,xt).cancel(),gt(this,xt).speak(gt(this,bt));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(){gt(this,xt)instanceof HTMLAudioElement?gt(this,xt).load():gt(this,xt).cancel()}},{key:"mute",value:function(){this.volume=0,gt(this,xt)instanceof HTMLAudioElement||this.paused||!gt(this,xt).speaking||this.replay()}},{key:"unmute",value:function(e){this.volume=null!==e&&void 0!==e?e:1,gt(this,xt)instanceof HTMLAudioElement||this.paused||!gt(this,xt).speaking||this.replay()}}]),n}(ut(EventTarget));function qt(e){var t=this;if(gt(this,bt)instanceof SpeechSynthesisUtterance){var n,r=window.speechSynthesis.getVoices();if(e&&(gt(this,bt).voice=e),gt(this,Et))r=r.filter((function(e){return e.lang===gt(t,Et)})),gt(this,bt).voice=null!==(n=r[0])&&void 0!==n?n:null,e&&e.lang===gt(this,Et)&&(gt(this,bt).voice=e)}}function Xt(){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,qe.Z)($e().mark((function e(){var t,n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(gt(this,xt)instanceof HTMLAudioElement)){e.next=14;break}return t=null,e.prev=2,e.next=5,gt(this,wt).call(this,gt(this,Ct));case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),e.t0 instanceof Error&&mt(this,At,Qt).call(this,e.t0.message);case 11:return e.prev=11,null!==(n=t)&&void 0!==n&&n.audio&&(gt(this,xt).src=t.audio,vt(this,St,null!==(r=t.marks)&&void 0!==r?r:gt(this,St))),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[2,8,11,14]])})))).apply(this,arguments)}function Yt(e){this.dispatchEvent(new CustomEvent(ct.END,{detail:e}))}function Qt(e){this.dispatchEvent(new CustomEvent(ct.ERROR,{detail:e}))}function $t(){this.dispatchEvent(new Event(ct.READY))}function Jt(e){this.dispatchEvent(new CustomEvent(ct.PLAYING,{detail:e}))}function en(e){this.dispatchEvent(new CustomEvent(ct.PAUSED,{detail:e}))}function tn(e,t){this.dispatchEvent(new CustomEvent(ct.BOUNDARY,{detail:{evt:e,boundary:t}}))}function nn(e){this.dispatchEvent(new CustomEvent(ct.VOLUME,{detail:e}))}function rn(e){this.dispatchEvent(new CustomEvent(ct.RATE,{detail:e}))}function an(e){this.dispatchEvent(new CustomEvent(ct.PITCH,{detail:e}))}function on(){return sn.apply(this,arguments)}function sn(){return(sn=(0,qe.Z)($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=gt(this,xt),e.prev=1,e.next=4,t.play();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0 instanceof Error&&mt(this,At,Qt).call(this,e.t0.message);case 9:case"end":return e.stop()}}),e,this,[[1,6]])})))).apply(this,arguments)}function un(e){for(var t=gt(this,St).length,n=gt(this,St)[0],r=!1,a=1;a<t&&!r;)gt(this,St)[a].time<=e?n=gt(this,St)[a]:r=!0,a++;return n}function cn(e){var t=gt(this,Ct).substring(e).match(/.+?\b/);return t?t[0].length:0}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(t,Math.min(e,n))}function dn(){return gt(this,Tt).abort(),vt(this,Tt,new AbortController),gt(this,Tt).signal}function pn(){var e=this;if(gt(this,bt)instanceof SpeechSynthesisUtterance){var t=mt(this,Zt,dn).call(this);gt(this,bt).addEventListener("end",mt(this,Rt,Yt).bind(this),{signal:t}),gt(this,bt).addEventListener("start",mt(this,Pt,Jt).bind(this),{signal:t}),gt(this,bt).addEventListener("resume",mt(this,Pt,Jt).bind(this),{signal:t}),gt(this,bt).addEventListener("pause",mt(this,Dt,en).bind(this),{signal:t}),gt(this,bt).addEventListener("error",(function(t){mt(e,At,Qt).call(e,t.error)}),{signal:t}),gt(this,Et)&&(gt(this,bt).lang=gt(this,Et)),gt(this,kt)&&gt(this,bt).addEventListener("boundary",(function(t){var n,r=t.charIndex,a=r+(null!==(n=t.charLength)&&void 0!==n?n:mt(e,Vt,cn).call(e,r)),o=gt(e,Ct).substring(r,a);o&&!function(e){var t=e.trim();return lt.test(t)&&1===t.length}(o)&&mt(e,Lt,tn).call(e,t,{word:o,startChar:r,endChar:a})}),{signal:t}),mt(this,Ot,$t).call(this)}}function fn(){return hn.apply(this,arguments)}function hn(){return(hn=(0,qe.Z)($e().mark((function e(){var t,n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(gt(this,bt)instanceof HTMLAudioElement)){e.next=10;break}return t=gt(this,bt),gt(this,bt).addEventListener("canplay",mt(this,Ot,$t).bind(this),{once:!0}),gt(this,bt).addEventListener("playing",mt(this,Pt,Jt).bind(this)),gt(this,bt).addEventListener("pause",mt(this,Dt,en).bind(this)),gt(this,bt).addEventListener("ended",mt(this,Rt,Yt).bind(this)),gt(this,bt).addEventListener("error",(function(){var e=t.error;mt(n,At,Qt).call(n,null===e||void 0===e?void 0:e.message)})),gt(this,kt)&&gt(this,bt).addEventListener("timeupdate",(function(e){var r=1e3*t.currentTime,a=mt(n,zt,un).call(n,r);a&&!n.paused&&mt(n,Lt,tn).call(n,e,{word:a.value,startChar:a.start,endChar:a.end})})),e.next=10,mt(this,It,Xt).call(this);case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var mn=function(e){var n=e.text,r=e.mark,a=e.color,o=e.backgroundColor,i=(0,t.useMemo)((function(){return{color:(e={color:a,backgroundColor:o}).color,backgroundColor:e.backgroundColor};var e}),[a,o]);if(n&&r){var s=n.toString(),u=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),c=new RegExp("(".concat(u,")"),"gi"),l=s.split(c);if(l.length>1)return(0,We.jsx)("span",{children:l.map((function(e,t){var n="".concat(e,"-").concat(t);return e?c.test(e)?(0,We.jsx)("mark",{style:i,children:e},n):(0,We.jsx)("span",{children:e},n):null}))})}return(0,We.jsx)(We.Fragment,{children:n})},gn=function e(n){var r=n.children,a=n.buffer,o=n.boundary,i=n.markColor,s=n.markBackgroundColor,u=n.markTextAsSpoken;return t.Children.map(r,(function(n){var r=n;if((0,t.isValidElement)(n)&&(r=(0,t.cloneElement)(n,Ye(Ye({},n.props),{},{children:e({buffer:a,boundary:o,markColor:i,markBackgroundColor:s,markTextAsSpoken:u,children:n.props.children})}))),function(e){return"string"===typeof e||"number"===typeof e}(n)){var c=n.toString(),l=o.word,d=o.startChar,p=o.endChar,f=a.text.length;if(a.text+="".concat(c," "),u&&l){var h=d-f,m=p-f,g=c.substring(0,h),v=c.substring(h,m),y=c.substring(m,c.length);if(v)return(0,We.jsxs)(We.Fragment,{children:[g,(0,We.jsx)(mn,{text:v,mark:dt(v),color:i,backgroundColor:s}),y]})}}return r}))},vn={word:"",startChar:0,endChar:0},yn=function(e,t){switch(t.type){case"pause":return Ye(Ye({},e),{},{isPlaying:!1,isPaused:!0,isError:!1});case"play":case"reset":return Ye(Ye({},e),{},{isPlaying:!0,isPaused:!1,isError:!1,boundary:vn});case"end":return Ye(Ye({},e),{},{isPlaying:!1,isPaused:!1,isError:!1,boundary:vn});case"error":return Ye(Ye({},e),{},{isPlaying:!1,isPaused:!1,isError:!0,boundary:vn});case"ready":return Ye(Ye({},e),{},{isReady:!0});case"boundary":return Ye(Ye({},e),{},{boundary:Ye(Ye({},e.boundary),t.payload)});case"voices":return Ye(Ye({},e),{},{voices:t.payload});case"stop":return Ye(Ye({},e),{},{isPlaying:!1,isPaused:!1,isError:!1});case"muted":return Ye(Ye({},e),{},{isMuted:!0});case"unmuted":return Ye(Ye({},e),{},{isMuted:!1})}},bn=function(e){var n,r,a=e.lang,o=e.rate,s=e.volume,u=e.voice,c=e.children,l=e.markColor,d=e.markBackgroundColor,p=e.onStart,f=e.onPause,h=e.onBoundary,m=e.onEnd,g=e.onError,v=e.onVolumeChange,y=e.onPitchChange,b=e.onRateChange,x=e.fetchAudioData,k=e.autoPlay,w=void 0!==k&&k,S=e.markTextAsSpoken,C=void 0!==S&&S,E=(0,t.useRef)(),T=(0,t.useReducer)(yn,{voices:null!==(n=null===(r=window.speechSynthesis)||void 0===r?void 0:r.getVoices())&&void 0!==n?n:[],boundary:vn,isPlaying:!1,isPaused:!1,isMuted:!1,isError:!1,isReady:"undefined"===typeof x}),N=(0,i.Z)(T,2),_=N[0],I=N[1],R=(0,t.useMemo)((function(){if("undefined"===typeof E.current||C){var e={text:""},t=gn({children:c,buffer:e,markColor:l,markBackgroundColor:d,markTextAsSpoken:C,boundary:_.boundary});return E.current=e.text.trim(),[t,E.current]}return[c,E.current]}),[c,_.boundary,l,d,C]),A=(0,i.Z)(R,2),O=A[0],P=A[1],D=(0,t.useMemo)((function(){return new Gt({lang:a,voice:u,fetchAudioData:x})}),[a,u,x]),L=(0,t.useCallback)((0,qe.Z)($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.isPaused?D.resume():D.replay(),I({type:"play"});case 2:case"end":return e.stop()}}),e)}))),[D,_.isPaused]),M=(0,t.useCallback)((function(){D.pause(),I({type:"pause"})}),[D]),F=(0,t.useCallback)((function(){D.replay(),I({type:"reset"})}),[D]),B=(0,t.useCallback)((function(){D.cancel(),I({type:"stop"})}),[D]),j=(0,t.useCallback)((function(e){var t=parseFloat(D.volume.toFixed(2))===D.volumeMin;t?(D.unmute(),I({type:"unmuted"})):(D.mute(),I({type:"muted"})),"function"===typeof e&&e(t)}),[D]),z=(0,t.useMemo)((function(){return _.isPlaying?M:L}),[_.isPlaying,M,L]),V=(0,t.useMemo)((function(){return _.isPlaying?B:L}),[_.isPlaying,B,L]),W=(0,t.useMemo)((function(){return[{lang:function(){return D.lang},rate:function(){return D.rate},pitch:function(){return D.pitch},volume:function(){return D.volume},preservesPitch:function(){return D.preservesPitch}},{lang:function(e){D.lang=e},rate:function(e){D.rate=e},pitch:function(e){D.pitch=e},volume:function(e){D.volume=e},preservesPitch:function(e){D.preservesPitch=e}}]}),[D]),Z=(0,i.Z)(W,2),U=Z[0],H=Z[1],G=(0,t.useCallback)((function(e){I({type:"play"}),"function"===typeof p&&p(e.detail)}),[p]),q=(0,t.useCallback)((function(e){"function"===typeof f&&f(e.detail)}),[f]),X=(0,t.useCallback)((function(e){I({type:"end"}),"function"===typeof m&&m(e.detail)}),[m]),K=(0,t.useCallback)((function(){I({type:"ready"})}),[]),Y=(0,t.useCallback)((function(e){I({type:"error"}),"function"===typeof g&&g(e.detail)}),[g]),Q=(0,t.useCallback)((function(e){I({type:"boundary",payload:e.detail.boundary}),"function"===typeof h&&h(e.detail.boundary,e.detail.evt)}),[h]),$=(0,t.useCallback)((function(e){var t=e.detail,n=D.volumeMin;t===n&&D.volume!==n&&I({type:"muted"}),t!==n&&D.volume===n&&I({type:"unmuted"}),"function"===typeof v&&v(t)}),[v,D]),J=(0,t.useCallback)((function(e){"function"===typeof y&&y(e.detail)}),[y]),ee=(0,t.useCallback)((function(e){"function"===typeof b&&b(e.detail)}),[b]);return(0,t.useEffect)((function(){D.text=P}),[P,D]),(0,t.useEffect)((function(){o&&Number.isFinite(o)&&(D.rate=o),s&&Number.isFinite(s)&&(D.volume=s)}),[D,o,s]),(0,t.useEffect)((function(){var e=function(){D.cancel()},t=function(){var t=(0,qe.Z)($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D.addEventListener(ct.PLAYING,G),D.addEventListener(ct.PAUSED,q),D.addEventListener(ct.END,X),D.addEventListener(ct.ERROR,Y),D.addEventListener(ct.READY,K),D.addEventListener(ct.BOUNDARY,Q),D.addEventListener(ct.VOLUME,$),D.addEventListener(ct.PITCH,J),D.addEventListener(ct.RATE,ee),window.addEventListener("beforeunload",e),t.next=12,D.init();case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){window.removeEventListener("beforeunload",e),D.removeEventListener(ct.PLAYING,G),D.removeEventListener(ct.PAUSED,q),D.removeEventListener(ct.END,X),D.removeEventListener(ct.ERROR,Y),D.removeEventListener(ct.READY,K),D.removeEventListener(ct.BOUNDARY,Q),D.removeEventListener(ct.VOLUME,$),D.removeEventListener(ct.PITCH,J),D.removeEventListener(ct.RATE,ee)}}),[G,Q,q,X,K,Y,h,$,J,ee,D]),(0,t.useEffect)((function(){w&&_.isReady&&(D.replay(),I({type:"play"}))}),[w,D,_.isReady,P]),(0,t.useEffect)((function(){var e,t=function(){I({type:"voices",payload:window.speechSynthesis.getVoices()})};return"function"===typeof(null===(e=window.speechSynthesis)||void 0===e?void 0:e.addEventListener)&&window.speechSynthesis.addEventListener("voiceschanged",t),function(){var e;"function"===typeof(null===(e=window.speechSynthesis)||void 0===e?void 0:e.removeEventListener)&&window.speechSynthesis.removeEventListener("voiceschanged",t)}}),[]),{get:U,set:H,state:_,spokenText:P,ttsChildren:O,play:L,stop:B,pause:M,replay:F,playOrStop:V,playOrPause:z,toggleMute:j}};function xn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,at.Z)(e)););return e}function kn(){return kn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=xn(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},kn.apply(this,arguments)}var wn=Object.create(null);wn.open="0",wn.close="1",wn.ping="2",wn.pong="3",wn.message="4",wn.upgrade="5",wn.noop="6";var Sn=Object.create(null);Object.keys(wn).forEach((function(e){Sn[wn[e]]=e}));for(var Cn={type:"error",data:"parser error"},En="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Tn="function"===typeof ArrayBuffer,Nn=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)},_n=function(e,t,n){var r,a=e.type,o=e.data;return En&&o instanceof Blob?t?n(o):Nn(o,n):Tn&&(o instanceof ArrayBuffer||(r=o,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(o):Nn(new Blob([o]),n):n(wn[a]+(o||""))},In="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rn="undefined"===typeof Uint8Array?[]:new Uint8Array(256),An=0;An<In.length;An++)Rn[In.charCodeAt(An)]=An;var On="function"===typeof ArrayBuffer,Pn=function(e,t){if(On){var n=function(e){var t,n,r,a,o,i=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c=new ArrayBuffer(i),l=new Uint8Array(c);for(t=0;t<s;t+=4)n=Rn[e.charCodeAt(t)],r=Rn[e.charCodeAt(t+1)],a=Rn[e.charCodeAt(t+2)],o=Rn[e.charCodeAt(t+3)],l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|a>>2,l[u++]=(3&a)<<6|63&o;return c}(e);return Dn(n,t)}return{base64:!0,data:e}},Dn=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},Ln=function(e,t){if("string"!==typeof e)return{type:"message",data:Dn(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:Pn(e.substring(1),t)}:Sn[n]?e.length>1?{type:Sn[n],data:e.substring(1)}:{type:Sn[n]}:Cn},Mn=String.fromCharCode(30);function Fn(e){if(e)return function(e){for(var t in Fn.prototype)e[t]=Fn.prototype[t];return e}(e)}Fn.prototype.on=Fn.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Fn.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Fn.prototype.off=Fn.prototype.removeListener=Fn.prototype.removeAllListeners=Fn.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<r.length;a++)if((n=r[a])===t||n.fn===t){r.splice(a,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},Fn.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var a=(n=n.slice(0)).length;r<a;++r)n[r].apply(this,t)}return this},Fn.prototype.emitReserved=Fn.prototype.emit,Fn.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Fn.prototype.hasListeners=function(e){return!!this.listeners(e).length};var Bn="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function jn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var zn=Bn.setTimeout,Vn=Bn.clearTimeout;function Wn(e,t){t.useNativeTimers?(e.setTimeoutFn=zn.bind(Bn),e.clearTimeoutFn=Vn.bind(Bn)):(e.setTimeoutFn=Bn.setTimeout.bind(Bn),e.clearTimeoutFn=Bn.clearTimeout.bind(Bn))}var Zn,Un=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e,r,a){var o;return(0,Je.Z)(this,n),(o=t.call(this,e)).description=r,o.context=a,o.type="TransportError",o}return(0,et.Z)(n)}(ut(Error)),Hn=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e){var r;return(0,Je.Z)(this,n),(r=t.call(this)).writable=!1,Wn((0,tt.Z)(r),e),r.opts=e,r.query=e.query,r.socket=e.socket,r}return(0,et.Z)(n,[{key:"onError",value:function(e,t,r){return kn((0,at.Z)(n.prototype),"emitReserved",this).call(this,"error",new Un(e,t,r)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,kn((0,at.Z)(n.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=Ln(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){kn((0,at.Z)(n.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",kn((0,at.Z)(n.prototype),"emitReserved",this).call(this,"close",e)}},{key:"pause",value:function(e){}}]),n}(Fn),Gn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),qn={},Xn=0,Kn=0;function Yn(e){var t="";do{t=Gn[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function Qn(){var e=Yn(+new Date);return e!==Zn?(Xn=0,Zn=e):e+"."+Yn(Xn++)}for(;Kn<64;Kn++)qn[Gn[Kn]]=Kn;function $n(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Jn(e){for(var t={},n=e.split("&"),r=0,a=n.length;r<a;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}var er=!1;try{er="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(lT){}var tr=er;function nr(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||tr))return new XMLHttpRequest}catch(n){}if(!t)try{return new(Bn[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}function rr(){}var ar=null!=new nr({xdomain:!1}).responseType,or=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e){var r;if((0,Je.Z)(this,n),(r=t.call(this,e)).polling=!1,"undefined"!==typeof location){var a="https:"===location.protocol,o=location.port;o||(o=a?"443":"80"),r.xd="undefined"!==typeof location&&e.hostname!==location.hostname||o!==e.port,r.xs=e.secure!==a}var i=e&&e.forceBase64;return r.supportsBinary=ar&&!i,r}return(0,et.Z)(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(Mn),r=[],a=0;a<n.length;a++){var o=Ln(n[a],t);if(r.push(o),"error"===o.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),a=0;e.forEach((function(e,o){_n(e,!1,(function(e){r[o]=e,++a===n&&t(r.join(Mn))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=Qn()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=$n(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new ir(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e,t){n.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,n){e.onError("xhr poll error",t,n)})),this.pollXhr=t}}]),n}(Hn),ir=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e,r){var a;return(0,Je.Z)(this,n),a=t.call(this),Wn((0,tt.Z)(a),r),a.opts=r,a.method=r.method||"GET",a.uri=e,a.async=!1!==r.async,a.data=void 0!==r.data?r.data:null,a.create(),a}return(0,et.Z)(n,[{key:"create",value:function(){var e=this,t=jn(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new nr(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var a in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this.opts.extraHeaders[a])}catch(o){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}try{r.setRequestHeader("Accept","*/*")}catch(o){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(o){return void this.setTimeoutFn((function(){e.onError(o)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=rr,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(Fn);if(ir.requestsCount=0,ir.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",sr);else if("function"===typeof addEventListener){addEventListener("onpagehide"in Bn?"pagehide":"unload",sr,!1)}function sr(){for(var e in ir.requests)ir.requests.hasOwnProperty(e)&&ir.requests[e].abort()}var ur="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},cr=Bn.WebSocket||Bn.MozWebSocket,lr="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),dr={websocket:function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e){var r;return(0,Je.Z)(this,n),(r=t.call(this,e)).supportsBinary=!e.forceBase64,r}return(0,et.Z)(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=lr?{}:jn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=lr?new cr(e,t,n):t?new cr(e,t):new cr(e)}catch(lT){return this.emitReserved("error",lT)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(n){var r=e[n],a=n===e.length-1;_n(r,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(n){}a&&ur((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n(r)}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=Qn()),this.supportsBinary||(e.b64=1);var r=$n(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!cr}}]),n}(Hn),polling:or},pr=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,fr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hr(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var a=pr.exec(e||""),o={},i=14;i--;)o[fr[i]]=a[i]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,o.path),o.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,o.query),o}var mr=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Je.Z)(this,n),(r=t.call(this)).writeBuffer=[],e&&"object"===typeof e&&(a=e,e=null),e?(e=hr(e),a.hostname=e.host,a.secure="https"===e.protocol||"wss"===e.protocol,a.port=e.port,e.query&&(a.query=e.query)):a.host&&(a.hostname=hr(a.host).host),Wn((0,tt.Z)(r),a),r.secure=null!=a.secure?a.secure:"undefined"!==typeof location&&"https:"===location.protocol,a.hostname&&!a.port&&(a.port=r.secure?"443":"80"),r.hostname=a.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=a.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=a.transports||["polling","websocket"],r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},a),r.opts.path=r.opts.path.replace(/\/$/,"")+(r.opts.addTrailingSlash?"/":""),"string"===typeof r.opts.query&&(r.opts.query=Jn(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&(r.beforeunloadEventListener=function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())},addEventListener("beforeunload",r.beforeunloadEventListener,!1)),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return(0,et.Z)(n,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new dr[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),a=!1;n.priorWebsocketSuccess=!1;var o=function(){a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!a)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){a||"closed"!==t.readyState&&(d(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var o=new Error("probe error");o.transport=r.name,t.emitReserved("upgradeError",o)}})))};function i(){a||(a=!0,d(),r.close(),r=null)}var s=function(e){var n=new Error("probe error: "+e);n.transport=r.name,i(),t.emitReserved("upgradeError",n)};function u(){s("transport closed")}function c(){s("socket closed")}function l(e){r&&e.name!==r.name&&i()}var d=function(){r.removeListener("open",o),r.removeListener("error",s),r.removeListener("close",u),t.off("close",c),t.off("upgrading",l)};r.once("open",o),r.once("error",s),r.once("close",u),this.once("close",c),this.once("upgrading",l),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(t+="string"===typeof(e=r)?function(e){for(var t=0,n=0,r=0,a=e.length;r<a;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var a={type:e,data:t,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(Fn);mr.protocol=4;mr.protocol;var gr="function"===typeof ArrayBuffer,vr=Object.prototype.toString,yr="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===vr.call(Blob),br="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===vr.call(File);function xr(e){return gr&&(e instanceof ArrayBuffer||function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||yr&&e instanceof Blob||br&&e instanceof File}function kr(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(kr(e[n]))return!0;return!1}if(xr(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return kr(e.toJSON(),!0);for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&kr(e[a]))return!0;return!1}function wr(e){var t=[],n=e.data,r=e;return r.data=Sr(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Sr(e,t){if(!e)return e;if(xr(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),a=0;a<e.length;a++)r[a]=Sr(e[a],t);return r}if("object"===typeof e&&!(e instanceof Date)){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(o[i]=Sr(e[i],t));return o}return e}function Cr(e,t){return e.data=Er(e.data,t),delete e.attachments,e}function Er(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=Er(e[n],t);else if("object"===typeof e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Er(e[r],t));return e}var Tr,Nr=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Tr||(Tr={}));var _r=function(){function e(t){(0,Je.Z)(this,e),this.replacer=t}return(0,et.Z)(e,[{key:"encode",value:function(e){return e.type!==Tr.EVENT&&e.type!==Tr.ACK||!kr(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Tr.EVENT?Tr.BINARY_EVENT:Tr.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==Tr.BINARY_EVENT&&e.type!==Tr.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=wr(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),Ir=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e){var r;return(0,Je.Z)(this,n),(r=t.call(this)).reviver=e,r}return(0,et.Z)(n,[{key:"add",value:function(e){var t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var r=(t=this.decodeString(e)).type===Tr.BINARY_EVENT;r||t.type===Tr.BINARY_ACK?(t.type=r?Tr.EVENT:Tr.ACK,this.reconstructor=new Rr(t),0===t.attachments&&kn((0,at.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t)):kn((0,at.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!xr(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,kn((0,at.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===Tr[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Tr.BINARY_EVENT||r.type===Tr.BINARY_ACK){for(var a=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var o=e.substring(a,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===e.charAt(t+1)){for(var i=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(i,t)}else r.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var l=this.tryParse(e.substr(t));if(!n.isPayloadValid(r.type,l))throw new Error("invalid payload");r.data=l}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case Tr.CONNECT:return"object"===typeof t;case Tr.DISCONNECT:return void 0===t;case Tr.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case Tr.EVENT:case Tr.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case Tr.ACK:case Tr.BINARY_ACK:return Array.isArray(t)}}}]),n}(Fn),Rr=function(){function e(t){(0,Je.Z)(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return(0,et.Z)(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=Cr(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function Ar(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var Or=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Pr=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e,r,a){var o;return(0,Je.Z)(this,n),(o=t.call(this)).connected=!1,o.recovered=!1,o.receiveBuffer=[],o.sendBuffer=[],o._queue=[],o._queueSeq=0,o.ids=0,o.acks={},o.flags={},o.io=e,o.nsp=r,a&&a.auth&&(o.auth=a.auth),o._opts=Object.assign({},a),o.io._autoConnect&&o.open(),o}return(0,et.Z)(n,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[Ar(e,"open",this.onopen.bind(this)),Ar(e,"packet",this.onpacket.bind(this)),Ar(e,"error",this.onerror.bind(this)),Ar(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(Or.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;var a={type:Tr.EVENT,data:n,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var o=this.ids++,i=n.pop();this._registerAckCallback(o,i),a.id=o}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,u=this.flags.volatile&&(!s||!this.connected);return u||(this.connected?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n,r=this,a=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==a){var o=this.io.setTimeoutFn((function(){delete r.acks[e];for(var n=0;n<r.sendBuffer.length;n++)r.sendBuffer[n].id===e&&r.sendBuffer.splice(n,1);t.call(r,new Error("operation has timed out"))}),a);this.acks[e]=function(){r.io.clearTimeoutFn(o);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];t.apply(r,[null].concat(n))}}else this.acks[e]=t}},{key:"emitWithAck",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var o=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((function(n,a){r.push((function(e,t){return o?e?a(e):n(t):n(e)})),t.emit.apply(t,[e].concat(r))}))}},{key:"_addToQueue",value:function(e){var t,n=this;"function"===typeof e[e.length-1]&&(t=e.pop());var r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(r===n._queue[0]){var a=null!==e;if(a)r.tryCount>n._opts.retries&&(n._queue.shift(),t&&t(e));else if(n._queue.shift(),t){for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];t.apply(void 0,[null].concat(i))}return r.pending=!1,n._drainQueue()}})),this._queue.push(r),this._drainQueue()}},{key:"_drainQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(e){this.packet({type:Tr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case Tr.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Tr.EVENT:case Tr.BINARY_EVENT:this.onevent(e);break;case Tr.ACK:case Tr.BINARY_ACK:this.onack(e);break;case Tr.DISCONNECT:this.ondisconnect();break;case Tr.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=this._anyListeners.slice(),a=(0,o.Z)(r);try{for(a.s();!(t=a.n()).done;){t.value.apply(this,e)}}catch(lT){a.e(lT)}finally{a.f()}}kn((0,at.Z)(n.prototype),"emit",this).apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];t.packet({type:Tr.ACK,id:e,data:a})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Tr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=this._anyOutgoingListeners.slice(),r=(0,o.Z)(n);try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e.data)}}catch(lT){r.e(lT)}finally{r.f()}}}}]),n}(Fn);function Dr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Dr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Dr.prototype.reset=function(){this.attempts=0},Dr.prototype.setMin=function(e){this.ms=e},Dr.prototype.setMax=function(e){this.max=e},Dr.prototype.setJitter=function(e){this.jitter=e};var Lr=function(t){(0,nt.Z)(r,t);var n=(0,rt.Z)(r);function r(t,a){var o,i;(0,Je.Z)(this,r),(o=n.call(this)).nsps={},o.subs=[],t&&"object"===typeof t&&(a=t,t=void 0),(a=a||{}).path=a.path||"/socket.io",o.opts=a,Wn((0,tt.Z)(o),a),o.reconnection(!1!==a.reconnection),o.reconnectionAttempts(a.reconnectionAttempts||1/0),o.reconnectionDelay(a.reconnectionDelay||1e3),o.reconnectionDelayMax(a.reconnectionDelayMax||5e3),o.randomizationFactor(null!==(i=a.randomizationFactor)&&void 0!==i?i:.5),o.backoff=new Dr({min:o.reconnectionDelay(),max:o.reconnectionDelayMax(),jitter:o.randomizationFactor()}),o.timeout(null==a.timeout?2e4:a.timeout),o._readyState="closed",o.uri=t;var s=a.parser||e;return o.encoder=new s.Encoder,o.decoder=new s.Decoder,o._autoConnect=!1!==a.autoConnect,o._autoConnect&&o.open(),o}return(0,et.Z)(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new mr(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var a=Ar(n,"open",(function(){r.onopen(),e&&e()})),o=Ar(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var i=this._timeout;0===i&&a();var s=this.setTimeoutFn((function(){a(),n.close(),n.emit("error",new Error("timeout"))}),i);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(a),this.subs.push(o),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(Ar(e,"ping",this.onping.bind(this)),Ar(e,"data",this.ondata.bind(this)),Ar(e,"error",this.onerror.bind(this)),Ar(e,"close",this.onclose.bind(this)),Ar(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}},{key:"ondecoded",value:function(e){var t=this;ur((function(){t.emitReserved("packet",e)}),this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Pr(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(Fn),Mr={};function Fr(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=hr(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var a=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),a=r.source,o=r.id,i=r.path,s=Mr[o]&&i in Mr[o].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new Lr(a,t):(Mr[o]||(Mr[o]=new Lr(a,t)),n=Mr[o]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}Object.assign(Fr,{Manager:Lr,Socket:Pr,io:Fr,connect:Fr});var Br="localhost",jr=Fr("http://"+Br+":3501"),zr=!1,Vr=function(e,t){Wr({signals:[{name:e,value:t}]})},Wr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;jr.emit("set",e),t&&jr.on("set",t)},Zr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;jr.emit("subscribe",e),t&&jr.on("notify/"+e.channel,t)},Ur=function(e){jr.emit("unsubscribe",e),jr.off("notify/"+e.channel)},Hr=function(){return"http://"+Br},Gr=function(){var e=(0,qe.Z)($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="http://localhost:5000",console.log(t),n=new AbortController,setTimeout((function(){return n.abort()}),500),fetch(t,{signal:n.signal}).then((function(e){return e.json()})).then((function(e){null!=e&&null!=e.ip&&qr(e.ip)})).catch((function(e){n.abort()}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function qr(e){zr||(zr=!0,e!==Br&&(Br=e,jr.disconnect(),jr.close(),jr=Fr("http://"+e+":3501")))}var Xr,Kr,Yr=!1,Qr=function(){var e=(0,t.useState)(100),n=(0,i.Z)(e,2),r=n[0],a=n[1],o=(0,t.useState)(0),s=(0,i.Z)(o,2),u=s[0],c=s[1],l=(0,t.useState)(null),d=(0,i.Z)(l,2),p=d[0],f=d[1],h=(0,t.useState)(null),m=(0,i.Z)(h,2),g=m[0],v=m[1];function y(e,t){var n;return"up"===t?(n=e+5)>100&&(n=100):(n=e-5)<0&&(n=0),n}function b(e){var t=document.getElementById("youtube-player");if(null!=t){var n=t.contentWindow;a(e),n.postMessage('{"event":"command","func":"setVolume","args":['+e+"]}","*"),c(u>0?u+1:1500)}else{var r=document.getElementById("myRadio");if(null!=r){var o=r.getElementsByTagName("video")[0];null!=o&&(a(e),o.volume=e/100,c(u>0?u+1:1500))}}}return(0,t.useEffect)((function(){return function(){null!=p&&clearInterval(p),null!=g&&clearInterval(g)}}),[]),(0,t.useEffect)((function(){$r=r}),[r]),(0,t.useEffect)((function(){if(u>0){null!=p&&clearTimeout(p);var e=setTimeout((function(){Yr||(c(0),f(null))}),u);f(e)}}),[u]),(0,We.jsxs)(na,{children:[(0,We.jsx)("button",{onClick:function(){null!=g&&(clearInterval(g),v(null),Yr)?Yr=!1:b(y(r,"down"))},onMouseDown:function(){Yr=!1,Kr=r;var e=setInterval((function(){Yr=!0,b(Kr=y(Kr,"down"))}),100);v(e)},className:"decrease"}),(0,We.jsx)("div",{className:"counter",children:0===u?(0,We.jsx)("img",{src:"./images/volume-up.png",alt:"volume"}):(0,We.jsx)("span",{children:r})}),(0,We.jsx)("button",{onClick:function(){null!=g&&(clearInterval(g),v(null),Yr)?Yr=!1:b(y(r,"up"))},onMouseDown:function(){Yr=!1,Kr=r;var e=setInterval((function(){Yr=!0,b(Kr=y(Kr,"up"))}),100);v(e)},className:"increase"})]})},$r=100;function Jr(e){var t=document.getElementById("youtube-player");if(null!=t){var n=t.contentWindow;n.postMessage('{"event":"command","func":"setVolume","args":[0]}',"*"),setTimeout((function(){n.postMessage('{"event":"command","func":"setVolume","args":['+$r+"]}","*")}),e)}else{var r=document.getElementById("myRadio");if(null!=r){var a=r.getElementsByTagName("video")[0];null!=a&&(a.volume=0,setTimeout((function(){a.volume=$r/100}),e))}}return!0}var ea,ta,na=Fe.div(Xr||(Xr=a(['\n\tcolor: #ffffff;\n\tfont-size: 32px;\n\tfont-weight: 500;\n\t\n\tdisplay: flex;\n\tjustify-content: space-between;\n\t//gap: 12px;\n\tflex-direction: row;\n\talign-items: center;\n\twidth: 156px;\n\n\t.counter {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 60px;\n\t\theight: 60px;\n\t\timg {\n\t\t\twidth: 36px;\n\t\t\theight: 36px;\n\t\t}\n\t}\n\n\tbutton {\n\t\tborder: 0;\n\t\twidth: 48px;\n\t\theight: 60px;\n\t\tbackground-position: center;\n\t\tbackground-repeat: no-repeat;\n\t\tposition: center;\n\t\tbackground-repeat: no-repeat;\n\t\tcursor: pointer;\n\t}\n\n\tbutton.increase {\n\t\tbackground: url("./images/right-white.png");\n\t\tbackground-position: center;\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-size: 24px 24px;\n\t}\n\n\tbutton.decrease {\n\t\tbackground: url("./images/left-white.png");\n\t\tbackground-position: center;\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-size: 24px 24px;\n\t}\n']))),ra=function(e){var t=e.children;return(0,We.jsx)(We.Fragment,{children:bn({children:t,autoPlay:!0,lang:"kr",volume:1}).ttsChildren})},aa=function(e){var n=e.appLayout,r=e.setCarStatusView,a=e.setMapView,o=e.gear,i=e.speed,s=e.hazardReq,u=e.setHazardReq;(0,t.useEffect)((function(){"d"===o?(r(!1),a(!0)):r(!0)}),[o]),(0,t.useEffect)((function(){s&&setTimeout((function(){u(!1),Vr("C_HazardFromCCS",0)}),1e4)}),[s]);var c={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:n.screenWidth/2,height:n.screenHeight/2,backgroundColor:"transparent",borderWidth:0}};return(0,We.jsxs)("div",{style:oa.container,children:[(0,We.jsx)("div",{style:oa.gearForward,onClick:function(){"d"!==o&&0===i&&Vr("VCU_GearPosSta",5)},children:(0,We.jsx)("img",{src:"./images/up-gray.png",style:oa.image,alt:""})}),(0,We.jsx)("div",{style:oa.gearState,onClick:function(){"p"===o?Vr("VCU_GearPosSta",6):Wr({signals:[{name:"VCU_GearPosSta",value:0},{name:"CLU_DisSpdVal",value:0}]})},children:(0,We.jsx)("div",{style:"d"===o?oa.labelBlue:oa.label,children:o.toUpperCase()})}),(0,We.jsx)("div",{style:oa.gearReverse,onClick:function(){"r"!==o&&0===i&&Vr("VCU_GearPosSta",7)},children:(0,We.jsx)("img",{src:"./images/down-gray.png",style:oa.image,alt:""})}),(0,We.jsx)("div",{style:{padding:8},children:"d"!==o?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("img",{src:"./tesla/icons/parking-brake-fault.png",alt:"",style:{width:32,height:32,margin:8}}),(0,We.jsx)("img",{src:"./tesla/icons/parking-brake-manual.png",alt:"",style:{width:36,height:36,margin:6}}),(0,We.jsx)("img",{src:"./tesla/icons/low-beam.png",alt:"",style:{width:36,height:36,margin:6}}),(0,We.jsx)("img",{src:"./tesla/icons/high-beam.png",alt:"",style:{width:36,height:36,margin:6}}),(0,We.jsx)("img",{src:"./tesla/icons/parking-light.png",alt:"",style:{width:40,height:40,margin:4}}),(0,We.jsx)("img",{src:"./tesla/icons/front-fog-light.png",alt:"",style:{width:40,height:40,margin:4}}),(0,We.jsx)("img",{src:"./tesla/icons/tire-pressure-warning.png",alt:"",style:{width:48,height:48,margin:0}}),(0,We.jsx)("img",{src:"./tesla/icons/seat-belt-reminder.png",alt:"",style:{width:48,height:48,margin:0}}),(0,We.jsx)("img",{src:"./tesla/icons/airbag-safety-warning.png",alt:"",style:{width:48,height:48,margin:0}}),(0,We.jsx)("img",{src:"./tesla/icons/blue-snowflake.png",alt:"",style:{width:32,height:32,margin:8}}),(0,We.jsx)("img",{src:"./tesla/icons/door-frunk-trunk-open.png",alt:"",style:{width:36,height:36,margin:6}}),(0,We.jsx)("img",{src:"./tesla/icons/trailer-mode.png",alt:"",style:{width:36,height:36,margin:6}})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("img",{src:"./tesla/icons/auto-high-beam-enabled-off.png",alt:"",style:{width:40,height:40,margin:4}}),(0,We.jsx)("img",{src:"./tesla/icons/auto-high-beam-enabled-on.png",alt:"",style:{width:40,height:40,margin:4}}),(0,We.jsx)("img",{src:"./tesla/icons/car-steering-wheel.png",alt:"",style:{width:24,height:24,margin:12}}),(0,We.jsx)("img",{src:"./tesla/icons/autosteer-inactive.png",alt:"",style:{width:42,height:42,margin:2}}),(0,We.jsx)("img",{src:"./tesla/icons/brake-system-fault.png",alt:"",style:{width:34,height:34,margin:7}}),(0,We.jsx)("img",{src:"./tesla/icons/ABS-fault.png",alt:"",style:{width:32,height:32,margin:8}}),(0,We.jsx)("img",{src:"./tesla/icons/brake-booster-fault.png",alt:"",style:{width:34,height:34,margin:7}}),(0,We.jsx)("img",{src:"./tesla/icons/electronic-stability-control-off.png",alt:"",style:{width:42,height:42,margin:3}}),(0,We.jsx)("img",{src:"./tesla/icons/stability-control.png",alt:"",style:{width:48,height:48,margin:0}}),(0,We.jsx)("img",{src:"./tesla/icons/regen-braking-limited.png",alt:"",style:{width:38,height:38,margin:5}}),(0,We.jsx)("img",{src:"./tesla/icons/vehicle-hold.png",alt:"",style:{width:36,height:36,margin:6}}),(0,We.jsx)("img",{src:"./tesla/icons/vehicle-power-limited.png",alt:"",style:{width:32,height:32,margin:8}})]})}),(0,We.jsx)(Ge(),{isOpen:s,style:c,contentLabel:"Hazard",ariaHideApp:!1,children:(0,We.jsx)(ia,{appLayout:n,children:(0,We.jsxs)("div",{className:"hazard-blinking",children:[(0,We.jsxs)("div",{className:"hazard-img",children:[(0,We.jsx)("img",{src:"./map/Car-hazard-Symbol.webp",alt:""}),(0,We.jsx)("p",{className:"red-txt",children:"Hazard"})]}),(0,We.jsxs)("div",{className:"hazard-txt",children:[(0,We.jsx)("p",{children:"Look Out!"}),(0,We.jsx)("p",{children:"\uc804\ubc29 \uc8fc\uc758!"})]})]})})}),s&&Jr(15e3)&&(0,We.jsx)("div",{style:{display:"none"},children:(0,We.jsxs)(ra,{children:[(0,We.jsx)("p",{children:"\uc804\ubc29 \uc8fc\uc758! \uc804\ubc29 \uc8fc\uc758! \uc870\uc2ec\ud558\uc138\uc694!"}),(0,We.jsx)("p",{}),(0,We.jsx)("p",{children:"\uc804\ubc29 \uc8fc\uc758! \uc804\ubc29 \uc8fc\uc758! \uc870\uc2ec\ud558\uc138\uc694!"}),(0,We.jsx)("p",{}),(0,We.jsx)("p",{children:"\uc804\ubc29 \uc8fc\uc758! \uc804\ubc29 \uc8fc\uc758! \uc870\uc2ec\ud558\uc138\uc694!"})]})})]})},oa={container:{width:64,height:"100%",backgroundColor:"#eeeeee",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:8,borderTopLeftRadius:8},gearForward:{width:56,height:48,display:"flex",justifyContent:"center",alignItems:"center",borderWidth:1,borderStyle:"solid",borderColor:"darkgray",borderTopLeftRadius:8,borderTopRightRadius:8,cursor:"pointer"},gearReverse:{width:56,height:48,display:"flex",justifyContent:"center",alignItems:"center",borderWidth:1,borderStyle:"solid",borderColor:"darkgray",borderBottomLeftRadius:8,borderBottomRightRadius:8,cursor:"pointer"},gearState:{width:56,height:56,display:"flex",justifyContent:"center",alignItems:"center",borderWidth:1,borderTopWidth:0,borderBottomWidth:0,borderStyle:"solid",borderColor:"darkgray",cursor:"pointer"},label:{color:"black",fontSize:32,fontWeight:"700"},labelBlue:{color:"blue",fontSize:32,fontWeight:"700"},image:{width:32,height:32}},ia=Fe.div(ea||(ea=a(["\n\n\twidth: 100%;\n\theight: 100%;\n\n\t.hazard-blinking {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: #f8f8f8;\n\t\tborder: 4px solid red;\n\t\tborder-radius: 16px;\n\t\tbox-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n\t\t\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\n\t\tfont-size: 56px;\n\t\tfont-weight: 700;\n\n\t\t@keyframes blink {\n            0% {\n                opacity: 1;\n            }\n\t\t\t25% {\n                opacity: 0.5;\n            }\n            50% {\n                opacity: 0;\n            }\n\t\t\t75% {\n                opacity: 0.5;\n            }\n            100% {\n                opacity: 1;\n            }\n        }\n\n\t\t.hazard-img {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: space-between;\n\t\t\tgap: 32px;\n\t\t\talign-items: center;\n\t\t\twidth: 50%;\n\t\t\t\n\t\t\timg {\n\t\t\t\twidth: 256px;\n\t\t\t\tanimation: blink 0.5s;\n            \tanimation-iteration-count: infinite;\n\t\t\t}\n\t\t\t.red-txt {\n\t\t\t\tcolor: red;\n\t\t\t\tanimation: blink 0.5s;\n            \tanimation-iteration-count: infinite;\n\t\t\t}\n\t\t}\n\n\t\t.hazard-txt {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: space-between;\n\t\t\tgap: 32px;\n\t\t\talign-items: center;\n\t\t\twidth: 50%;\n\t\t}\n\t}\n\n\t.vplug-blinking {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: #f8f8f8;\n\t\tborder: 4px solid lightblue;\n\t\tborder-radius: 16px;\n\t\tbox-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n\t\t\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\n\t\tfont-weight: 700;\n\n\t\t@keyframes blink {\n            0% {\n                opacity: 1;\n            }\n\t\t\t25% {\n                opacity: 0.5;\n            }\n            50% {\n                opacity: 0;\n            }\n\t\t\t75% {\n                opacity: 0.5;\n            }\n            100% {\n                opacity: 1;\n            }\n        }\n\n\t\t.vplug-img {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: space-between;\n\t\t\tgap: 32px;\n\t\t\talign-items: center;\n\t\t\twidth: 40%;\n\t\t\t\n\t\t\timg {\n\t\t\t\twidth: 128px;\n\t\t\t\tanimation: blink 1.0s;\n            \tanimation-iteration-count: infinite;\n\t\t\t}\n\t\t\t.blink-txt {\n\t\t\t\tfont-size: 32px;\n\t\t\t\tanimation: blink 1.0s;\n            \tanimation-iteration-count: infinite;\n\t\t\t}\n\t\t}\n\n\t\t.vplug-txt {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t//justify-content: space-between;\n\t\t\t//gap: 32px;\n\t\t\talign-items: center;\n\t\t\twidth: 60%;\n\t\t\tfont-size: 24px;\n\t\t}\n\t}\n"]))),sa=function(e){var t=e.carStatusView,n=e.mapView,r=e.appLayout,a=e.gear,o=e.speed,i=e.distanceToEmpty,s={container:{width:300,position:"absolute",top:0,left:t&&n?(.6*r.screenWidth-64-300)/2:(r.screenWidth-64-300)/2,backgroundColor:"white",opacity:.8,borderBottomLeftRadius:8,borderBottomRightRadius:8}};return(0,We.jsxs)("div",{style:s.container,children:[(0,We.jsxs)("div",{style:ua.container,children:[(0,We.jsx)("div",{style:ua.turnSignals,children:"d"===a&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("img",{src:"./tesla/icons/turn-left.png",style:ua.turnSignals.image,alt:""}),(0,We.jsx)("img",{src:"./tesla/icons/turn-right.png",style:ua.turnSignals.image,alt:""})]})}),(0,We.jsxs)("div",{style:ua.distanceToEmpty,children:[(0,We.jsxs)("div",{style:ua.distanceToEmpty.label,children:[i," km"]}),(0,We.jsx)("img",{src:"./images/battery.png",style:ua.distanceToEmpty.image,alt:""})]})]}),"d"===a&&(0,We.jsxs)("div",{style:ca.container,children:[(0,We.jsxs)("div",{style:{width:"50%",height:"100%",display:"flex",flexDirection:"row"},children:[(0,We.jsx)("div",{style:{width:"65%",height:"100%",justifyContent:"flex-end",alignItems:"center"},children:(0,We.jsx)("div",{style:ca.speed,children:o})}),(0,We.jsx)("div",{style:{width:"35%",height:"100%",display:"flex",justifyContent:"center",alignItems:"flex-end",paddingBottom:16},children:(0,We.jsx)("div",{style:ca.speedUnit,children:"km/h"})})]}),(0,We.jsx)("div",{style:{width:"50%",height:"100%",display:"flex",justifyContent:"flex-end",alignItems:"center",padding:8},children:(0,We.jsx)("img",{src:"./images/speed-limit.png",style:ca.image,alt:""})})]})]})},ua={container:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginHorizontal:8},turnSignals:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:32,image:{width:32,height:32}},distanceToEmpty:{display:"flex",flexDirection:"row",alignItems:"center",gap:8,label:{color:"#707070",fontSize:16,fontWeight:"700"},image:{width:32,height:32}}},ca={container:{width:"100%",height:64,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingHorizontal:8},speed:{fontSize:48,fontWeight:"700",textAlign:"right",color:"#000000"},speedUnit:{fontSize:16,fontWeight:"700",textAlign:"left"},image:{width:32,height:32}},la=function(e){var t=e.children,n=e.gridLayout,r=(0,i.Z)(t,3),a=r[0],o=r[1],s=r[2];return(0,We.jsxs)(da,{gridLayout:n,children:[(0,We.jsx)("div",{className:"left",children:a}),(0,We.jsx)("div",{className:"right",children:o}),(0,We.jsx)("div",{className:"footer",children:s})]})},da=Fe.main(ta||(ta=a(['\n\tdisplay: grid;\n\tgrid-template-areas:\n\t\t"left right"\n\t\t"footer footer";\n\tmin-width: 1528px;\n\twidth: 1528px;\n\tmargin: 0 auto;\n\tgrid-template-columns: ',";\n\tgrid-template-rows: ",";\n\tborder: 24px solid #0e0e0e;\n\tborder-radius: 16px;\n\tbackground-color: #0e0e0e;\n\n\t.left {\n\t\tgrid-area: left;\n\t}\n\t.right {\n\t\tgrid-area: right;\n\t}\n\t.footer {\n\t\tgrid-area: footer;\n\t}\n\n\t@media (max-width: 1200px) {\n\t\tmargin: 16px 0;\n\t\tposition: absolute;\n\t\ttop: 2%;\n\t\tleft: 5%;\n\t}\n"])),(function(e){return e.gridLayout.left+"px "+e.gridLayout.right+"px"}),(function(e){return e.gridLayout.up+"px "+e.gridLayout.bottom+"px"})),pa=n(1168),fa=("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self&&self,function(e,t,n,r,a,o,i,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,o,i,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}),ha=(0,t.createContext)(null);function ma(e,t,n,r){var a,o,i={};return a=e,o=function(e,a){var o=n[a];o!==t[a]&&(i[a]=o,e(r,o))},Object.keys(a).forEach((function(e){return o(a[e],e)})),i}function ga(e,t,n){var r,a,o,i=(r=n,a=function(n,r,a){return"function"===typeof e[a]&&n.push(google.maps.event.addListener(t,r,e[a])),n},o=[],Object.keys(r).reduce((function(e,t){return a(e,r[t],t)}),o));return i}function va(e){google.maps.event.removeListener(e)}function ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach(va)}function ba(e){var t=e.updaterMap,n=e.eventMap,r=e.prevProps,a=e.nextProps,o=e.instance,i=ga(a,o,n);return ma(t,r,a,o),i}var xa={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},ka={extraMapTypes:function(e,t){t.forEach((function(t,n){e.mapTypes.set(String(n),t)}))},center:function(e,t){e.setCenter(t)},clickableIcons:function(e,t){e.setClickableIcons(t)},heading:function(e,t){e.setHeading(t)},mapTypeId:function(e,t){e.setMapTypeId(t)},options:function(e,t){e.setOptions(t)},streetView:function(e,t){e.setStreetView(t)},tilt:function(e,t){e.setTilt(t)},zoom:function(e,t){e.setZoom(t)}};(0,t.memo)((function(e){var n=e.children,r=e.options,a=e.id,o=e.mapContainerStyle,s=e.mapContainerClassName,u=e.center,c=e.onClick,l=e.onDblClick,d=e.onDrag,p=e.onDragEnd,f=e.onDragStart,h=e.onMouseMove,m=e.onMouseOut,g=e.onMouseOver,v=e.onMouseDown,y=e.onMouseUp,b=e.onRightClick,x=e.onCenterChanged,k=e.onLoad,w=e.onUnmount,S=(0,t.useState)(null),C=(0,i.Z)(S,2),E=C[0],T=C[1],N=(0,t.useRef)(null),_=(0,t.useState)(null),I=(0,i.Z)(_,2),R=I[0],A=I[1],O=(0,t.useState)(null),P=(0,i.Z)(O,2),D=P[0],L=P[1],M=(0,t.useState)(null),F=(0,i.Z)(M,2),B=F[0],j=F[1],z=(0,t.useState)(null),V=(0,i.Z)(z,2),W=V[0],Z=V[1],U=(0,t.useState)(null),H=(0,i.Z)(U,2),G=H[0],q=H[1],X=(0,t.useState)(null),K=(0,i.Z)(X,2),Y=K[0],Q=K[1],$=(0,t.useState)(null),J=(0,i.Z)($,2),ee=J[0],te=J[1],ne=(0,t.useState)(null),re=(0,i.Z)(ne,2),ae=re[0],oe=re[1],ie=(0,t.useState)(null),se=(0,i.Z)(ie,2),ue=se[0],ce=se[1],le=(0,t.useState)(null),de=(0,i.Z)(le,2),pe=de[0],fe=de[1],he=(0,t.useState)(null),me=(0,i.Z)(he,2),ge=me[0],ve=me[1],ye=(0,t.useState)(null),be=(0,i.Z)(ye,2),xe=be[0],ke=be[1];return(0,t.useEffect)((function(){r&&null!==E&&E.setOptions(r)}),[E,r]),(0,t.useEffect)((function(){null!==E&&"undefined"!==typeof u&&E.setCenter(u)}),[E,u]),(0,t.useEffect)((function(){E&&l&&(null!==D&&google.maps.event.removeListener(D),L(google.maps.event.addListener(E,"dblclick",l)))}),[l]),(0,t.useEffect)((function(){E&&p&&(null!==B&&google.maps.event.removeListener(B),j(google.maps.event.addListener(E,"dragend",p)))}),[p]),(0,t.useEffect)((function(){E&&f&&(null!==W&&google.maps.event.removeListener(W),Z(google.maps.event.addListener(E,"dragstart",f)))}),[f]),(0,t.useEffect)((function(){E&&v&&(null!==G&&google.maps.event.removeListener(G),q(google.maps.event.addListener(E,"mousedown",v)))}),[v]),(0,t.useEffect)((function(){E&&h&&(null!==Y&&google.maps.event.removeListener(Y),Q(google.maps.event.addListener(E,"mousemove",h)))}),[h]),(0,t.useEffect)((function(){E&&m&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(E,"mouseout",m)))}),[m]),(0,t.useEffect)((function(){E&&g&&(null!==ae&&google.maps.event.removeListener(ae),oe(google.maps.event.addListener(E,"mouseover",g)))}),[g]),(0,t.useEffect)((function(){E&&y&&(null!==ue&&google.maps.event.removeListener(ue),ce(google.maps.event.addListener(E,"mouseup",y)))}),[y]),(0,t.useEffect)((function(){E&&b&&(null!==pe&&google.maps.event.removeListener(pe),fe(google.maps.event.addListener(E,"rightclick",b)))}),[b]),(0,t.useEffect)((function(){E&&c&&(null!==ge&&google.maps.event.removeListener(ge),ve(google.maps.event.addListener(E,"click",c)))}),[c]),(0,t.useEffect)((function(){E&&d&&(null!==xe&&google.maps.event.removeListener(xe),ke(google.maps.event.addListener(E,"drag",d)))}),[d]),(0,t.useEffect)((function(){E&&x&&(null!==R&&google.maps.event.removeListener(R),A(google.maps.event.addListener(E,"center_changed",x)))}),[c]),(0,t.useEffect)((function(){var e=null===N.current?null:new google.maps.Map(N.current,r);return T(e),null!==e&&k&&k(e),function(){null!==e&&w&&w(e)}}),[]),(0,We.jsx)("div",Object.assign({id:a,ref:N,style:o,className:s},{children:(0,We.jsx)(ha.Provider,Object.assign({value:E},{children:null!==E?n:(0,We.jsx)(We.Fragment,{})}))}))}));var wa=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).state={map:null},e.registeredEvents=[],e.mapRef=null,e.getInstance=function(){return null===e.mapRef?null:new google.maps.Map(e.mapRef,e.props.options)},e.panTo=function(t){var n=e.getInstance();n&&n.panTo(t)},e.setMapCallback=function(){null!==e.state.map&&e.props.onLoad&&e.props.onLoad(e.state.map)},e.getRef=function(t){e.mapRef=t},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=this.getInstance();this.registeredEvents=ba({updaterMap:ka,eventMap:xa,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{map:e}}),this.setMapCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.map&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:ka,eventMap:xa,prevProps:e,nextProps:this.props,instance:this.state.map}))}},{key:"componentWillUnmount",value:function(){null!==this.state.map&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),ya(this.registeredEvents))}},{key:"render",value:function(){return(0,We.jsx)("div",Object.assign({id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName},{children:(0,We.jsx)(ha.Provider,Object.assign({value:this.state.map},{children:null!==this.state.map?this.props.children:(0,We.jsx)(We.Fragment,{})}))}))}}]),n}(t.PureComponent);function Sa(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function Ca(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}u((r=r.apply(e,t||[])).next())}))}var Ea="undefined"!==typeof document;function Ta(e){var t=e.url,n=e.id,r=e.nonce;return Ea?new Promise((function(e,a){var o=document.getElementById(n),i=window;if(o){var s=o.getAttribute("data-state");if(o.src===t&&"error"!==s){if("ready"===s)return e(n);var u=i.initMap,c=o.onerror;return i.initMap=function(){u&&u(),e(n)},void(o.onerror=function(e){c&&c(e),a(e)})}o.remove()}var l=document.createElement("script");l.type="text/javascript",l.src=t,l.id=n,l.async=!0,l.nonce=r,l.onerror=function(e){l.setAttribute("data-state","error"),a(e)},i.initMap=function(){l.setAttribute("data-state","ready"),e(n)},document.head.appendChild(l)})).catch((function(e){throw console.error("injectScript error: ",e),e})):Promise.reject(new Error("document is undefined"))}function Na(e){var t=e.href;return!(!t||0!==t.indexOf("https://fonts.googleapis.com/css?family=Roboto")&&0!==t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text"))||("style"===e.tagName.toLowerCase()&&e.styleSheet&&e.styleSheet.cssText&&0===e.styleSheet.cssText.replace("\r\n","").indexOf(".gm-style")?(e.styleSheet.cssText="",!0):"style"===e.tagName.toLowerCase()&&e.innerHTML&&0===e.innerHTML.replace("\r\n","").indexOf(".gm-style")?(e.innerHTML="",!0):"style"===e.tagName.toLowerCase()&&!e.styleSheet&&!e.innerHTML)}function _a(){var e=document.getElementsByTagName("head")[0],t=e.insertBefore.bind(e);e.insertBefore=function(n,r){Na(n)||Reflect.apply(t,e,[n,r])};var n=e.appendChild.bind(e);e.appendChild=function(t){Na(t)||Reflect.apply(n,e,[t])}}function Ia(e){var t=e.googleMapsApiKey,n=e.googleMapsClientId,r=e.version,a=void 0===r?"weekly":r,o=e.language,i=e.region,s=e.libraries,u=e.channel,c=e.mapIds,l=e.authReferrerPolicy,d=[];return fa(t&&n||!(t&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?d.push("key=".concat(t)):n&&d.push("client=".concat(n)),a&&d.push("v=".concat(a)),o&&d.push("language=".concat(o)),i&&d.push("region=".concat(i)),s&&s.length&&d.push("libraries=".concat(s.sort().join(","))),u&&d.push("channel=".concat(u)),c&&c.length&&d.push("map_ids=".concat(c.join(","))),l&&d.push("auth_referrer_policy=".concat(l)),d.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(d.join("&"))}var Ra=!1;function Aa(){return(0,We.jsx)("div",{children:"Loading..."})}var Oa,Pa={id:"script-loader",version:"weekly"},Da=function(e){(0,nt.Z)(r,e);var n=(0,rt.Z)(r);function r(){var e;return(0,Je.Z)(this,r),(e=n.apply(this,arguments)).check=(0,t.createRef)(),e.state={loaded:!1},e.cleanupCallback=function(){delete window.google.maps,e.injectScript()},e.isCleaningUp=function(){return Ca((0,tt.Z)(e),void 0,void 0,$e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){if(Ra){if(Ea)var t=window.setInterval((function(){Ra||(window.clearInterval(t),e())}),1)}else e()},e.abrupt("return",new Promise(t));case 2:case"end":return e.stop()}}),e)})))},e.cleanup=function(){Ra=!0;var t=document.getElementById(e.props.id);t&&t.parentNode&&t.parentNode.removeChild(t),Array.prototype.slice.call(document.getElementsByTagName("script")).filter((function(e){return"string"===typeof e.src&&e.src.includes("maps.googleapis")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("link")).filter((function(e){return"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"===e.href})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("style")).filter((function(e){return void 0!==e.innerText&&e.innerText.length>0&&e.innerText.includes(".gm-")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))},e.injectScript=function(){e.props.preventGoogleFontsLoading&&_a(),fa(!!e.props.id,'LoadScript requires "id" prop to be a string: %s',e.props.id),Ta({id:e.props.id,nonce:e.props.nonce,url:Ia(e.props)}).then((function(){e.props.onLoad&&e.props.onLoad(),e.setState((function(){return{loaded:!0}}))})).catch((function(t){e.props.onError&&e.props.onError(t),console.error("\n          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(e.props.googleMapsApiKey||"-",") or Client ID (").concat(e.props.googleMapsClientId||"-",") to <LoadScript />\n          Otherwise it is a Network issue.\n        "))}))},e}return(0,et.Z)(r,[{key:"componentDidMount",value:function(){if(Ea){if(window.google&&window.google.maps&&!Ra)return void console.error("google api is already presented");this.isCleaningUp().then(this.injectScript).catch((function(e){console.error("Error at injecting script after cleaning up: ",e)}))}}},{key:"componentDidUpdate",value:function(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Ea&&e.language!==this.props.language&&(this.cleanup(),this.setState((function(){return{loaded:!1}}),this.cleanupCallback))}},{key:"componentWillUnmount",value:function(){var e=this;if(Ea){this.cleanup();window.setTimeout((function(){e.check.current||(delete window.google,Ra=!1)}),1),this.props.onUnmount&&this.props.onUnmount()}}},{key:"render",value:function(){return(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("div",{ref:this.check}),this.state.loaded?this.props.children:this.props.loadingElement||(0,We.jsx)(Aa,{})]})}}]),r}(t.PureComponent);Da.defaultProps=Pa;var La=(0,We.jsx)(Aa,{});(0,t.memo)((function(e){var n=e.loadingElement,r=e.onLoad,a=e.onError,o=e.onUnmount,s=e.children,u=function(e){var n=e.id,r=void 0===n?Pa.id:n,a=e.version,o=void 0===a?Pa.version:a,s=e.nonce,u=e.googleMapsApiKey,c=e.googleMapsClientId,l=e.language,d=e.region,p=e.libraries,f=e.preventGoogleFontsLoading,h=e.channel,m=e.mapIds,g=e.authReferrerPolicy,v=(0,t.useRef)(!1),y=(0,t.useState)(!1),b=(0,i.Z)(y,2),x=b[0],k=b[1],w=(0,t.useState)(void 0),S=(0,i.Z)(w,2),C=S[0],E=S[1];(0,t.useEffect)((function(){return v.current=!0,function(){v.current=!1}}),[]),(0,t.useEffect)((function(){Ea&&f&&_a()}),[f]),(0,t.useEffect)((function(){x&&fa(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")}),[x]);var T=Ia({version:o,googleMapsApiKey:u,googleMapsClientId:c,language:l,region:d,libraries:p,channel:h,mapIds:m,authReferrerPolicy:g});(0,t.useEffect)((function(){function e(){v.current&&(k(!0),Oa=T)}Ea&&(window.google&&window.google.maps&&Oa===T?e():Ta({id:r,url:T,nonce:s}).then(e).catch((function(e){v.current&&E(e),console.warn("\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(u||"-",") or Client ID (").concat(c||"-",")\n        Otherwise it is a Network issue.\n      ")),console.error(e)})))}),[r,T,s]);var N=(0,t.useRef)();return(0,t.useEffect)((function(){N.current&&p!==N.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),N.current=p}),[p]),{isLoaded:x,loadError:C,url:T}}(Sa(e,["loadingElement","onLoad","onError","onUnmount","children"])),c=u.isLoaded,l=u.loadError;return(0,t.useEffect)((function(){c&&"function"===typeof r&&r()}),[c,r]),(0,t.useEffect)((function(){l&&"function"===typeof a&&a(l)}),[l,a]),(0,t.useEffect)((function(){return function(){o&&o()}}),[o]),c?s:n||La}));var Ma,Fa=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!==a--;)if(!Object.prototype.hasOwnProperty.call(n,o[a]))return!1;for(a=r;0!==a--;){var i=o[a];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n},Ba="__googleMapsScriptId";!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(Ma||(Ma={}));var ja=function(){function e(t){var n=t.apiKey,r=t.authReferrerPolicy,a=t.channel,o=t.client,i=t.id,s=void 0===i?Ba:i,u=t.language,c=t.libraries,l=void 0===c?[]:c,d=t.mapIds,p=t.nonce,f=t.region,h=t.retries,m=void 0===h?3:h,g=t.url,v=void 0===g?"https://maps.googleapis.com/maps/api/js":g,y=t.version;if((0,Je.Z)(this,e),this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=n,this.authReferrerPolicy=r,this.channel=a,this.client=o,this.id=s||Ba,this.language=u,this.libraries=l,this.mapIds=d,this.nonce=p,this.region=f,this.retries=m,this.url=v,this.version=y,e.instance){if(!Fa(this.options,e.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(e.instance.options)));return e.instance}e.instance=this}return(0,et.Z)(e,[{key:"options",get:function(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}},{key:"status",get:function(){return this.errors.length?Ma.FAILURE:this.done?Ma.SUCCESS:this.loading?Ma.LOADING:Ma.INITIALIZED}},{key:"failed",get:function(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}},{key:"createUrl",value:function(){var e=this.url;return e+="?callback=".concat(this.CALLBACK),this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}},{key:"deleteScript",value:function(){var e=document.getElementById(this.id);e&&e.remove()}},{key:"load",value:function(){return this.loadPromise()}},{key:"loadPromise",value:function(){var e=this;return new Promise((function(t,n){e.loadCallback((function(e){e?n(e.error):t(window.google)}))}))}},{key:"loadCallback",value:function(e){this.callbacks.push(e),this.execute()}},{key:"setScript",value:function(){if(document.getElementById(this.id))this.callback();else{var e=this.createUrl(),t=document.createElement("script");t.id=this.id,t.type="text/javascript",t.src=e,t.onerror=this.loadErrorCallback.bind(this),t.defer=!0,t.async=!0,this.nonce&&(t.nonce=this.nonce),document.head.appendChild(t)}}},{key:"reset",value:function(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}},{key:"resetIfRetryingFailed",value:function(){this.failed&&this.reset()}},{key:"loadErrorCallback",value:function(e){var t=this;if(this.errors.push(e),this.errors.length<=this.retries){var n=this.errors.length*Math.pow(2,this.errors.length);console.log("Failed to load Google Maps script, retrying in ".concat(n," ms.")),setTimeout((function(){t.deleteScript(),t.setScript()}),n)}else this.onerrorEvent=e,this.callback()}},{key:"setCallback",value:function(){window.__googleMapsCallback=this.callback.bind(this)}},{key:"callback",value:function(){var e=this;this.done=!0,this.loading=!1,this.callbacks.forEach((function(t){t(e.onerrorEvent)})),this.callbacks=[]}},{key:"execute",value:function(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}]),e}();var za={},Va={options:function(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var n=e.options,r=e.onLoad,a=e.onUnmount,o=(0,t.useContext)(ha),s=(0,t.useState)(null),u=(0,i.Z)(s,2),c=u[0],l=u[1];return(0,t.useEffect)((function(){null!==c&&c.setMap(o)}),[o]),(0,t.useEffect)((function(){n&&null!==c&&c.setOptions(n)}),[c,n]),(0,t.useEffect)((function(){var e=new google.maps.TrafficLayer(Object.assign(Object.assign({},n||{}),{map:o}));return l(e),r&&r(e),function(){null!==c&&(a&&a(c),c.setMap(null))}}),[]),null}));var Wa=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).state={trafficLayer:null},e.setTrafficLayerCallback=function(){null!==e.state.trafficLayer&&e.props.onLoad&&e.props.onLoad(e.state.trafficLayer)},e.registeredEvents=[],e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=new google.maps.TrafficLayer(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=ba({updaterMap:Va,eventMap:za,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{trafficLayer:e}}),this.setTrafficLayerCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.trafficLayer&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:Va,eventMap:za,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}},{key:"componentWillUnmount",value:function(){null!==this.state.trafficLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),ya(this.registeredEvents),this.state.trafficLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);Wa.contextType=ha;(0,t.memo)((function(e){var n=e.onLoad,r=e.onUnmount,a=(0,t.useContext)(ha),o=(0,t.useState)(null),s=(0,i.Z)(o,2),u=s[0],c=s[1];return(0,t.useEffect)((function(){null!==u&&u.setMap(a)}),[a]),(0,t.useEffect)((function(){var e=new google.maps.BicyclingLayer;return c(e),e.setMap(a),n&&n(e),function(){null!==e&&(r&&r(e),e.setMap(null))}}),[]),null}));var Za=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).state={bicyclingLayer:null},e.setBicyclingLayerCallback=function(){null!==e.state.bicyclingLayer&&(e.state.bicyclingLayer.setMap(e.context),e.props.onLoad&&e.props.onLoad(e.state.bicyclingLayer))},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=new google.maps.BicyclingLayer;this.setState((function(){return{bicyclingLayer:e}}),this.setBicyclingLayerCallback)}},{key:"componentWillUnmount",value:function(){null!==this.state.bicyclingLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);Za.contextType=ha;(0,t.memo)((function(e){var n=this,r=e.onLoad,a=e.onUnmount,o=(0,t.useContext)(ha),s=(0,t.useState)(null),u=(0,i.Z)(s,2),c=u[0],l=u[1];return(0,t.useEffect)((function(){null!==c&&c.setMap(o)}),[o]),(0,t.useEffect)((function(){var e=new google.maps.TransitLayer;return l(e),e.setMap(o),r&&r(e),function(){null!==c&&(a&&a(c),n.state.transitLayer.setMap(null))}}),[]),null}));var Ua=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).state={transitLayer:null},e.setTransitLayerCallback=function(){null!==e.state.transitLayer&&(e.state.transitLayer.setMap(e.context),e.props.onLoad&&e.props.onLoad(e.state.transitLayer))},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=new google.maps.TransitLayer;this.setState((function(){return{transitLayer:e}}),this.setTransitLayerCallback)}},{key:"componentWillUnmount",value:function(){null!==this.state.transitLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);Ua.contextType=ha;var Ha={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},Ga={drawingMode:function(e,t){e.setDrawingMode(t)},options:function(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var n=e.options,r=e.drawingMode,a=e.onCircleComplete,o=e.onMarkerComplete,s=e.onOverlayComplete,u=e.onPolygonComplete,c=e.onPolylineComplete,l=e.onRectangleComplete,d=e.onLoad,p=e.onUnmount,f=(0,t.useContext)(ha),h=(0,t.useState)(null),m=(0,i.Z)(h,2),g=m[0],v=m[1],y=(0,t.useState)(null),b=(0,i.Z)(y,2),x=b[0],k=b[1],w=(0,t.useState)(null),S=(0,i.Z)(w,2),C=S[0],E=S[1],T=(0,t.useState)(null),N=(0,i.Z)(T,2),_=N[0],I=N[1],R=(0,t.useState)(null),A=(0,i.Z)(R,2),O=A[0],P=A[1],D=(0,t.useState)(null),L=(0,i.Z)(D,2),M=L[0],F=L[1],B=(0,t.useState)(null),j=(0,i.Z)(B,2),z=j[0],V=j[1];return(0,t.useEffect)((function(){null!==g&&g.setMap(f)}),[f]),(0,t.useEffect)((function(){n&&null!==g&&g.setOptions(n)}),[g,n]),(0,t.useEffect)((function(){r&&null!==g&&g.setDrawingMode(r)}),[g,r]),(0,t.useEffect)((function(){g&&a&&(null!==x&&google.maps.event.removeListener(x),k(google.maps.event.addListener(g,"circlecomplete",a)))}),[g,a]),(0,t.useEffect)((function(){g&&o&&(null!==C&&google.maps.event.removeListener(C),E(google.maps.event.addListener(g,"markercomplete",o)))}),[g,o]),(0,t.useEffect)((function(){g&&s&&(null!==_&&google.maps.event.removeListener(_),I(google.maps.event.addListener(g,"overlaycomplete",s)))}),[g,s]),(0,t.useEffect)((function(){g&&u&&(null!==O&&google.maps.event.removeListener(O),P(google.maps.event.addListener(g,"polygoncomplete",u)))}),[g,u]),(0,t.useEffect)((function(){g&&c&&(null!==M&&google.maps.event.removeListener(M),F(google.maps.event.addListener(g,"polylinecomplete",c)))}),[g,c]),(0,t.useEffect)((function(){g&&l&&(null!==z&&google.maps.event.removeListener(z),V(google.maps.event.addListener(g,"rectanglecomplete",l)))}),[g,l]),(0,t.useEffect)((function(){fa(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var e=new google.maps.drawing.DrawingManager(Object.assign(Object.assign({},n||{}),{map:f}));return r&&e.setDrawingMode(r),a&&k(google.maps.event.addListener(e,"circlecomplete",a)),o&&E(google.maps.event.addListener(e,"markercomplete",o)),s&&I(google.maps.event.addListener(e,"overlaycomplete",s)),u&&P(google.maps.event.addListener(e,"polygoncomplete",u)),c&&F(google.maps.event.addListener(e,"polylinecomplete",c)),l&&V(google.maps.event.addListener(e,"rectanglecomplete",l)),v(e),d&&d(e),function(){null!==g&&(x&&google.maps.event.removeListener(x),C&&google.maps.event.removeListener(C),_&&google.maps.event.removeListener(_),O&&google.maps.event.removeListener(O),M&&google.maps.event.removeListener(M),z&&google.maps.event.removeListener(z),p&&p(g),g.setMap(null))}}),[]),null}));(function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e){var r;return(0,Je.Z)(this,n),(r=t.call(this,e)).registeredEvents=[],r.state={drawingManager:null},r.setDrawingManagerCallback=function(){null!==r.state.drawingManager&&r.props.onLoad&&r.props.onLoad(r.state.drawingManager)},fa(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing),r}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=new google.maps.drawing.DrawingManager(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=ba({updaterMap:Ga,eventMap:Ha,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{drawingManager:e}}),this.setDrawingManagerCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.drawingManager&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:Ga,eventMap:Ha,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}},{key:"componentWillUnmount",value:function(){null!==this.state.drawingManager&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),ya(this.registeredEvents),this.state.drawingManager.setMap(null))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent)).contextType=ha;var qa={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Xa={animation:function(e,t){e.setAnimation(t)},clickable:function(e,t){e.setClickable(t)},cursor:function(e,t){e.setCursor(t)},draggable:function(e,t){e.setDraggable(t)},icon:function(e,t){e.setIcon(t)},label:function(e,t){e.setLabel(t)},map:function(e,t){e.setMap(t)},opacity:function(e,t){e.setOpacity(t)},options:function(e,t){e.setOptions(t)},position:function(e,t){e.setPosition(t)},shape:function(e,t){e.setShape(t)},title:function(e,t){e.setTitle(t)},visible:function(e,t){e.setVisible(t)},zIndex:function(e,t){e.setZIndex(t)}},Ka={};(0,t.memo)((function(e){var n=e.position,r=e.options,a=e.clusterer,o=e.noClustererRedraw,s=e.children,u=e.draggable,c=e.visible,l=e.animation,d=e.clickable,p=e.cursor,f=e.icon,h=e.label,m=e.opacity,g=e.shape,v=e.title,y=e.zIndex,b=e.onClick,x=e.onDblClick,k=e.onDrag,w=e.onDragEnd,S=e.onDragStart,C=e.onMouseOut,E=e.onMouseOver,T=e.onMouseUp,N=e.onMouseDown,_=e.onRightClick,I=e.onClickableChanged,R=e.onCursorChanged,A=e.onAnimationChanged,O=e.onDraggableChanged,P=e.onFlatChanged,D=e.onIconChanged,L=e.onPositionChanged,M=e.onShapeChanged,F=e.onTitleChanged,B=e.onVisibleChanged,j=e.onZindexChanged,z=e.onLoad,V=e.onUnmount,W=(0,t.useContext)(ha),Z=(0,t.useState)(null),U=(0,i.Z)(Z,2),H=U[0],G=U[1],q=(0,t.useState)(null),X=(0,i.Z)(q,2),K=X[0],Y=X[1],Q=(0,t.useState)(null),$=(0,i.Z)(Q,2),J=$[0],ee=$[1],te=(0,t.useState)(null),ne=(0,i.Z)(te,2),re=ne[0],ae=ne[1],oe=(0,t.useState)(null),ie=(0,i.Z)(oe,2),se=ie[0],ue=ie[1],ce=(0,t.useState)(null),le=(0,i.Z)(ce,2),de=le[0],pe=le[1],fe=(0,t.useState)(null),he=(0,i.Z)(fe,2),me=he[0],ge=he[1],ve=(0,t.useState)(null),ye=(0,i.Z)(ve,2),be=ye[0],xe=ye[1],ke=(0,t.useState)(null),we=(0,i.Z)(ke,2),Se=we[0],Ce=we[1],Ee=(0,t.useState)(null),Te=(0,i.Z)(Ee,2),Ne=Te[0],_e=Te[1],Ie=(0,t.useState)(null),Re=(0,i.Z)(Ie,2),Ae=Re[0],Oe=Re[1],Pe=(0,t.useState)(null),De=(0,i.Z)(Pe,2),Le=De[0],Me=De[1],Fe=(0,t.useState)(null),Be=(0,i.Z)(Fe,2),je=Be[0],ze=Be[1],Ve=(0,t.useState)(null),Ze=(0,i.Z)(Ve,2),Ue=Ze[0],He=Ze[1],Ge=(0,t.useState)(null),qe=(0,i.Z)(Ge,2),Xe=qe[0],Ke=qe[1],Ye=(0,t.useState)(null),Qe=(0,i.Z)(Ye,2),$e=Qe[0],Je=Qe[1],et=(0,t.useState)(null),tt=(0,i.Z)(et,2),nt=tt[0],rt=tt[1],at=(0,t.useState)(null),ot=(0,i.Z)(at,2),it=ot[0],st=ot[1],ut=(0,t.useState)(null),ct=(0,i.Z)(ut,2),lt=ct[0],dt=ct[1],pt=(0,t.useState)(null),ft=(0,i.Z)(pt,2),ht=ft[0],mt=ft[1],gt=(0,t.useState)(null),vt=(0,i.Z)(gt,2),yt=vt[0],bt=vt[1],xt=(0,t.useState)(null),kt=(0,i.Z)(xt,2),wt=kt[0],St=kt[1];(0,t.useEffect)((function(){null!==H&&H.setMap(W)}),[W]),(0,t.useEffect)((function(){"undefined"!==typeof r&&null!==H&&H.setOptions(r)}),[H,r]),(0,t.useEffect)((function(){"undefined"!==typeof u&&null!==H&&H.setDraggable(u)}),[H,u]),(0,t.useEffect)((function(){n&&null!==H&&H.setPosition(n)}),[H,n]),(0,t.useEffect)((function(){"undefined"!==typeof c&&null!==H&&H.setVisible(c)}),[H,c]),(0,t.useEffect)((function(){l&&null!==H&&H.setAnimation(l)}),[H,l]),(0,t.useEffect)((function(){H&&x&&(null!==K&&google.maps.event.removeListener(K),Y(google.maps.event.addListener(H,"dblclick",x)))}),[x]),(0,t.useEffect)((function(){H&&w&&(null!==J&&google.maps.event.removeListener(J),ee(google.maps.event.addListener(H,"dragend",w)))}),[w]),(0,t.useEffect)((function(){H&&S&&(null!==re&&google.maps.event.removeListener(re),ae(google.maps.event.addListener(H,"dragstart",S)))}),[S]),(0,t.useEffect)((function(){H&&N&&(null!==se&&google.maps.event.removeListener(se),ue(google.maps.event.addListener(H,"mousedown",N)))}),[N]),(0,t.useEffect)((function(){H&&C&&(null!==de&&google.maps.event.removeListener(de),pe(google.maps.event.addListener(H,"mouseout",C)))}),[C]),(0,t.useEffect)((function(){H&&E&&(null!==me&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(H,"mouseover",E)))}),[E]),(0,t.useEffect)((function(){H&&T&&(null!==be&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(H,"mouseup",T)))}),[T]),(0,t.useEffect)((function(){H&&_&&(null!==Se&&google.maps.event.removeListener(Se),Ce(google.maps.event.addListener(H,"rightclick",_)))}),[_]),(0,t.useEffect)((function(){H&&b&&(null!==Ne&&google.maps.event.removeListener(Ne),_e(google.maps.event.addListener(H,"click",b)))}),[b]),(0,t.useEffect)((function(){H&&k&&(null!==Ae&&google.maps.event.removeListener(Ae),Oe(google.maps.event.addListener(H,"drag",k)))}),[k]),(0,t.useEffect)((function(){H&&I&&(null!==Le&&google.maps.event.removeListener(Le),Me(google.maps.event.addListener(H,"clickable_changed",I)))}),[I]),(0,t.useEffect)((function(){H&&R&&(null!==je&&google.maps.event.removeListener(je),ze(google.maps.event.addListener(H,"cursor_changed",R)))}),[R]),(0,t.useEffect)((function(){H&&A&&(null!==Ue&&google.maps.event.removeListener(Ue),He(google.maps.event.addListener(H,"animation_changed",A)))}),[A]),(0,t.useEffect)((function(){H&&O&&(null!==Xe&&google.maps.event.removeListener(Xe),Ke(google.maps.event.addListener(H,"draggable_changed",O)))}),[O]),(0,t.useEffect)((function(){H&&P&&(null!==$e&&google.maps.event.removeListener($e),Je(google.maps.event.addListener(H,"flat_changed",P)))}),[P]),(0,t.useEffect)((function(){H&&D&&(null!==nt&&google.maps.event.removeListener(nt),rt(google.maps.event.addListener(H,"icon_changed",D)))}),[D]),(0,t.useEffect)((function(){H&&L&&(null!==it&&google.maps.event.removeListener(it),st(google.maps.event.addListener(H,"position_changed",L)))}),[L]),(0,t.useEffect)((function(){H&&M&&(null!==lt&&google.maps.event.removeListener(lt),dt(google.maps.event.addListener(H,"shape_changed",M)))}),[M]),(0,t.useEffect)((function(){H&&F&&(null!==ht&&google.maps.event.removeListener(ht),mt(google.maps.event.addListener(H,"title_changed",F)))}),[F]),(0,t.useEffect)((function(){H&&B&&(null!==yt&&google.maps.event.removeListener(yt),bt(google.maps.event.addListener(H,"visible_changed",B)))}),[B]),(0,t.useEffect)((function(){H&&j&&(null!==wt&&google.maps.event.removeListener(wt),St(google.maps.event.addListener(H,"zindex_changed",j)))}),[j]),(0,t.useEffect)((function(){var e=Object.assign(Object.assign(Object.assign({},r||Ka),a?Ka:{map:W}),{position:n}),t=new google.maps.Marker(e);return a?a.addMarker(t,!!o):t.setMap(W),n&&t.setPosition(n),"undefined"!==typeof c&&t.setVisible(c),"undefined"!==typeof u&&t.setDraggable(u),"undefined"!==typeof d&&t.setClickable(d),"string"===typeof p&&t.setCursor(p),f&&t.setIcon(f),"undefined"!==typeof h&&t.setLabel(h),"undefined"!==typeof m&&t.setOpacity(m),g&&t.setShape(g),"string"===typeof v&&t.setTitle(v),"number"===typeof y&&t.setZIndex(y),x&&Y(google.maps.event.addListener(t,"dblclick",x)),w&&ee(google.maps.event.addListener(t,"dragend",w)),S&&ae(google.maps.event.addListener(t,"dragstart",S)),N&&ue(google.maps.event.addListener(t,"mousedown",N)),C&&pe(google.maps.event.addListener(t,"mouseout",C)),E&&ge(google.maps.event.addListener(t,"mouseover",E)),T&&xe(google.maps.event.addListener(t,"mouseup",T)),_&&Ce(google.maps.event.addListener(t,"rightclick",_)),b&&_e(google.maps.event.addListener(t,"click",b)),k&&Oe(google.maps.event.addListener(t,"drag",k)),I&&Me(google.maps.event.addListener(t,"clickable_changed",I)),R&&ze(google.maps.event.addListener(t,"cursor_changed",R)),A&&He(google.maps.event.addListener(t,"animation_changed",A)),O&&Ke(google.maps.event.addListener(t,"draggable_changed",O)),P&&Je(google.maps.event.addListener(t,"flat_changed",P)),D&&rt(google.maps.event.addListener(t,"icon_changed",D)),L&&st(google.maps.event.addListener(t,"position_changed",L)),M&&dt(google.maps.event.addListener(t,"shape_changed",M)),F&&mt(google.maps.event.addListener(t,"title_changed",F)),B&&bt(google.maps.event.addListener(t,"visible_changed",B)),j&&St(google.maps.event.addListener(t,"zindex_changed",j)),G(t),z&&z(t),function(){null!==K&&google.maps.event.removeListener(K),null!==J&&google.maps.event.removeListener(J),null!==re&&google.maps.event.removeListener(re),null!==se&&google.maps.event.removeListener(se),null!==de&&google.maps.event.removeListener(de),null!==me&&google.maps.event.removeListener(me),null!==be&&google.maps.event.removeListener(be),null!==Se&&google.maps.event.removeListener(Se),null!==Ne&&google.maps.event.removeListener(Ne),null!==Le&&google.maps.event.removeListener(Le),null!==je&&google.maps.event.removeListener(je),null!==Ue&&google.maps.event.removeListener(Ue),null!==Xe&&google.maps.event.removeListener(Xe),null!==$e&&google.maps.event.removeListener($e),null!==nt&&google.maps.event.removeListener(nt),null!==it&&google.maps.event.removeListener(it),null!==ht&&google.maps.event.removeListener(ht),null!==yt&&google.maps.event.removeListener(yt),null!==wt&&google.maps.event.removeListener(wt),V&&V(t),a?a.removeMarker(t,!!o):t&&t.setMap(null)}}),[]);var Ct=(0,t.useMemo)((function(){return s?t.Children.map(s,(function(e){if(!(0,t.isValidElement)(e))return e;var n=e;return(0,t.cloneElement)(n,{anchor:H})})):null}),[s,H]);return(0,We.jsx)(We.Fragment,{children:Ct})||null}));var Ya=function(e){(0,nt.Z)(r,e);var n=(0,rt.Z)(r);function r(){var e;return(0,Je.Z)(this,r),(e=n.apply(this,arguments)).registeredEvents=[],e}return(0,et.Z)(r,[{key:"componentDidMount",value:function(){var e=Object.assign(Object.assign(Object.assign({},this.props.options||Ka),this.props.clusterer?Ka:{map:this.context}),{position:this.props.position});this.marker=new google.maps.Marker(e),this.props.clusterer?this.props.clusterer.addMarker(this.marker,!!this.props.noClustererRedraw):this.marker.setMap(this.context),this.registeredEvents=ba({updaterMap:Xa,eventMap:qa,prevProps:{},nextProps:this.props,instance:this.marker}),this.props.onLoad&&this.props.onLoad(this.marker)}},{key:"componentDidUpdate",value:function(e){this.marker&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:Xa,eventMap:qa,prevProps:e,nextProps:this.props,instance:this.marker}))}},{key:"componentWillUnmount",value:function(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),ya(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}},{key:"render",value:function(){var e=this,n=null;return this.props.children&&(n=t.Children.map(this.props.children,(function(n){if(!(0,t.isValidElement)(n))return n;var r=n;return(0,t.cloneElement)(r,{anchor:e.marker})}))),n||null}}]),r}(t.PureComponent);Ya.contextType=ha;var Qa=function(){function e(t,n){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var n=t.getMaxZoom(),r=this.cluster.getBounds(),a=t.getMap();null!==a&&"fitBounds"in a&&a.fitBounds(r),this.timeOut=window.setTimeout((function(){var e=t.getMap();if(null!==e){"fitBounds"in e&&e.fitBounds(r);var a=e.getZoom()||0;null!==n&&a>n&&e.setZoom(n+1)}}),100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),null===(e=this.getPanes())||void 0===e||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();null!==t&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),null!==this.boundsChangedListener&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),null!==this.timeOut&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&null!==this.div&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=null!==e?"".concat(e.y,"px"):"0",this.div.style.left=null!==e?"".concat(e.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var e,t,n,r;if(this.div&&this.center){var a=null===this.sums||"undefined"===typeof this.sums.title||""===this.sums.title?this.cluster.getClusterer().getTitle():this.sums.title,o=this.backgroundPosition.split(" "),i=parseInt(o[0].replace(/^\s+|\s+$/g,""),10),s=parseInt(o[1].replace(/^\s+|\s+$/g,""),10),u=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(null!==u?"".concat(u.y,"px"):"0","; left: ").concat(null!==u?"".concat(u.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var c=document.createElement("img");c.alt=a,c.src=this.url,c.width=this.width,c.height=this.height,c.setAttribute("style","position: absolute; top: ".concat(s,"px; left: ").concat(i,"px")),this.cluster.getClusterer().enableRetinaIcons||(c.style.clip="rect(-".concat(s,"px, -").concat(i+this.width,"px, -").concat(s+this.height,", -").concat(i,")"));var l=document.createElement("div");l.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),(null===(e=this.sums)||void 0===e?void 0:e.text)&&(l.innerText="".concat(null===(t=this.sums)||void 0===t?void 0:t.text)),(null===(n=this.sums)||void 0===n?void 0:n.html)&&(l.innerHTML="".concat(null===(r=this.sums)||void 0===r?void 0:r.html)),this.div.innerHTML="",this.div.appendChild(c),this.div.appendChild(l),this.div.title=a,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),n=t[Math.min(t.length-1,Math.max(0,e.index-1))];this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0"},e.prototype.setCenter=function(e){this.center=e},e.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return null!==t&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},e}(),$a=function(){function e(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new Qa(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=this.getMarkers(),n=0;n<t.length;n++){var r=t[n].getPosition();r&&e.extend(r)}return e},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(e){var t,n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter&&(n=e.getPosition())){var r=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(r-1)+n.lat())/r,(this.center.lng()*(r-1)+n.lng())/r),this.calculateBounds()}}else(n=e.getPosition())&&(this.center=n,this.calculateBounds());e.isAdded=!0,this.markers.push(e);var a=this.markers.length,o=this.markerClusterer.getMaxZoom(),i=null===(t=this.map)||void 0===t?void 0:t.getZoom();if(null!==o&&"undefined"!==typeof i&&i>o)e.getMap()!==this.map&&e.setMap(this.map);else if(a<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(a===this.minClusterSize)for(var s=0;s<a;s++)this.markers[s].setMap(null);else e.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(e){if(null!==this.bounds){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var e,t=this.markers.length,n=this.markerClusterer.getMaxZoom(),r=null===(e=this.map)||void 0===e?void 0:e.getZoom();null!==n&&"undefined"!==typeof r&&r>n||t<this.minClusterSize?this.clusterIcon.hide():(this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show())},e.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},e}();function Ja(e,t){var n=e.length,r=n.toString().length,a=Math.min(r,t);return{text:n.toString(),index:a,title:""}}var eo=[53,56,66,78,90],to=function(){function e(t,n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.extend=this.extend.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,void 0!==r.zoomOnClick&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,void 0!==r.averageCenter&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,void 0!==r.ignoreHidden&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,void 0!==r.enableRetinaIcons&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",this.imageExtension=r.imageExtension||"png",this.imageSizes=r.imageSizes||eo,this.calculator=r.calculator||Ja,this.batchSize=r.batchSize||2e3,this.batchSizeIE=r.batchSizeIE||500,this.clusterClass=r.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(null===(e=this.getMap())||void 0===e?void 0:e.getZoom())!==(this.get("minZoom")||0)&&(null===(t=this.getMap())||void 0===t?void 0:t.getZoom())!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),null!==e&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var e=0;e<this.markers.length;e++)this.markers[e].getMap()!==this.activeMap&&this.markers[e].setMap(this.activeMap);for(e=0;e<this.clusters.length;e++)this.clusters[e].remove();this.clusters=[];for(e=0;e<this.listeners.length;e++)google.maps.event.removeListener(this.listeners[e]);this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e],width:this.imageSizes[e]})},e.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,n=0;n<e.length;n++){var r=e[n].getPosition();r&&t.extend(r)}var a=this.getMap();null!==a&&"fitBounds"in a&&a.fitBounds(t)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(e){this.gridSize=e},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(e){this.maxZoom=e},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(e){this.styles=e},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(e){this.title=e},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(e){this.averageCenter=e},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(e){this.imageExtension=e},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(e){this.imagePath=e},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(e){this.imageSizes=e},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(e){this.calculator=e},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(e){this.clusterClass=e},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},e.prototype.addMarkers=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.pushMarkerTo(e[n]);t||this.redraw()},e.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",(function(){t.ready&&(e.isAdded=!1,t.repaint())})),e.isAdded=!1,this.markers.push(e)},e.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var n=0;n<this.markers.length;n++)if(e===this.markers[n]){t=n;break}return-1!==t&&(e.setMap(null),this.markers.splice(t,1),!0)},e.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);return!t&&n&&this.repaint(),n},e.prototype.removeMarkers=function(e,t){for(var n=!1,r=0;r<e.length;r++)n=n||this.removeMarker_(e[r]);return!t&&n&&this.repaint(),n},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout((function(){for(var t=0;t<e.length;t++)e[t].remove()}),0)},e.prototype.getExtendedBounds=function(e){var t=this.getProjection(),n=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));null!==n&&(n.x+=this.gridSize,n.y-=this.gridSize);var r=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(null!==r&&(r.x-=this.gridSize,r.y+=this.gridSize),null!==n){var a=t.fromDivPixelToLatLng(n);null!==a&&e.extend(a)}if(null!==r){var o=t.fromDivPixelToLatLng(r);null!==o&&e.extend(o)}return e},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(e){for(var t=0;t<this.clusters.length;t++)this.clusters[t].remove();this.clusters=[];for(t=0;t<this.markers.length;t++){var n=this.markers[t];n.isAdded=!1,e&&n.setMap(null)}},e.prototype.distanceBetweenPoints=function(e,t){var n=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,a=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371},e.prototype.isMarkerInBounds=function(e,t){var n=e.getPosition();return!!n&&t.contains(n)},e.prototype.addToClosestCluster=function(e){for(var t,n=4e4,r=null,a=0;a<this.clusters.length;a++){var o=(t=this.clusters[a]).getCenter(),i=e.getPosition();if(o&&i){var s=this.distanceBetweenPoints(o,i);s<n&&(n=s,r=t)}}r&&r.isMarkerInClusterBounds(e)?r.addMarker(e):((t=new $a(this)).addMarker(e),this.clusters.push(t))},e.prototype.createClusters=function(e){var t=this;if(this.ready){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),null!==this.timerRefStatic&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),r=(null!==n&&"getBounds"in n?n.getBounds():null),a=((null===n||void 0===n?void 0:n.getZoom())||0)>3?new google.maps.LatLngBounds(null===r||void 0===r?void 0:r.getSouthWest(),null===r||void 0===r?void 0:r.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),o=this.getExtendedBounds(a),i=Math.min(e+this.batchSize,this.markers.length),s=e;s<i;s++){var u=this.markers[s];!u.isAdded&&this.isMarkerInBounds(u,o)&&(!this.ignoreHidden||this.ignoreHidden&&u.getVisible())&&this.addToClosestCluster(u)}if(i<this.markers.length)this.timerRefStatic=window.setTimeout((function(){t.createClusters(i)}),0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(s=0;s<this.clusters.length;s++)this.clusters[s].updateIcon()}}},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},e}(),no={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},ro={averageCenter:function(e,t){e.setAverageCenter(t)},batchSizeIE:function(e,t){e.setBatchSizeIE(t)},calculator:function(e,t){e.setCalculator(t)},clusterClass:function(e,t){e.setClusterClass(t)},enableRetinaIcons:function(e,t){e.setEnableRetinaIcons(t)},gridSize:function(e,t){e.setGridSize(t)},ignoreHidden:function(e,t){e.setIgnoreHidden(t)},imageExtension:function(e,t){e.setImageExtension(t)},imagePath:function(e,t){e.setImagePath(t)},imageSizes:function(e,t){e.setImageSizes(t)},maxZoom:function(e,t){e.setMaxZoom(t)},minimumClusterSize:function(e,t){e.setMinimumClusterSize(t)},styles:function(e,t){e.setStyles(t)},title:function(e,t){e.setTitle(t)},zoomOnClick:function(e,t){e.setZoomOnClick(t)}},ao={};(0,t.memo)((function(e){var n=e.children,r=e.options,a=e.averageCenter,o=e.batchSizeIE,s=e.calculator,u=e.clusterClass,c=e.enableRetinaIcons,l=e.gridSize,d=e.ignoreHidden,p=e.imageExtension,f=e.imagePath,h=e.imageSizes,m=e.maxZoom,g=e.minimumClusterSize,v=e.styles,y=e.title,b=e.zoomOnClick,x=e.onClick,k=e.onClusteringBegin,w=e.onClusteringEnd,S=e.onMouseOver,C=e.onMouseOut,E=e.onLoad,T=e.onUnmount,N=(0,t.useState)(null),_=(0,i.Z)(N,2),I=_[0],R=_[1],A=(0,t.useContext)(ha),O=(0,t.useState)(null),P=(0,i.Z)(O,2),D=P[0],L=P[1],M=(0,t.useState)(null),F=(0,i.Z)(M,2),B=F[0],j=F[1],z=(0,t.useState)(null),V=(0,i.Z)(z,2),W=V[0],Z=V[1],U=(0,t.useState)(null),H=(0,i.Z)(U,2),G=H[0],q=H[1],X=(0,t.useState)(null),K=(0,i.Z)(X,2),Y=K[0],Q=K[1];return(0,t.useEffect)((function(){I&&C&&(null!==G&&google.maps.event.removeListener(G),q(google.maps.event.addListener(I,no.onMouseOut,C)))}),[C]),(0,t.useEffect)((function(){I&&S&&(null!==Y&&google.maps.event.removeListener(Y),Q(google.maps.event.addListener(I,no.onMouseOver,S)))}),[S]),(0,t.useEffect)((function(){I&&x&&(null!==D&&google.maps.event.removeListener(D),L(google.maps.event.addListener(I,no.onClick,x)))}),[x]),(0,t.useEffect)((function(){I&&k&&(null!==B&&google.maps.event.removeListener(B),j(google.maps.event.addListener(I,no.onClusteringBegin,k)))}),[k]),(0,t.useEffect)((function(){I&&w&&(null!==W&&google.maps.event.removeListener(W),j(google.maps.event.addListener(I,no.onClusteringEnd,w)))}),[w]),(0,t.useEffect)((function(){"undefined"!==typeof a&&null!==I&&ro.averageCenter(I,a)}),[I,a]),(0,t.useEffect)((function(){"undefined"!==typeof o&&null!==I&&ro.batchSizeIE(I,o)}),[I,o]),(0,t.useEffect)((function(){"undefined"!==typeof s&&null!==I&&ro.calculator(I,s)}),[I,s]),(0,t.useEffect)((function(){"undefined"!==typeof u&&null!==I&&ro.clusterClass(I,u)}),[I,u]),(0,t.useEffect)((function(){"undefined"!==typeof c&&null!==I&&ro.enableRetinaIcons(I,c)}),[I,c]),(0,t.useEffect)((function(){"undefined"!==typeof l&&null!==I&&ro.gridSize(I,l)}),[I,l]),(0,t.useEffect)((function(){"undefined"!==typeof d&&null!==I&&ro.ignoreHidden(I,d)}),[I,d]),(0,t.useEffect)((function(){"undefined"!==typeof p&&null!==I&&ro.imageExtension(I,p)}),[I,p]),(0,t.useEffect)((function(){"undefined"!==typeof f&&null!==I&&ro.imagePath(I,f)}),[I,f]),(0,t.useEffect)((function(){"undefined"!==typeof h&&null!==I&&ro.imageSizes(I,h)}),[I,h]),(0,t.useEffect)((function(){"undefined"!==typeof m&&null!==I&&ro.maxZoom(I,m)}),[I,m]),(0,t.useEffect)((function(){"undefined"!==typeof g&&null!==I&&ro.minimumClusterSize(I,g)}),[I,g]),(0,t.useEffect)((function(){"undefined"!==typeof v&&null!==I&&ro.styles(I,v)}),[I,v]),(0,t.useEffect)((function(){"undefined"!==typeof y&&null!==I&&ro.title(I,y)}),[I,y]),(0,t.useEffect)((function(){"undefined"!==typeof b&&null!==I&&ro.zoomOnClick(I,b)}),[I,b]),(0,t.useEffect)((function(){if(A){var e=Object.assign({},r||ao),t=new to(A,[],e);return a&&ro.averageCenter(t,a),o&&ro.batchSizeIE(t,o),s&&ro.calculator(t,s),u&&ro.clusterClass(t,u),c&&ro.enableRetinaIcons(t,c),l&&ro.gridSize(t,l),d&&ro.ignoreHidden(t,d),p&&ro.imageExtension(t,p),f&&ro.imagePath(t,f),h&&ro.imageSizes(t,h),m&&ro.maxZoom(t,m),g&&ro.minimumClusterSize(t,g),v&&ro.styles(t,v),y&&ro.title(t,y),b&&ro.zoomOnClick(t,b),C&&q(google.maps.event.addListener(t,no.onMouseOut,C)),S&&Q(google.maps.event.addListener(t,no.onMouseOver,S)),x&&L(google.maps.event.addListener(t,no.onClick,x)),k&&j(google.maps.event.addListener(t,no.onClusteringBegin,k)),w&&Z(google.maps.event.addListener(t,no.onClusteringEnd,w)),R(t),E&&E(t),function(){null!==G&&google.maps.event.removeListener(G),null!==Y&&google.maps.event.removeListener(Y),null!==D&&google.maps.event.removeListener(D),null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),T&&T(t)}}}),[]),null!==I&&n(I)||null}));var oo=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={markerClusterer:null},e.setClustererCallback=function(){null!==e.state.markerClusterer&&e.props.onLoad&&e.props.onLoad(e.state.markerClusterer)},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){if(this.context){var e=new to(this.context,[],this.props.options);this.registeredEvents=ba({updaterMap:ro,eventMap:no,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{markerClusterer:e}}),this.setClustererCallback)}}},{key:"componentDidUpdate",value:function(e){this.state.markerClusterer&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:ro,eventMap:no,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}},{key:"componentWillUnmount",value:function(){null!==this.state.markerClusterer&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),ya(this.registeredEvents),this.state.markerClusterer.setMap(null))}},{key:"render",value:function(){return null!==this.state.markerClusterer?this.props.children(this.state.markerClusterer):null}}]),n}(t.PureComponent);function io(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}oo.contextType=ha;var so=function(){function e(t){void 0===t&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"===typeof t.visible&&("undefined"===typeof t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var e=this;if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),"string"===typeof this.content?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var t=this.getPanes();if(null!==t&&t[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(0!==this.maxWidth&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var n=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-n.left-n.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var r=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],a=0;a<r.length;a++)this.eventListeners.push(google.maps.event.addListener(this.div,r[a],io));this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",(function(){e.div&&(e.div.style.cursor="default")})))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",(function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),e.enableEventPropagation||io(t)})),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var e="";return""!==this.closeBoxURL&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&""!==this.closeBoxURL?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var n=0,r=0,a=t.getBounds();a&&!a.contains(this.position)&&t.setCenter(this.position);var o=t.getDiv(),i=o.offsetWidth,s=o.offsetHeight,u=this.pixelOffset.width,c=this.pixelOffset.height,l=this.div.offsetWidth,d=this.div.offsetHeight,p=this.infoBoxClearance.width,f=this.infoBoxClearance.height,h=this.getProjection().fromLatLngToContainerPixel(this.position);null!==h&&(h.x<-u+p?n=h.x+u-p:h.x+l+u+p>i&&(n=h.x+l+u+p-i),this.alignBottom?h.y<-c+f+d?r=h.y+c-f-d:h.y+c+f>s&&(r=h.y+c+f-s):h.y<-c+f?r=h.y+c-f:h.y+d+c+f>s&&(r=h.y+d+c+f-s)),0===n&&0===r||t.panBy(n,r)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)","undefined"!==typeof this.div.style.opacity&&""!==this.div.style.opacity){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*n+')"',this.div.style.filter="alpha(opacity="+100*n+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",null!==this.zIndex&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,n=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}return e},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection().fromLatLngToDivPixel(this.position);null!==e&&(this.div.style.left=e.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(e.y+this.pixelOffset.height)+"px":this.div.style.top=e.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(e){void 0===e&&(e={}),"undefined"!==typeof e.boxClass&&(this.boxClass=e.boxClass,this.setBoxStyle()),"undefined"!==typeof e.boxStyle&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),"undefined"!==typeof e.content&&this.setContent(e.content),"undefined"!==typeof e.disableAutoPan&&(this.disableAutoPan=e.disableAutoPan),"undefined"!==typeof e.maxWidth&&(this.maxWidth=e.maxWidth),"undefined"!==typeof e.pixelOffset&&(this.pixelOffset=e.pixelOffset),"undefined"!==typeof e.alignBottom&&(this.alignBottom=e.alignBottom),"undefined"!==typeof e.position&&this.setPosition(e.position),"undefined"!==typeof e.zIndex&&this.setZIndex(e.zIndex),"undefined"!==typeof e.closeBoxMargin&&(this.closeBoxMargin=e.closeBoxMargin),"undefined"!==typeof e.closeBoxURL&&(this.closeBoxURL=e.closeBoxURL),"undefined"!==typeof e.infoBoxClearance&&(this.infoBoxClearance=e.infoBoxClearance),"undefined"!==typeof e.isHidden&&(this.isHidden=e.isHidden),"undefined"!==typeof e.visible&&(this.isHidden=!e.visible),"undefined"!==typeof e.enableEventPropagation&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),"string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px","string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var e=this.getMap();return"undefined"!==typeof e&&null!==e&&!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(e,t){var n=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",(function(){var e=t.getPosition();n.setPosition(e)})),this.mapListener=google.maps.event.addListener(t,"map_changed",(function(){n.setMap(t.map)}))),this.setMap(e),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0;e<this.eventListeners.length;e++)google.maps.event.removeListener(this.eventListeners[e]);this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)Object.prototype.hasOwnProperty.call(this,t)||(this.prototype[t]=e.prototype[t]);return this}.apply(e,[t])},e}(),uo={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},co={options:function(e,t){e.setOptions(t)},position:function(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible:function(e,t){e.setVisible(t)},zIndex:function(e,t){e.setZIndex(t)}},lo={};(0,t.memo)((function(e){var n=e.children,r=e.anchor,a=e.options,o=e.position,s=e.zIndex,u=e.onCloseClick,c=e.onDomReady,l=e.onContentChanged,d=e.onPositionChanged,p=e.onZindexChanged,f=e.onLoad,h=e.onUnmount,m=(0,t.useContext)(ha),g=(0,t.useState)(null),v=(0,i.Z)(g,2),y=v[0],b=v[1],x=(0,t.useState)(null),k=(0,i.Z)(x,2),w=k[0],S=k[1],C=(0,t.useState)(null),E=(0,i.Z)(C,2),T=E[0],N=E[1],_=(0,t.useState)(null),I=(0,i.Z)(_,2),R=I[0],A=I[1],O=(0,t.useState)(null),P=(0,i.Z)(O,2),D=P[0],L=P[1],M=(0,t.useState)(null),F=(0,i.Z)(M,2),B=F[0],j=F[1],z=(0,t.useRef)(null);return(0,t.useEffect)((function(){m&&null!==y&&(y.close(),r?y.open(m,r):y.getPosition()&&y.open(m))}),[m,y,r]),(0,t.useEffect)((function(){a&&null!==y&&y.setOptions(a)}),[y,a]),(0,t.useEffect)((function(){if(o&&null!==y){var e=o instanceof google.maps.LatLng?o:new google.maps.LatLng(o.lat,o.lng);y.setPosition(e)}}),[o]),(0,t.useEffect)((function(){"number"===typeof s&&null!==y&&y.setZIndex(s)}),[s]),(0,t.useEffect)((function(){y&&u&&(null!==w&&google.maps.event.removeListener(w),S(google.maps.event.addListener(y,"closeclick",u)))}),[u]),(0,t.useEffect)((function(){y&&c&&(null!==T&&google.maps.event.removeListener(T),N(google.maps.event.addListener(y,"domready",c)))}),[c]),(0,t.useEffect)((function(){y&&l&&(null!==R&&google.maps.event.removeListener(R),A(google.maps.event.addListener(y,"content_changed",l)))}),[l]),(0,t.useEffect)((function(){y&&d&&(null!==D&&google.maps.event.removeListener(D),L(google.maps.event.addListener(y,"position_changed",d)))}),[d]),(0,t.useEffect)((function(){y&&p&&(null!==B&&google.maps.event.removeListener(B),j(google.maps.event.addListener(y,"zindex_changed",p)))}),[p]),(0,t.useEffect)((function(){if(m){var e,t=a||lo,n=t.position,o=Sa(t,["position"]);!n||n instanceof google.maps.LatLng||(e=new google.maps.LatLng(n.lat,n.lng));var i=new so(Object.assign(Object.assign({},o),e?{position:e}:{}));z.current=document.createElement("div"),b(i),u&&S(google.maps.event.addListener(i,"closeclick",u)),c&&N(google.maps.event.addListener(i,"domready",c)),l&&A(google.maps.event.addListener(i,"content_changed",l)),d&&L(google.maps.event.addListener(i,"position_changed",d)),p&&j(google.maps.event.addListener(i,"zindex_changed",p)),i.setContent(z.current),r?i.open(m,r):i.getPosition()?i.open(m):fa(!1,"You must provide either an anchor or a position prop for <InfoBox>."),f&&f(i)}return function(){null!==y&&(w&&google.maps.event.removeListener(w),R&&google.maps.event.removeListener(R),T&&google.maps.event.removeListener(T),D&&google.maps.event.removeListener(D),B&&google.maps.event.removeListener(B),h&&h(y),y.close())}}),[]),z.current?(0,pa.createPortal)(t.Children.only(n),z.current):null}));var po=function(e){(0,nt.Z)(r,e);var n=(0,rt.Z)(r);function r(){var e;return(0,Je.Z)(this,r),(e=n.apply(this,arguments)).registeredEvents=[],e.containerElement=null,e.state={infoBox:null},e.open=function(t,n){n?t.open(e.context,n):t.getPosition()?t.open(e.context):fa(!1,"You must provide either an anchor or a position prop for <InfoBox>.")},e.setInfoBoxCallback=function(){null!==e.state.infoBox&&null!==e.containerElement&&(e.state.infoBox.setContent(e.containerElement),e.open(e.state.infoBox,e.props.anchor),e.props.onLoad&&e.props.onLoad(e.state.infoBox))},e}return(0,et.Z)(r,[{key:"componentDidMount",value:function(){var e,t=this.props.options||{},n=t.position,r=Sa(t,["position"]);!n||n instanceof google.maps.LatLng||(e=new google.maps.LatLng(n.lat,n.lng));var a=new so(Object.assign(Object.assign({},r),e?{position:e}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=ba({updaterMap:co,eventMap:uo,prevProps:{},nextProps:this.props,instance:a}),this.setState({infoBox:a},this.setInfoBoxCallback)}},{key:"componentDidUpdate",value:function(e){var t=this.state.infoBox;null!==t&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:co,eventMap:uo,prevProps:e,nextProps:this.props,instance:t}))}},{key:"componentWillUnmount",value:function(){var e=this.props.onUnmount,t=this.state.infoBox;null!==t&&(e&&e(t),ya(this.registeredEvents),t.close())}},{key:"render",value:function(){return this.containerElement?(0,pa.createPortal)(t.Children.only(this.props.children),this.containerElement):null}}]),r}(t.PureComponent);po.contextType=ha;var fo=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!==a--;)if(!Object.prototype.hasOwnProperty.call(n,o[a]))return!1;for(a=r;0!==a--;){var i=o[a];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n},ho={exports:{}};ho.exports=function(){function e(n,r,a,o,i,s){if(!(i-o<=a)){var u=o+i>>1;t(n,r,u,o,i,s%2),e(n,r,a,o,u-1,s+1),e(n,r,a,u+1,i,s+1)}}function t(e,r,a,o,i,s){for(;i>o;){if(i-o>600){var u=i-o+1,c=a-o+1,l=Math.log(u),d=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*d*(u-d)/u)*(c-u/2<0?-1:1);t(e,r,a,Math.max(o,Math.floor(a-c*d/u+p)),Math.min(i,Math.floor(a+(u-c)*d/u+p)),s)}var f=r[2*a+s],h=o,m=i;for(n(e,r,o,a),r[2*i+s]>f&&n(e,r,o,i);h<m;){for(n(e,r,h,m),h++,m--;r[2*h+s]<f;)h++;for(;r[2*m+s]>f;)m--}r[2*o+s]===f?n(e,r,o,m):n(e,r,++m,i),m<=a&&(o=m+1),a<=m&&(i=m-1)}}function n(e,t,n,a){r(e,n,a),r(t,2*n,2*a),r(t,2*n+1,2*a+1)}function r(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function a(e,t,n,r,a,o,i){for(var s,u,c=[0,e.length-1,0],l=[];c.length;){var d=c.pop(),p=c.pop(),f=c.pop();if(p-f<=i)for(var h=f;h<=p;h++)s=t[2*h],u=t[2*h+1],s>=n&&s<=a&&u>=r&&u<=o&&l.push(e[h]);else{var m=Math.floor((f+p)/2);s=t[2*m],u=t[2*m+1],s>=n&&s<=a&&u>=r&&u<=o&&l.push(e[m]);var g=(d+1)%2;(0===d?n<=s:r<=u)&&(c.push(f),c.push(m-1),c.push(g)),(0===d?a>=s:o>=u)&&(c.push(m+1),c.push(p),c.push(g))}}return l}function o(e,t,n,r,a,o){for(var s=[0,e.length-1,0],u=[],c=a*a;s.length;){var l=s.pop(),d=s.pop(),p=s.pop();if(d-p<=o)for(var f=p;f<=d;f++)i(t[2*f],t[2*f+1],n,r)<=c&&u.push(e[f]);else{var h=Math.floor((p+d)/2),m=t[2*h],g=t[2*h+1];i(m,g,n,r)<=c&&u.push(e[h]);var v=(l+1)%2;(0===l?n-a<=m:r-a<=g)&&(s.push(p),s.push(h-1),s.push(v)),(0===l?n+a>=m:r+a>=g)&&(s.push(h+1),s.push(d),s.push(v))}}return u}function i(e,t,n,r){var a=e-n,o=t-r;return a*a+o*o}var s=function(e){return e[0]},u=function(e){return e[1]},c=function(t,n,r,a,o){void 0===n&&(n=s),void 0===r&&(r=u),void 0===a&&(a=64),void 0===o&&(o=Float64Array),this.nodeSize=a,this.points=t;for(var i=t.length<65536?Uint16Array:Uint32Array,c=this.ids=new i(t.length),l=this.coords=new o(2*t.length),d=0;d<t.length;d++)c[d]=d,l[2*d]=n(t[d]),l[2*d+1]=r(t[d]);e(c,l,a,0,c.length-1,0)};return c.prototype.range=function(e,t,n,r){return a(this.ids,this.coords,e,t,n,r,this.nodeSize)},c.prototype.within=function(e,t,n){return o(this.ids,this.coords,e,t,n,this.nodeSize)},c}();var mo,go=ho.exports,vo={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},yo=Math.fround||(mo=new Float32Array(1),function(e){return mo[0]=+e,mo[0]}),bo=function(){function e(t){(0,Je.Z)(this,e),this.options=_o(Object.create(vo),t),this.trees=new Array(this.options.maxZoom+1)}return(0,et.Z)(e,[{key:"load",value:function(e){var t=this.options,n=t.log,r=t.minZoom,a=t.maxZoom,o=t.nodeSize;n&&console.time("total time");var i="prepare ".concat(e.length," points");n&&console.time(i),this.points=e;for(var s=[],u=0;u<e.length;u++)e[u].geometry&&s.push(ko(e[u],u));this.trees[a+1]=new go(s,Io,Ro,o,Float32Array),n&&console.timeEnd(i);for(var c=a;c>=r;c--){var l=+Date.now();s=this._cluster(s,c),this.trees[c]=new go(s,Io,Ro,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-l)}return n&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),a=180===e[2]?180:((e[2]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,a=180;else if(n>a){var s=this.getClusters([n,r,180,i],t),u=this.getClusters([-180,r,a,i],t);return s.concat(u)}var c,l=this.trees[this._limitZoom(t)],d=l.range(Co(n),Eo(i),Co(a),Eo(r)),p=[],f=(0,o.Z)(d);try{for(f.s();!(c=f.n()).done;){var h=c.value,m=l.points[h];p.push(m.numPoints?wo(m):this.points[m.index])}}catch(lT){f.e(lT)}finally{f.f()}return p}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",a=this.trees[n];if(!a)throw new Error(r);var i=a.points[t];if(!i)throw new Error(r);var s,u=this.options.radius/(this.options.extent*Math.pow(2,n-1)),c=a.within(i.x,i.y,u),l=[],d=(0,o.Z)(c);try{for(d.s();!(s=d.n()).done;){var p=s.value,f=a.points[p];f.parentId===e&&l.push(f.numPoints?wo(f):this.points[f.index])}}catch(lT){d.e(lT)}finally{d.f()}if(0===l.length)throw new Error(r);return l}},{key:"getLeaves",value:function(e,t,n){t=t||10,n=n||0;var r=[];return this._appendLeaves(r,e,t,n,0),r}},{key:"getTile",value:function(e,t,n){var r=this.trees[this._limitZoom(e)],a=Math.pow(2,e),o=this.options,i=o.extent,s=o.radius/i,u=(n-s)/a,c=(n+1+s)/a,l={features:[]};return this._addTileFeatures(r.range((t-s)/a,u,(t+1+s)/a,c),r.points,t,n,a,l),0===t&&this._addTileFeatures(r.range(1-s/a,u,1,c),r.points,a,n,a,l),t===a-1&&this._addTileFeatures(r.range(0,u,s/a,c),r.points,-1,n,a,l),l.features.length?l:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,n,r,a){var i,s=this.getChildren(t),u=(0,o.Z)(s);try{for(u.s();!(i=u.n()).done;){var c=i.value,l=c.properties;if(l&&l.cluster?a+l.point_count<=r?a+=l.point_count:a=this._appendLeaves(e,l.cluster_id,n,r,a):a<r?a++:e.push(c),e.length===n)break}}catch(lT){u.e(lT)}finally{u.f()}return a}},{key:"_addTileFeatures",value:function(e,t,n,r,a,i){var s,u=(0,o.Z)(e);try{for(u.s();!(s=u.n()).done;){var c=t[s.value],l=c.numPoints,d=void 0,p=void 0,f=void 0;if(l)d=So(c),p=c.x,f=c.y;else{var h=this.points[c.index];d=h.properties,p=Co(h.geometry.coordinates[0]),f=Eo(h.geometry.coordinates[1])}var m={type:1,geometry:[[Math.round(this.options.extent*(p*a-n)),Math.round(this.options.extent*(f*a-r))]],tags:d},g=void 0;l?g=c.id:this.options.generateId?g=c.index:this.points[c.index].id&&(g=this.points[c.index].id),void 0!==g&&(m.id=g),i.features.push(m)}}catch(lT){u.e(lT)}finally{u.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var n=[],r=this.options,a=r.radius,i=r.extent,s=r.reduce,u=r.minPoints,c=a/(i*Math.pow(2,t)),l=0;l<e.length;l++){var d=e[l];if(!(d.zoom<=t)){d.zoom=t;var p,f=this.trees[t+1],h=f.within(d.x,d.y,c),m=d.numPoints||1,g=m,v=(0,o.Z)(h);try{for(v.s();!(p=v.n()).done;){var y=p.value,b=f.points[y];b.zoom>t&&(g+=b.numPoints||1)}}catch(lT){v.e(lT)}finally{v.f()}if(g>m&&g>=u){var x,k=d.x*m,w=d.y*m,S=s&&m>1?this._map(d,!0):null,C=(l<<5)+(t+1)+this.points.length,E=(0,o.Z)(h);try{for(E.s();!(x=E.n()).done;){var T=x.value,N=f.points[T];if(!(N.zoom<=t)){N.zoom=t;var _=N.numPoints||1;k+=N.x*_,w+=N.y*_,N.parentId=C,s&&(S||(S=this._map(d,!0)),s(S,this._map(N)))}}}catch(lT){E.e(lT)}finally{E.f()}d.parentId=C,n.push(xo(k/g,w/g,C,g,S))}else if(n.push(d),g>1){var I,R=(0,o.Z)(h);try{for(R.s();!(I=R.n()).done;){var A=I.value,O=f.points[A];O.zoom<=t||(O.zoom=t,n.push(O))}}catch(lT){R.e(lT)}finally{R.f()}}}}return n}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t){if(e.numPoints)return t?_o({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?_o({},r):r}}]),e}();function xo(e,t,n,r,a){return{x:yo(e),y:yo(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:a}}function ko(e,t){var n=(0,i.Z)(e.geometry.coordinates,2),r=n[0],a=n[1];return{x:yo(Co(r)),y:yo(Eo(a)),zoom:1/0,index:t,parentId:-1}}function wo(e){return{type:"Feature",id:e.id,properties:So(e),geometry:{type:"Point",coordinates:[To(e.x),No(e.y)]}}}function So(e){var t=e.numPoints,n=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?"".concat(Math.round(t/100)/10,"k"):t;return _o(_o({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function Co(e){return e/360+.5}function Eo(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function To(e){return 360*(e-.5)}function No(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function _o(e,t){for(var n in t)e[n]=t[n];return e}function Io(e){return e.x}function Ro(e){return e.y}function Ao(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var Oo=function(){function e(t){var n=t.markers,r=t.position;(0,Je.Z)(this,e),this.markers=n,r&&(r instanceof google.maps.LatLng?this._position=r:this._position=new google.maps.LatLng(r))}return(0,et.Z)(e,[{key:"bounds",get:function(){if(0!==this.markers.length||this._position)return this.markers.reduce((function(e,t){return e.extend(t.getPosition())}),new google.maps.LatLngBounds(this._position,this._position))}},{key:"position",get:function(){return this._position||this.bounds.getCenter()}},{key:"count",get:function(){return this.markers.filter((function(e){return e.getVisible()})).length}},{key:"push",value:function(e){this.markers.push(e)}},{key:"delete",value:function(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}]),e}(),Po=function(){function e(t){var n=t.maxZoom,r=void 0===n?16:n;(0,Je.Z)(this,e),this.maxZoom=r}return(0,et.Z)(e,[{key:"noop",value:function(e){var t=e.markers;return Do(t)}}]),e}(),Do=function(e){return e.map((function(e){return new Oo({position:e.getPosition(),markers:[e]})}))},Lo=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e){var r;(0,Je.Z)(this,n);var a=e.maxZoom,o=e.radius,i=void 0===o?60:o,s=Ao(e,["maxZoom","radius"]);return(r=t.call(this,{maxZoom:a})).superCluster=new bo(Object.assign({maxZoom:r.maxZoom,radius:i},s)),r.state={zoom:null},r}return(0,et.Z)(n,[{key:"calculate",value:function(e){var t=!1;if(!fo(e.markers,this.markers)){t=!0,this.markers=(0,Be.Z)(e.markers);var n=this.markers.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.getPosition().lng(),e.getPosition().lat()]},properties:{marker:e}}}));this.superCluster.load(n)}var r={zoom:e.map.getZoom()};return t||this.state.zoom>this.maxZoom&&r.zoom>this.maxZoom||(t=t||!fo(this.state,r)),this.state=r,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}},{key:"cluster",value:function(e){var t=e.map;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(this.transformCluster.bind(this))}},{key:"transformCluster",value:function(e){var t=(0,i.Z)(e.geometry.coordinates,2),n=t[0],r=t[1],a=e.properties;if(a.cluster)return new Oo({markers:this.superCluster.getLeaves(a.cluster_id,1/0).map((function(e){return e.properties.marker})),position:new google.maps.LatLng({lat:r,lng:n})});var o=a.marker;return new Oo({markers:[o],position:o.getPosition()})}}]),n}(Po),Mo=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.markers={sum:t.length};var r=n.map((function(e){return e.count})),a=r.reduce((function(e,t){return e+t}),0);this.clusters={count:n.length,markers:{mean:a/n.length,sum:a,min:Math.min.apply(Math,(0,Be.Z)(r)),max:Math.max.apply(Math,(0,Be.Z)(r))}}})),Fo=function(){function e(){(0,Je.Z)(this,e)}return(0,et.Z)(e,[{key:"render",value:function(e,t){var n=e.count,r=e.position,a=n>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",o=window.btoa('\n  <svg fill="'.concat(a,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n    <circle cx="120" cy="120" opacity=".6" r="70" />\n    <circle cx="120" cy="120" opacity=".3" r="90" />\n    <circle cx="120" cy="120" opacity=".2" r="110" />\n  </svg>'));return new google.maps.Marker({position:r,icon:{url:"data:image/svg+xml;base64,".concat(o),scaledSize:new google.maps.Size(45,45)},label:{text:String(n),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:"Cluster of ".concat(n," markers"),zIndex:Number(google.maps.Marker.MAX_ZINDEX)+n})}}]),e}();var Bo,jo=(0,et.Z)((function e(){(0,Je.Z)(this,e),function(e,t){for(var n in t.prototype)e.prototype[n]=t.prototype[n]}(e,google.maps.OverlayView)}));!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"}(Bo||(Bo={}));var zo=function(e,t,n){n.fitBounds(t.bounds)},Vo=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e){var r,a=e.map,o=e.markers,i=void 0===o?[]:o,s=e.algorithm,u=void 0===s?new Lo({}):s,c=e.renderer,l=void 0===c?new Fo:c,d=e.onClusterClick,p=void 0===d?zo:d;return(0,Je.Z)(this,n),(r=t.call(this)).markers=(0,Be.Z)(i),r.clusters=[],r.algorithm=u,r.renderer=l,r.onClusterClick=p,a&&r.setMap(a),r}return(0,et.Z)(n,[{key:"addMarker",value:function(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}},{key:"addMarkers",value:function(e,t){var n=this;e.forEach((function(e){n.addMarker(e,!0)})),t||this.render()}},{key:"removeMarker",value:function(e,t){var n=this.markers.indexOf(e);return-1!==n&&(e.setMap(null),this.markers.splice(n,1),t||this.render(),!0)}},{key:"removeMarkers",value:function(e,t){var n=this,r=!1;return e.forEach((function(e){r=n.removeMarker(e,!0)||r})),r&&!t&&this.render(),r}},{key:"clearMarkers",value:function(e){this.markers.length=0,e||this.render()}},{key:"render",value:function(){var e=this.getMap();if(e instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,Bo.CLUSTERING_BEGIN,this);var t=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()}),n=t.clusters,r=t.changed;(r||void 0==r)&&(this.reset(),this.clusters=n,this.renderClusters()),google.maps.event.trigger(this,Bo.CLUSTERING_END,this)}}},{key:"onAdd",value:function(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}},{key:"onRemove",value:function(){google.maps.event.removeListener(this.idleListener),this.reset()}},{key:"reset",value:function(){this.markers.forEach((function(e){return e.setMap(null)})),this.clusters.forEach((function(e){return e.delete()})),this.clusters=[]}},{key:"renderClusters",value:function(){var e=this,t=new Mo(this.markers,this.clusters),n=this.getMap();this.clusters.forEach((function(r){1===r.markers.length?r.marker=r.markers[0]:(r.marker=e.renderer.render(r,t),e.onClusterClick&&r.marker.addListener("click",(function(t){google.maps.event.trigger(e,Bo.CLUSTER_CLICK,r),e.onClusterClick(t,r,n)}))),r.marker.setMap(n)}))}}]),n}(jo);function Wo(e){var n=function(){fa(!!t.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=(0,t.useContext)(ha);return fa(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}(),r=(0,t.useState)(null),a=(0,i.Z)(r,2),o=a[0],s=a[1];return(0,t.useEffect)((function(){if(n&&null===o){var t=new Vo(Object.assign(Object.assign({},e),{map:n}));s(t)}}),[n]),o}(0,t.memo)((function(e){var t=e.children,n=Wo(e.options);return null!==n?t(n):null}));var Zo={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Uo={options:function(e,t){e.setOptions(t)},position:function(e,t){e.setPosition(t)},zIndex:function(e,t){e.setZIndex(t)}};(0,t.memo)((function(e){var n=e.children,r=e.anchor,a=e.options,o=e.position,s=e.zIndex,u=e.onCloseClick,c=e.onDomReady,l=e.onContentChanged,d=e.onPositionChanged,p=e.onZindexChanged,f=e.onLoad,h=e.onUnmount,m=(0,t.useContext)(ha),g=(0,t.useState)(null),v=(0,i.Z)(g,2),y=v[0],b=v[1],x=(0,t.useState)(null),k=(0,i.Z)(x,2),w=k[0],S=k[1],C=(0,t.useState)(null),E=(0,i.Z)(C,2),T=E[0],N=E[1],_=(0,t.useState)(null),I=(0,i.Z)(_,2),R=I[0],A=I[1],O=(0,t.useState)(null),P=(0,i.Z)(O,2),D=P[0],L=P[1],M=(0,t.useState)(null),F=(0,i.Z)(M,2),B=F[0],j=F[1],z=(0,t.useRef)(null);return(0,t.useEffect)((function(){null!==y&&(y.close(),r?y.open(m,r):y.getPosition()&&y.open(m))}),[m,y,r]),(0,t.useEffect)((function(){a&&null!==y&&y.setOptions(a)}),[y,a]),(0,t.useEffect)((function(){o&&null!==y&&y.setPosition(o)}),[o]),(0,t.useEffect)((function(){"number"===typeof s&&null!==y&&y.setZIndex(s)}),[s]),(0,t.useEffect)((function(){y&&u&&(null!==w&&google.maps.event.removeListener(w),S(google.maps.event.addListener(y,"closeclick",u)))}),[u]),(0,t.useEffect)((function(){y&&c&&(null!==T&&google.maps.event.removeListener(T),N(google.maps.event.addListener(y,"domready",c)))}),[c]),(0,t.useEffect)((function(){y&&l&&(null!==R&&google.maps.event.removeListener(R),A(google.maps.event.addListener(y,"content_changed",l)))}),[l]),(0,t.useEffect)((function(){y&&d&&(null!==D&&google.maps.event.removeListener(D),L(google.maps.event.addListener(y,"position_changed",d)))}),[d]),(0,t.useEffect)((function(){y&&p&&(null!==B&&google.maps.event.removeListener(B),j(google.maps.event.addListener(y,"zindex_changed",p)))}),[p]),(0,t.useEffect)((function(){var e=new google.maps.InfoWindow(Object.assign({},a||{}));return b(e),z.current=document.createElement("div"),u&&S(google.maps.event.addListener(e,"closeclick",u)),c&&N(google.maps.event.addListener(e,"domready",c)),l&&A(google.maps.event.addListener(e,"content_changed",l)),d&&L(google.maps.event.addListener(e,"position_changed",d)),p&&j(google.maps.event.addListener(e,"zindex_changed",p)),e.setContent(z.current),o&&e.setPosition(o),s&&e.setZIndex(s),r?e.open(m,r):e.getPosition()?e.open(m):fa(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),f&&f(e),function(){w&&google.maps.event.removeListener(w),R&&google.maps.event.removeListener(R),T&&google.maps.event.removeListener(T),D&&google.maps.event.removeListener(D),B&&google.maps.event.removeListener(B),h&&h(e),e.close()}}),[]),z.current?(0,pa.createPortal)(t.Children.only(n),z.current):null}));var Ho=function(e){(0,nt.Z)(r,e);var n=(0,rt.Z)(r);function r(){var e;return(0,Je.Z)(this,r),(e=n.apply(this,arguments)).registeredEvents=[],e.containerElement=null,e.state={infoWindow:null},e.open=function(t,n){n?t.open(e.context,n):t.getPosition()?t.open(e.context):fa(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")},e.setInfoWindowCallback=function(){null!==e.state.infoWindow&&null!==e.containerElement&&(e.state.infoWindow.setContent(e.containerElement),e.open(e.state.infoWindow,e.props.anchor),e.props.onLoad&&e.props.onLoad(e.state.infoWindow))},e}return(0,et.Z)(r,[{key:"componentDidMount",value:function(){var e=new google.maps.InfoWindow(Object.assign({},this.props.options||{}));this.containerElement=document.createElement("div"),this.registeredEvents=ba({updaterMap:Uo,eventMap:Zo,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{infoWindow:e}}),this.setInfoWindowCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.infoWindow&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:Uo,eventMap:Zo,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}},{key:"componentWillUnmount",value:function(){null!==this.state.infoWindow&&(ya(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}},{key:"render",value:function(){return this.containerElement?(0,pa.createPortal)(t.Children.only(this.props.children),this.containerElement):null}}]),r}(t.PureComponent);Ho.contextType=ha;var Go={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},qo={draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},path:function(e,t){e.setPath(t)},visible:function(e,t){e.setVisible(t)}},Xo={};(0,t.memo)((function(e){var n=e.options,r=e.draggable,a=e.editable,o=e.visible,s=e.path,u=e.onDblClick,c=e.onDragEnd,l=e.onDragStart,d=e.onMouseDown,p=e.onMouseMove,f=e.onMouseOut,h=e.onMouseOver,m=e.onMouseUp,g=e.onRightClick,v=e.onClick,y=e.onDrag,b=e.onLoad,x=e.onUnmount,k=(0,t.useContext)(ha),w=(0,t.useState)(null),S=(0,i.Z)(w,2),C=S[0],E=S[1],T=(0,t.useState)(null),N=(0,i.Z)(T,2),_=N[0],I=N[1],R=(0,t.useState)(null),A=(0,i.Z)(R,2),O=A[0],P=A[1],D=(0,t.useState)(null),L=(0,i.Z)(D,2),M=L[0],F=L[1],B=(0,t.useState)(null),j=(0,i.Z)(B,2),z=j[0],V=j[1],W=(0,t.useState)(null),Z=(0,i.Z)(W,2),U=Z[0],H=Z[1],G=(0,t.useState)(null),q=(0,i.Z)(G,2),X=q[0],K=q[1],Y=(0,t.useState)(null),Q=(0,i.Z)(Y,2),$=Q[0],J=Q[1],ee=(0,t.useState)(null),te=(0,i.Z)(ee,2),ne=te[0],re=te[1],ae=(0,t.useState)(null),oe=(0,i.Z)(ae,2),ie=oe[0],se=oe[1],ue=(0,t.useState)(null),ce=(0,i.Z)(ue,2),le=ce[0],de=ce[1],pe=(0,t.useState)(null),fe=(0,i.Z)(pe,2),he=fe[0],me=fe[1];return(0,t.useEffect)((function(){null!==C&&C.setMap(k)}),[k]),(0,t.useEffect)((function(){"undefined"!==typeof n&&null!==C&&C.setOptions(n)}),[C,n]),(0,t.useEffect)((function(){"undefined"!==typeof r&&null!==C&&C.setDraggable(r)}),[C,r]),(0,t.useEffect)((function(){"undefined"!==typeof a&&null!==C&&C.setEditable(a)}),[C,a]),(0,t.useEffect)((function(){"undefined"!==typeof o&&null!==C&&C.setVisible(o)}),[C,o]),(0,t.useEffect)((function(){"undefined"!==typeof s&&null!==C&&C.setPath(s)}),[C,s]),(0,t.useEffect)((function(){C&&u&&(null!==_&&google.maps.event.removeListener(_),I(google.maps.event.addListener(C,"dblclick",u)))}),[u]),(0,t.useEffect)((function(){C&&c&&(null!==O&&google.maps.event.removeListener(O),P(google.maps.event.addListener(C,"dragend",c)))}),[c]),(0,t.useEffect)((function(){C&&l&&(null!==M&&google.maps.event.removeListener(M),F(google.maps.event.addListener(C,"dragstart",l)))}),[l]),(0,t.useEffect)((function(){C&&d&&(null!==z&&google.maps.event.removeListener(z),V(google.maps.event.addListener(C,"mousedown",d)))}),[d]),(0,t.useEffect)((function(){C&&p&&(null!==U&&google.maps.event.removeListener(U),H(google.maps.event.addListener(C,"mousemove",p)))}),[p]),(0,t.useEffect)((function(){C&&f&&(null!==X&&google.maps.event.removeListener(X),K(google.maps.event.addListener(C,"mouseout",f)))}),[f]),(0,t.useEffect)((function(){C&&h&&(null!==$&&google.maps.event.removeListener($),J(google.maps.event.addListener(C,"mouseover",h)))}),[h]),(0,t.useEffect)((function(){C&&m&&(null!==ne&&google.maps.event.removeListener(ne),re(google.maps.event.addListener(C,"mouseup",m)))}),[m]),(0,t.useEffect)((function(){C&&g&&(null!==ie&&google.maps.event.removeListener(ie),se(google.maps.event.addListener(C,"rightclick",g)))}),[g]),(0,t.useEffect)((function(){C&&v&&(null!==le&&google.maps.event.removeListener(le),de(google.maps.event.addListener(C,"click",v)))}),[v]),(0,t.useEffect)((function(){C&&y&&(null!==he&&google.maps.event.removeListener(he),me(google.maps.event.addListener(C,"drag",y)))}),[y]),(0,t.useEffect)((function(){var e=new google.maps.Polyline(Object.assign(Object.assign({},n||Xo),{map:k}));return s&&e.setPath(s),"undefined"!==typeof o&&e.setVisible(o),"undefined"!==typeof a&&e.setEditable(a),"undefined"!==typeof r&&e.setDraggable(r),u&&I(google.maps.event.addListener(e,"dblclick",u)),c&&P(google.maps.event.addListener(e,"dragend",c)),l&&F(google.maps.event.addListener(e,"dragstart",l)),d&&V(google.maps.event.addListener(e,"mousedown",d)),p&&H(google.maps.event.addListener(e,"mousemove",p)),f&&K(google.maps.event.addListener(e,"mouseout",f)),h&&J(google.maps.event.addListener(e,"mouseover",h)),m&&re(google.maps.event.addListener(e,"mouseup",m)),g&&se(google.maps.event.addListener(e,"rightclick",g)),v&&de(google.maps.event.addListener(e,"click",v)),y&&me(google.maps.event.addListener(e,"drag",y)),E(e),b&&b(e),function(){null!==_&&google.maps.event.removeListener(_),null!==O&&google.maps.event.removeListener(O),null!==M&&google.maps.event.removeListener(M),null!==z&&google.maps.event.removeListener(z),null!==U&&google.maps.event.removeListener(U),null!==X&&google.maps.event.removeListener(X),null!==$&&google.maps.event.removeListener($),null!==ne&&google.maps.event.removeListener(ne),null!==ie&&google.maps.event.removeListener(ie),null!==le&&google.maps.event.removeListener(le),x&&x(e),e.setMap(null)}}),[]),null}));var Ko=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={polyline:null},e.setPolylineCallback=function(){null!==e.state.polyline&&e.props.onLoad&&e.props.onLoad(e.state.polyline)},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=new google.maps.Polyline(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=ba({updaterMap:qo,eventMap:Go,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polyline:e}}),this.setPolylineCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.polyline&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:qo,eventMap:Go,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}},{key:"componentWillUnmount",value:function(){null!==this.state.polyline&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),ya(this.registeredEvents),this.state.polyline.setMap(null))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);Ko.contextType=ha;var Yo={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Qo={draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},path:function(e,t){e.setPath(t)},paths:function(e,t){e.setPaths(t)},visible:function(e,t){e.setVisible(t)}};(0,t.memo)((function(e){var n=e.options,r=e.draggable,a=e.editable,o=e.visible,s=e.path,u=e.paths,c=e.onDblClick,l=e.onDragEnd,d=e.onDragStart,p=e.onMouseDown,f=e.onMouseMove,h=e.onMouseOut,m=e.onMouseOver,g=e.onMouseUp,v=e.onRightClick,y=e.onClick,b=e.onDrag,x=e.onLoad,k=e.onUnmount,w=(0,t.useContext)(ha),S=(0,t.useState)(null),C=(0,i.Z)(S,2),E=C[0],T=C[1],N=(0,t.useState)(null),_=(0,i.Z)(N,2),I=_[0],R=_[1],A=(0,t.useState)(null),O=(0,i.Z)(A,2),P=O[0],D=O[1],L=(0,t.useState)(null),M=(0,i.Z)(L,2),F=M[0],B=M[1],j=(0,t.useState)(null),z=(0,i.Z)(j,2),V=z[0],W=z[1],Z=(0,t.useState)(null),U=(0,i.Z)(Z,2),H=U[0],G=U[1],q=(0,t.useState)(null),X=(0,i.Z)(q,2),K=X[0],Y=X[1],Q=(0,t.useState)(null),$=(0,i.Z)(Q,2),J=$[0],ee=$[1],te=(0,t.useState)(null),ne=(0,i.Z)(te,2),re=ne[0],ae=ne[1],oe=(0,t.useState)(null),ie=(0,i.Z)(oe,2),se=ie[0],ue=ie[1],ce=(0,t.useState)(null),le=(0,i.Z)(ce,2),de=le[0],pe=le[1],fe=(0,t.useState)(null),he=(0,i.Z)(fe,2),me=he[0],ge=he[1];return(0,t.useEffect)((function(){null!==E&&E.setMap(w)}),[w]),(0,t.useEffect)((function(){"undefined"!==typeof n&&null!==E&&E.setOptions(n)}),[E,n]),(0,t.useEffect)((function(){"undefined"!==typeof r&&null!==E&&E.setDraggable(r)}),[E,r]),(0,t.useEffect)((function(){"undefined"!==typeof a&&null!==E&&E.setEditable(a)}),[E,a]),(0,t.useEffect)((function(){"undefined"!==typeof o&&null!==E&&E.setVisible(o)}),[E,o]),(0,t.useEffect)((function(){"undefined"!==typeof s&&null!==E&&E.setPath(s)}),[E,s]),(0,t.useEffect)((function(){"undefined"!==typeof u&&null!==E&&E.setPaths(u)}),[E,u]),(0,t.useEffect)((function(){E&&c&&(null!==I&&google.maps.event.removeListener(I),R(google.maps.event.addListener(E,"dblclick",c)))}),[c]),(0,t.useEffect)((function(){E&&l&&(null!==P&&google.maps.event.removeListener(P),D(google.maps.event.addListener(E,"dragend",l)))}),[l]),(0,t.useEffect)((function(){E&&d&&(null!==F&&google.maps.event.removeListener(F),B(google.maps.event.addListener(E,"dragstart",d)))}),[d]),(0,t.useEffect)((function(){E&&p&&(null!==V&&google.maps.event.removeListener(V),W(google.maps.event.addListener(E,"mousedown",p)))}),[p]),(0,t.useEffect)((function(){E&&f&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(E,"mousemove",f)))}),[f]),(0,t.useEffect)((function(){E&&h&&(null!==K&&google.maps.event.removeListener(K),Y(google.maps.event.addListener(E,"mouseout",h)))}),[h]),(0,t.useEffect)((function(){E&&m&&(null!==J&&google.maps.event.removeListener(J),ee(google.maps.event.addListener(E,"mouseover",m)))}),[m]),(0,t.useEffect)((function(){E&&g&&(null!==re&&google.maps.event.removeListener(re),ae(google.maps.event.addListener(E,"mouseup",g)))}),[g]),(0,t.useEffect)((function(){E&&v&&(null!==se&&google.maps.event.removeListener(se),ue(google.maps.event.addListener(E,"rightclick",v)))}),[v]),(0,t.useEffect)((function(){E&&y&&(null!==de&&google.maps.event.removeListener(de),pe(google.maps.event.addListener(E,"click",y)))}),[y]),(0,t.useEffect)((function(){E&&b&&(null!==me&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(E,"drag",b)))}),[b]),(0,t.useEffect)((function(){var e=new google.maps.Polygon(Object.assign(Object.assign({},n||{}),{map:w}));return s&&e.setPath(s),u&&e.setPaths(u),"undefined"!==typeof o&&e.setVisible(o),"undefined"!==typeof a&&e.setEditable(a),"undefined"!==typeof r&&e.setDraggable(r),c&&R(google.maps.event.addListener(e,"dblclick",c)),l&&D(google.maps.event.addListener(e,"dragend",l)),d&&B(google.maps.event.addListener(e,"dragstart",d)),p&&W(google.maps.event.addListener(e,"mousedown",p)),f&&G(google.maps.event.addListener(e,"mousemove",f)),h&&Y(google.maps.event.addListener(e,"mouseout",h)),m&&ee(google.maps.event.addListener(e,"mouseover",m)),g&&ae(google.maps.event.addListener(e,"mouseup",g)),v&&ue(google.maps.event.addListener(e,"rightclick",v)),y&&pe(google.maps.event.addListener(e,"click",y)),b&&ge(google.maps.event.addListener(e,"drag",b)),T(e),x&&x(e),function(){null!==I&&google.maps.event.removeListener(I),null!==P&&google.maps.event.removeListener(P),null!==F&&google.maps.event.removeListener(F),null!==V&&google.maps.event.removeListener(V),null!==H&&google.maps.event.removeListener(H),null!==K&&google.maps.event.removeListener(K),null!==J&&google.maps.event.removeListener(J),null!==re&&google.maps.event.removeListener(re),null!==se&&google.maps.event.removeListener(se),null!==de&&google.maps.event.removeListener(de),k&&k(e),e.setMap(null)}}),[]),null}));var $o=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={polygon:null},e.setPolygonCallback=function(){null!==e.state.polygon&&e.props.onLoad&&e.props.onLoad(e.state.polygon)},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=new google.maps.Polygon(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=ba({updaterMap:Qo,eventMap:Yo,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polygon:e}}),this.setPolygonCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.polygon&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:Qo,eventMap:Yo,prevProps:e,nextProps:this.props,instance:this.state.polygon}))}},{key:"componentWillUnmount",value:function(){null!==this.state.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.state.polygon),ya(this.registeredEvents),this.state.polygon&&this.state.polygon.setMap(null))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);$o.contextType=ha;var Jo={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},ei={bounds:function(e,t){e.setBounds(t)},draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},visible:function(e,t){e.setVisible(t)}};(0,t.memo)((function(e){var n=e.options,r=e.bounds,a=e.draggable,o=e.editable,s=e.visible,u=e.onDblClick,c=e.onDragEnd,l=e.onDragStart,d=e.onMouseDown,p=e.onMouseMove,f=e.onMouseOut,h=e.onMouseOver,m=e.onMouseUp,g=e.onRightClick,v=e.onClick,y=e.onDrag,b=e.onBoundsChanged,x=e.onLoad,k=e.onUnmount,w=(0,t.useContext)(ha),S=(0,t.useState)(null),C=(0,i.Z)(S,2),E=C[0],T=C[1],N=(0,t.useState)(null),_=(0,i.Z)(N,2),I=_[0],R=_[1],A=(0,t.useState)(null),O=(0,i.Z)(A,2),P=O[0],D=O[1],L=(0,t.useState)(null),M=(0,i.Z)(L,2),F=M[0],B=M[1],j=(0,t.useState)(null),z=(0,i.Z)(j,2),V=z[0],W=z[1],Z=(0,t.useState)(null),U=(0,i.Z)(Z,2),H=U[0],G=U[1],q=(0,t.useState)(null),X=(0,i.Z)(q,2),K=X[0],Y=X[1],Q=(0,t.useState)(null),$=(0,i.Z)(Q,2),J=$[0],ee=$[1],te=(0,t.useState)(null),ne=(0,i.Z)(te,2),re=ne[0],ae=ne[1],oe=(0,t.useState)(null),ie=(0,i.Z)(oe,2),se=ie[0],ue=ie[1],ce=(0,t.useState)(null),le=(0,i.Z)(ce,2),de=le[0],pe=le[1],fe=(0,t.useState)(null),he=(0,i.Z)(fe,2),me=he[0],ge=he[1],ve=(0,t.useState)(null),ye=(0,i.Z)(ve,2),be=ye[0],xe=ye[1];return(0,t.useEffect)((function(){null!==E&&E.setMap(w)}),[w]),(0,t.useEffect)((function(){"undefined"!==typeof n&&null!==E&&E.setOptions(n)}),[E,n]),(0,t.useEffect)((function(){"undefined"!==typeof a&&null!==E&&E.setDraggable(a)}),[E,a]),(0,t.useEffect)((function(){"undefined"!==typeof o&&null!==E&&E.setEditable(o)}),[E,o]),(0,t.useEffect)((function(){"undefined"!==typeof s&&null!==E&&E.setVisible(s)}),[E,s]),(0,t.useEffect)((function(){"undefined"!==typeof r&&null!==E&&E.setBounds(r)}),[E,r]),(0,t.useEffect)((function(){E&&u&&(null!==I&&google.maps.event.removeListener(I),R(google.maps.event.addListener(E,"dblclick",u)))}),[u]),(0,t.useEffect)((function(){E&&c&&(null!==P&&google.maps.event.removeListener(P),D(google.maps.event.addListener(E,"dragend",c)))}),[c]),(0,t.useEffect)((function(){E&&l&&(null!==F&&google.maps.event.removeListener(F),B(google.maps.event.addListener(E,"dragstart",l)))}),[l]),(0,t.useEffect)((function(){E&&d&&(null!==V&&google.maps.event.removeListener(V),W(google.maps.event.addListener(E,"mousedown",d)))}),[d]),(0,t.useEffect)((function(){E&&p&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(E,"mousemove",p)))}),[p]),(0,t.useEffect)((function(){E&&f&&(null!==K&&google.maps.event.removeListener(K),Y(google.maps.event.addListener(E,"mouseout",f)))}),[f]),(0,t.useEffect)((function(){E&&h&&(null!==J&&google.maps.event.removeListener(J),ee(google.maps.event.addListener(E,"mouseover",h)))}),[h]),(0,t.useEffect)((function(){E&&m&&(null!==re&&google.maps.event.removeListener(re),ae(google.maps.event.addListener(E,"mouseup",m)))}),[m]),(0,t.useEffect)((function(){E&&g&&(null!==se&&google.maps.event.removeListener(se),ue(google.maps.event.addListener(E,"rightclick",g)))}),[g]),(0,t.useEffect)((function(){E&&v&&(null!==de&&google.maps.event.removeListener(de),pe(google.maps.event.addListener(E,"click",v)))}),[v]),(0,t.useEffect)((function(){E&&y&&(null!==me&&google.maps.event.removeListener(me),ge(google.maps.event.addListener(E,"drag",y)))}),[y]),(0,t.useEffect)((function(){E&&b&&(null!==be&&google.maps.event.removeListener(be),xe(google.maps.event.addListener(E,"bounds_changed",b)))}),[b]),(0,t.useEffect)((function(){var e=new google.maps.Rectangle(Object.assign(Object.assign({},n||{}),{map:w}));return"undefined"!==typeof s&&e.setVisible(s),"undefined"!==typeof o&&e.setEditable(o),"undefined"!==typeof a&&e.setDraggable(a),"undefined"!==typeof r&&e.setBounds(r),u&&R(google.maps.event.addListener(e,"dblclick",u)),c&&D(google.maps.event.addListener(e,"dragend",c)),l&&B(google.maps.event.addListener(e,"dragstart",l)),d&&W(google.maps.event.addListener(e,"mousedown",d)),p&&G(google.maps.event.addListener(e,"mousemove",p)),f&&Y(google.maps.event.addListener(e,"mouseout",f)),h&&ee(google.maps.event.addListener(e,"mouseover",h)),m&&ae(google.maps.event.addListener(e,"mouseup",m)),g&&ue(google.maps.event.addListener(e,"rightclick",g)),v&&pe(google.maps.event.addListener(e,"click",v)),y&&ge(google.maps.event.addListener(e,"drag",y)),b&&xe(google.maps.event.addListener(e,"bounds_changed",b)),T(e),x&&x(e),function(){null!==I&&google.maps.event.removeListener(I),null!==P&&google.maps.event.removeListener(P),null!==F&&google.maps.event.removeListener(F),null!==V&&google.maps.event.removeListener(V),null!==H&&google.maps.event.removeListener(H),null!==K&&google.maps.event.removeListener(K),null!==J&&google.maps.event.removeListener(J),null!==re&&google.maps.event.removeListener(re),null!==se&&google.maps.event.removeListener(se),null!==de&&google.maps.event.removeListener(de),null!==me&&google.maps.event.removeListener(me),null!==be&&google.maps.event.removeListener(be),k&&k(e),e.setMap(null)}}),[]),null}));var ti=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={rectangle:null},e.setRectangleCallback=function(){null!==e.state.rectangle&&e.props.onLoad&&e.props.onLoad(e.state.rectangle)},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=new google.maps.Rectangle(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=ba({updaterMap:ei,eventMap:Jo,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{rectangle:e}}),this.setRectangleCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.rectangle&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:ei,eventMap:Jo,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}},{key:"componentWillUnmount",value:function(){null!==this.state.rectangle&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),ya(this.registeredEvents),this.state.rectangle.setMap(null))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);ti.contextType=ha;var ni={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},ri={center:function(e,t){e.setCenter(t)},draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},radius:function(e,t){e.setRadius(t)},visible:function(e,t){e.setVisible(t)}},ai={};(0,t.memo)((function(e){var n=e.options,r=e.center,a=e.radius,o=e.draggable,s=e.editable,u=e.visible,c=e.onDblClick,l=e.onDragEnd,d=e.onDragStart,p=e.onMouseDown,f=e.onMouseMove,h=e.onMouseOut,m=e.onMouseOver,g=e.onMouseUp,v=e.onRightClick,y=e.onClick,b=e.onDrag,x=e.onCenterChanged,k=e.onRadiusChanged,w=e.onLoad,S=e.onUnmount,C=(0,t.useContext)(ha),E=(0,t.useState)(null),T=(0,i.Z)(E,2),N=T[0],_=T[1],I=(0,t.useState)(null),R=(0,i.Z)(I,2),A=R[0],O=R[1],P=(0,t.useState)(null),D=(0,i.Z)(P,2),L=D[0],M=D[1],F=(0,t.useState)(null),B=(0,i.Z)(F,2),j=B[0],z=B[1],V=(0,t.useState)(null),W=(0,i.Z)(V,2),Z=W[0],U=W[1],H=(0,t.useState)(null),G=(0,i.Z)(H,2),q=G[0],X=G[1],K=(0,t.useState)(null),Y=(0,i.Z)(K,2),Q=Y[0],$=Y[1],J=(0,t.useState)(null),ee=(0,i.Z)(J,2),te=ee[0],ne=ee[1],re=(0,t.useState)(null),ae=(0,i.Z)(re,2),oe=ae[0],ie=ae[1],se=(0,t.useState)(null),ue=(0,i.Z)(se,2),ce=ue[0],le=ue[1],de=(0,t.useState)(null),pe=(0,i.Z)(de,2),fe=pe[0],he=pe[1],me=(0,t.useState)(null),ge=(0,i.Z)(me,2),ve=ge[0],ye=ge[1],be=(0,t.useState)(null),xe=(0,i.Z)(be,2),ke=xe[0],we=xe[1],Se=(0,t.useState)(null),Ce=(0,i.Z)(Se,2),Ee=Ce[0],Te=Ce[1];return(0,t.useEffect)((function(){null!==N&&N.setMap(C)}),[C]),(0,t.useEffect)((function(){"undefined"!==typeof n&&null!==N&&N.setOptions(n)}),[N,n]),(0,t.useEffect)((function(){"undefined"!==typeof o&&null!==N&&N.setDraggable(o)}),[N,o]),(0,t.useEffect)((function(){"undefined"!==typeof s&&null!==N&&N.setEditable(s)}),[N,s]),(0,t.useEffect)((function(){"undefined"!==typeof u&&null!==N&&N.setVisible(u)}),[N,u]),(0,t.useEffect)((function(){"number"===typeof a&&null!==N&&N.setRadius(a)}),[N,a]),(0,t.useEffect)((function(){"undefined"!==typeof r&&null!==N&&N.setCenter(r)}),[N,r]),(0,t.useEffect)((function(){N&&c&&(null!==A&&google.maps.event.removeListener(A),O(google.maps.event.addListener(N,"dblclick",c)))}),[c]),(0,t.useEffect)((function(){N&&l&&(null!==L&&google.maps.event.removeListener(L),M(google.maps.event.addListener(N,"dragend",l)))}),[l]),(0,t.useEffect)((function(){N&&d&&(null!==j&&google.maps.event.removeListener(j),z(google.maps.event.addListener(N,"dragstart",d)))}),[d]),(0,t.useEffect)((function(){N&&p&&(null!==Z&&google.maps.event.removeListener(Z),U(google.maps.event.addListener(N,"mousedown",p)))}),[p]),(0,t.useEffect)((function(){N&&f&&(null!==q&&google.maps.event.removeListener(q),X(google.maps.event.addListener(N,"mousemove",f)))}),[f]),(0,t.useEffect)((function(){N&&h&&(null!==Q&&google.maps.event.removeListener(Q),$(google.maps.event.addListener(N,"mouseout",h)))}),[h]),(0,t.useEffect)((function(){N&&m&&(null!==te&&google.maps.event.removeListener(te),ne(google.maps.event.addListener(N,"mouseover",m)))}),[m]),(0,t.useEffect)((function(){N&&g&&(null!==oe&&google.maps.event.removeListener(oe),ie(google.maps.event.addListener(N,"mouseup",g)))}),[g]),(0,t.useEffect)((function(){N&&v&&(null!==ce&&google.maps.event.removeListener(ce),le(google.maps.event.addListener(N,"rightclick",v)))}),[v]),(0,t.useEffect)((function(){N&&y&&(null!==fe&&google.maps.event.removeListener(fe),he(google.maps.event.addListener(N,"click",y)))}),[y]),(0,t.useEffect)((function(){N&&b&&(null!==ve&&google.maps.event.removeListener(ve),ye(google.maps.event.addListener(N,"drag",b)))}),[b]),(0,t.useEffect)((function(){N&&x&&(null!==ke&&google.maps.event.removeListener(ke),we(google.maps.event.addListener(N,"center_changed",x)))}),[y]),(0,t.useEffect)((function(){N&&k&&(null!==Ee&&google.maps.event.removeListener(Ee),Te(google.maps.event.addListener(N,"radius_changed",k)))}),[k]),(0,t.useEffect)((function(){var e=new google.maps.Circle(Object.assign(Object.assign({},n||ai),{map:C}));return"number"===typeof a&&e.setRadius(a),"undefined"!==typeof r&&e.setCenter(r),"number"===typeof a&&e.setRadius(a),"undefined"!==typeof u&&e.setVisible(u),"undefined"!==typeof s&&e.setEditable(s),"undefined"!==typeof o&&e.setDraggable(o),c&&O(google.maps.event.addListener(e,"dblclick",c)),l&&M(google.maps.event.addListener(e,"dragend",l)),d&&z(google.maps.event.addListener(e,"dragstart",d)),p&&U(google.maps.event.addListener(e,"mousedown",p)),f&&X(google.maps.event.addListener(e,"mousemove",f)),h&&$(google.maps.event.addListener(e,"mouseout",h)),m&&ne(google.maps.event.addListener(e,"mouseover",m)),g&&ie(google.maps.event.addListener(e,"mouseup",g)),v&&le(google.maps.event.addListener(e,"rightclick",v)),y&&he(google.maps.event.addListener(e,"click",y)),b&&ye(google.maps.event.addListener(e,"drag",b)),x&&we(google.maps.event.addListener(e,"center_changed",x)),k&&Te(google.maps.event.addListener(e,"radius_changed",k)),_(e),w&&w(e),function(){null!==A&&google.maps.event.removeListener(A),null!==L&&google.maps.event.removeListener(L),null!==j&&google.maps.event.removeListener(j),null!==Z&&google.maps.event.removeListener(Z),null!==q&&google.maps.event.removeListener(q),null!==Q&&google.maps.event.removeListener(Q),null!==te&&google.maps.event.removeListener(te),null!==oe&&google.maps.event.removeListener(oe),null!==ce&&google.maps.event.removeListener(ce),null!==fe&&google.maps.event.removeListener(fe),null!==ke&&google.maps.event.removeListener(ke),null!==Ee&&google.maps.event.removeListener(Ee),S&&S(e),e.setMap(null)}}),[]),null}));var oi=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={circle:null},e.setCircleCallback=function(){null!==e.state.circle&&e.props.onLoad&&e.props.onLoad(e.state.circle)},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=new google.maps.Circle(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=ba({updaterMap:ri,eventMap:ni,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{circle:e}}),this.setCircleCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.circle&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:ri,eventMap:ni,prevProps:e,nextProps:this.props,instance:this.state.circle}))}},{key:"componentWillUnmount",value:function(){null!==this.state.circle&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),ya(this.registeredEvents),this.state.circle&&this.state.circle.setMap(null))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);oi.contextType=ha;var ii={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},si={add:function(e,t){e.add(t)},addgeojson:function(e,t,n){e.addGeoJson(t,n)},contains:function(e,t){e.contains(t)},foreach:function(e,t){e.forEach(t)},loadgeojson:function(e,t,n,r){e.loadGeoJson(t,n,r)},overridestyle:function(e,t,n){e.overrideStyle(t,n)},remove:function(e,t){e.remove(t)},revertstyle:function(e,t){e.revertStyle(t)},controlposition:function(e,t){e.setControlPosition(t)},controls:function(e,t){e.setControls(t)},drawingmode:function(e,t){e.setDrawingMode(t)},map:function(e,t){e.setMap(t)},style:function(e,t){e.setStyle(t)},togeojson:function(e,t){e.toGeoJson(t)}};(0,t.memo)((function(e){var n=e.options,r=e.onClick,a=e.onDblClick,o=e.onMouseDown,s=e.onMouseMove,u=e.onMouseOut,c=e.onMouseOver,l=e.onMouseUp,d=e.onRightClick,p=e.onAddFeature,f=e.onRemoveFeature,h=e.onRemoveProperty,m=e.onSetGeometry,g=e.onSetProperty,v=e.onLoad,y=e.onUnmount,b=(0,t.useContext)(ha),x=(0,t.useState)(null),k=(0,i.Z)(x,2),w=k[0],S=k[1],C=(0,t.useState)(null),E=(0,i.Z)(C,2),T=E[0],N=E[1],_=(0,t.useState)(null),I=(0,i.Z)(_,2),R=I[0],A=I[1],O=(0,t.useState)(null),P=(0,i.Z)(O,2),D=P[0],L=P[1],M=(0,t.useState)(null),F=(0,i.Z)(M,2),B=F[0],j=F[1],z=(0,t.useState)(null),V=(0,i.Z)(z,2),W=V[0],Z=V[1],U=(0,t.useState)(null),H=(0,i.Z)(U,2),G=H[0],q=H[1],X=(0,t.useState)(null),K=(0,i.Z)(X,2),Y=K[0],Q=K[1],$=(0,t.useState)(null),J=(0,i.Z)($,2),ee=J[0],te=J[1],ne=(0,t.useState)(null),re=(0,i.Z)(ne,2),ae=re[0],oe=re[1],ie=(0,t.useState)(null),se=(0,i.Z)(ie,2),ue=se[0],ce=se[1],le=(0,t.useState)(null),de=(0,i.Z)(le,2),pe=de[0],fe=de[1],he=(0,t.useState)(null),me=(0,i.Z)(he,2),ge=me[0],ve=me[1],ye=(0,t.useState)(null),be=(0,i.Z)(ye,2),xe=be[0],ke=be[1];return(0,t.useEffect)((function(){null!==w&&w.setMap(b)}),[b]),(0,t.useEffect)((function(){w&&a&&(null!==T&&google.maps.event.removeListener(T),N(google.maps.event.addListener(w,"dblclick",a)))}),[a]),(0,t.useEffect)((function(){w&&o&&(null!==R&&google.maps.event.removeListener(R),A(google.maps.event.addListener(w,"mousedown",o)))}),[o]),(0,t.useEffect)((function(){w&&s&&(null!==D&&google.maps.event.removeListener(D),L(google.maps.event.addListener(w,"mousemove",s)))}),[s]),(0,t.useEffect)((function(){w&&u&&(null!==B&&google.maps.event.removeListener(B),j(google.maps.event.addListener(w,"mouseout",u)))}),[u]),(0,t.useEffect)((function(){w&&c&&(null!==W&&google.maps.event.removeListener(W),Z(google.maps.event.addListener(w,"mouseover",c)))}),[c]),(0,t.useEffect)((function(){w&&l&&(null!==G&&google.maps.event.removeListener(G),q(google.maps.event.addListener(w,"mouseup",l)))}),[l]),(0,t.useEffect)((function(){w&&d&&(null!==Y&&google.maps.event.removeListener(Y),Q(google.maps.event.addListener(w,"rightclick",d)))}),[d]),(0,t.useEffect)((function(){w&&r&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(w,"click",r)))}),[r]),(0,t.useEffect)((function(){w&&p&&(null!==ae&&google.maps.event.removeListener(ae),oe(google.maps.event.addListener(w,"addfeature",p)))}),[p]),(0,t.useEffect)((function(){w&&f&&(null!==ue&&google.maps.event.removeListener(ue),ce(google.maps.event.addListener(w,"removefeature",f)))}),[f]),(0,t.useEffect)((function(){w&&h&&(null!==pe&&google.maps.event.removeListener(pe),fe(google.maps.event.addListener(w,"removeproperty",h)))}),[h]),(0,t.useEffect)((function(){w&&m&&(null!==ge&&google.maps.event.removeListener(ge),ve(google.maps.event.addListener(w,"setgeometry",m)))}),[m]),(0,t.useEffect)((function(){w&&g&&(null!==xe&&google.maps.event.removeListener(xe),ke(google.maps.event.addListener(w,"setproperty",g)))}),[g]),(0,t.useEffect)((function(){if(null!==b){var e=new google.maps.Data(Object.assign(Object.assign({},n||{}),{map:b}));a&&N(google.maps.event.addListener(e,"dblclick",a)),o&&A(google.maps.event.addListener(e,"mousedown",o)),s&&L(google.maps.event.addListener(e,"mousemove",s)),u&&j(google.maps.event.addListener(e,"mouseout",u)),c&&Z(google.maps.event.addListener(e,"mouseover",c)),l&&q(google.maps.event.addListener(e,"mouseup",l)),d&&Q(google.maps.event.addListener(e,"rightclick",d)),r&&te(google.maps.event.addListener(e,"click",r)),p&&oe(google.maps.event.addListener(e,"addfeature",p)),f&&ce(google.maps.event.addListener(e,"removefeature",f)),h&&fe(google.maps.event.addListener(e,"removeproperty",h)),m&&ve(google.maps.event.addListener(e,"setgeometry",m)),g&&ke(google.maps.event.addListener(e,"setproperty",g)),S(e),v&&v(e)}return function(){w&&(null!==T&&google.maps.event.removeListener(T),null!==R&&google.maps.event.removeListener(R),null!==D&&google.maps.event.removeListener(D),null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),null!==G&&google.maps.event.removeListener(G),null!==Y&&google.maps.event.removeListener(Y),null!==ee&&google.maps.event.removeListener(ee),null!==ae&&google.maps.event.removeListener(ae),null!==ue&&google.maps.event.removeListener(ue),null!==pe&&google.maps.event.removeListener(pe),null!==ge&&google.maps.event.removeListener(ge),null!==xe&&google.maps.event.removeListener(xe),y&&y(w),w.setMap(null))}}),[]),null}));var ui=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={data:null},e.setDataCallback=function(){null!==e.state.data&&e.props.onLoad&&e.props.onLoad(e.state.data)},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){if(null!==this.context){var e=new google.maps.Data(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=ba({updaterMap:si,eventMap:ii,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{data:e}}),this.setDataCallback)}}},{key:"componentDidUpdate",value:function(e){null!==this.state.data&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:si,eventMap:ii,prevProps:e,nextProps:this.props,instance:this.state.data}))}},{key:"componentWillUnmount",value:function(){null!==this.state.data&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),ya(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);ui.contextType=ha;var ci={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},li={options:function(e,t){e.setOptions(t)},url:function(e,t){e.setUrl(t)},zIndex:function(e,t){e.setZIndex(t)}},di=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={kmlLayer:null},e.setKmlLayerCallback=function(){null!==e.state.kmlLayer&&e.props.onLoad&&e.props.onLoad(e.state.kmlLayer)},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=new google.maps.KmlLayer(Object.assign(Object.assign({},this.props.options),{map:this.context}));this.registeredEvents=ba({updaterMap:li,eventMap:ci,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{kmlLayer:e}}),this.setKmlLayerCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.kmlLayer&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:li,eventMap:ci,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}},{key:"componentWillUnmount",value:function(){null!==this.state.kmlLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),ya(this.registeredEvents),this.state.kmlLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);function pi(e,t){return"function"===typeof t?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function fi(e,t){return new t(e.lat,e.lng)}function hi(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function mi(e,t,n,r){return void 0!==n?function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n.getNorthEast()),a=e&&e.fromLatLngToDivPixel(n.getSouthWest());return r&&a?{left:"".concat(a.x+t.x,"px"),top:"".concat(r.y+t.y,"px"),width:"".concat(r.x-a.x-t.x,"px"),height:"".concat(a.y-r.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}(e,t,(a=n,o=google.maps.LatLngBounds,i=hi,a instanceof o?a:i(a,o))):function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n);if(r){var a=r.x,o=r.y;return{left:"".concat(a+t.x,"px"),top:"".concat(o+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}(e,t,function(e,t,n){return e instanceof t?e:n(e,t)}(r,google.maps.LatLng,fi));var a,o,i}function gi(e){return e?(e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng))+"":""}function vi(e){return e?(e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west)))+"":""}di.contextType=ha;(0,t.memo)((function(e){var n=e.position,r=e.bounds,a=e.mapPaneName,o=e.zIndex,s=e.onLoad,u=e.onUnmount,c=e.getPixelPositionOffset,l=e.children,d=(0,t.useContext)(ha),p=(0,t.useMemo)((function(){var e=document.createElement("div");return e.style.position="absolute",e}),[]),f=(0,t.useMemo)((function(){return function(e,t,n,r,a){var o=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e,r,a,o){var i;return(0,Je.Z)(this,n),(i=t.call(this)).container=e,i.pane=r,i.position=a,i.bounds=o,i}return(0,et.Z)(n,[{key:"onAdd",value:function(){var e,t=null===(e=this.getPanes())||void 0===e?void 0:e[this.pane];null===t||void 0===t||t.appendChild(this.container)}},{key:"draw",value:function(){for(var e=mi(this.getProjection(),Object.assign({},this.container?pi(this.container,a):{x:0,y:0}),this.bounds,this.position),t=0,n=Object.entries(e);t<n.length;t++){var r=(0,i.Z)(n[t],2),o=r[0],s=r[1];this.container.style[o]=s}}},{key:"onRemove",value:function(){null!==this.container.parentNode&&this.container.parentNode.removeChild(this.container)}}]),n}(google.maps.OverlayView);return new o(e,t,n,r)}(p,a,n,r,c)}),[p,a,n,r]);return(0,t.useEffect)((function(){return null===s||void 0===s||s(f),null===f||void 0===f||f.setMap(d),function(){null===u||void 0===u||u(f),null===f||void 0===f||f.setMap(null)}}),[d,f]),(0,t.useEffect)((function(){p.style.zIndex="".concat(o)}),[o,p]),pa.createPortal(l,p)}));var yi=function(e){(0,nt.Z)(r,e);var n=(0,rt.Z)(r);function r(e){var a;(0,Je.Z)(this,r),(a=n.call(this,e)).state={paneEl:null,containerStyle:{position:"absolute"}},a.updatePane=function(){var e=a.props.mapPaneName,t=a.overlayView.getPanes();fa(!!e,"OverlayView requires props.mapPaneName but got %s",e),t?a.setState({paneEl:t[e]}):a.setState({paneEl:null})},a.onAdd=function(){var e,t;a.updatePane(),null===(t=(e=a.props).onLoad)||void 0===t||t.call(e,a.overlayView)},a.onPositionElement=function(){var e=mi(a.overlayView.getProjection(),Object.assign({x:0,y:0},a.containerRef.current?pi(a.containerRef.current,a.props.getPixelPositionOffset):{}),a.props.bounds,a.props.position),t=a.state.containerStyle;(function(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.height&&e.height===t.height})(e,{left:t.left,top:t.top,width:t.width,height:t.height})||a.setState({containerStyle:Object.assign(Object.assign({},e),{position:"absolute"})})},a.draw=function(){a.onPositionElement()},a.onRemove=function(){var e,t;a.setState((function(){return{paneEl:null}})),null===(t=(e=a.props).onUnmount)||void 0===t||t.call(e,a.overlayView)},a.containerRef=(0,t.createRef)();var o=new google.maps.OverlayView;return o.onAdd=a.onAdd,o.draw=a.draw,o.onRemove=a.onRemove,a.overlayView=o,a}return(0,et.Z)(r,[{key:"componentDidMount",value:function(){this.overlayView.setMap(this.context)}},{key:"componentDidUpdate",value:function(e){var t=gi(e.position),n=gi(this.props.position),r=vi(e.bounds),a=vi(this.props.bounds);t===n&&r===a||this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}},{key:"componentWillUnmount",value:function(){this.overlayView.setMap(null)}},{key:"render",value:function(){var e=this.state.paneEl;return e?pa.createPortal((0,We.jsx)("div",Object.assign({ref:this.containerRef,style:this.state.containerStyle},{children:t.Children.only(this.props.children)})),e):null}}]),r}(t.PureComponent);yi.FLOAT_PANE="floatPane",yi.MAP_PANE="mapPane",yi.MARKER_LAYER="markerLayer",yi.OVERLAY_LAYER="overlayLayer",yi.OVERLAY_MOUSE_TARGET="overlayMouseTarget",yi.contextType=ha;var bi={onDblClick:"dblclick",onClick:"click"},xi={opacity:function(e,t){e.setOpacity(t)}};(0,t.memo)((function(e){var n=e.url,r=e.bounds,a=e.options,o=e.visible,i=(0,t.useContext)(ha),s=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east)),u=(0,t.useMemo)((function(){return new google.maps.GroundOverlay(n,s,Object.assign({},a))}),[]);return(0,t.useEffect)((function(){null!==u&&u.setMap(i)}),[i]),(0,t.useEffect)((function(){"undefined"!==typeof n&&null!==u&&(u.set("url",n),u.setMap(i))}),[u,n]),(0,t.useEffect)((function(){"undefined"!==typeof o&&null!==u&&u.setOpacity(o?1:0)}),[u,o]),(0,t.useEffect)((function(){var e=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east));"undefined"!==typeof r&&null!==u&&(u.set("bounds",e),u.setMap(i))}),[u,r]),null}));var ki=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={groundOverlay:null},e.setGroundOverlayCallback=function(){null!==e.state.groundOverlay&&e.props.onLoad&&e.props.onLoad(e.state.groundOverlay)},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){fa(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,Object.assign(Object.assign({},this.props.options),{map:this.context}));this.registeredEvents=ba({updaterMap:xi,eventMap:bi,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{groundOverlay:e}}),this.setGroundOverlayCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.groundOverlay&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:xi,eventMap:bi,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}},{key:"componentWillUnmount",value:function(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);ki.defaultProps={onLoad:function(){}},ki.contextType=ha;var wi={},Si={data:function(e,t){e.setData(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var n=e.data,r=e.onLoad,a=e.onUnmount,o=e.options,s=(0,t.useContext)(ha),u=(0,t.useState)(null),c=(0,i.Z)(u,2),l=c[0],d=c[1];return(0,t.useEffect)((function(){google.maps.visualization||fa(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)}),[]),(0,t.useEffect)((function(){fa(!!n,"data property is required in HeatmapLayer %s",n)}),[n]),(0,t.useEffect)((function(){null!==l&&l.setMap(s)}),[s]),(0,t.useEffect)((function(){o&&null!==l&&l.setOptions(o)}),[l,o]),(0,t.useEffect)((function(){var e=new google.maps.visualization.HeatmapLayer(Object.assign(Object.assign({},o||{}),{data:n,map:s}));return d(e),r&&r(e),function(){null!==l&&(a&&a(l),l.setMap(null))}}),[]),null}));var Ci=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={heatmapLayer:null},e.setHeatmapLayerCallback=function(){null!==e.state.heatmapLayer&&e.props.onLoad&&e.props.onLoad(e.state.heatmapLayer)},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){fa(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),fa(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Object.assign(Object.assign({},this.props.options||{}),{data:this.props.data,map:this.context}));this.registeredEvents=ba({updaterMap:Si,eventMap:wi,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{heatmapLayer:e}}),this.setHeatmapLayerCallback)}},{key:"componentDidUpdate",value:function(e){ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:Si,eventMap:wi,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}},{key:"componentWillUnmount",value:function(){null!==this.state.heatmapLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),ya(this.registeredEvents),this.state.heatmapLayer.setMap(null))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);Ci.contextType=ha;var Ei={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},Ti={register:function(e,t,n){e.registerPanoProvider(t,n)},links:function(e,t){e.setLinks(t)},motionTracking:function(e,t){e.setMotionTracking(t)},options:function(e,t){e.setOptions(t)},pano:function(e,t){e.setPano(t)},position:function(e,t){e.setPosition(t)},pov:function(e,t){e.setPov(t)},visible:function(e,t){e.setVisible(t)},zoom:function(e,t){e.setZoom(t)}},Ni=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={streetViewPanorama:null},e.setStreetViewPanoramaCallback=function(){null!==e.state.streetViewPanorama&&e.props.onLoad&&e.props.onLoad(e.state.streetViewPanorama)},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=this.context.getStreetView();this.registeredEvents=ba({updaterMap:Ti,eventMap:Ei,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{streetViewPanorama:e}}),this.setStreetViewPanoramaCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.streetViewPanorama&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:Ti,eventMap:Ei,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}},{key:"componentWillUnmount",value:function(){null!==this.state.streetViewPanorama&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),ya(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);Ni.contextType=ha;var _i=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).state={streetViewService:null},e.setStreetViewServiceCallback=function(){null!==e.state.streetViewService&&e.props.onLoad&&e.props.onLoad(e.state.streetViewService)},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=new google.maps.StreetViewService;this.setState((function(){return{streetViewService:e}}),this.setStreetViewServiceCallback)}},{key:"componentWillUnmount",value:function(){null!==this.state.streetViewService&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}},{key:"render",value:function(){return null}}]),n}(t.PureComponent);_i.contextType=ha;t.PureComponent;var Ii={onDirectionsChanged:"directions_changed"},Ri={directions:function(e,t){e.setDirections(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},panel:function(e,t){e.setPanel(t)},routeIndex:function(e,t){e.setRouteIndex(t)}},Ai=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.apply(this,arguments)).registeredEvents=[],e.state={directionsRenderer:null},e.setDirectionsRendererCallback=function(){null!==e.state.directionsRenderer&&(e.state.directionsRenderer.setMap(e.context),e.props.onLoad&&e.props.onLoad(e.state.directionsRenderer))},e}return(0,et.Z)(n,[{key:"componentDidMount",value:function(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=ba({updaterMap:Ri,eventMap:Ii,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{directionsRenderer:e}}),this.setDirectionsRendererCallback)}},{key:"componentDidUpdate",value:function(e){null!==this.state.directionsRenderer&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:Ri,eventMap:Ii,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}},{key:"componentWillUnmount",value:function(){null!==this.state.directionsRenderer&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),ya(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}},{key:"render",value:function(){return(0,We.jsx)(We.Fragment,{})}}]),n}(t.PureComponent);Ai.contextType=ha;t.PureComponent;var Oi={onPlacesChanged:"places_changed"},Pi={bounds:function(e,t){e.setBounds(t)}},Di=function(e){(0,nt.Z)(r,e);var n=(0,rt.Z)(r);function r(){var e;return(0,Je.Z)(this,r),(e=n.apply(this,arguments)).registeredEvents=[],e.containerElement=(0,t.createRef)(),e.state={searchBox:null},e.setSearchBoxCallback=function(){null!==e.state.searchBox&&e.props.onLoad&&e.props.onLoad(e.state.searchBox)},e}return(0,et.Z)(r,[{key:"componentDidMount",value:function(){if(fa(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),null!==this.containerElement&&null!==this.containerElement.current){var e=this.containerElement.current.querySelector("input");if(null!==e){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=ba({updaterMap:Pi,eventMap:Oi,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{searchBox:t}}),this.setSearchBoxCallback)}}}},{key:"componentDidUpdate",value:function(e){null!==this.state.searchBox&&(ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:Pi,eventMap:Oi,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}},{key:"componentWillUnmount",value:function(){null!==this.state.searchBox&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),ya(this.registeredEvents))}},{key:"render",value:function(){return(0,We.jsx)("div",Object.assign({ref:this.containerElement},{children:t.Children.only(this.props.children)}))}}]),r}(t.PureComponent);Di.contextType=ha;var Li={onPlaceChanged:"place_changed"},Mi={bounds:function(e,t){e.setBounds(t)},restrictions:function(e,t){e.setComponentRestrictions(t)},fields:function(e,t){e.setFields(t)},options:function(e,t){e.setOptions(t)},types:function(e,t){e.setTypes(t)}},Fi=function(e){(0,nt.Z)(r,e);var n=(0,rt.Z)(r);function r(){var e;return(0,Je.Z)(this,r),(e=n.apply(this,arguments)).registeredEvents=[],e.containerElement=(0,t.createRef)(),e.state={autocomplete:null},e.setAutocompleteCallback=function(){null!==e.state.autocomplete&&e.props.onLoad&&e.props.onLoad(e.state.autocomplete)},e}return(0,et.Z)(r,[{key:"componentDidMount",value:function(){fa(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var e=this.containerElement.current.querySelector("input");if(e){var t=new google.maps.places.Autocomplete(e,this.props.options);this.registeredEvents=ba({updaterMap:Mi,eventMap:Li,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{autocomplete:t}}),this.setAutocompleteCallback)}}},{key:"componentDidUpdate",value:function(e){ya(this.registeredEvents),this.registeredEvents=ba({updaterMap:Mi,eventMap:Li,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}},{key:"componentWillUnmount",value:function(){null!==this.state.autocomplete&&ya(this.registeredEvents)}},{key:"render",value:function(){return(0,We.jsx)("div",Object.assign({ref:this.containerElement,className:this.props.className},{children:t.Children.only(this.props.children)}))}}]),r}(t.PureComponent);Fi.defaultProps={className:""},Fi.contextType=ha;var Bi=null,ji=function(e){var n=e.map,r=e.setMap,a=e.mapMode,o=e.center,i=e.setCenter,s=e.zoom,u=e.mapContainerStyle,c=e.mapType,l=e.heading,d=e.tilt,p=e.directionsResponse,f=e.autopilotOn,h={path:window.google.maps.SymbolPath.FORWARD_CLOSED_ARROW,scale:6,fillColor:"red",fillOpacity:.8,strokeWeight:2,rotation:function(){if("monitoring-mode"===a)return l;var e;if(null!=n&&0!==n.getHeading()&&f){var t=90*Math.round(l/90);e=l-t}else e=l;return e}()};return(0,t.useEffect)((function(){return function(){null!=Bi&&clearTimeout(Bi)}}),[]),(0,We.jsx)(We.Fragment,{children:(0,We.jsxs)(wa,{center:o,zoom:s,mapContainerStyle:u,options:{zoomControl:!1,mapTypeId:c,mapTypeControl:!1,streetViewControl:!0,fullscreenControl:!1,heading:function(){return"monitoring-mode"===a?0:(null!=n&&f?(e=90*Math.round(l/90),n.setHeading(e),n.setTilt(45)):e=0,e);var e}(),tilt:d},onLoad:function(e){return r(e)},onCenterChanged:function(){return null!=Bi&&clearTimeout(Bi),void(Bi=setTimeout((function(){if(Bi=null,null!=n&&!f){var e=n.getCenter();null!=e&&i(e)}}),500))},children:[(0,We.jsx)(Ya,{icon:h,position:o}),p&&(0,We.jsx)(Ai,{directions:p})]})})},zi=n(3084),Vi=n.n(zi),Wi=null,Zi=!1,Ui=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e){var r;return(0,Je.Z)(this,n),(r=t.call(this)).state={position:e.streetViewPanoramaOptions.position,pov:e.streetViewPanoramaOptions.pov,zoom:e.streetViewPanoramaOptions.zoom},r}return(0,et.Z)(n,[{key:"initialize",value:function(e){var t=this;this.props.googleMaps&&null==this.streetView&&(this.streetView=new this.props.googleMaps.StreetViewPanorama(e,this.props.streetViewPanoramaOptions),this.streetView.addListener("position_changed",(function(){t.props.onPositionChanged&&(t.props.onPositionChanged(t.streetView.getPosition()),Zi=!0)})),this.streetView.addListener("pov_changed",(function(){t.props.onPovChanged&&t.props.onPovChanged(t.streetView.getPov())})),(Wi=this.streetView).setOptions({addressControl:!1,addressControlOptions:{position:window.google.maps.ControlPosition.TOP_RIGHT},linksControl:!0,panControl:!0,enableCloseButton:!1,fullscreenControl:!1,zoomControl:!1}))}},{key:"componentDidMount",value:function(){this.initialize(pa.findDOMNode(this))}},{key:"componentDidUpdate",value:function(){this.initialize(pa.findDOMNode(this))}},{key:"componentWillUnmount",value:function(){this.streetView&&this.props.googleMaps.event.clearInstanceListeners(this.streetView)}},{key:"render",value:function(){return(0,We.jsx)("div",{style:{height:"100%"}})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(null!=Wi)if(Zi){var n=Wi.getPosition();if(null!=t.position&&null!=n)if(window.google.maps.geometry.spherical.computeDistanceBetween(n,t.position)>0)return{position:n,pov:Wi.getPov(),zoom:Wi.getZoom()};Zi=!1}else{var r=e.streetViewPanoramaOptions.position,a=t.position;if(null!=r&&null!=a)if(window.google.maps.geometry.spherical.computeDistanceBetween(r,a)>0){Wi.setPosition(r);var o=e.streetViewPanoramaOptions.pov,i=Wi.getPov();return i={heading:o.heading,pitch:i.pitch},Wi.setPov(i),{position:r,pov:i,zoom:Wi.getZoom()}}}return null}}]),n}(t.Component);Ui.defaultProps={streetViewPanoramaOptions:{position:{lat:46.9171876,lng:17.8951832},pov:{heading:0,pitch:0},zoom:1}};var Hi,Gi=Vi()((function(e){return{googleMaps:{globalPath:"google.maps",url:"https://maps.googleapis.com/maps/api/js?key="+e.apiKey,jsonp:!0}}}))(Ui),qi=function(e){var n=e.width,r=e.position,a=e.setCenter,o=e.heading,s=e.setHeading,u=e.viewPoint,c=e.setViewPoint,l=e.pitch,d=e.setPitch,p=e.autopilotOn,f=(e.reqFromSV,e.setReqFromSV),h=e.mapMode,m=(0,t.useState)(null),g=(0,i.Z)(m,2),v=g[0],y=g[1],b=(0,t.useState)(!1),x=(0,i.Z)(b,2),k=x[0],w=x[1];return(0,t.useEffect)((function(){if(null!=r){var e;e="number"===typeof r.lat?new window.google.maps.LatLng(r.lat,r.lng):new window.google.maps.LatLng(r.lat(),r.lng());var t=0,n=0;p||"monitoring-mode"!==h?(t=((t=o+u)+360)%360,n=l):(t=o,n=l),y({position:e,pov:{heading:t,pitch:n},zoom:1}),w(!0),setTimeout((function(){w(!1)}),1e3)}}),[r,o,u,l,p,h]),(0,We.jsx)("div",{style:{width:n,height:"100%",backgroundColor:"#eeeeee"},children:null!=v&&(0,We.jsx)(Gi,{apiKey:"AIzaSyAgy5PmgjcCDTvQywjMlBRyFg8APSrvkN0",streetViewPanoramaOptions:v,onPositionChanged:function(e){null==r||null==e||p||Xi(r,e)>0&&(k||(a(e),f(!0),setTimeout((function(){f(!1)}),1e3)))},onPovChanged:function(e){if("monitoring-mode"!==h){if(null!=e){if(p){var t=e.heading-o,n=Math.abs(t),r=10*Number(Number(n/10).toFixed(0));t<0&&0!==n&&(r=-r);var a=(360+r)%360;a!==u&&c(a)}else{var i=10*Number(Number(e.heading/10).toFixed(0));(i=(360+i)%360)!==u&&c(i),s(e.heading)}var f=(90+e.pitch)%180-90,m=Math.abs(f),g=10*Number(Number(m/10).toFixed(0));f<0&&0!==m&&(g=-g),g!==l&&d(g)}}else c(0)}})})};function Xi(e,t){return window.google.maps.geometry.spherical.computeDistanceBetween(e,t)}function Ki(e,t){return(360+window.google.maps.geometry.spherical.computeHeading(e,t))%360}function Yi(e,t,n){return window.google.maps.geometry.spherical.computeOffset(e,t,n)}var Qi,$i=1e3,Ji=function(e){var n=e.timeTicks,r=e.autopilotOn,a=e.setAutopilotOn,o=e.setDirectionsResponse,s=e.speed,u=e.setSpeed,c=e.setSignal,l=e.carPosition,d=e.setCarPosition,p=e.mapType,f=e.setMapType,h=e.zoom,m=e.setZoom,g=e.heading,v=e.setHeading,y=e.setViewPoint,b=e.setPitch,x=e.setPano,k=e.setStreetViewPosition,w=e.imageShots,S=e.appLayout,C=e.currentPosition,E=(0,t.useRef)(),T=(0,t.useRef)(),N=(0,t.useState)(""),_=(0,i.Z)(N,2),I=_[0],R=_[1],A=(0,t.useState)([]),O=(0,i.Z)(A,2),P=O[0],D=O[1],L=(0,t.useState)(0),M=(0,i.Z)(L,2),F=M[0],B=M[1],j=(0,t.useState)([]),z=(0,i.Z)(j,2),V=z[0],W=z[1],Z=(0,t.useState)(0),U=(0,i.Z)(Z,2),H=U[0],G=U[1];function q(){return q=(0,qe.Z)($e().mark((function e(){var t,n,r,a,i,s,u,c,l,d,p,f,h=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:"DRIVING",X("stop"),""!==E.current.value&&""!==T.current.value){e.next=4;break}return e.abrupt("return");case 4:return n=new window.google.maps.DirectionsService,r="DRIVING"===t?E.current.value.includes("\ub300\ud55c\ubbfc\uad6d")?window.google.maps.TravelMode.TRANSIT:window.google.maps.TravelMode.DRIVING:t,e.next=8,n.route({origin:E.current.value,destination:T.current.value,travelMode:r});case 8:if(a=e.sent,o(a),R(r),a.routes.length>0){for(i=[],s=a.routes[0].legs,u=0;u<s.length;u++)for(c=s[u].steps,l=0;l<c.length;l++)for(d=c[l].path,p=0;p<d.length;p++)f=d[p],i.push(f);W(i),K(a)}case 12:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function X(e){a("start"===e)}function K(e){if(null!=e){var t=e.routes;if(null!=t&&t.length>0){var n=t[0].legs;if(null!=n&&n.length>0){var r=n[0].steps;null!=r&&r.length>0&&(D(r),B(0),r.length>=2&&(C.distanceToDirection=r[0].distance.value,C.maneuver=r[1].maneuver,C.direction=r[1].html_instructions))}}}}function Y(e){return{width:"100%",minHeight:"24px",padding:"4px",background:e===F?"yellow":"rgba(255,255,255,0.8)",fontSize:e===F?"16px":"14px"}}function Q(e){return{width:"100%",minHeight:"12px",padding:"4px",background:e===F?"yellow":"rgba(255,255,255,0.8)",fontSize:e===F?"16px":"14px"}}function $(e){var t=null,n=e.maneuver;return null!=n&&("turn-left"===n?t="./images/turn_left.svg":"turn-right"===n&&(t="./images/turn_right.svg")),(0,We.jsx)(We.Fragment,{children:null!=t&&(0,We.jsx)("img",{src:t,alt:"",style:{width:"32px",height:"32px"}})})}function J(){var e=0;if(P.length>0){for(var t=F+1;t<P.length;t++)e+=P[t].distance.value;e+=Xi(r?l:F===P.length-1?P[F].end_location:P[F].start_location,P[F].end_location)}return e}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e&&(e=J()),e>=1e3?Number(e/1e3).toFixed(1)+" km":Number(e).toFixed(0)+" m"}function te(){var e=0;if(P.length>0){for(var t=F+1;t<P.length;t++)e+=P[t].duration.value;var n;if(n=r?l:F===P.length-1?P[F].end_location:P[F].start_location,null!=P[F].distance&&0!==P[F].distance.value)e+=Xi(n,P[F].end_location)*P[F].duration.value/P[F].distance.value}return e}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e&&(e=te()),e>=60?Number(e/60).toFixed(0)+" min":Number(e).toFixed(0)+" sec"}function re(e){return ee(e===F?r?Xi(l,P[e].end_location):0===e?Number(P[0].distance.value):0:Number(P[e].distance.value))}function ae(e){var t;e===F?t=r?Xi(l,P[e].end_location)*P[e].duration.value/P[e].distance.value:0===e?Number(P[0].duration.value):0:t=Number(P[e].duration.value);return ne(t)}return(0,t.useEffect)((function(){r&&function(){var e=H,t=e,r=e+1,a=F;if(r<V.length){var o=1;if(n%o===0){for(var i=1e3*s/3600*($i*o/1e3),u=i,c=l,p=l,f=g;u>0;){var h=Xi(c,V[r]);if(u<h)p=Yi(c,u,f=Ki(c,V[r])),u=0;else{u-=h,p=c=V[r];var m=r+1;if(f=m<V.length?Ki(V[r],V[m]):Ki(V[t],V[r]),e=r,t++,++r===V.length&&(u=0),a<P.length-1)Xi(p,P[a].end_location)<i&&(a++,B(a))}}d(p),v(f);var y,b=Xi(p,P[a].end_location);C.distanceToDirection=b,a<P.length-1?(C.maneuver=P[a+1].maneuver,C.direction=P[a+1].html_instructions):(C.maneuver="",C.direction="\ub3c4\ucc29"),y=Xi(p,V[e])<10?V[e]:p,x(y,i,I===window.google.maps.TravelMode.DRIVING,!1,!0),n%5!==0&&e!==V.length-1||w.length>0&&k(w[w.length-1]),G(e)}}else G(0),X("stop")}()}),[n]),(0,t.useEffect)((function(){var e;if(b(0),y(0),r)V.length>0&&(!function(e){if(e.length>2){var t=e[0],n=Ki(t,e[1]),r=Yi(t,1,(n+90)%360);d(r),v(n),G(0),B(0),w.length=0,x(r,50,!0,!0,!0)}}(V),I===window.google.maps.TravelMode.WALKING?e=5:(c("CLU_DisSpdVal",e=50),c("VCU_GearPosSta",5)),u(e));else if(s>0){u(0),c("CLU_DisSpdVal",0),c("VCU_GearPosSta",0)}}),[r]),(0,We.jsx)(es,{appLayout:S,children:(0,We.jsx)("div",{className:"searchbox",children:(0,We.jsxs)("div",{className:"btn-row",children:[(0,We.jsx)(Fi,{onPlaceChanged:function(){},children:(0,We.jsx)("input",{type:"text",name:"Origin",className:"form-control",placeholder:"Origin",ref:E})}),(0,We.jsx)(Fi,{children:(0,We.jsx)("input",{type:"text",name:"Destication",className:"form-control",placeholder:"Destication",ref:T})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("button",{type:"submit",name:"submit",className:"btn btn-primary",onClick:function(){return function(){return q.apply(this,arguments)}()},children:"Search"}),(0,We.jsx)("button",{type:"submit",name:"clear",className:"btn btn-danger",style:{marginLeft:"4px"},onClick:function(){o(null),E.current.value="",T.current.value="",D([]),X("stop")},children:"Clear"})]}),P.length>0&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:(S.carSideWidth,"204px"),height:"24px",borderRadius:"4px",background:"rgba(135, 206, 235, 1.0)"},children:[ee()," \xa0 | \xa0 ",ne()]}),(0,We.jsx)("div",{style:{width:(S.carSideWidth,"204px"),height:"100%",maxHeight:"300px",border:"1px solid darkgrey",borderRadius:"4px",overflowY:"scroll"},children:P.map((function(e,t){return(0,We.jsx)("div",{children:t>=F&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,We.jsx)("div",{style:Y(t),dangerouslySetInnerHTML:{__html:t<P.length-1?P[t+1].instructions:e.instructions}}),(0,We.jsx)("div",{style:{background:"rgba(0,0,0,0.7)"},children:t<P.length-1&&$(P[t+1])})]}),(0,We.jsxs)("div",{style:Q(t),children:[re(t)," \xa0 ",ae(t)," \xa0 ",t<P.length-1&&P[t+1].maneuver]})]})},"direction"+t)}))},"directions")]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("button",{className:"btn btn-secondary",onClick:function(){return X(r?"stop":"start")},children:r?"Stop":"Start"}),(0,We.jsx)("button",{className:"btn btn-secondary",style:{width:"48px",marginLeft:"4px"},onClick:function(){var e=s;I===window.google.maps.TravelMode.WALKING?e+=5:e+=10,e>=1e3&&(e=999),e=5*Math.floor(e/5),c("CLU_DisSpdVal",e),u(e)},children:"\u2191"}),(0,We.jsx)("button",{className:"btn btn-secondary",style:{width:"48px",marginLeft:"4px"},onClick:function(){var e=s;I===window.google.maps.TravelMode.WALKING?e-=5:e-=10,e<0&&(e=0),e=5*Math.floor(e/5),c("CLU_DisSpdVal",e),u(e)},children:"\u2193"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("button",{className:"btn btn-info",onClick:function(){f("terrain"===p?"hybrid":"terrain")},children:"terrain"===p?"Roadmap":"Satellite"}),(0,We.jsx)("button",{className:"btn btn-info",style:{width:"48px",marginLeft:"4px"},onClick:function(){var e=h+1;e>21&&(e=21),m(e)},children:"+"}),(0,We.jsx)("button",{className:"btn btn-info",style:{width:"48px",marginLeft:"4px"},onClick:function(){var e=h-1;e<1&&(e=1),m(e)},children:"\u2212"})]})]})})})},es=Fe.div(Hi||(Hi=a(["\n    .searchbox {\n        background-color: transparent;\n        position: absolute;\n        left: 4px;\n        top: 28px;\n        z-index: 1;\n        padding: 4px;\n\n        .form-control {\n            width: ","px;\n            height: 30px;\n            border-radius: 20px;\n            font-size: 14px;\n        }\n\n        .btn-row {\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between;\n            align-items: start;\n            width: 250px;\n            gap: 8px;\n            padding: 4px;\n        }\n    \n        .btn {\n            width: 100px;\n            height: 24px;\n            padding: 0;\n            border-radius: 8px;\n            font-size: 14px;\n        }\n    }\n"])),(function(e){return e.appLayout.carSideWidth,"204"})),ts=n(9461),ns=n.n(ts);function rs(e,t,n,r){var a=function(e,t,n){var r=Math.PI/180,a=180/Math.PI,o=as/5,i=30*r,s=60*r,u=126*r,c=38*r,l=Math.tan(.25*Math.PI+.5*s)/Math.tan(.25*Math.PI+.5*i);l=Math.log(Math.cos(i)/Math.cos(s))/Math.log(l);var d=Math.tan(.25*Math.PI+.5*i);d=Math.pow(d,l)*Math.cos(i)/l;var p=Math.tan(.25*Math.PI+.5*c);p=o*d/Math.pow(p,l);var f={};if("toXY"===e){f.lat=t,f.lng=n;var h=Math.tan(.25*Math.PI+t*r*.5);h=o*d/Math.pow(h,l);var m=n*r-u;m>Math.PI&&(m-=2*Math.PI),m<-Math.PI&&(m+=2*Math.PI),m*=l,f.x=Math.floor(h*Math.sin(m)+43+.5),f.y=Math.floor(p-h*Math.cos(m)+os+.5)}else{f.x=t,f.y=n;var g=t-43,v=p-n+os;h=Math.sqrt(g*g+v*v),l<0&&(h=-h);var y=Math.pow(o*d/h,1/l);y=2*Math.atan(y)-.5*Math.PI,Math.abs(g)<=0?m=0:Math.abs(v)<=0?(m=.5*Math.PI,g<0&&(m=-m)):m=Math.atan2(g,v);var b=m/l+u;f.lat=y*a,f.lng=b*a}return f}("toXY",e,t),o=new Date,i=String(o.getFullYear()),s=o.getMonth()+1,u=String(s);s<10&&(u="0"+u),i=i.concat(u);var c=o.getDate(),l=String(c);c<10&&(l="0"+l),i=i.concat(l);var d=o.getHours(),p=String(d);d<10&&(p="0"+d);var f=o.getMinutes(),h=String(f);f<10&&(h="0"+f);var m=p+h,g="http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/"+n,v="?"+encodeURIComponent("serviceKey")+"=A%2BRfjZFOzYps3gVx2JEcKLZbqgPefWevhMYCUMgdk2XLFH414dG5rzva9nzYfaLE6d7WSq0Ta1Y1pwLQkSgPrA%3D%3D";v+="&"+encodeURIComponent("pageNo")+"="+encodeURIComponent("1"),v+="&"+encodeURIComponent("numOfRows")+"="+encodeURIComponent("1000"),v+="&"+encodeURIComponent("dataType")+"="+encodeURIComponent("JSON"),v+="&"+encodeURIComponent("base_date")+"="+encodeURIComponent(i),v+="&"+encodeURIComponent("base_time")+"="+encodeURIComponent(m),v+="&"+encodeURIComponent("nx")+"="+encodeURIComponent(a.x),v+="&"+encodeURIComponent("ny")+"="+encodeURIComponent(a.y),fetch(g+v).then((function(e){return e.json()})).then((function(e){"00"===e.response.header.resultCode&&r(e.response.body.items.item)}))}var as=6371.00877,os=136;Fe.div(Qi||(Qi=a(["\n    .content{\n\t    margin: auto;\n\t    position: relative;\n\t    padding: 16px;\n\t    outline: 0;\n        padding-top: 16px;\n\n\t    display: flex;\n\t    flex-direction: column;\n    }\n\t.header {\n\t\tpadding: 8px;\n\t\ttext-align: center;\n\t\theight: 64px;\n\t}\n\t.center {\n\t\tpadding: 16px;\n\t}\n\t.footer {\n\t\tpadding: 16px;\n\t\ttext-align: center;\n\t\theight: 50px;\n\t\t.title {\n\t\t\tpadding: 8px 8px;\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\n\t.w3-table,.w3-table-all{border-collapse:collapse;border-spacing:0;width:100%;display:table}.w3-table-all{border:1px solid #ccc}\n\t.w3-bordered tr,.w3-table-all tr{border-bottom:1px solid #ddd}.w3-striped tbody tr:nth-child(even){background-color:#f1f1f1}\n\t.w3-table-all tr:nth-child(odd){background-color:#fff}.w3-table-all tr:nth-child(even){background-color:#f1f1f1}\n\t.w3-hoverable tbody tr:hover,.w3-ul.w3-hoverable li:hover{background-color:#ccc}.w3-centered tr th,.w3-centered tr td{text-align:center}\n\t.w3-table td,.w3-table th,.w3-table-all td,.w3-table-all th{padding:8px 8px;display:table-cell;text-align:left;vertical-align:top}\n\t.w3-table th:first-child,.w3-table td:first-child,.w3-table-all th:first-child,.w3-table-all td:first-child{padding-left:16px}\n"])));var is,ss=new Map;function us(e){return ss.get(e)}var cs=["geometry","drawing","places"],ls=0,ds=null,ps=[],fs={latitude:0,longitude:0,distanceToDirection:0,maneuver:"",direction:""},hs=function(e){var n=e.appLayout,r=e.carStatusView,a=e.mapView,s=(0,t.useState)(null),u=(0,i.Z)(s,2),c=u[0],l=u[1],d=(0,t.useState)(0),p=(0,i.Z)(d,2),f=p[0],h=p[1],m=(0,t.useState)(Me()),g=(0,i.Z)(m,2),v=g[0],y=g[1],b=(0,t.useState)(0),x=(0,i.Z)(b,2),k=x[0],w=x[1],S=(0,t.useState)({time:"",value:{}}),C=(0,i.Z)(S,1)[0],E=(0,t.useState)(0),T=(0,i.Z)(E,2),N=T[0],_=T[1],I=(0,t.useState)("simulation-mode"),R=(0,i.Z)(I,2),A=R[0],O=(R[1],(0,t.useState)(null)),P=(0,i.Z)(O,2),D=P[0],L=P[1],M=(0,t.useState)("terrain"),F=(0,i.Z)(M,2),B=F[0],j=F[1],z=(0,t.useState)(null),V=(0,i.Z)(z,2),W=V[0],Z=V[1],U=(0,t.useState)(15),H=(0,i.Z)(U,2),G=H[0],q=H[1],X=(0,t.useState)(null),K=(0,i.Z)(X,2),Y=K[0],Q=K[1],$=(0,t.useState)(!1),J=(0,i.Z)($,2),ee=J[0],te=J[1],ne=(0,t.useState)(0),re=(0,i.Z)(ne,2),ae=re[0],oe=re[1],ie=(0,t.useState)(45),se=(0,i.Z)(ie,2),ue=se[0],ce=(se[1],(0,t.useState)(null)),le=(0,i.Z)(ce,2),de=le[0],pe=le[1],fe=(0,t.useState)(null),he=(0,i.Z)(fe,2),me=he[0],ge=he[1],ve=(0,t.useState)(!1),ye=(0,i.Z)(ve,2),be=ye[0],xe=ye[1],ke=(0,t.useState)(0),we=(0,i.Z)(ke,2),Se=we[0],Ce=we[1],Ee=(0,t.useState)(0),Te=(0,i.Z)(Ee,2),Ne=Te[0],_e=Te[1],Ie=function(e){var n=e.id,r=void 0===n?Pa.id:n,a=e.version,o=void 0===a?Pa.version:a,s=e.nonce,u=e.googleMapsApiKey,c=e.language,l=e.region,d=e.libraries,p=e.preventGoogleFontsLoading,f=e.mapIds,h=e.authReferrerPolicy,m=(0,t.useRef)(!1),g=(0,t.useState)(!1),v=(0,i.Z)(g,2),y=v[0],b=v[1],x=(0,t.useState)(void 0),k=(0,i.Z)(x,2),w=k[0],S=k[1];(0,t.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]);var C=(0,t.useMemo)((function(){return new ja({id:r,apiKey:u,version:o,libraries:d,language:c,region:l,mapIds:f,nonce:s,authReferrerPolicy:h})}),[r,u,o,d,c,l,f,s,h]);(0,t.useEffect)((function(){y||C.load().then((function(){m.current&&b(!0)})).catch((function(e){S(e)}))}),[]),(0,t.useEffect)((function(){Ea&&p&&_a()}),[p]);var E=(0,t.useRef)();return(0,t.useEffect)((function(){E.current&&d!==E.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),E.current=d}),[d]),{isLoaded:y,loadError:w}}({id:"google-map-script",googleMapsApiKey:"AIzaSyAgy5PmgjcCDTvQywjMlBRyFg8APSrvkN0",libraries:cs}),Re=Ie.isLoaded,Ae=n.screenWidth-n.leftTaskBarWidth,Oe=.4*Ae,Pe=.6*Ae,De="dashboard2/track-my-car";function Le(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;jr.emit("subscribe-ext",e),t&&jr.on("notify-ext/"+e.channel,t)}({channel:De},(function(e){if(0!==e.latitude||0!==e.longitude){var t={lat:e.latitude,lng:e.longitude};Z(t),oe(e.heading),_(e.speed)}}))}function Me(){return(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})}function Fe(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;rs(t.latitude,t.longitude,"getUltraSrtNcst",(function(e){var t,n=(0,o.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(C.time=r.baseTime,C.value[r.category]=r.obsrValue,"T1H"===r.category){var a=Number(r.obsrValue);w(a)}}}catch(lT){n.e(lT)}finally{n.f()}}))}))}function Be(e,t,n,r,a){null!=de&&de.getPanorama({location:e,radius:t,source:n?window.google.maps.StreetViewSource.OUTDOOR:window.google.maps.StreetViewSource.DEFAULT}).then((function(e){var t=e.data.location;ps.push(t.latLng),r&&(be||ge(t.latLng)),a&&function(e){var t={url:"./map/camera.svg",scaledSize:new window.google.maps.Size(12,12),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(0,0)};new window.google.maps.Marker({position:e.latLng,map:D,title:e.description,icon:t}).addListener("click",(function(e){e.domEvent;var t=e.latLng;ge(t)}))}(t)})).catch((function(e){}))}(0,t.useEffect)((function(){navigator.geolocation.getCurrentPosition(function(){var e=(0,qe.Z)($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){Z({lat:t.coords.latitude,lng:t.coords.longitude})}),500);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),setTimeout((function(){return Fe()}),1e3);var e=setInterval((function(){60===++ls&&(ls=0),h(ls)}),1e3);return l(e),setTimeout(Le,500),function(){var e;null!=c&&clearInterval(c),e={channel:De},jr.emit("unsubscribe-ext",e),jr.off("notify-ext/"+e.channel)}}),[]),(0,t.useEffect)((function(){var e=Me();y(e),30===f&&(e.endsWith("00")||e.endsWith("20")||e.endsWith("40"))&&Fe()}),[f]),(0,t.useEffect)((function(){Re&&pe(new window.google.maps.StreetViewService)}),[Re]),(0,t.useEffect)((function(){null==de||ee||ds||(Be(W,50,!1,!0,!0),ds=setTimeout((function(){ds=null}),5e3)),null!=W&&("function"===typeof W.lat?(fs.latitude=W.lat(),fs.longitude=W.lng()):(fs.latitude=W.lat,fs.longitude=W.lng))}),[W,ee]),(0,t.useEffect)((function(){if(0===N)q(15);else{var e=Math.floor(N/30);q(19-e)}}),[N]);var je=(0,t.useState)({x:Oe,y:0}),ze=(0,i.Z)(je,2),Ze=ze[0],Ue=ze[1],He=(0,t.useState)(!1),Ge=(0,i.Z)(He,2),Xe=Ge[0],Ke=Ge[1];return(0,We.jsx)(ms,{appLayout:n,carStatusView:r,mapView:a,sashPosition:Ze,children:a&&(0,We.jsxs)(We.Fragment,{children:[null!=us("mapType")&&"Custom"!==us("mapType")?(0,We.jsx)(Ve,{url:"https://map.kakao.com",width:"100%",height:"100%",id:"my-iframe",className:"",display:"block",position:"relative"}):(0,We.jsxs)(We.Fragment,{children:[null!=W&&Re&&!r&&Ze.x>0&&(0,We.jsx)(qi,{width:Ze.x,position:me,setCenter:Z,heading:ae,setHeading:oe,viewPoint:Se,setViewPoint:Ce,pitch:Ne,setPitch:_e,autopilotOn:ee,reqFromSV:be,setReqFromSV:xe,mapMode:A}),null!=W&&Re&&(0,We.jsxs)("div",{style:{width:r?Pe+"px":Ae-Ze.x+"px",height:"100%"},children:[(0,We.jsx)(ji,{map:D,setMap:L,mapMode:A,center:W,setCenter:Z,zoom:G,mapContainerStyle:{height:"100%",width:"100%"},mapType:B,heading:ae,tilt:ue,directionsResponse:Y,autopilotOn:ee}),"simulation-mode"===A&&(0,We.jsx)(Ji,{timeTicks:f,autopilotOn:ee,setAutopilotOn:te,setDirectionsResponse:Q,speed:N,setSpeed:_,setSignal:Vr,carPosition:W,setCarPosition:Z,mapType:B,setMapType:j,zoom:G,setZoom:q,heading:ae,setHeading:oe,setViewPoint:Ce,setPitch:_e,setPano:Be,setStreetViewPosition:ge,imageShots:ps,appLayout:n,currentPosition:fs})]})]}),(0,We.jsxs)("div",{className:"notification-bar",children:[(0,We.jsxs)("div",{className:"notification-bar-left",children:[(0,We.jsx)("img",{src:"./images/padlock-locked.png",alt:"",className:"bg"}),(0,We.jsx)("div",{className:"gap20"}),(0,We.jsx)("span",{id:"CurrentTime",className:"bg",children:v}),(0,We.jsx)("div",{className:"gap20"}),(0,We.jsxs)("span",{id:"CurrentTemp",className:"bg",children:[k,"\u2103 \xa0"]}),(0,We.jsx)("div",{className:"gap20"}),(0,We.jsx)("img",{src:"./tesla/icons/driver-profile.png",alt:"",className:"bg"}),(0,We.jsx)("span",{className:"bg",children:"\xa0 Jerry \xa0"})]}),(0,We.jsx)("div",{className:"notification-bar-center"}),(0,We.jsx)("div",{className:"notification-bar-right"})]}),(!us("mapType")||"Custom"===us("mapType"))&&!r&&(Xe?(0,We.jsx)(ns(),{axis:"x",defaultPosition:{x:Ze.x,y:0},onDrag:function(e,t){return function(e){e.x>=0&&e.x<=Ae?e.x<50?(Ue({x:0,y:0}),Ke(!1)):e.x>Ae-50?(Ue({x:Ae-24,y:0}),Ke(!1)):Ue({x:e.x,y:0}):Ke(!1)}(t)},onStart:function(){Ke(!0)},onStop:function(){Ke(!1),Ze.x<Ae/4&&Ze.x>0?Ue({x:Ae/4,y:0}):Ze.x>3*Ae/4&&Ze.x<Ae&&Ue({x:3*Ae/4,y:0})},children:(0,We.jsxs)("div",{className:"streetview-sash",id:"streetview-sash",style:{cursor:"move"},children:[(0,We.jsx)("div",{className:"line"}),(0,We.jsx)("div",{className:"label",style:{cursor:"move"},children:(0,We.jsx)("img",{src:Ze.x<Ae/2?"./images/right-white.png":"./images/left-white.png",width:"24",height:"24",alt:""})})]},"streetview-sash")}):(0,We.jsx)("div",{className:"streetview-sash",id:"streetview-sash",style:{left:Ze.x+"px"},children:(0,We.jsx)("div",{className:"label",onMouseDown:function(e){return function(e){Ze.x<Ae/4?Ue({x:Ae/4,y:0}):Ze.x>3*Ae/4?Ue({x:3*Ae/4,y:0}):(Ke(!0),setTimeout((function(){var t=document.getElementById("streetview-sash"),n=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});t.dispatchEvent(n)}),100))}(e)},children:(0,We.jsx)("img",{src:Ze.x<Ae/2?"./images/right-white.png":"./images/left-white.png",width:"24",height:"24",alt:""})})},"streetview-sash"))]})})},ms=Fe.div(is||(is=a(["\n\twidth: ",";\n\theight: 100%;\n\tposition: relative;\n\toverflow: hidden;\n\tbackground: white;\n\tborder-top-right-radius: 8px;\n\tdisplay: flex;\n\tflex-direction: row;\n\n\t.notification-bar {\n\t\tposition: absolute;\n\t\tz-index: 1;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tpadding: 2px 12px;\n\n\t\tbackground: transparent;\n\t\tcolor: black;\n\t\tfont-weight: 500;\n\n\t\timg {\n\t\t\twidth: 18px;\n\t\t}\n\n\t\t.notification-bar-left, .notification-bar-right {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tbackground-color: rgba(255,255,255,0.8);\n\t\t\t.gap10 {\n\t\t\t\twidth: 10px;\n\t\t\t\theight: 18px;\n\t\t\t}\n\t\t\t.gap20 {\n\t\t\t\twidth: 20px;\n\t\t\t\theight: 18px;\n\t\t\t}\n\t\t\t.bg {\n\t\t\t\tfont-size: 0.9rem;\n\t\t\t}\n\t\t}\n\t}\n\n\t.streetview-sash {\n\t\tposition: absolute;\n\t\tcolor: inherit;\n\t\twidth: 24px;\n\t\theight: ","px;\n\t\ttop: 0px;\n\t\tmargin: auto;\n\t\tuser-select: none;\n\t\tz-index: 1;\n\t\tbackground: transparent;\n\n\t\t.line {\n\t\t\tposition: absolute;\n\t\t\tleft: 0px; \n\t\t\ttop: 0px; \n\t\t\twidth: 4px; \n\t\t\theight: ","px; \n\t\t\tbackground: red; \n\t\t}\n\t\t.label {\n\t\t\tposition: absolute; \n\t\t\tleft: 0px; \n\t\t\ttop: ","px;\n\t\t\tfont-size: 1.1rem;\n\t\t\tbackground: darkgrey;\n\t\t\topacity: 0.7;\n\t\t\twidth: 24px;\n\t\t\theight: 48px;\n\t\t\tpadding: 12px 0;\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n"])),(function(e){return e.carStatusView?"40%":"100%"}),(function(e){return e.appLayout.carSideHeight}),(function(e){return e.appLayout.carSideHeight}),(function(e){return e.appLayout.carSideHeight/2}));function gs(e){return function(t){return!!t.type&&t.type.tabsRole===e}}var vs=gs("Tab"),ys=gs("TabList"),bs=gs("TabPanel");function xs(e,n){return t.Children.map(e,(function(e){return null===e?null:function(e){return vs(e)||ys(e)||bs(e)}(e)?n(e):e.props&&e.props.children&&"object"===typeof e.props.children?(0,t.cloneElement)(e,Object.assign({},e.props,{children:xs(e.props.children,n)})):e}))}function ks(e,n){return t.Children.forEach(e,(function(e){null!==e&&(vs(e)||bs(e)?n(e):e.props&&e.props.children&&"object"===typeof e.props.children&&(ys(e)&&n(e),ks(e.props.children,n)))}))}var ws=n(3061);function Ss(e){var t=0;return ks(e,(function(e){vs(e)&&t++})),t}var Cs,Es=["children","className","disabledTabClassName","domRef","focus","forceRenderTabPanel","onSelect","selectedIndex","selectedTabClassName","selectedTabPanelClassName","environment","disableUpDownKeys"];function Ts(e){return e&&"getAttribute"in e}function Ns(e){return Ts(e)&&e.getAttribute("data-rttab")}function _s(e){return Ts(e)&&"true"===e.getAttribute("aria-disabled")}var Is=function(e){var n=(0,t.useRef)([]),r=(0,t.useRef)([]),a=(0,t.useRef)();function o(t,n){t<0||t>=u()||(0,e.onSelect)(t,e.selectedIndex,n)}function i(e){for(var t=u(),n=e+1;n<t;n++)if(!_s(c(n)))return n;for(var r=0;r<e;r++)if(!_s(c(r)))return r;return e}function s(e){for(var t=e;t--;)if(!_s(c(t)))return t;for(t=u();t-- >e;)if(!_s(c(t)))return t;return e}function u(){return Ss(e.children)}function c(e){return n.current["tabs-"+e]}function l(e){var t=e.target;do{if(d(t)){if(_s(t))return;return void o([].slice.call(t.parentNode.children).filter(Ns).indexOf(t),e)}}while(null!=(t=t.parentNode))}function d(e){if(!Ns(e))return!1;var t=e.parentElement;do{if(t===a.current)return!0;if(t.getAttribute("data-rttabs"))break;t=t.parentElement}while(t);return!1}e.children;var p=e.className,f=(e.disabledTabClassName,e.domRef),h=(e.focus,e.forceRenderTabPanel,e.onSelect,e.selectedIndex,e.selectedTabClassName,e.selectedTabPanelClassName,e.environment,e.disableUpDownKeys,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Es));return t.createElement("div",Object.assign({},h,{className:(0,ws.default)(p),onClick:l,onKeyDown:function(t){var n=e.direction,r=e.disableUpDownKeys;if(d(t.target)){var a=e.selectedIndex,p=!1,f=!1;"Space"!==t.code&&32!==t.keyCode&&"Enter"!==t.code&&13!==t.keyCode||(p=!0,f=!1,l(t)),"ArrowLeft"!==t.code&&37!==t.keyCode&&(r||38!==t.keyCode&&"ArrowUp"!==t.code)?"ArrowRight"!==t.code&&39!==t.keyCode&&(r||40!==t.keyCode&&"ArrowDown"!==t.code)?35===t.keyCode||"End"===t.code?(a=function(){for(var e=u();e--;)if(!_s(c(e)))return e;return null}(),p=!0,f=!0):36!==t.keyCode&&"Home"!==t.code||(a=function(){for(var e=u(),t=0;t<e;t++)if(!_s(c(t)))return t;return null}(),p=!0,f=!0):(a="rtl"===n?s(a):i(a),p=!0,f=!0):(a="rtl"===n?i(a):s(a),p=!0,f=!0),p&&t.preventDefault(),f&&o(a,t)}},ref:function(e){a.current=e,f&&f(e)},"data-rttabs":!0}),function(){var a=0,o=e.children,i=e.disabledTabClassName,s=e.focus,l=e.forceRenderTabPanel,d=e.selectedIndex,p=e.selectedTabClassName,f=e.selectedTabPanelClassName,h=e.environment;r.current=r.current||[];for(var m=r.current.length-u(),g=(0,t.useId)();m++<0;)r.current.push(""+g+r.current.length);return xs(o,(function(e){var o=e;if(ys(e)){var u=0,m=!1;null==Cs&&function(e){var t=e||("undefined"!==typeof window?window:void 0);try{Cs=!("undefined"===typeof t||!t.document||!t.document.activeElement)}catch(n){Cs=!1}}(h);var g=h||("undefined"!==typeof window?window:void 0);Cs&&g&&(m=t.Children.toArray(e.props.children).filter(vs).some((function(e,t){return g.document.activeElement===c(t)}))),o=(0,t.cloneElement)(e,{children:xs(e.props.children,(function(e){var a="tabs-"+u,o=d===u,c={tabRef:function(e){n.current[a]=e},id:r.current[u],selected:o,focus:o&&(s||m)};return p&&(c.selectedClassName=p),i&&(c.disabledClassName=i),u++,(0,t.cloneElement)(e,c)}))})}else if(bs(e)){var v={id:r.current[a],selected:d===a};l&&(v.forceRender=l),f&&(v.selectedClassName=f),a++,o=(0,t.cloneElement)(e,v)}return o}))}())};Is.defaultProps={className:"react-tabs",focus:!1},Is.propTypes={};var Rs=Is,As=function(e){var n=e.children,r=e.defaultFocus,a=e.defaultIndex,o=e.focusTabOnClick,i=e.onSelect,s=(0,t.useState)(r),u=s[0],c=s[1],l=(0,t.useState)(function(e){return null===e.selectedIndex?1:0}(e)),d=l[0],p=(0,t.useState)(1===d?a||0:null),f=p[0],h=p[1];if((0,t.useEffect)((function(){c(!1)}),[]),1===d){var m=Ss(n);(0,t.useEffect)((function(){if(null!=f){var e=Math.max(0,m-1);h(Math.min(f,e))}}),[m])}var g=Object.assign({},e);return g.focus=u,g.onSelect=function(e,t,n){"function"===typeof i&&!1===i(e,t,n)||(o&&c(!0),1===d&&h(e))},null!=f&&(g.selectedIndex=f),delete g.defaultFocus,delete g.defaultIndex,delete g.focusTabOnClick,t.createElement(Rs,g,n)};As.propTypes={},As.defaultProps={defaultFocus:!1,focusTabOnClick:!0,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1},As.tabsRole="Tabs";var Os=As,Ps=["children","className"];var Ds=function(e){var n=e.children,r=e.className,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Ps);return t.createElement("ul",Object.assign({},a,{className:(0,ws.default)(r),role:"tablist"}),n)};Ds.tabsRole="TabList",Ds.propTypes={},Ds.defaultProps={className:"react-tabs__tab-list"};var Ls=Ds,Ms=["children","className","disabled","disabledClassName","focus","id","selected","selectedClassName","tabIndex","tabRef"];var Fs="react-tabs__tab",Bs={className:Fs,disabledClassName:Fs+"--disabled",focus:!1,id:null,selected:!1,selectedClassName:Fs+"--selected"},js=function(e){var n,r=(0,t.useRef)(),a=e.children,o=e.className,i=e.disabled,s=e.disabledClassName,u=e.focus,c=e.id,l=e.selected,d=e.selectedClassName,p=e.tabIndex,f=e.tabRef,h=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Ms);return(0,t.useEffect)((function(){l&&u&&r.current.focus()}),[l,u]),t.createElement("li",Object.assign({},h,{className:(0,ws.default)(o,(n={},n[d]=l,n[s]=i,n)),ref:function(e){r.current=e,f&&f(e)},role:"tab",id:"tab"+c,"aria-selected":l?"true":"false","aria-disabled":i?"true":"false","aria-controls":"panel"+c,tabIndex:p||(l?"0":null),"data-rttab":!0}),a)};js.propTypes={},js.tabsRole="Tab",js.defaultProps=Bs;var zs=js,Vs=["children","className","forceRender","id","selected","selectedClassName"];var Ws="react-tabs__tab-panel",Zs={className:Ws,forceRender:!1,selectedClassName:"react-tabs__tab-panel--selected"},Us=function(e){var n,r=e.children,a=e.className,o=e.forceRender,i=e.id,s=e.selected,u=e.selectedClassName,c=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Vs);return t.createElement("div",Object.assign({},c,{className:(0,ws.default)(a,(n={},n[u]=s,n)),role:"tabpanel",id:"panel"+i,"aria-labelledby":"tab"+i}),o||s?r:null)};Us.tabsRole="TabPanel",Us.propTypes={},Us.defaultProps=Zs;var Hs,Gs,qs,Xs,Ks,Ys,Qs,$s,Js,eu,tu,nu,ru,au,ou,iu,su,uu,cu,lu,du=Us,pu=function(e){var n=e.switchState,r=void 0!==n&&n,a=t.useState(r),o=(0,i.Z)(a,2),s=o[0],u=o[1],c=["toggle-btn",s?"toggle-btn-on":"toggle-btn-off"].filter(Boolean).join(" ");return(0,We.jsx)(fu,{children:(0,We.jsxs)("label",{"aria-label":"Toggle",style:{display:"block"},children:[(0,We.jsx)("input",{className:"toggle-input",type:"checkbox",checked:s,onClick:function(){return u(!s)},onChange:function(){},"data-testid":"toggle-input"}),(0,We.jsx)("span",{className:c})]})})},fu=Fe.div(Hs||(Hs=a(['\n\t.toggle-btn {\n\t\tbox-sizing: initial;\n\t\tdisplay: inline-block;\n\t\toutline: 0;\n\t\twidth: 45px;\n\t\theight: 20px;\n\t\tposition: relative;\n\t\tcursor: pointer;\n\t\tuser-select: none;\n\t\tbackground: #53b5fe;\n\t\tborder-radius: 4em;\n\t\tpadding: 4px;\n\t\ttransition: all 0.4s ease;\n\t\t// border: 2px solid #e8eae9;\n\t}\n\t.toggle-input:focus + .toggle-btn::after,\n\t.toggle-btn:active::after {\n\t\tbox-sizing: initial;\n\t}\n\t.toggle-btn::after {\n\t\tleft: 0;\n\t\tposition: relative;\n\t\tdisplay: block;\n\t\tcontent: "";\n\t\twidth: 50%;\n\t\theight: 100%;\n\t\tborder-radius: 4em;\n\t\tbackground: #ffffff;\n\t\ttransition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275),\n\t\t\tpadding 0.3s ease, margin 0.3s ease;\n\t\t// box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1), 0 4px 0 rgba(0, 0, 0, 0.08);\n\t}\n\t.toggle-btn.toggle-btn-on::after {\n\t\tleft: 50%;\n\t}\n\t.toggle-btn.toggle-btn-on {\n\t\tbackground: #53b5fe;\n\t}\n\t.toggle-btn.toggle-btn-on:active {\n\t\tbox-shadow: none;\n\t}\n\t.toggle-btn.toggle-btn-on:active::after {\n\t\tmargin-left: -1.6em;\n\t}\n\t.toggle-btn:active::after {\n\t\tpadding-right: 1.6em;\n\t}\n\t.toggle-btn[disabled] {\n\t\topacity: 0.7;\n\t\tcursor: auto;\n\t}\n\t.toggle-input {\n\t\tborder: 0;\n\t\tclip: rect(0 0 0 0);\n\t\theight: 1px;\n\t\tmargin: -1px;\n\t\toverflow: hidden;\n\t\tpadding: 0;\n\t\tposition: absolute;\n\t\twidth: 1px;\n\t\twhite-space: nowrap;\n\t}\n\t.toggle-btn-off {\n\t\tbackground: #6f6f6f;\n\t}\n']))),hu=function(){var e=(0,t.useState)(5),n=(0,i.Z)(e,2),r=n[0],a=n[1];return(0,We.jsxs)(mu,{children:[(0,We.jsx)("button",{className:"gear-btn",children:(0,We.jsx)("img",{src:"./images/gear.png",alt:""})}),(0,We.jsx)("p",{children:"Cruise Follow Distance"}),(0,We.jsxs)("div",{className:"cruise-distance",children:[(0,We.jsx)("button",{onClick:function(){return a(r>1?r-1:r)},children:(0,We.jsx)("img",{src:"./images/left.png",alt:""})}),(0,We.jsx)("div",{className:"counter",children:r}),(0,We.jsx)("button",{onClick:function(){return a(r+1)},children:(0,We.jsx)("img",{src:"./images/right.png",alt:""})})]}),(0,We.jsxs)("div",{className:"switch-control",children:[(0,We.jsx)(pu,{switchState:!0}),(0,We.jsx)("span",{children:"autosteer"})]}),(0,We.jsxs)("div",{className:"switch-control",children:[(0,We.jsx)(pu,{switchState:!0}),(0,We.jsx)("span",{children:"auto lane change"})]})]})},mu=Fe.div(Gs||(Gs=a(["\n\tcolor: #6F6F6F;\n\tpadding: 30px;\n\tpadding-top: 50px;\n\tposition: relative;\n\n\t.gear-btn {\n\t\tbackground: none;\n\t\tborder: 0;\n\t\tposition: absolute;\n\t\ttop: 12px;\n\t\tright: 10px;\n\n\t\tcursor: pointer;\n\n\t\timg {\n\t\t\twidth: 25px;\n\t\t}\n\t}\n\n\t.switch-control {\n\t\tdisplay: flex;\n\t\tgap: 16px;\n\t\tmargin-bottom: 16px;\n\t\talign-items: center;\n\n\t\tspan {\n\t\t\ttext-transform: capitalize;\n\t\t\tcolor: #6F6F6F;\n\t\t}\n\t}\n\t.cruise-distance {\n\t\tdisplay: flex;\n\n\t\tfont-size: 1.8rem;\n\t\tmargin-left: 24px;\n\t\tmargin-top: 12px;\n\t\tmargin-bottom: 35px;\n\t\tbutton {\n\t\t\tborder: 0;\n\t\t\tcursor: pointer;\n\t\t\tbackground: transparent;\n\t\t}\n\t\timg {\n\t\t\twidth: 10px;\n\t\t}\n\t}\n\n\t.counter {\n\t\tmargin: 0 16px;\n\t}\n"]))),gu=function(e){var n=e.children,r=e.tabClass,a=void 0===r?"tabs":r,o=e.tabBackground,i=void 0===o?"#6f6f6f":o,s=e.tabBackgroundActive,u=void 0===s?"#53b5fe":s;return(0,t.useEffect)((function(){var e=document.querySelector(".".concat(a)),t=e.querySelectorAll("li"),n=e.querySelector(".selector");function r(){var t=e.querySelector("li.active");n.style.width=t.offsetWidth+"px",n.style.left=t.offsetLeft+"px"}t.forEach((function(t){t.addEventListener("click",(function(){e.querySelector("li.active").classList.remove("active"),t.classList.add("active"),r()}))})),r()}),[a]),(0,We.jsx)(vu,{tabClass:a,tabBackground:i,tabBackgroundActive:u,children:(0,We.jsxs)("nav",{className:a,children:[(0,We.jsx)("div",{className:"selector",children:" "}),(0,We.jsx)("ul",{children:n})]})})},vu=Fe.div(qs||(qs=a(["\n\t//--- Tabs\n\t."," {\n\t\tpadding: 0;\n\t\tbackground-color: white;\n\t\tbox-shadow: 0 0 5px rgba(0, 0, 0, 0.2);\n\t\tborder-radius: 50px;\n\t\tposition: relative;\n\t\twidth: max-content;\n\t\tbackground: ",";\n\t\t// height: 20px;\n\n\t\tul {\n\t\t\tdisplay: flex;\n\t\t\tlist-style-type: none;\n\t\t\tpadding: 8px 0;\n\t\t\t//--- Item\n\t\t\tli {\n\t\t\t\tcolor: white;\n\t\t\t\tpadding: 0 22px;\n\t\t\t\tposition: relative;\n\t\t\t\tz-index: 1;\n\t\t\t\ttransition: 0.3s ease-in-out;\n\t\t\t\tcursor: pointer;\n\t\t\t\tuser-select: none;\n\t\t\t\ttext-transform: uppercase;\n\n\t\t\t\t&.active {\n\t\t\t\t\tcolor: white;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//--- Selector\n\t\t.selector {\n\t\t\theight: 100%;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tz-index: 1;\n\t\t\tborder-radius: 24px;\n\t\t\tbackground: ",";\n\t\t\ttransition: 0.3s ease-in-out;\n\t\t}\n\t}\n"])),(function(e){return e.tabClass}),(function(e){return e.tabBackground}),(function(e){return e.tabBackgroundActive})),yu=function(){var e=(0,t.useState)(0),n=(0,i.Z)(e,2),r=n[0],a=n[1];return(0,We.jsxs)(bu,{brightness:r,children:[(0,We.jsx)(xu,{brightness:r,changeHandler:function(e){return a(e.target.value)}}),(0,We.jsx)("div",{className:"sun",children:(0,We.jsx)("img",{src:"./images/brightness.png",alt:"brightness"})})]})},bu=Fe.div(Xs||(Xs=a(['\n\twidth: 360px;\n\tposition: relative;\n\ttransition: all 0.5s ease;\n\n\t.sun {\n\t\tposition: absolute;\n\t\tright: 10px;\n\t\tbottom: 8px;\n\t}\n\timg {\n\t\twidth: 20px;\n\t}\n\n\t/*********** Baseline, reset styles ***********/\n\tinput[type="range"] {\n\t\t-webkit-appearance: none;\n\t\tappearance: none;\n\t\tbackground: transparent;\n\t\tcursor: pointer;\n\t\tbackground-color: #383838;\n\t\tborder-radius: 30px;\n\t\twidth: 100%;\n\t}\n\n\t/* Removes default focus */\n\tinput[type="range"]:focus {\n\t\toutline: none;\n\t}\n\n\t/******** Chrome, Safari, Opera and Edge Chromium styles ********/\n\t/* slider track */\n\tinput[type="range"]::-webkit-slider-runnable-track {\n\t\tbackground-color: #6f6f6f;\n\t\tborder-radius: 30px;\n\t\theight: 30px;\n\t}\n\n\t/* slider thumb */\n\tinput[type="range"]::-webkit-slider-thumb {\n\t\t-webkit-appearance: none; /* Override default look */\n\t\tappearance: none;\n\t\tmargin-top: 0px; /* Centers thumb on the track */\n\t\tbackground-color: #53b5fe;\n\t\tborder-radius: 30px;\n\t\theight: 30px;\n\t\twidth: 75px;\n\t}\n\n\t/*********** Firefox styles ***********/\n\t/* slider track */\n\tinput[type="range"]::-moz-range-track {\n\t\tbackground-color: #383838;\n\t\tborder-radius: 30px;\n\t\theight: 30px;\n\t}\n\n\t/* slider thumb */\n\tinput[type="range"]::-moz-range-thumb {\n\t\tbackground-color: #53b5fe;\n\t\tborder: none; /*Removes extra border that FF applies*/\n\t\tborder-radius: 30px;\n\t\theight: 30px;\n\t\twidth: 75px;\n\t}\n']))),xu=Fe.input.attrs((function(e){return{type:"range",max:100,min:0,value:e.brightness,onChange:e.changeHandler}}))(Ks||(Ks=a([""]))),ku=function(){return(0,We.jsxs)(wu,{children:[(0,We.jsx)("button",{className:"gear-btn",children:(0,We.jsx)("img",{src:"./images/gear.png",alt:""})}),(0,We.jsx)("p",{className:"margin-big",children:(0,We.jsx)("b",{children:"Visibility"})}),(0,We.jsx)("p",{className:"margin-small",children:"Display Mode"}),(0,We.jsx)("div",{className:"margin-big",children:(0,We.jsxs)(gu,{tabClass:"tabs1",children:[(0,We.jsx)("li",{children:"day"}),(0,We.jsx)("li",{children:"night"}),(0,We.jsx)("li",{className:"active",children:"auto"})]})}),(0,We.jsx)("p",{className:"margin-small",children:"Display Brightness"}),(0,We.jsx)("div",{className:"margin-small",children:(0,We.jsx)(yu,{})}),(0,We.jsx)("p",{className:"blur-info margin-large",children:"reduce brightness to conserve energy"}),(0,We.jsx)("p",{className:"margin-big",children:(0,We.jsx)("b",{children:"Units & Format"})}),(0,We.jsx)("p",{className:"margin-small",children:"Distance"}),(0,We.jsx)("div",{className:"margin-big",children:(0,We.jsxs)(gu,{tabClass:"tabs2",children:[(0,We.jsx)("li",{children:"kilometers"}),(0,We.jsx)("li",{className:"active",children:"miles"})]})}),(0,We.jsx)("p",{className:"margin-small",children:"Temperature"}),(0,We.jsxs)(gu,{tabClass:"tabs3",children:[(0,We.jsx)("li",{children:"\u2109"}),(0,We.jsx)("li",{className:"active",children:"\u2103"})]})]})},wu=Fe.div(Ys||(Ys=a(["\n\tcolor: #6F6F6F;\n\tpadding: 30px;\n\tpadding-top: 50px;\n\tposition: relative;\n\n\ttext-transform: capitalize;\n\t\n\t.gear-btn {\n\t\tbackground: none;\n\t\tborder: 0;\n\t\tposition: absolute;\n\t\ttop: 12px;\n\t\tright: 10px;\n\n\t\tcursor: pointer;\n\n\t\timg {\n\t\t\twidth: 25px;\n\t\t}\n\t}\n\n\t.blur-info {\n\t\tfont-size: 0.7rem;\n\t\topacity: 0.5;\n\t}\n\n\t.margin-small {\n\t\tmargin-bottom: 12px;\n\t}\n\n\t.margin-big {\n\t\tmargin-bottom: 20px;\n\t}\n\n\t.margin-large {\n\t\tmargin-bottom: 40px;\n\t}\n"]))),Su=function(){return(0,We.jsxs)(Cu,{children:[(0,We.jsx)("button",{className:"gear-btn",children:(0,We.jsx)("img",{src:"./images/gear.png",alt:""})}),(0,We.jsx)("p",{className:"margin-small",children:"Steering Mode"}),(0,We.jsx)("div",{className:"margin-big",children:(0,We.jsxs)(gu,{tabClass:"tabs1",children:[(0,We.jsx)("li",{children:"comfort"}),(0,We.jsx)("li",{children:"standard"}),(0,We.jsx)("li",{className:"active",children:"sport"})]})}),(0,We.jsx)("p",{className:"margin-small",children:"Regenerative Breaking"}),(0,We.jsx)("div",{className:"margin-small",children:(0,We.jsxs)(gu,{tabClass:"tabs2",children:[(0,We.jsx)("li",{children:"standard"}),(0,We.jsx)("li",{className:"active",children:"low"})]})}),(0,We.jsx)("p",{className:"blur-info",children:"STANDARD increases range and extends battery life"}),(0,We.jsx)("div",{className:"line"}),(0,We.jsx)("p",{className:"margin-small",children:"Traction Control"}),(0,We.jsx)("button",{className:"margin-small btn-deco",children:"slip start"}),(0,We.jsx)("p",{className:"blur-info",children:"Used to help free vehicle stuck in sand, snow or mud"}),(0,We.jsx)("div",{className:"line"}),(0,We.jsx)("button",{className:"margin-small btn-deco",children:"creep"}),(0,We.jsx)("p",{className:"blur-info",children:"Slowly move forward when brake pedal is released"})]})},Cu=Fe.div(Qs||(Qs=a(["\n\tcolor: #6F6F6F;\n\tpadding: 30px;\n\tpadding-top: 50px;\n\tposition: relative;\n\n\t.gear-btn {\n\t\tbackground: none;\n\t\tborder: 0;\n\t\tposition: absolute;\n\t\ttop: 12px;\n\t\tright: 10px;\n\n\t\tcursor: pointer;\n\n\t\timg {\n\t\t\twidth: 25px;\n\t\t}\n\t}\n\n\t.margin-small {\n\t\tmargin-bottom: 12px;\n\t}\n\n\t.margin-big {\n\t\tmargin-bottom: 20px;\n\t}\n\t.btn-deco {\n\t\tborder: 1px solid #6F6F6F;\n\t\tpadding: 6px 24px;\n\t\tbackground: transparent;\n\t\tborder-radius: 30px;\n\t\tcolor: #6F6F6F;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 0.8rem;\n\t}\n\n\t.blur-info {\n\t\tfont-size: 0.7rem;\n\t\topacity: 0.5;\n\t}\n\t.line {\n\t\theight: 1px;\n\t\tbackground: #6f6f6f;\n\t\topacity: 0.8;\n\t\twidth: 100%;\n\t\tmargin: 18px 0;\n\t}\n"]))),Eu=function(){return(0,We.jsxs)(Tu,{children:[(0,We.jsx)("p",{className:"margin-big",children:(0,We.jsx)("b",{children:"Exterior"})}),(0,We.jsx)("p",{className:"margin-small",children:"Headlights"}),(0,We.jsx)("div",{className:"margin-big",children:(0,We.jsxs)(gu,{tabClass:"tabs1",children:[(0,We.jsx)("li",{className:"active",children:"off"}),(0,We.jsx)("li",{children:"parking"}),(0,We.jsx)("li",{children:"on"}),(0,We.jsx)("li",{children:"auto"})]})}),(0,We.jsx)("button",{className:"btn-deco margin-large",children:"front fog"}),(0,We.jsx)("p",{className:"margin-big",children:(0,We.jsx)("b",{children:"Interior"})}),(0,We.jsx)("p",{className:"margin-small",children:"Dome Lights"}),(0,We.jsx)("div",{className:"margin-big",children:(0,We.jsxs)(gu,{tabClass:"tabs2",children:[(0,We.jsx)("li",{children:"off"}),(0,We.jsx)("li",{children:"on"}),(0,We.jsx)("li",{className:"active",children:"auto"})]})}),(0,We.jsx)("button",{className:"btn-deco",children:"ambient lights"})]})},Tu=Fe.div($s||($s=a(["\n\tcolor: #6F6F6F;\n\tpadding: 30px;\n\tpadding-top: 50px;\n\tposition: relative;\n\n\t.close-btn {\n\t\tbackground: none;\n\t\tborder: 0;\n\t\tposition: absolute;\n\t\ttop: 12px;\n\t\tright: 10px;\n\n\t\tcursor: pointer;\n\n\t\timg {\n\t\t\twidth: 25px;\n\t\t}\n\t}\n\n\t.btn-deco {\n\t\tborder: 1px solid #6F6F6F;\n\t\tpadding: 6px 24px;\n\t\tbackground: transparent;\n\t\tborder-radius: 30px;\n\t\tcolor: #6F6F6F;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 0.8rem;\n\t}\n\n\t.margin-small {\n\t\tmargin-bottom: 12px;\n\t}\n\n\t.margin-big {\n\t\tmargin-bottom: 20px;\n\t}\n\n\t.margin-large {\n\t\tmargin-bottom: 75px;\n\t}\n"]))),Nu=function(){return(0,We.jsxs)(_u,{children:[(0,We.jsxs)("div",{className:"switch-control",children:[(0,We.jsx)(pu,{switchState:!0}),(0,We.jsx)("span",{children:"walk up unlock"})]}),(0,We.jsxs)("div",{className:"switch-control",children:[(0,We.jsx)(pu,{}),(0,We.jsx)("span",{children:"walk away lock"})]}),(0,We.jsxs)("div",{className:"switch-control",children:[(0,We.jsx)(pu,{}),(0,We.jsx)("span",{children:"child protection lock"})]}),(0,We.jsxs)("div",{className:"switch-control",children:[(0,We.jsx)(pu,{switchState:!0}),(0,We.jsx)("span",{children:"unlock on park"})]}),(0,We.jsxs)("div",{className:"glove-box",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("img",{src:"./images/wallet.png",alt:"",className:"wallet"}),(0,We.jsx)("img",{src:"./images/down-gray.png",alt:"",className:"expand"})]}),(0,We.jsx)("span",{children:"GloveBox"})]})]})},_u=Fe.div(Js||(Js=a(["\n\tcolor: #6F6F6F;\n\tpadding: 30px;\n\tpadding-top: 50px;\n\tposition: relative;\n\n\t.close-btn {\n\t\tbackground: none;\n\t\tborder: 0;\n\t\tposition: absolute;\n\t\ttop: 12px;\n\t\tright: 10px;\n\n\t\tcursor: pointer;\n\n\t\timg {\n\t\t\twidth: 25px;\n\t\t}\n\t}\n\n\t.switch-control {\n\t\tdisplay: flex;\n\t\tgap: 16px;\n\t\tmargin-bottom: 24px;\n\t\talign-items: center;\n\n\t\tspan {\n\t\t\ttext-transform: capitalize;\n\t\t\tcolor: #6F6F6F;\n\t\t}\n\t}\n\n\t.glove-box {\n\t\twidth: 200px;\n\t\tborder: 1px solid;\n\t\tpadding: 8px;\n\t\tborder-radius: 24px;\n\t\tmargin: 0 10%;\n\t\tmargin-top: 50px;\n\t\ttext-align: center;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\n\t\tfont-weight: 500;\n\t\ttext-transform: uppercase;\n\t\tcolor: #6f6f6f;\n\n\t\tdiv {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tflex-direction: column;\n\t\t\tmargin: 0 16px;\n\t\t\t.wallet {\n\t\t\t\twidth: 18px;\n\t\t\t}\n\t\t\t.expand {\n\t\t\t\twidth: 12px;\n\t\t\t}\n\t\t}\n\n\t\tspan {\n\t\t\talign-self: center;\n\t\t\tmargin-left: 16px;\n\t\t}\n\t}\n"]))),Iu=function(e){var t=e.imgUrl,n=e.text;return(0,We.jsxs)(Ru,{children:[(0,We.jsx)("img",{src:t,alt:""}),n]})},Ru=Fe.div(eu||(eu=a(["\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 16px;\n\n\tmargin-bottom: 6px;\n\timg {\n\t\twidth: 20px;\n\t}\n"]))),Au=function(){var e=(0,t.useState)(us("mapType")?us("mapType"):"Custom"),n=(0,i.Z)(e,2),r=n[0],a=n[1];return(0,t.useEffect)((function(){!function(e,t){ss.set(e,t)}("mapType",r)}),[r]),(0,We.jsxs)(Ou,{children:[(0,We.jsx)(Iu,{imgUrl:"./images/gps-navigation.png",text:"Map Type"}),(0,We.jsxs)(gu,{tabClass:"tabs1",onClick:function(e){return console.log(e)},children:[(0,We.jsx)("li",{className:"Kakao"===r?"active":"",onClick:function(){return a("Kakao")},children:"Kakao"}),(0,We.jsx)("li",{className:"Custom"===r?"active":"",onClick:function(){return a("Custom")},children:"Custom"})]})]})},Ou=Fe.div(tu||(tu=a(["\n\tcolor: #6F6F6F;\n\tpadding: 30px;\n\tpadding-top: 50px;\n\tposition: relative;\n\n\t.close-btn {\n\t\tbackground: none;\n\t\tborder: 0;\n\t\tposition: absolute;\n\t\ttop: 12px;\n\t\tright: 10px;\n\n\t\tcursor: pointer;\n\n\t\timg {\n\t\t\twidth: 25px;\n\t\t}\n\t}\n\n\t.switch-control {\n\t\tdisplay: flex;\n\t\tgap: 16px;\n\t\tmargin-bottom: 24px;\n\t\talign-items: center;\n\n\t\tspan {\n\t\t\ttext-transform: capitalize;\n\t\t\tcolor: #6F6F6F;\n\t\t}\n\t}\n"]))),Pu=function(e){var t=e.modalToggle,n=e.closeModal,r=e.children;return(0,We.jsx)(We.Fragment,{children:t&&(0,We.jsx)(Du,{onClick:n,children:(0,We.jsxs)(Lu,{onClick:function(e){return e.stopPropagation()},children:[(0,We.jsx)("button",{onClick:n,className:"button-close",children:(0,We.jsx)("img",{src:"./images/close-btn.svg",alt:""})}),r]})})})},Du=Fe.div(nu||(nu=a(["\n\tposition: fixed;\n\tz-index: 1;\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\toverflow: auto;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tdisplay: grid;\n\tplace-content: center;\n"]))),Lu=Fe.div(ru||(ru=a(["\n\tbackground: white;\n\tborder-radius: 8px;\n\tpadding: 20px;\n\tbackground: #151515;\n\twidth: max-content;\n\tmargin-bottom: 60px;\n\n\tbutton {\n\t\tcursor: pointer;\n\t}\n\t.button-close {\n\t\tbackground: none;\n\t\tborder: 0;\n\t\timg {\n\t\t\twidth: 20px;\n\t\t}\n\t}\n"]))),Mu=function(){var e=(0,t.useState)(!1),n=(0,i.Z)(e,2),r=n[0],a=n[1],o=(0,t.useState)(!1),s=(0,i.Z)(o,2),u=s[0],c=s[1];function l(){a(!1),c(!1)}return(0,We.jsxs)(Fu,{children:[(0,We.jsx)("div",{className:"margin-small",children:(0,We.jsx)(Iu,{imgUrl:"./images/monitor.png",text:"Display Brightness"})}),(0,We.jsx)("div",{className:"margin-small",children:(0,We.jsx)(yu,{})}),(0,We.jsx)(Iu,{imgUrl:"./images/beam.png",text:"Exterior Light"}),(0,We.jsxs)(gu,{tabClass:"tabs1",children:[(0,We.jsx)("li",{children:"off"}),(0,We.jsx)("li",{children:"parking"}),(0,We.jsx)("li",{children:"on"}),(0,We.jsx)("li",{className:"active",children:"auto"})]}),(0,We.jsx)("button",{className:"btn-deco margin-large",children:"front fog"}),(0,We.jsx)("div",{className:"margin-small",children:(0,We.jsx)(Iu,{imgUrl:"./images/settings-sliders.png",text:"Adjustments"})}),(0,We.jsxs)("div",{className:"adjustment-btns",children:[(0,We.jsxs)("button",{className:"modal-btn",onClick:function(){return a(!0)},children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("img",{src:"./images/side-mirror-left.png",alt:"mirror-btn"}),(0,We.jsx)("img",{src:"./images/side-mirror-right.png",alt:"mirror-btn"})]}),"mirrors"]}),(0,We.jsxs)("button",{className:"modal-btn",onClick:function(){return c(!0)},children:[(0,We.jsx)("div",{children:(0,We.jsx)("img",{src:"./images/steering-wheel.png",alt:"mirror-btn"})}),"steering wheel"]})]}),(0,We.jsx)("button",{className:"btn-deco",children:"fold mirrors"}),(0,We.jsx)(Pu,{closeModal:l,modalToggle:r,children:(0,We.jsxs)(Bu,{children:[(0,We.jsx)("p",{children:"Use the steering wheel controls to adjust your side mirror"}),(0,We.jsx)("img",{src:"./images/steering-modal.png",alt:"steering-modal"}),(0,We.jsxs)("div",{className:"toggle",children:[(0,We.jsx)(pu,{switchState:!0})," ",(0,We.jsx)("span",{children:"Mirror auto fold"})]}),(0,We.jsx)("button",{onClick:l,children:"done"})]})}),(0,We.jsx)(Pu,{closeModal:l,modalToggle:u,children:(0,We.jsxs)(Bu,{children:[(0,We.jsx)("p",{children:"Use the steering wheel controls to adjust your steering column"}),(0,We.jsx)("img",{src:"./images/steering-modal.png",alt:"steering-modal"}),(0,We.jsx)("button",{onClick:l,children:"done"})]})})]})},Fu=Fe.div(au||(au=a(["\n\tcolor: #6F6F6F;\n\tpadding: 30px;\n\tpadding-top: 50px;\n\tposition: relative;\n\n\t.close-btn {\n\t\tbackground: none;\n\t\tborder: 0;\n\t\tposition: absolute;\n\t\ttop: 12px;\n\t\tright: 10px;\n\n\t\tcursor: pointer;\n\n\t\timg {\n\t\t\twidth: 25px;\n\t\t}\n\t}\n\n\t.light {\n\t\tmargin-top: 12px;\n\t}\n\n\t.btn-deco {\n\t\tborder: 1px solid #6F6F6F;\n\t\tpadding: 6px 24px;\n\t\tbackground: transparent;\n\t\tborder-radius: 30px;\n\t\tcolor: #6F6F6F;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 0.8rem;\n\t\tmargin-top: 12px;\n\n\t\t&:last-of-type {\n\t\t\tmargin-top: 20px;\n\t\t}\n\t}\n\n\t.adjustment {\n\t\tmargin-top: 35px;\n\t\tmargin-bottom: 16px;\n\t}\n\t.adjustment-btns {\n\t\tdisplay: flex;\n\t\tgap: 12px;\n\t}\n\n\t.modal-btn {\n\t\twidth: 160px;\n\t\theight: 100px;\n\t\tborder-radius: 16px;\n\t\tbackground: #eeeeee;\n\t\tborder: 1px solid #6f6f6f;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 16px;\n\t\tcursor: pointer;\n\t\tcolor: #6f6f6f;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 0.8rem;\n\t\t& > div {\n\t\t\tdisplay: flex;\n\t\t\tgap: 25px;\n\t\t}\n\t\timg {\n\t\t\twidth: 20px;\n\t\t}\n\t}\n\n\t.margin-small {\n\t\tmargin-bottom: 12px;\n\t}\n\n\t.margin-big {\n\t\tmargin-bottom: 20px;\n\t}\n\n\t.margin-large {\n\t\tmargin-bottom: 40px;\n\t}\n"]))),Bu=Fe.div(ou||(ou=a(["\n\twidth: 380px;\n\tp {\n\t\tcolor: white;\n\t\twidth: 250px;\n\t\tfont-size: 0.8rem;\n\t\ttext-align: center;\n\t\tmargin: 0 auto;\n\t\tfont-weight: 500;\n\t}\n\n\timg {\n\t\twidth: 300px;\n\t\tmargin: 20px auto;\n\t}\n\n\tbutton {\n\t\twidth: 100%;\n\t\tborder-radius: 16px;\n\t\tpadding: 8px;\n\t\tbackground: inherit;\n\t\tmargin-bottom: 8px;\n\t\tborder: 0;\n\t\tcolor: white;\n\t\tbackground: #626161;\n\t\ttext-transform: uppercase;\n\t}\n\n\t.toggle {\n\t\tdisplay: flex;\n\t\tgap: 16px;\n\t\talign-items: center;\n\t\tmargin: 0 auto;\n\t\twidth: max-content;\n\t\tmargin-top: -50px;\n\t\tmargin-bottom: 20px;\n\t\ttext-transform: capitalize;\n\t}\n"]))),ju=function(){return(0,We.jsxs)(zu,{children:[(0,We.jsx)("button",{className:"gear-btn",children:(0,We.jsx)("img",{src:"./images/gear.png",alt:""})}),(0,We.jsx)("p",{className:"margin-big",children:"parking brake"}),(0,We.jsxs)("div",{className:"parking",children:[(0,We.jsxs)("div",{className:"modal-btn",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("img",{src:"./images/parking-area.png",alt:"mirror-btn"}),(0,We.jsxs)("span",{children:["parking ",(0,We.jsx)("br",{}),"brake"]})]}),"brake is off"]}),(0,We.jsx)("p",{className:"blur-info",children:"Selecting PARK on the steering column will also set the parking brake"})]}),(0,We.jsx)("p",{className:"margin-small",children:"vehicle power"}),(0,We.jsx)("button",{className:"btn-deco margin-small",children:"power off "}),(0,We.jsx)("p",{className:"blur-info",children:"Pressing the brake pedal will turn the car on again"}),(0,We.jsx)("div",{className:"line"})]})},zu=Fe.div(iu||(iu=a(["\n\tcolor: #6F6F6F;\n\tpadding: 30px;\n\tpadding-top: 50px;\n\tposition: relative;\n\n\ttext-transform: capitalize;\n\t\n\t.btn-deco {\n\t\tborder: 1px solid #6F6F6F;\n\t\tpadding: 6px 24px;\n\t\tbackground: transparent;\n\t\tborder-radius: 30px;\n\t\tcolor: #6F6F6F;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 0.8rem;\n\t}\n\n\t.gear-btn {\n\t\tbackground: none;\n\t\tborder: 0;\n\t\tposition: absolute;\n\t\ttop: 12px;\n\t\tright: 10px;\n\n\t\tcursor: pointer;\n\n\t\timg {\n\t\t\twidth: 25px;\n\t\t}\n\t}\n\n\t.blur-info {\n\t\tfont-size: 0.7rem;\n\t\topacity: 0.5;\n\t}\n\n\t.margin-small {\n\t\tmargin-bottom: 12px;\n\t}\n\n\t.margin-big {\n\t\tmargin-bottom: 20px;\n\t}\n\n\t.margin-large {\n\t\tmargin-bottom: 40px;\n\t}\n\n\t.parking {\n\t\tdisplay: flex;\n\t\tgap: 10px;\n\t\talign-items: center;\n\t\tmargin-bottom: 30px;\n\t\timg {\n\t\t\twidth: 40px;\n\t\t}\n\n\t\tspan {\n\t\t\tfont-weight: 500;\n\t\t}\n\t\tp {\n\t\t\twidth: 150px;\n\t\t\tfont-size: 0.6rem;\n\t\t\ttext-align: center;\n\t\t}\n\t}\n\n\t.modal-btn {\n\t\twidth: 180px;\n\t\theight: 100px;\n\t\tborder-radius: 16px;\n\t\tbackground: #eeeeee;\n\t\tborder: 1px solid #6f6f6f;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 20px;\n\t\tcursor: pointer;\n\t\tcolor: #6f6f6f;\n\t\ttext-transform: uppercase;\n\n\t\t& > div {\n\t\t\tdisplay: flex;\n\t\t\tgap: 16px;\n\t\t\talign-items: center;\n\t\t}\n\t}\n\n\t.line {\n\t\theight: 1px;\n\t\tbackground: #6f6f6f;\n\t\topacity: 0.8;\n\t\twidth: 100%;\n\t\tmargin: 18px 0;\n\t}\n"]))),Vu=function(){return(0,We.jsxs)(Wu,{children:[(0,We.jsxs)("button",{className:"btn-deco",children:[(0,We.jsx)("img",{src:"./images/windshield_gray.png",alt:"beam"}),"wiper service mode"]}),(0,We.jsxs)("div",{className:"modal-btn",children:[(0,We.jsx)("img",{src:"./images/beam.png",alt:"beam"}),"adjust headlights"]}),(0,We.jsxs)("div",{className:"modal-btn",children:[(0,We.jsx)("img",{src:"./images/beam.png",alt:"beam"}),"headlight reset"]})]})},Wu=Fe.div(su||(su=a(["\n\tcolor: #6F6F6F;\n\tpadding: 30px;\n\tpadding-top: 60px;\n\tposition: relative;\n\n\ttext-transform: capitalize;\n\timg {\n\t\twidth: 25px;\n\t}\n\t.close-btn {\n\t\tbackground: none;\n\t\tborder: 0;\n\t\tposition: absolute;\n\t\ttop: 12px;\n\t\tright: 10px;\n\n\t\tcursor: pointer;\n\t}\n\n\t.btn-deco {\n\t\tborder: 1px solid #6F6F6F;\n\t\tpadding: 6px 24px;\n\t\tbackground: transparent;\n\t\tborder-radius: 30px;\n\t\tcolor: #6F6F6F;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 0.8rem;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 20px;\n\t\tmargin-bottom: 35px;\n\t}\n\n\t.modal-btn {\n\t\twidth: 180px;\n\t\theight: 100px;\n\t\tborder-radius: 16px;\n\t\tbackground: #eeeeee;\n\t\tborder: 1px solid #6f6f6f;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 20px;\n\t\tcursor: pointer;\n\t\tcolor: #6f6f6f;\n\t\ttext-transform: uppercase;\n\t\tmargin-bottom: 16px;\n\t}\n"]))),Zu=function(){return(0,We.jsxs)(Uu,{children:[(0,We.jsxs)("div",{className:"switch-control",children:[(0,We.jsx)(pu,{switchState:!0}),(0,We.jsx)("span",{children:"Dummy true init"})]}),(0,We.jsxs)("div",{className:"switch-control",children:[(0,We.jsx)(pu,{}),(0,We.jsx)("span",{children:"Dummy false init"})]})]})},Uu=Fe.div(uu||(uu=a(["\n\tcolor: #6F6F6F;\n\tpadding: 30px;\n\tpadding-top: 50px;\n\tposition: relative;\n\n\t.close-btn {\n\t\tbackground: none;\n\t\tborder: 0;\n\t\tposition: absolute;\n\t\ttop: 12px;\n\t\tright: 10px;\n\n\t\tcursor: pointer;\n\n\t\timg {\n\t\t\twidth: 25px;\n\t\t}\n\t}\n\n\t.switch-control {\n\t\tdisplay: flex;\n\t\tgap: 16px;\n\t\tmargin-bottom: 24px;\n\t\talign-items: center;\n\n\t\tspan {\n\t\t\ttext-transform: capitalize;\n\t\t\tcolor: #6F6F6F;\n\t\t}\n\t}\n"]))),Hu=function(e){var n=e.appLayout,r=e.carStatusView,a=e.mapView,o=(0,t.useState)(0),s=(0,i.Z)(o,2),u=s[0],c=s[1];return(0,We.jsx)(Gu,{appLayout:n,carStatusView:r,mapView:a,children:(0,We.jsxs)(Os,{className:"car-control",onSelect:function(e){return c(e)},children:[(0,We.jsxs)(Ls,{className:"car-control-tab-list",children:[(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:0===u?"./car_control/switch-active.png":"./car_control/switch.png",alt:"",className:"toggle"})}),"Controls"]}),(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:1===u?"./car_control/car-control-active.png":"./car_control/car-control.png",className:"driving",alt:""})}),"Pedals & Steering"]}),(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:2===u?"./car_control/thunder-active.png":"./car_control/thunder.png",alt:""})}),"Charging"]}),(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:3===u?"./car_control/steering-wheel-active.png":"./car_control/steering-wheel.png",alt:""})}),"Autopilot"]}),(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:4===u?"./car_control/padlock-active.png":"./car_control/padlock.png",alt:""})}),"Locks"]}),(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:5===u?"./car_control/bulb-active.png":"./car_control/bulb.png",alt:"",className:"bulb"})}),"Lights"]}),(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:6===u?"./car_control/monitor-active.png":"./car_control/monitor.png",alt:"",className:"display-settings"})}),"Display"]}),(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:7===u?"./car_control/trip-active.png":"./car_control/trip.png",alt:"",className:"trip"})}),"Trips"]}),(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:8===u?"./car_control/gps-navigation-active.png":"./car_control/gps-navigation.png",alt:""})}),"Navigation"]}),(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:9===u?"./car_control/exclamation-active.png":"./car_control/exclamation.png",alt:""})}),"Safety"]}),(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:10===u?"./car_control/wrench-active.png":"./car_control/wrench.png",alt:""})}),"Service"]}),(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:11===u?"./car_control/download-active.png":"./car_control/download.png",alt:""})}),"Software"]}),(0,We.jsxs)(zs,{children:[(0,We.jsx)("span",{className:"img-cont",children:(0,We.jsx)("img",{src:12===u?"./car_control/package-active.png":"./car_control/package.png",alt:""})}),"Upgrades"]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)(du,{children:(0,We.jsx)(Mu,{})}),(0,We.jsx)(du,{children:(0,We.jsx)(Su,{})}),(0,We.jsx)(du,{children:(0,We.jsx)(Zu,{})}),(0,We.jsx)(du,{children:(0,We.jsx)(hu,{})}),(0,We.jsx)(du,{children:(0,We.jsx)(Nu,{})}),(0,We.jsx)(du,{children:(0,We.jsx)(Eu,{})}),(0,We.jsx)(du,{children:(0,We.jsx)(ku,{})}),(0,We.jsx)(du,{children:(0,We.jsx)(Zu,{})}),(0,We.jsx)(du,{children:(0,We.jsx)(Au,{})}),(0,We.jsx)(du,{children:(0,We.jsx)(ju,{})}),(0,We.jsx)(du,{children:(0,We.jsx)(Vu,{})}),(0,We.jsx)(du,{children:(0,We.jsx)(Zu,{})}),(0,We.jsx)(du,{children:(0,We.jsx)(Zu,{})})]})]})})},Gu=Fe.div(cu||(cu=a(["\n\tz-index: 2;\n\tposition: relative;\n\ttransition: all 0.6s ease;\n\n\theight: ","px;\n\tmax-height: ","px;\n\twidth: ",";\n\n\t.car-control {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1.0fr 2fr;\n\t\theight: 100%;\n\t\tbackground: #f0f0f0;\n\t\tfont-size: 0.9rem;\n\t\t//border: 1px solid #cccccc;\n\t\t//border-top-left-radius: 12px;\n\t\t//border-top-right-radius: 12px;\n\t\t\n\t\t.car-control-tab-list {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tborder-top-left-radius: 12px;\n\t\t\theight: 95%;//100%;\n\n\t\t\tmargin: 16px;\n\t\t\tlist-style-type: none;\n\t\t\tpadding: 0;\n\t\t\tbackground: #f0f0f0;\n\t\t\t\n\t\t\tli {\n\t\t\t\tcursor: pointer;\n\t\t\t\t//margin-bottom: 16px;\n\t\t\t\theight: 45px;\n\t\t\t\t//padding-left: 18px;\n\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\t//color: rgb(0, 0, 0);\n\t\t\t\tcolor: darkgray;\n\t\t\t\t//opacity: 0.5;\n\n\t\t\t\tborder-radius: 8px;\n\t\t\t}\n\t\t\tli.react-tabs__tab--selected {\n\t\t\t\topacity: 1;\n\t\t\t\tborder: 0;\n\t\t\t\toutline: 0;\n\t\t\t\tbackground: #ffffff;\n\t\t\t\tcolor: black;\n\t\t\t}\n\t\t\tli:hover {\n\t\t\t\topacity: 1;\n\t\t\t\tborder: 0;\n\t\t\t\toutline: 0;\n\t\t\t\ttransition: color 0.5s ease-in-out, opacity 0.5s ease-in-out;\n\t\t\t\tcolor: black;\n\t\t\t}\n\n\t\t\t.img-cont {\n\t\t\t\twidth: 50px;\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t}\n\t\t\timg {\n\t\t\t\twidth: 18px;\n\t\t\t\tdisplay: inline-block;\n\t\t\t}\n\n\t\t\t.toggle {\n\t\t\t\twidth: 25px;\n\t\t\t}\n\n\t\t\t.display-settings {\n\t\t\t\twidth: 35px;\n\t\t\t}\n\t\t\t.driving {\n\t\t\t\twidth: 25px;\n\t\t\t}\n\t\t\t.bulb {\n\t\t\t\twidth: 35px;\n\t\t\t}\n\t\t\t.trip {\n\t\t\t\twidth: 35px;\n\t\t\t}\n\t\t}\n\n\t\t.react-tabs__tab-panel {\n\t\t\ttransition: none;\n\t\t}\n\t\t.react-tabs__tab-panel.react-tabs__tab-panel--selected {\n\t\t\ttransition: none;\n\t\t}\n\t}\n\n\t.tab-panels {\n\t\tborder: solid blue;\n\t}\n"])),(function(e){return e.appLayout.appExpandHeight}),(function(e){return e.appLayout.appExpandHeight}),(function(e){return e.carStatusView&&e.mapView?"60%":"100%"})),qu=function(e){var n=e.background,r=e.activeBackground,a=e.activeBackgroundBlur,o=e.size,s=void 0===o?"40px":o,u=e.padding,c=void 0===u?"0px":u,l=e.teslaDemoMode,d=void 0!==l&&l,p=e.teslaVideo,f=void 0===p?"":p,h=e.setTeslaDemoMode,m=void 0===h?null:h,g=e.setTeslaVideo,v=void 0===g?null:g,y=(0,t.useState)(!1),b=(0,i.Z)(y,2),x=b[0],k=b[1];return(0,t.useEffect)((function(){null!=m&&null!=v&&(m(x),v(x?f:""))}),[x]),(0,t.useEffect)((function(){x&&!d&&k(!1)}),[d]),(0,We.jsx)(Xu,{background:n,activeBackground:r,activeBackgroundBlur:a,size:s,padding:c,children:(0,We.jsx)("button",{className:x?"active":null,onClick:function(){k(!x)}})})},Xu=Fe.div(lu||(lu=a(["\n\t\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tpadding-top: ",";\n\twidth: 60px;\n\theight: 60px;\n\n\t.description {\n\t\tfont-size: 0.9rem;\n\t\tpadding-top: 4px;\n\t\ttext-transform: uppercase;\n\t\tfont-weight: 500;\n\t\tcolor: #ffffff;\n\t}\n\tbutton {\n\t\tborder: 0;\n\t\twidth: ",";\n\t\theight: ",";\n\t\tbackground-image: url(",");\n\t\tbackground-color: transparent;\n\t\tbackground-size:"," ",";\n\t\tbackground-position: center;\n\t\tcursor: pointer;\n\t\ttransition: background-image 0.4s ease-in;\n\t\tposition: relative;\n\t}\n\n\tbutton.active {\n\t\tbackground-image: url(",");\n\t\tbackground-size:"," ",";\n\t\tfilter: drop-shadow(\n\t\t\t0px 5px 15px ","\n\t\t);\n\t\tbackground-position: center;\n\t}\n"])),(function(e){return e.padding}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.background}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return null===e.activeBackground?e.background:e.activeBackground}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.activeBackgroundBlur})),Ku=function(e){var n=e.isPlaying,r=e.setIsPlaying,a=e.currentPlaying,o=e.nextSong,i=e.prevSong,s=e.toggleExpand,u=e.expand,c=e.currentApp;function l(e){if(null!=a&&null!=a.url&&""!==a.url){var t=document.getElementById("myRadio");if(null!=t){var n=t.getElementsByTagName("video")[0];null!=n&&(e?n.play().catch((function(e){})):n.pause())}}r(e)}return(0,t.useEffect)((function(){null!=a&&""!==a.name?l(!0):l(!1)}),[a]),(0,We.jsxs)("div",{style:Yu,children:[(0,We.jsxs)("div",{style:Yu.currentMediaApps,children:[(0,We.jsx)("div",{style:Yu.currentMediaApp,children:(0,We.jsx)("img",{src:c?c.image:"./media/music-gray.png",style:c?{width:.8*c.style.width,height:.8*c.style.height,padding:.8*c.style.padding}:{width:64,height:64},alt:""})}),(0,We.jsxs)("div",{style:Yu.currentPlaying,id:"current-playing",children:[a&&a.name&&""!==a.name&&(0,We.jsx)("span",{style:Yu.currentPlaying.title,children:a.name}),a&&a.desc&&""!==a.desc&&(0,We.jsx)("span",{style:Yu.currentPlaying.desc,children:a.desc})]})]}),(0,We.jsxs)("div",{style:Yu.controls,children:[(0,We.jsx)("div",{onClick:i,style:Yu.controls.div,children:(0,We.jsx)("img",{src:"./images/prev-button.png",alt:"prev"})}),(0,We.jsx)("div",{onClick:function(){return l(!n)},style:Yu.controls.div,children:n?(0,We.jsx)("img",{src:"./images/pause-button.png",alt:"pause"}):(0,We.jsx)("img",{src:"./images/play-button.png",alt:"play"})}),(0,We.jsx)("div",{onClick:o,style:Yu.controls.div,children:(0,We.jsx)("img",{src:"./images/next-button.png",alt:"next"})}),(0,We.jsx)("div",{onClick:s,style:Yu.controls.div,children:u?(0,We.jsx)("img",{src:"./images/expand-down.png",alt:""}):(0,We.jsx)("img",{src:"./images/expand-up.png",alt:""})})]})]})},Yu={width:"100%",height:80,display:"flex",flexDirection:"row",backgroundColor:"#eeeeee",alignItems:"center",justifyContent:"space-between",currentMediaApps:{width:"70%",height:80,display:"flex",flexDirection:"row",alignItems:"center"},currentMediaApp:{width:"20%",height:80,display:"flex",justifyContent:"center",alignItems:"center"},currentPlaying:{width:"80%",height:80,padding:"0 16px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",title:{fontSize:24,fontWeight:"700"},desc:{fontSize:16}},controls:{width:"30%",height:80,padding:"0 24px",display:"flex",flexDirection:"row",alignItems:"center",gap:32,justifyContent:"space-between",div:{width:32,height:32,cursor:"pointer"}}},Qu=function(e){var t=e.channel,n=e.currentIndex,r=e.setCurrentStation,a=e.setStationUrl,o=e.carStatusView,i=e.mapView;function s(){return(s=(0,qe.Z)($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.url.length>0&&(r(n),a(t.url));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,We.jsx)("div",{style:o&&i?tc.border:tc.borderHalf,children:(0,We.jsxs)("div",{onClick:function(){return function(){return s.apply(this,arguments)}()},style:tc.button,children:[(0,We.jsx)("div",{style:tc.col1,children:(0,We.jsx)("img",{src:t.image,style:t.name.includes("BBC")?{width:180,height:40}:{width:208,height:24},alt:""})}),(0,We.jsxs)("div",{style:tc.col2,children:[(0,We.jsx)("div",{style:{fontSize:18,fontWeight:"700"},children:t.name}),(0,We.jsx)("div",{style:{fontSize:14},children:t.desc})]}),(0,We.jsx)("div",{style:tc.col3,children:(0,We.jsx)("span",{style:{fontSize:18},children:""!==t.url?"v":"?"})})]})})};function $u(){return $u=(0,qe.Z)($e().mark((function e(){var t,n,r,a,i,s,u,c,l,d,p=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=p.length>0&&void 0!==p[0]?p[0]:null,n=p.length>1&&void 0!==p[1]?p[1]:null,r=(0,o.Z)(ec.list),e.prev=3,i=$e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=(t=a.value).pls&&t.pls.length>0)){e.next=5;break}return n="http://localhost:5000/internet-radio/"+String(t.pls),e.next=5,fetch(n).then((function(e){return e.text()})).then((function(e){for(var n=e.split("\n"),r=0;r<n.length;r++){0===n[r].indexOf("File1=")&&(t.url=n[r].substring(6))}}));case 5:case"end":return e.stop()}}),e)})),r.s();case 6:if((a=r.n()).done){e.next=10;break}return e.delegateYield(i(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),r.e(e.t1);case 15:return e.prev=15,r.f(),e.finish(15);case 18:null!=t&&null!=(s=t())&&s.length>0&&null!=n&&n(s[0].url),u=!0,c=(0,o.Z)(ec.list);try{for(c.s();!(l=c.n()).done;)null!=(d=l.value).url&&0!==d.url.length||(u=!1)}catch(lT){c.e(lT)}finally{c.f()}ec.allOK=u;case 23:case"end":return e.stop()}}),e,null,[[3,12,15,18]])}))),$u.apply(this,arguments)}var Ju,ec={list:[{name:"MBC FM4U",desc:"\ub300\uc911 \uc74c\uc545",pls:"mbcfm.pls",url:"",image:"./kor_radios/mbc_fm4u.png"},{name:"MBC \ud45c\uc900 FM",desc:"\uc885\ud569 \ubc29\uc1a1 : \ub274\uc2a4, \uc2dc\uc0ac, \uad50\uc591, \ub300\uc911 \uc74c\uc545",pls:"mbcsfm.pls",url:"",image:"./kor_radios/mbc_sfm.png"},{name:"TBS FM",desc:"\uc218\ub3c4\uad8c \uad50\ud1b5, \uc0dd\ud65c\uc815\ubcf4 \ucc44\ub110",pls:"tbsfm.pls",url:"",image:"./kor_radios/tbs_fm.png"},{name:"EBS FM",desc:"\uad50\uc721 \ubc29\uc1a1 FM",pls:"ebsfm.pls",url:"",image:"./kor_radios/ebs_fm.png"},{name:"KBS 1 Radio",desc:"\ub274\uc2a4, \uc2dc\uc0ac, \uad50\uc591",pls:"kbs1radio.pls",url:"",image:"./kor_radios/kbs_1radio.png"},{name:"KBS \ud574\ud53c FM",desc:"\uc911\uc7a5\ub144\uce35 \ub300\uc0c1 \ub300\uc911 \uc74c\uc545",pls:"kbs2radio.pls",url:"",image:"./kor_radios/kbs_happy_fm.png"},{name:"KBS \ud074\ub798\uc2dd FM",desc:"\uc11c\uc591 \uace0\uc804 \uc74c\uc545 \ubc0f \ud55c\uad6d \uad6d\uc545",pls:"kbsfm.pls",url:"",image:"./kor_radios/kbs_classic_fm.png"},{name:"KBS \ucfe8 FM",desc:"\uc80a\uc740\uce35 \ub300\uc0c1 \ub300\uc911 \uc74c\uc545",pls:"kbs2fm.pls",url:"",image:"./kor_radios/kbs_cool_fm.png"},{name:"SBS \ud30c\uc6cc FM",desc:"\ub300\uc911 \uc74c\uc545",pls:"sbsfm.pls",url:"",image:"./kor_radios/sbs_power_fm.png"},{name:"SBS \ub7ec\ube0c FM",desc:"\uc885\ud569 \ubc29\uc1a1 : \ub274\uc2a4, \uc2dc\uc0ac, \uad50\uc591, \ub300\uc911 \uc74c\uc545",pls:"sbs2fm.pls",url:"",image:"./kor_radios/sbs_love_fm.png"},{name:"BBC Radio 1",desc:"Contemporary Hit Radio",url:"http://a.files.bbci.co.uk/media/live/manifesto/audio/simulcast/hls/nonuk/sbr_low/ak/bbc_radio_one.m3u8",image:"./bbc_radios/bbc_radio1.png"},{name:"BBC Radio 1 Extra",desc:"Urban contemporary, electronica, hip hop, R&B, soul",url:"http://a.files.bbci.co.uk/media/live/manifesto/audio/simulcast/hls/nonuk/sbr_low/ak/bbc_1xtra.m3u8",image:"./bbc_radios/bbc_radio1_extra.png"},{name:"BBC Radio 1 Dance",desc:"Electronic dance music",url:"http://a.files.bbci.co.uk/media/live/manifesto/audio/simulcast/hls/nonuk/sbr_low/ak/bbc_radio_one_dance.m3u8",image:"./bbc_radios/bbc_radio1_dance.png"},{name:"BBC Radio 1 Relax",desc:"Chill-out, well-being, relaxation, meditation",url:"http://a.files.bbci.co.uk/media/live/manifesto/audio/simulcast/hls/nonuk/sbr_low/ak/bbc_radio_one_relax.m3u8",image:"./bbc_radios/bbc_radio1_relax.png"},{name:"BBC Radio 2",desc:"Adult Contemporary",url:"http://a.files.bbci.co.uk/media/live/manifesto/audio/simulcast/hls/nonuk/sbr_low/ak/bbc_radio_two.m3u8",image:"./bbc_radios/bbc_radio2.png"},{name:"BBC Radio 3",desc:"Classical, jazz, world music, drama, culture, arts",url:"http://a.files.bbci.co.uk/media/live/manifesto/audio/simulcast/hls/nonuk/sbr_low/ak/bbc_radio_three.m3u8",image:"./bbc_radios/bbc_radio3.png"},{name:"BBC Radio 4",desc:"News, talk, comedy and drama",url:"http://a.files.bbci.co.uk/media/live/manifesto/audio/simulcast/hls/nonuk/sbr_low/ak/bbc_radio_fourfm.m3u8",image:"./bbc_radios/bbc_radio4.png"},{name:"BBC Radio 4 Extra",desc:"Comedy, drama, entertainment",url:"http://a.files.bbci.co.uk/media/live/manifesto/audio/simulcast/hls/nonuk/sbr_low/ak/bbc_radio_four_extra.m3u8",image:"./bbc_radios/bbc_radio4_extra.png"},{name:"BBC Radio 5 Live",desc:"News and sports",url:"http://a.files.bbci.co.uk/media/live/manifesto/audio/simulcast/hls/nonuk/sbr_low/ak/bbc_radio_five_live.m3u8",image:"./bbc_radios/bbc_radio5_live.png"},{name:"BBC Radio 6 Music",desc:"Alternative, Indie",url:"http://a.files.bbci.co.uk/media/live/manifesto/audio/simulcast/hls/nonuk/sbr_low/ak/bbc_6music.m3u8",image:"./bbc_radios/bbc_radio6.png"},{name:"BBC Asian Network",desc:"Indian music, news, and entertainment",url:"http://a.files.bbci.co.uk/media/live/manifesto/audio/simulcast/hls/nonuk/sbr_low/ak/bbc_asian_network.m3u8",image:"./bbc_radios/bbc_asian_network.png"},{name:"BBC World Service",desc:"News, speech, discussions",url:"http://a.files.bbci.co.uk/media/live/manifesto/audio/simulcast/hls/nonuk/sbr_low/ak/bbc_world_service.m3u8",image:"./bbc_radios/bbc_world_service.png"}],allOK:!1},tc={border:{height:64,width:"100%",padding:"4px 8px"},borderHalf:{height:64,width:"50%",padding:"4px 8px"},button:{height:56,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",borderRadius:12,backgroundColor:"#f0f0f0",cursor:"pointer"},col1:{width:"34%",padding:"0px 16px"},col2:{width:"60%",padding:"0px 16px"},col3:{width:"6%",justifyContent:"center",alignItems:"center"}},nc=new Uint8Array(16);function rc(){if(!Ju&&!(Ju="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ju(nc)}var ac=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var oc=function(e){return"string"===typeof e&&ac.test(e)},ic=[],sc=0;sc<256;++sc)ic.push((sc+256).toString(16).substr(1));var uc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ic[e[t+0]]+ic[e[t+1]]+ic[e[t+2]]+ic[e[t+3]]+"-"+ic[e[t+4]]+ic[e[t+5]]+"-"+ic[e[t+6]]+ic[e[t+7]]+"-"+ic[e[t+8]]+ic[e[t+9]]+"-"+ic[e[t+10]]+ic[e[t+11]]+ic[e[t+12]]+ic[e[t+13]]+ic[e[t+14]]+ic[e[t+15]]).toLowerCase();if(!oc(n))throw TypeError("Stringified UUID is invalid");return n};var cc,lc=function(e,t,n){var r=(e=e||{}).random||(e.rng||rc)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return uc(r)},dc=n(689),pc=[{name:"Radio",image:"./media/K-Radio.webp",desc:"",url:"",style:{width:80,height:80,padding:0}},{name:"BBC Radio",image:"./media/BBC_Radio.png",desc:"",url:"",style:{width:80,height:80,padding:0}},{name:"Bluetooth",image:"./media/Bluetooth.png",desc:"",url:"",style:{width:80,height:80,padding:0}},{name:"Melon Music",image:"./media/melon_music.png",desc:"",url:"melon.com",style:{width:100,height:100,padding:0}},{name:"Spotify",image:"./media/Spotify.png",desc:"",url:"spotify.com",style:{width:100,height:100,padding:0}},{name:"Apple Music",image:"./media/AppleMusic.png",desc:"",url:"music.apple.com",style:{width:60,height:60,padding:10}},{name:"YouTube Music",image:"./media/youtube_music.png",desc:"",url:"music.youtube.com",style:{width:60,height:60,padding:10}},{name:"Caraoke",image:"./media/Caraoke.png",desc:"",url:"",style:{width:60,height:60,padding:10}},{name:"TuneIn",image:"./media/TuneIn.png",desc:"",url:"tunein.com",style:{width:100,height:100,padding:0}},{name:"Tidal",image:"./media/Tidal.png",desc:"",url:"tidal.com",style:{width:100,height:100,padding:0}},{name:"Netflix",image:"./media/netflix.png",desc:"",url:"netflix.com",style:{width:60,height:60,padding:10}},{name:"YouTube",image:"./media/youtube.png",desc:"",url:"youtube.com",style:{width:70,height:70,padding:5}}],fc=function(e){var t=e.currentApp,n=e.setCurrentApp,r=e.setRegionalStations,a=e.setCurrentStation,o=e.setStationUrl,i=e.setCurrentPlaying,s=e.allAppsView,u=e.setAllAppsView;function c(e){if(t&&e.name===t.name)t&&e.name===t.name&&s&&u(!1);else if(i({name:"",image:"",desc:""}),n(e),"Radio"===e.name||"BBC Radio"===e.name){var c=r(e);c.length>0&&(a(0),o(c[0].url))}}return(0,We.jsx)(We.Fragment,{children:pc.map((function(e,t){return(0,We.jsx)("div",{onClick:function(){return c(e)},style:hc,children:(0,We.jsxs)("div",{style:hc.innerBorder,children:[(0,We.jsx)("div",{style:{height:"75%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,We.jsx)("img",{src:e.image,alt:"",style:e.style})}),(0,We.jsx)("div",{style:{height:"25%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,We.jsx)("span",{children:e.name})})]})},t)}))})},hc={width:"20%",height:192,padding:8,innerBorder:{borderRadius:12,backgroundColor:"#f0f0f0",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",fontSize:"1.2rem",cursor:"pointer"}},mc=function(e){var n=e.appLayout,r=e.carStatusView,a=e.mapView,o=(0,t.useState)(!gc.available),s=(0,i.Z)(o,2),u=s[0],c=s[1],l=(0,t.useState)(gc.available?gc.currentApp:null),d=(0,i.Z)(l,2),p=d[0],f=d[1],h=(0,t.useState)(gc.available?gc.stations:ec.list.filter(U)),m=(0,i.Z)(h,2),g=m[0],v=m[1],y=(0,t.useState)(gc.available?gc.currentStation:0),b=(0,i.Z)(y,2),x=b[0],k=b[1],w=(0,t.useState)(gc.available?gc.stationUrl:""),S=(0,i.Z)(w,2),C=S[0],E=S[1],T=(0,t.useState)(!1),N=(0,i.Z)(T,2),_=N[0],I=N[1],R=(0,t.useState)(null),A=(0,i.Z)(R,2),O=A[0],P=A[1],D=(0,t.useState)(!!gc.available&&gc.isPlaying),L=(0,i.Z)(D,2),M=L[0],F=L[1],B=(0,t.useState)(!0),j=(0,i.Z)(B,2),z=j[0],V=j[1];(0,t.useEffect)((function(){ec.allOK||function(){$u.apply(this,arguments)}(H,E)}),[]);function W(){return(W=(0,qe.Z)($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(!z);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return e.name.indexOf("BBC")>-1}function U(e){return-1===e.name.indexOf("BBC")}function H(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return e=t&&"Radio"!==t.name?ec.list.filter(Z):ec.list.filter(U),v(e),e}return(0,t.useEffect)((function(){if(_||(I(!0),!gc.available||!gc.isPlaying||"Radio"!==gc.currentApp.name&&"BBC Radio"!==gc.currentApp.name))if(p){if("Radio"===p.name||"BBC Radio"===p.name){if(x<g.length&&null!=C&&""!==C){P(g[x]);try{gc.currentApp=p,gc.currentStation=x,gc.stationUrl=C,gc.stations=g,gc.isPlaying=!0,gc.available=!0}catch(e){gc.isPlaying=!1,console.log("cannot play the sound file",e)}}}else gc.currentApp=p,gc.isPlaying=!0,gc.available=!0,P({name:p.name,desc:p.desc,image:p.image});c(!1)}else P({name:"",image:"",desc:""});else P(gc.stations[gc.currentStation])}),[p,x,C]),(0,We.jsxs)(yc,{expand:z,appLayout:n,carStatusView:r,mapView:a,children:[(0,We.jsx)(Ku,{isPlaying:M,currentPlaying:O,setIsPlaying:F,nextSong:function(){var e;p&&("Radio"!==p.name&&"BBC Radio"!==p.name||g.length>0&&(e=x+1<g.length?x+1:0,k(e),E(g[e].url)))},prevSong:function(){var e;p&&("Radio"!==p.name&&"BBC Radio"!==p.name||g.length>0&&(e=x>0?x-1:g.length-1,k(e),E(g[e].url)))},setExpand:V,toggleExpand:function(){return W.apply(this,arguments)},expand:z,currentApp:p}),u?(0,We.jsx)("div",{style:vc.mediaApps,children:(0,We.jsx)(fc,{currentApp:p,setCurrentApp:f,setRegionalStations:H,setCurrentStation:k,setStationUrl:E,setCurrentPlaying:P,allAppsView:u,setAllAppsView:c})}):(0,We.jsx)(We.Fragment,{children:p&&("Radio"===p.name||"BBC Radio"===p.name)&&(0,We.jsx)("div",{style:vc.radioPlaylist,children:(0,We.jsx)(We.Fragment,{children:g.map((function(e,t){return(0,We.jsx)(Qu,{channel:e,currentIndex:t,setCurrentStation:k,setStationUrl:E,carStatusView:r,mapView:a},lc())}))})})}),p&&("Radio"===p.name||"BBC Radio"===p.name)&&(0,We.jsx)(dc.Z,{id:"myRadio",controls:!1,playing:!0,muted:!1,width:"0px",height:"0px",url:C,onReady:function(e){}}),z&&!u&&(0,We.jsx)("div",{onClick:function(){return c(!0)},style:{position:"absolute",right:10,bottom:10,width:96,height:48,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"gray",opacity:.5,borderRadius:40,fontSize:24,color:"white",cursor:"pointer"},children:(0,We.jsx)("div",{children:"Exit"})})]})},gc={available:!1,currentApp:null,currentStation:0,stationUrl:"",isPlaying:!1,stations:[]},vc={position:"absolute",left:0,top:0,width:"100%",height:"100%",backgroundColor:"white",mediaApps:{padding:8,display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center"},radioPlaylist:{padding:8,display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",width:"100%",maxHeight:"calc(100% - 84px)",overflow:"scroll"}},yc=Fe.div(cc||(cc=a(["\n\tbackground: #ffffff;\n\theight: ","px;\n\tposition: relative;\n\tz-index: 2;\n\twidth: ",";\n\tcolor: #707070;\n"])),(function(e){return e.expand?e.appLayout.appExpandHeight:80}),(function(e){return e.carStatusView&&e.mapView?"60%":"100%"})),bc=n(2795);function xc(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&bc.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var kc=bc.kernel_impls.whereImpl,wc=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(){var e;return(0,Je.Z)(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new bc.DataStorage((0,tt.Z)(e),(0,bc.engine)()),e}return(0,et.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,(0,bc.env)().get("IS_NODE")&&bc.backend_util.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&bc.util.isString(n[0])){var a=n.map((function(e){return bc.util.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=(0,qe.Z)($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;if("complex64"===n){var a=this.readSync(r.real.dataId),o=this.readSync(r.imag.dataId);return bc.backend_util.mergeRealAndImagArrays(a,o)}return this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return bc.util.decodeString(e)}));return(0,bc.buffer)(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,bc.buffer)(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return(0,bc.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=(0,qe.Z)($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bc.util.now(),t(),r=bc.util.now()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){xc([e],"where");var t=this.readSync(e.dataId);return kc(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return kn((0,at.Z)(n.prototype),"epsilon",this).call(this)}}]),n}(bc.KernelBackend);function Sc(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(xc(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=i,c=u.data.get(s.dataId).values,l=bc.util.sizeFromShape(s.shape),d=n||s.dtype,p=bc.util.getArrayFromDType(d,l),f=0;f<l;++f)p[f]=t(c[f],o);return u.makeTensorInfo(s.shape,d,p)}}function Cc(e,t,n){return function(r){var a=r.inputs,o=r.attrs,i=r.backend,s=a.x;if(xc(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=i,c=u.data.get(s.dataId).values,l=n||s.dtype,d=t(c,l,o);return u.makeTensorInfo(s.shape,l,d)}}wc.nextDataId=0,(0,bc.registerBackend)("cpu",(function(){return new wc}),1);var Ec=Sc(bc.Elu,(function(e){return e>=0?e:Math.exp(e)-1})),Tc={kernelName:bc.Elu,backendName:"cpu",kernelFunc:Ec};function Nc(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var _c={kernelName:bc.Identity,backendName:"cpu",kernelFunc:Nc};function Ic(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha;xc([a],"leakyRelu");for(var i=bc.util.sizeFromShape(a.shape),s=n.data.get(a.dataId).values,u=bc.util.getTypedArrayFromDType("float32",i),c=0;c<s.length;c++)u[c]=s[c]<0?o*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var Rc={kernelName:bc.LeakyRelu,backendName:"cpu",kernelFunc:Ic};function Ac(e){return function(t,n,r,a,o){var i=bc.backend_util.assertAndGetBroadcastShape(t,n),s=i.length,u=bc.util.computeStrides(i),c=bc.util.sizeFromShape(i),l=bc.util.getTypedArrayFromDType(o,c),d=t.length,p=n.length,f=bc.util.computeStrides(t),h=bc.util.computeStrides(n),m=bc.backend_util.getBroadcastDims(t,i),g=bc.backend_util.getBroadcastDims(n,i);if(m.length+g.length===0)for(var v=0;v<l.length;++v)l[v]=e(r[v%r.length],a[v%a.length]);else for(var y=function(t){var n=bc.util.indexToLoc(t,s,u),o=n.slice(-d);m.forEach((function(e){return o[e]=0}));var i=bc.util.locToIndex(o,d,f),c=n.slice(-p);g.forEach((function(e){return c[e]=0}));var v=bc.util.locToIndex(c,p,h);l[t]=e(r[i],a[v])},b=0;b<l.length;++b)y(b);return[l,i]}}var Oc=Ac((function(e,t){return e<0?t*e:e}));function Pc(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;xc([r,a],"prelu");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=Oc(r.shape,a.shape,o,s,"float32"),c=(0,i.Z)(u,2),l=c[0],d=c[1];return n.makeTensorInfo(d,"float32",l)}var Dc={kernelName:bc.Prelu,backendName:"cpu",kernelFunc:Pc},Lc=Sc(bc.Relu,(function(e){return Math.max(0,e)})),Mc={kernelName:bc.Relu,backendName:"cpu",kernelFunc:Lc},Fc=Sc(bc.Relu6,(function(e){return Math.min(Math.max(0,e),6)})),Bc={kernelName:bc.Relu6,backendName:"cpu",kernelFunc:Fc};function jc(e){return function(t,n,r){for(var a=bc.util.getTypedArrayFromDType(n,t.length),o=0;o<t.length;++o)a[o]=e(t[o],r);return a}}var zc=jc((function(e){return 1/(1+Math.exp(-e))})),Vc=Sc(bc.Sigmoid,(function(e){return 1/(1+Math.exp(-e))})),Wc={kernelName:bc.Sigmoid,backendName:"cpu",kernelFunc:Vc};function Zc(e,t,n,r,a){if("linear"===n)return Nc({inputs:{x:t},backend:e});if("relu"===n)return Lc({inputs:{x:t},backend:e});if("elu"===n)return Ec({inputs:{x:t},backend:e});if("relu6"===n)return Fc({inputs:{x:t},backend:e});if("prelu"===n)return Pc({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return Ic({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return Vc({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function Uc(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(a.shape,"float32",i)},s}var Hc={kernelName:bc.Complex,backendName:"cpu",kernelFunc:Uc};function Gc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=Gc(e,t,"float32"),a=Gc(e,t,"float32");return Uc({inputs:{real:r,imag:a},backend:e})}var o=bc.util.makeZerosTypedArray(bc.util.sizeFromShape(t),n);return e.makeTensorInfo(t,n,o)}function qc(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var Xc={kernelName:bc.Real,backendName:"cpu",kernelFunc:qc};function Kc(e,t,n,r){if("int32"===r)return[t,"int32",Int32Array.from(e)];if("bool"===r){var a=bc.util.toTypedArray([0],n),o=Ac((function(e,t){return e!==t?1:0}))(t,[],e,a,"bool"),s=(0,i.Z)(o,2),u=s[0];return[s[1],"bool",u]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function Yc(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dtype;if("complex64"===o){if("complex64"===a.dtype)return Nc({inputs:{x:a},backend:n});var s=Gc(n,a.shape,a.dtype),u=Yc({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),c=Uc({inputs:{real:u,imag:s},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}if("complex64"===a.dtype){var l=qc({inputs:{input:a},backend:n}),d=Yc({inputs:{x:l},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(l),d}if(!bc.util.hasEncodingLoss(a.dtype,o)){var p=Nc({inputs:{x:a},backend:n});return{dataId:p.dataId,shape:p.shape,dtype:o}}var f=Kc(n.data.get(a.dataId).values,a.shape,a.dtype,o),h=(0,i.Z)(f,3),m=h[0],g=h[1],v=h[2];return n.makeTensorInfo(m,g,v)}var Qc={kernelName:bc.Cast,backendName:"cpu",kernelFunc:Yc};function $c(e,t,n,r){return null==n?function(n){var a=n.inputs,o=n.backend,s=a.a,u=a.b,c=o;xc([s,u],e);var l=c.data.get(s.dataId).values,d=c.data.get(u.dataId).values,p="string"===s.dtype?bc.backend_util.fromUint8ToStringArray(l):l,f="string"===s.dtype?bc.backend_util.fromUint8ToStringArray(d):d,h=r||s.dtype,m=t(s.shape,u.shape,p,f,h),g=(0,i.Z)(m,2),v=g[0],y=g[1];return c.makeTensorInfo(y,h,v)}:function(e){var a=e.inputs,o=e.backend,s=a.a,u=a.b,c=o;if("complex64"===s.dtype||"complex64"===u.dtype){var l=Yc({inputs:{x:s},backend:c,attrs:{dtype:"complex64"}}),d=c.data.get(l.dataId),p=d.complexTensorInfos.real,f=d.complexTensorInfos.imag,h=c.data.get(p.dataId).values,m=c.data.get(f.dataId).values,g=Yc({inputs:{x:u},backend:c,attrs:{dtype:"complex64"}}),v=c.data.get(g.dataId),y=v.complexTensorInfos.real,b=v.complexTensorInfos.imag,x=c.data.get(y.dataId).values,k=c.data.get(b.dataId).values,w=n(s.shape,u.shape,h,m,x,k),S=(0,i.Z)(w,3),C=S[0],E=S[1],T=S[2],N=c.makeTensorInfo(T,"float32",C),_=c.makeTensorInfo(T,"float32",E),I=Uc({inputs:{real:N,imag:_},backend:c});return c.disposeIntermediateTensorInfo(l),c.disposeIntermediateTensorInfo(g),c.disposeIntermediateTensorInfo(N),c.disposeIntermediateTensorInfo(_),I}var R=c.data.get(s.dataId).values,A=c.data.get(u.dataId).values,O=r||s.dtype,P=t(s.shape,u.shape,R,A,O),D=(0,i.Z)(P,2),L=D[0],M=D[1];return c.makeTensorInfo(M,O,L)}}function Jc(e){return function(t,n,r,a,o,i){var s=bc.backend_util.assertAndGetBroadcastShape(t,n),u=bc.util.sizeFromShape(s),c=s.length,l=bc.util.computeStrides(s),d=bc.util.getTypedArrayFromDType("float32",u),p=bc.util.getTypedArrayFromDType("float32",u),f=bc.backend_util.getBroadcastDims(t,s),h=bc.backend_util.getBroadcastDims(n,s),m=bc.backend_util.mergeRealAndImagArrays(r,a),g=bc.backend_util.mergeRealAndImagArrays(o,i),v=t.length,y=bc.util.computeStrides(t),b=n.length,x=bc.util.computeStrides(n);if(f.length+h.length===0)for(var k=0;k<d.length;k++){var w=k%m.length,S=k%g.length,C=e(m[2*w],m[2*w+1],g[2*S],g[2*S+1]);d[k]=C.real,p[k]=C.imag}else for(var E=function(t){var n=bc.util.indexToLoc(t,c,l),r=n.slice(-v);f.forEach((function(e){return r[e]=0}));var a=bc.util.locToIndex(r,v,y),o=n.slice(-b);h.forEach((function(e){return o[e]=0}));var i=bc.util.locToIndex(o,b,x),s=e(m[2*a],m[2*a+1],g[2*i],g[2*i+1]);d[t]=s.real,p[t]=s.imag},T=0;T<d.length;T++)E(T);return[d,p,s]}}var el=Ac((function(e,t){return e+t})),tl=Jc((function(e,t,n,r){return{real:e+n,imag:t+r}})),nl=$c(bc.Add,el,tl),rl={kernelName:bc.Add,backendName:"cpu",kernelFunc:nl};function al(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=bc.util.sizeFromShape(a.shape),s=bc.util.inferFromImplicitShape(o,i),u=bc.util.sizeFromShape(s);bc.util.assert(i===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(i," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;l.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var ol={kernelName:bc.Reshape,backendName:"cpu",kernelFunc:al};function il(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,s=r.transposeA,u=r.transposeB;xc([a,o],"matMul");var c=a.shape.length,l=o.shape.length,d=s?a.shape[c-2]:a.shape[c-1],p=u?o.shape[l-1]:o.shape[l-2],f=s?a.shape[c-1]:a.shape[c-2],h=u?o.shape[l-2]:o.shape[l-1],m=a.shape.slice(0,-2),g=o.shape.slice(0,-2),v=bc.util.sizeFromShape(m),y=bc.util.sizeFromShape(g),b=bc.broadcast_util.assertAndGetBroadcastShape(a.shape.slice(0,-2),o.shape.slice(0,-2)).concat([f,h]);bc.util.assert(d===p,(function(){return"Error in matMul: inner shapes (".concat(d,") and (")+"".concat(p,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(o.shape," and transposeA=").concat(s)+" and transposeB=".concat(u," must match.")}));for(var x=u?[y,h,p]:[y,p,h],k=al({inputs:{x:a},backend:n,attrs:{shape:s?[v,d,f]:[v,f,d]}}),w=al({inputs:{x:o},backend:n,attrs:{shape:x}}),S=s?k.shape[1]:k.shape[2],C=s?k.shape[2]:k.shape[1],E=u?w.shape[1]:w.shape[2],T=Math.max(v,y),N=n.data.get(k.dataId).values,_=n.data.get(w.dataId).values,I=bc.util.computeStrides(k.shape),R=bc.util.computeStrides(w.shape),A=s?[I[0],1,I[1]]:[I[0],I[1],1],O=(0,i.Z)(A,3),P=O[0],D=O[1],L=O[2],M=u?[1,R[1],R[0]]:[R[1],1,R[0]],F=(0,i.Z)(M,3),B=F[0],j=F[1],z=F[2],V=C*E,W=(0,bc.buffer)([T,C,E],k.dtype),Z=W.values,U=n.blockSize,H=0;H<T;H++)for(var G=0;G<C;G+=U)for(var q=0;q<E;q+=U)for(var X=0;X<S;X+=U)for(var K=Math.min(G+U,C),Y=Math.min(q+U,E),Q=Math.min(X+U,S),$=G;$<K;$++)for(var J=q;J<Y;J++){for(var ee=0,te=X;te<Q;te++){var ne=Math.min(H,v-1)*P,re=Math.min(H,y-1)*z;ee+=N[ne+$*D+te*L]*_[te*B+J*j+re]}Z[H*V+($*E+J)]+=ee}return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(b,W.dtype,W.values)}var sl={kernelName:bc.BatchMatMul,backendName:"cpu",kernelFunc:il};var ul={kernelName:bc._FusedMatMul,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,o=e.backend,i=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,d=i.transposeA,p=i.transposeB,f=i.activation,h=i.leakyreluAlpha,m=[];t=il({inputs:{a:s,b:u},attrs:{transposeA:d,transposeB:p},backend:o}),c&&(n=nl({inputs:{a:t,b:c},backend:o}),m.push(t),t=n),f&&(r=Zc(o,t,f,l,h),m.push(t),t=r);for(var g=0,v=m;g<v.length;g++){var y=v[g];o.disposeIntermediateTensorInfo(y)}return t}};function cl(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var ll={kernelName:bc.Abs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;xc(t,"abs");var r=new Float32Array(bc.util.sizeFromShape(t.shape));return r=cl(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},dl=Sc(bc.Acos,(function(e){return Math.acos(e)})),pl={kernelName:bc.Acos,backendName:"cpu",kernelFunc:dl},fl=Sc(bc.Acosh,(function(e){return Math.acosh(e)})),hl={kernelName:bc.Acosh,backendName:"cpu",kernelFunc:fl};var ml={kernelName:bc.AddN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;xc(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),o=(0,bc.buffer)(r[0].shape,r[0].dtype),i=o.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<i.length;c++)i[c]+=u[c];return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function gl(e,t,n,r,a){for(var o=t.length,i=bc.util.sizeFromShape(t),s=bc.util.computeStrides(t),u=bc.util.computeStrides(a),c=bc.util.getTypedArrayFromDType(n,bc.util.sizeFromShape(a)),l=0;l<i;++l){for(var d=bc.util.indexToLoc(l,o,s),p=new Array(d.length),f=0;f<p.length;f++)p[f]=d[r[f]];c[bc.util.locToIndex(p,o,u)]=e[l]}return c}function vl(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.perm;xc(a,"transpose");for(var i=a.shape.length,s=new Array(i),u=0;u<s.length;u++)s[u]=a.shape[o[u]];var c=gl(r.data.get(a.dataId).values,a.shape,a.dtype,o,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var yl={kernelName:bc.Transpose,backendName:"cpu",kernelFunc:vl};var bl={kernelName:bc.All,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,s=r.keepDims;xc(a,"all");var u=bc.util.parseAxisParam(o,a.shape),c=u,l=bc.backend_util.getAxesPermutation(c,a.shape.length),d=a;null!=l&&(d=vl({inputs:{x:a},backend:n,attrs:{perm:l}}),c=bc.backend_util.getInnerMostAxes(c.length,a.shape.length)),bc.backend_util.assertAxesAreInnerMostDims("all",c,d.shape.length);for(var p=bc.backend_util.computeOutAndReduceShapes(d.shape,c),f=(0,i.Z)(p,2),h=f[0],m=f[1],g=bc.util.sizeFromShape(m),v=bc.util.makeZerosTypedArray(bc.util.sizeFromShape(h),d.dtype),y=n.data.get(d.dataId).values,b=0;b<v.length;++b){for(var x=b*g,k=y[x],w=0;w<g;++w){var S=y[x+w];k=k&&S}v[b]=k}null!=l&&n.disposeIntermediateTensorInfo(d);var C=n.makeTensorInfo(h,d.dtype,v);if(s){var E=al({inputs:{x:C},backend:n,attrs:{shape:bc.backend_util.expandShapeToKeepDim(h,u)}});return n.disposeIntermediateTensorInfo(C),E}return C}};var xl={kernelName:bc.Any,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,s=r.keepDims;xc(a,"any");var u=bc.util.parseAxisParam(o,a.shape),c=u,l=bc.backend_util.getAxesPermutation(c,a.shape.length),d=a;null!=l&&(d=vl({inputs:{x:a},backend:n,attrs:{perm:l}}),c=bc.backend_util.getInnerMostAxes(c.length,a.shape.length)),bc.backend_util.assertAxesAreInnerMostDims("any",c,d.shape.length);for(var p=bc.backend_util.computeOutAndReduceShapes(d.shape,c),f=(0,i.Z)(p,2),h=f[0],m=f[1],g=bc.util.sizeFromShape(m),v=bc.util.makeZerosTypedArray(bc.util.sizeFromShape(h),d.dtype),y=n.data.get(d.dataId).values,b=0;b<v.length;++b){for(var x=b*g,k=y[x],w=0;w<g;++w){var S=y[x+w];k=k||S}v[b]=k}null!=l&&n.disposeIntermediateTensorInfo(d);var C=n.makeTensorInfo(h,d.dtype,v);if(s){var E=al({inputs:{x:C},backend:n,attrs:{shape:bc.backend_util.expandShapeToKeepDim(h,u)}});return n.disposeIntermediateTensorInfo(C),E}return C}};var kl={kernelName:bc.ArgMax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;xc(a,"argMax");var s=bc.util.parseAxisParam(o,a.shape),u=bc.backend_util.getAxesPermutation(s,a.shape.length),c=a,l=[];null!=u&&(c=vl({inputs:{x:a},backend:n,attrs:{perm:u}}),l.push(c),s=bc.backend_util.getInnerMostAxes(s.length,c.shape.length)),s=[s[0]],bc.backend_util.assertAxesAreInnerMostDims("argMax",s,c.shape.length);for(var d=bc.backend_util.computeOutAndReduceShapes(c.shape,s),p=(0,i.Z)(d,2),f=p[0],h=p[1],m=bc.util.sizeFromShape(f),g=bc.util.makeZerosTypedArray(m,"int32"),v=bc.util.sizeFromShape(h),y=n.data.get(c.dataId).values,b=0;b<g.length;++b){for(var x=b*v,k=y[x],w=0,S=0;S<v;++S){var C=y[x+S];C>k&&(k=C,w=S)}g[b]=w}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",g)}};var wl={kernelName:bc.ArgMin,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis;xc(a,"argMin");var s=bc.util.parseAxisParam(o,a.shape),u=bc.backend_util.getAxesPermutation(s,a.shape.length),c=a,l=[];null!=u&&(c=vl({inputs:{x:a},backend:n,attrs:{perm:u}}),l.push(c),s=bc.backend_util.getInnerMostAxes(s.length,c.shape.length)),s=[s[0]],bc.backend_util.assertAxesAreInnerMostDims("argMin",s,c.shape.length);for(var d=bc.backend_util.computeOutAndReduceShapes(c.shape,s),p=(0,i.Z)(d,2),f=p[0],h=p[1],m=bc.util.sizeFromShape(f),g=bc.util.makeZerosTypedArray(m,"int32"),v=bc.util.sizeFromShape(h),y=n.data.get(c.dataId).values,b=0;b<g.length;++b){for(var x=b*v,k=y[x],w=0,S=0;S<v;++S){var C=y[x+S];C<k&&(k=C,w=S)}g[b]=w}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",g)}},Sl=Sc(bc.Asin,(function(e){return Math.asin(e)})),Cl={kernelName:bc.Asin,backendName:"cpu",kernelFunc:Sl},El=Sc(bc.Asinh,(function(e){return Math.asinh(e)})),Tl={kernelName:bc.Asinh,backendName:"cpu",kernelFunc:El},Nl=Sc(bc.Atan,(function(e){return Math.atan(e)})),_l={kernelName:bc.Atan,backendName:"cpu",kernelFunc:Nl},Il=Ac((function(e,t){return Math.atan2(e,t)})),Rl=$c(bc.Atan2,Il),Al={kernelName:bc.Atan2,backendName:"cpu",kernelFunc:Rl},Ol=Sc(bc.Atanh,(function(e){return Math.atanh(e)})),Pl={kernelName:bc.Atanh,backendName:"cpu",kernelFunc:Ol};function Dl(e,t,n,r,a,o){for(var i=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,d=a.effectiveFilterWidth,p=a.padInfo.top,f=a.padInfo.left,h="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=(0,bc.buffer)(a.outShape,n),g=m.values,v=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var k=x*v,w=x*r[0],S=0;S<a.inChannels;++S)for(var C=0;C<a.outHeight;++C)for(var E=C*i-p,T=Math.max(0,E),N=Math.min(a.inHeight,l+E),_=k+C*y,I=0;I<a.outWidth;++I){for(var R=I*s-f,A=Math.max(0,R),O=Math.min(a.inWidth,d+R),P=h,D=0,L=0,M=T;M<N;M+=u){for(var F=w+M*r[1],B=A;B<O;B+=c){var j=e[F+B*r[2]+S];"max"===o&&j>P?P=j:"avg"===o&&(D+=j,L++)}if(isNaN(P))break}g[_+I*b+S]="avg"===o?D/L:P}return m}function Ll(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=(0,bc.buffer)(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,m=(0,bc.buffer)(t,n,e),g=0;g<r.batchSize;++g)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.outHeight;++y){for(var b=y*s-f,x=b;x<0;)x+=c;for(var k=Math.min(r.inHeight,d+b),w=0;w<r.outWidth;++w){for(var S=w*u-h,C=S;C<0;)C+=l;for(var E=Math.min(r.inWidth,p+S),T=Number.NEGATIVE_INFINITY,N=-1,_=x;_<k;_+=c)for(var I=_-b,R=C;R<E;R+=l){var A=R-S,O=m.get(g,_,R,v);O>T&&(T=O,N=a?o?((g*r.inHeight+_)*r.inWidth+R)*r.inChannels+v:(_*r.inWidth+R)*r.inChannels+v:I*p+A)}i.set(N,g,y,w,v)}}return i}function Ml(e,t,n,r,a,o){for(var i=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,d=a.dilationWidth,p=a.effectiveFilterDepth,f=a.effectiveFilterHeight,h=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,v=a.padInfo.left,y="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=(0,bc.buffer)(a.outShape,n),x=b.values,k=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],C=a.outShape[4],E=0;E<a.batchSize;++E)for(var T=E*k,N=E*r[0],_=0;_<a.inChannels;++_)for(var I=0;I<a.outDepth;++I){for(var R=I*i-m,A=R;A<0;)A+=c;for(var O=Math.min(a.inDepth,p+R),P=T+I*w,D=0;D<a.outHeight;++D){for(var L=D*s-g,M=L;M<0;)M+=l;for(var F=Math.min(a.inHeight,f+L),B=P+D*S,j=0;j<a.outWidth;++j){for(var z=j*u-v,V=z;V<0;)V+=d;for(var W=Math.min(a.inWidth,h+z),Z=B+j*C,U=y,H=0,G=0,q=A;q<O;q+=c){for(var X=N+q*r[1],K=M;K<F;K+=l){for(var Y=X+K*r[2],Q=V;Q<W;Q+=d){var $=e[Y+Q*r[3]+_];if("max"===o&&$>U?U=$:"avg"===o&&(H+=$,G++),isNaN(U))break}if(isNaN(U))break}if(isNaN(U))break}x[Z+_]="avg"===o?H/G:U}}}return b}var Fl={kernelName:bc.AvgPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;xc(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;bc.util.assert(bc.backend_util.eitherStridesOrDilationsAreOne(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var c,l=bc.backend_util.computePool2DInfo(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&bc.util.arraysEqual(l.inShape,l.outShape))c=Nc({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,p=bc.util.computeStrides(a.shape),f=Dl(d,a.shape,a.dtype,p,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,f.values)}return c}};var Bl={kernelName:bc.AvgPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;xc(a,"avgPool3d");var l=bc.backend_util.computePool3DInfo(a.shape,o,i,1,s,u,c),d=Ml(n.data.get(a.dataId).values,a.shape,a.dtype,bc.util.computeStrides(a.shape),l,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};var jl={kernelName:bc.AvgPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;xc([a,o],"avgPool3DGrad");for(var l=bc.backend_util.computePool3DInfo(o.shape,i,s,1,u,c),d=l.strideDepth,p=l.strideHeight,f=l.strideWidth,h=l.filterDepth,m=l.filterHeight,g=l.filterWidth,v=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,k=l.effectiveFilterHeight,w=l.effectiveFilterWidth,S=x-1-l.padInfo.front,C=w-1-l.padInfo.left,E=k-1-l.padInfo.top,T=(0,bc.buffer)(o.shape,"float32"),N=1/(h*m*g),_=n.bufferSync(a),I=0;I<l.batchSize;++I)for(var R=0;R<l.inChannels;++R)for(var A=0;A<l.inDepth;++A)for(var O=0;O<l.inHeight;++O)for(var P=0;P<l.inWidth;++P){for(var D=A-S,L=O-E,M=P-C,F=0,B=0;B<x;B+=v){var j=(D+B)/d;if(!(j<0||j>=l.outDepth||Math.floor(j)!==j))for(var z=0;z<k;z+=y){var V=(L+z)/p;if(!(V<0||V>=l.outHeight||Math.floor(V)!==V))for(var W=0;W<w;W+=b){var Z=(M+W)/f;if(!(Z<0||Z>=l.outWidth||Math.floor(Z)!==Z))F+=_.get(I,j,V,Z,R)}}}T.set(F*N,I,A,O,P,R)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}};var zl={kernelName:bc.AvgPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;xc([a,o],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=bc.backend_util.computePool2DInfo(i.shape,s,u,1,c),d=l.strideHeight,p=l.strideWidth,f=l.filterHeight,h=l.filterWidth,m=l.dilationHeight,g=l.dilationWidth,v=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=v-1-l.padInfo.top,k=(0,bc.buffer)(i.shape,"float32"),w=1/(f*h),S=n.data.get(a.dataId).values,C=(0,bc.buffer)(a.shape,"float32",S),E=0;E<l.batchSize;++E)for(var T=0;T<l.inChannels;++T)for(var N=0;N<l.inHeight;++N)for(var _=0;_<l.inWidth;++_){for(var I=N-x,R=_-b,A=0,O=0;O<v;O+=m){var P=(I+O)/d;if(!(P<0||P>=l.outHeight||Math.floor(P)!==P))for(var D=0;D<y;D+=g){var L=(R+D)/p;if(!(L<0||L>=l.outWidth||Math.floor(L)!==L))A+=C.get(E,P,L,T)}}k.set(A*w,E,N,_,T)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var Vl={kernelName:bc.FusedBatchNorm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.scale,i=t.offset,s=t.mean,u=t.variance;bc.util.assert(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),bc.util.assert(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),bc.util.assert(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),xc([a,s,u,o,i],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,p=n.data.get(u.dataId).values,f=o?n.data.get(o.dataId).values:new Float32Array([1]),h=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(l.length),g=h.length,v=f.length,y=p.length,b=d.length,x=0,k=0,w=0,S=0,C=0;C<l.length;++C)m[C]=h[x++]+(l[C]-d[k++])*f[w++]/Math.sqrt(p[S++]+c),x>=g&&(x=0),k>=b&&(k=0),w>=v&&(w=0),S>=y&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};function Wl(e,t,n,r,a){var o=bc.slice_util.isSliceContinous(r,t,n),i=bc.util.sizeFromShape(n),s=bc.util.computeStrides(r);if(o){var u=bc.slice_util.computeFlatOffset(t,s);return"string"===a?e.slice(u,u+i):e.subarray(u,u+i)}for(var c="string"===a?bc.backend_util.fromUint8ToStringArray(e):e,l=(0,bc.buffer)(r,a,c),d=(0,bc.buffer)(n,a),p=0;p<d.size;++p){var f=d.indexToLoc(p),h=f.map((function(e,n){return e+t[n]}));d.set.apply(d,[l.get.apply(l,(0,Be.Z)(h))].concat((0,Be.Z)(f)))}return"string"===a?bc.backend_util.fromStringArrayToUint8(d.values):d.values}function Zl(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,s=r.size;xc(a,"slice");var u=bc.slice_util.parseSliceParams(a,o,s),c=(0,i.Z)(u,2),l=c[0],d=c[1];bc.slice_util.assertParamsValid(a,l,d);var p=Wl(n.data.get(a.dataId).values,l,d,a.shape,a.dtype);return n.makeTensorInfo(d,a.dtype,p)}var Ul={kernelName:bc.Slice,backendName:"cpu",kernelFunc:Zl};var Hl={kernelName:bc.BatchToSpaceND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;xc([a],"batchToSpaceND");var s=o.reduce((function(e,t){return e*t})),u=bc.backend_util.getReshaped(a.shape,o,s),c=bc.backend_util.getPermuted(u.length,o.length),l=bc.backend_util.getReshapedPermuted(a.shape,o,s),d=bc.backend_util.getSliceBeginCoords(i,o.length),p=bc.backend_util.getSliceSize(l,i,o.length),f=al({inputs:{x:a},backend:n,attrs:{shape:u}}),h=vl({inputs:{x:f},backend:n,attrs:{perm:c}}),m=al({inputs:{x:h},backend:n,attrs:{shape:l}}),g=Zl({inputs:{x:m},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}};function Gl(e,t,n,r,a){for(var o=bc.util.sizeFromShape(r),i=bc.util.makeZerosTypedArray(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(i[u]+=o>0?t[s]:1)}return i}function ql(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],o=e.shape[1],i=(0,bc.buffer)([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<o;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?i.set(1,s,c):t.size>0?i.set(i.get(s,c)+t.get(s,u),s,c):i.set(i.get(s,c)+1,s,c))}return i}var Xl={kernelName:bc.Bincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=Gl(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,s)}};var Kl={kernelName:bc.BroadcastArgs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,o=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values,s=bc.backend_util.assertAndGetBroadcastShape(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Yl=jc((function(e){return Math.ceil(e)})),Ql=Cc(bc.Ceil,Yl),$l={kernelName:bc.Ceil,backendName:"cpu",kernelFunc:Ql},Jl=Sc(bc.ClipByValue,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),ed={kernelName:bc.ClipByValue,backendName:"cpu",kernelFunc:Jl},td={kernelName:bc.ComplexAbs,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(bc.util.sizeFromShape(t.shape)),a=n.data.get(t.dataId),o=a.complexTensorInfos.real,i=a.complexTensorInfos.imag,s=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values,c=0;c<s.length;c++){var l=s[c],d=u[c];r[c]=Math.hypot(l,d)}return n.makeOutput(r,t.shape,"float32")}};function nd(e,t,n,r){var a=bc.util.getArrayFromDType(n,bc.util.sizeFromShape(t));if(r&&"string"!==n){var o=0;e.forEach((function(e){var t=bc.util.sizeFromShape(e.shape);a.set(e.vals,o),o+=t}))}else{var i=0;e.forEach((function(e){for(var r="string"===n?bc.backend_util.fromUint8ToStringArray(e.vals):e.vals,o=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+i,c=0;c<e.shape[1];++c)a[u+c]=r[o++];i+=e.shape[1]}))}return a}function rd(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,o)}var ad={kernelName:bc.Imag,backendName:"cpu",kernelFunc:rd};function od(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=bc.util.parseAxisParam(r,t[0].shape)[0],o=t.map((function(e){return e.shape}));bc.backend_util.assertParamsConsistent(o,a);var i=bc.backend_util.computeOutShape(t.map((function(e){return e.shape})),a);if(0===bc.util.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var s=t.filter((function(e){return bc.util.sizeFromShape(e.shape)>0}));if(1===s.length)return Nc({inputs:{x:s[0]},backend:n});if("complex64"===s[0].dtype){var u=s.map((function(e){return qc({inputs:{input:e},backend:n})})),c=s.map((function(e){return rd({inputs:{input:e},backend:n})})),l=od({inputs:u,backend:n,attrs:{axis:a}}),d=od({inputs:c,backend:n,attrs:{axis:a}}),p=Uc({inputs:{real:l,imag:d},backend:n});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),p}var f=s.map((function(e){var t=bc.util.sizeFromShape(e.shape.slice(a));return al({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),h=f.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));i=bc.backend_util.computeOutShape(f.map((function(e){return e.shape})),1);var m=1===f[0].shape[0],g=nd(h,i,t[0].dtype,m),v=bc.backend_util.computeOutShape(s.map((function(e){return e.shape})),a),y=n.makeTensorInfo(v,t[0].dtype,g);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}var id={kernelName:bc.Concat,backendName:"cpu",kernelFunc:od};function sd(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;xc([a,o],"conv2d");for(var d=bc.backend_util.convertConv2DDataFormat(u),p=bc.backend_util.computeConv2DInfo(a.shape,o.shape,i,c,s,l,!1,d),f=p.filterHeight,h=p.filterWidth,m=p.dilationHeight,g=p.dilationWidth,v=p.padInfo.left,y=p.padInfo.top,b="channelsLast"===p.dataFormat,x=new bc.TensorBuffer(p.outShape,a.dtype),k=bc.util.computeStrides(a.shape),w=bc.util.computeStrides(o.shape),S=k[0],C=b?k[1]:k[2],E=b?k[2]:1,T=b?1:k[1],N=x.strides[0],_=b?x.strides[1]:x.strides[2],I=b?x.strides[2]:1,R=b?1:x.strides[1],A=n.data.get(a.dataId).values,O=n.data.get(o.dataId).values,P=x.values,D=0;D<p.batchSize;++D)for(var L=D*S,M=D*N,F=0;F<p.outHeight;++F)for(var B=M+F*_,j=F*p.strideHeight-y,z=0;z<f;++z){var V=j+z*m;if(!(V<0||V>=p.inHeight))for(var W=z*w[0],Z=L+V*C,U=0;U<p.outWidth;++U)for(var H=B+U*I,G=U*p.strideWidth-v,q=0;q<h;++q){var X=G+q*g;if(!(X<0||X>=p.inWidth))for(var K=Z+X*E,Y=W+q*w[1],Q=0;Q<p.inChannels;++Q){for(var $=A[K+Q*T],J=0;J<p.outChannels;++J)P[H+J*R]+=$*O[Y+J];Y+=p.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,P)}var ud={kernelName:bc.Conv2D,backendName:"cpu",kernelFunc:sd};var cd={kernelName:bc.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;xc([a,o],"conv2dBackpropFilter");for(var d=bc.backend_util.convertConv2DDataFormat(u),p=bc.backend_util.computeConv2DInfo(a.shape,l,i,1,s,c,!1,d),f=p.strideHeight,h=p.strideWidth,m=p.filterHeight,g=p.filterWidth,v="channelsLast"===p.dataFormat,y=new bc.TensorBuffer(p.filterShape,"float32"),b=p.padInfo.left,x=p.padInfo.top,k=n.data.get(a.dataId).values,w=n.data.get(o.dataId).values,S=new bc.TensorBuffer(a.shape,a.dtype,k),C=new bc.TensorBuffer(o.shape,o.dtype,w),E=0;E<m;++E)for(var T=Math.max(0,Math.ceil((x-E)/f)),N=Math.min(p.outHeight,(p.inHeight+x-E)/f),_=0;_<g;++_)for(var I=Math.max(0,Math.ceil((b-_)/h)),R=Math.min(p.outWidth,(p.inWidth+b-_)/h),A=0;A<p.inChannels;++A)for(var O=0;O<p.outChannels;++O){for(var P=0,D=0;D<p.batchSize;++D)for(var L=T;L<N;++L)for(var M=E+L*f-x,F=I;F<R;++F){var B=_+F*h-b;P+=v?S.get(D,M,B,A)*C.get(D,L,F,O):S.get(D,A,M,B)*C.get(D,O,L,F)}y.set(P,E,_,A,O)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var ld={kernelName:bc.Conv2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,s=r.inputShape,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dimRoundingMode;xc([a,o],"conv2dBackpropInput");var p=bc.util.computeStrides(o.shape),f=bc.util.computeStrides(a.shape),h=bc.backend_util.convertConv2DDataFormat(l),m=bc.backend_util.computeConv2DInfo(s,o.shape,u,1,c,d,!1,h),g=new bc.TensorBuffer(m.inShape,"float32"),v=g.values,y=n.data.get(a.dataId).values,b=n.data.get(o.dataId).values,x=(0,i.Z)(p,3),k=x[0],w=x[1],S=x[2],C=m.batchSize,E=m.filterHeight,T=m.filterWidth,N=m.inChannels,_=m.inHeight,I=m.inWidth,R=m.outChannels,A=m.outHeight,O=m.outWidth,P=m.strideHeight,D=m.strideWidth;h=m.dataFormat;for(var L=E-1-m.padInfo.top,M=T-1-m.padInfo.left,F="channelsLast"===h,B=g.strides[0],j=F?g.strides[1]:g.strides[2],z=F?g.strides[2]:1,V=F?1:g.strides[1],W=f[0],Z=F?f[1]:f[2],U=F?f[2]:1,H=F?1:f[1],G=0;G<C;++G)for(var q=0;q<N;++q)for(var X=0;X<_;++X)for(var K=X-L,Y=Math.max(0,Math.ceil(K/P)),Q=Math.min(A,(E+K)/P),$=0;$<I;++$){for(var J=$-M,ee=Math.max(0,Math.ceil(J/D)),te=Math.min(O,(T+J)/D),ne=0,re=Y;re<Q;++re)for(var ae=re*P-K,oe=ee;oe<te;++oe)for(var ie=W*G+Z*re+U*oe,se=k*(E-1-ae)+w*(T-1-(oe*D-J))+S*q,ue=0;ue<R;++ue){ne+=y[ie+H*ue]*b[se+ue]}v[B*G+j*X+z*$+V*q]=ne}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var dd={kernelName:bc.Conv3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations;xc([a,o],"conv3d");for(var c=bc.backend_util.computeConv3DInfo(a.shape,o.shape,i,u,s),l=c.filterDepth,d=c.filterHeight,p=c.filterWidth,f=c.dilationDepth,h=c.dilationHeight,m=c.dilationWidth,g=c.padInfo,v=g.front,y=g.left,b=g.top,x=new bc.TensorBuffer(c.outShape,a.dtype),k=n.data.get(a.dataId).values,w=n.data.get(o.dataId).values,S=x.values,C=bc.util.computeStrides(a.shape),E=bc.util.computeStrides(o.shape),T=0;T<c.batchSize;++T)for(var N=T*C[0],_=T*x.strides[0],I=0;I<c.outDepth;++I)for(var R=_+I*x.strides[1],A=I*c.strideDepth-v,O=0;O<l;++O){var P=A+O*f;if(!(P<0||P>=c.inDepth))for(var D=O*E[0],L=N+P*C[1],M=0;M<c.outHeight;++M)for(var F=R+M*x.strides[2],B=M*c.strideHeight-b,j=0;j<d;++j){var z=B+j*h;if(!(z<0||z>=c.inHeight))for(var V=D+j*E[1],W=L+z*C[2],Z=0;Z<c.outWidth;++Z)for(var U=F+Z*c.outChannels,H=Z*c.strideWidth-y,G=0;G<p;++G){var q=H+G*m;if(!(q<0||q>=c.inWidth))for(var X=V+G*E[2],K=W+q*c.inChannels,Y=X,Q=0;Q<c.inChannels;++Q){for(var $=k[K+Q],J=0;J<c.outChannels;++J)S[U+J]+=$*w[Y+J];Y+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var pd={kernelName:bc.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,s=r.strides,u=r.pad,c=r.filterShape;xc([a,o],"conv3dBackpropFilterV2");for(var l=bc.util.computeStrides(a.shape),d=bc.util.computeStrides(o.shape),p=bc.backend_util.computeConv3DInfo(a.shape,c,s,1,u),f=p.strideDepth,h=p.strideHeight,m=p.strideWidth,g=p.filterDepth,v=p.filterHeight,y=p.filterWidth,b=new bc.TensorBuffer(p.filterShape,"float32"),x=b.values,k=(0,i.Z)(b.strides,4),w=k[0],S=k[1],C=k[2],E=k[3],T=n.data.get(o.dataId).values,N=(0,i.Z)(d,4),_=N[0],I=N[1],R=N[2],A=N[3],O=n.data.get(a.dataId).values,P=(0,i.Z)(l,4),D=P[0],L=P[1],M=P[2],F=P[3],B=p.padInfo.front,j=p.padInfo.left,z=p.padInfo.top,V=0;V<g;++V)for(var W=Math.max(0,Math.ceil((B-V)/f)),Z=Math.min(p.outDepth,(p.inDepth+B-V)/f),U=V*w,H=0;H<v;++H)for(var G=Math.max(0,Math.ceil((z-H)/h)),q=Math.min(p.outHeight,(p.inHeight+z-H)/h),X=H*S+U,K=0;K<y;++K)for(var Y=Math.max(0,Math.ceil((j-K)/m)),Q=Math.min(p.outWidth,(p.inWidth+j-K)/m),$=K*C+X,J=0;J<p.inChannels;++J)for(var ee=J*E+$,te=0;te<p.outChannels;++te){for(var ne=0,re=0;re<p.batchSize;++re)for(var ae=re*D,oe=re*_,ie=W;ie<Z;++ie)for(var se=(V+ie*f-B)*L+ae,ue=ie*I+oe,ce=G;ce<q;++ce)for(var le=(H+ce*h-z)*M+se,de=ce*R+ue,pe=Y;pe<Q;++pe){var fe=pe*A+de;ne+=O[(K+pe*m-j)*F+le+J]*T[fe+te]}x[ee+te]=ne}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var fd={kernelName:bc.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,s=r.pad,u=r.strides,c=r.inputShape;xc([a],"conv3dBackpropInputV2");for(var l=bc.util.computeStrides(a.shape),d=bc.util.computeStrides(o.shape),p=bc.backend_util.computeConv3DInfo(c,o.shape,u,1,s),f=new bc.TensorBuffer(p.inShape,"float32"),h=f.values,m=(0,i.Z)(f.strides,4),g=m[0],v=m[1],y=m[2],b=m[3],x=n.data.get(a.dataId).values,k=(0,i.Z)(l,4),w=k[0],S=k[1],C=k[2],E=k[3],T=n.data.get(o.dataId).values,N=(0,i.Z)(d,4),_=N[0],I=N[1],R=N[2],A=N[3],O=p.batchSize,P=p.filterDepth,D=p.filterHeight,L=p.filterWidth,M=p.inChannels,F=p.inDepth,B=p.inHeight,j=p.inWidth,z=p.outChannels,V=p.outDepth,W=p.outHeight,Z=p.outWidth,U=p.strideDepth,H=p.strideHeight,G=p.strideWidth,q=P-1-p.padInfo.front,X=D-1-p.padInfo.top,K=L-1-p.padInfo.left,Y=0;Y<O;++Y)for(var Q=0;Q<M;++Q)for(var $=0;$<F;++$)for(var J=$-q,ee=Math.max(0,Math.ceil(J/U)),te=Math.min(V,(P+J)/U),ne=0;ne<B;++ne)for(var re=ne-X,ae=Math.max(0,Math.ceil(re/H)),oe=Math.min(W,(D+re)/H),ie=0;ie<j;++ie){for(var se=ie-K,ue=Math.max(0,Math.ceil(se/G)),ce=Math.min(Z,(L+se)/G),le=0,de=ee;de<te;++de)for(var pe=de*U-J,fe=ae;fe<oe;++fe)for(var he=fe*H-re,me=ue;me<ce;++me)for(var ge=w*Y+S*de+C*fe+E*me,ve=_*(P-1-pe)+I*(D-1-he)+R*(L-1-(me*G-se))+A*Q,ye=0;ye<z;++ye){le+=x[ge+ye]*T[ve+ye]}h[g*Y+v*$+y*ne+b*ie+Q]=le}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},hd=Sc(bc.Cos,(function(e){return Math.cos(e)})),md={kernelName:bc.Cos,backendName:"cpu",kernelFunc:hd},gd=Sc(bc.Cosh,(function(e){return Math.cosh(e)})),vd={kernelName:bc.Cosh,backendName:"cpu",kernelFunc:gd};var yd={kernelName:bc.CropAndResize,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,s=t.boxInd,u=r.cropSize,c=r.method,l=r.extrapolationValue,d=(0,i.Z)(a.shape,4),p=d[0],f=d[1],h=d[2],m=d[3],g=o.shape[0],v=(0,i.Z)(u,2),y=v[0],b=v[1],x=(0,bc.buffer)([g,y,b,m],"float32"),k=n.data.get(o.dataId).values,w=n.data.get(s.dataId).values,S=n.data.get(a.dataId).values,C=bc.util.computeStrides(a.shape),E=bc.util.computeStrides(x.shape),T=0;T<g;T++){var N=4*T,_=k[N],I=k[N+1],R=k[N+2],A=k[N+3],O=w[T];if(!(O>=p))for(var P=y>1?(R-_)*(f-1)/(y-1):0,D=b>1?(A-I)*(h-1)/(b-1):0,L=0;L<y;L++){var M=y>1?_*(f-1)+L*P:.5*(_+R)*(f-1);if(M<0||M>f-1)for(var F=0;F<b;F++)for(var B=0;B<m;B++){var j=B+F*E[2]+L*E[1]+T*E[0];x.values[j]=l}else if("bilinear"===c)for(var z=Math.floor(M),V=Math.ceil(M),W=M-z,Z=0;Z<b;Z++){var U=b>1?I*(h-1)+Z*D:.5*(I+A)*(h-1);if(U<0||U>h-1)for(var H=0;H<m;H++){var G=H+Z*E[2]+L*E[1]+T*E[0];x.values[G]=l}else for(var q=Math.floor(U),X=Math.ceil(U),K=U-q,Y=0;Y<m;Y++){var Q=Y+q*C[2]+z*C[1]+O*C[0],$=S[Q],J=S[Q=Y+X*C[2]+z*C[1]+O*C[0]],ee=S[Q=Y+q*C[2]+V*C[1]+O*C[0]],te=$+(J-$)*K,ne=ee+(S[Q=Y+X*C[2]+V*C[1]+O*C[0]]-ee)*K;Q=Y+Z*E[2]+L*E[1]+T*E[0],x.values[Q]=te+(ne-te)*W}}else for(var re=0;re<b;++re){var ae=b>1?I*(h-1)+re*D:.5*(I+A)*(h-1);if(ae<0||ae>h-1)for(var oe=0;oe<m;oe++){var ie=oe+re*E[2]+L*E[1]+T*E[0];x.values[ie]=l}else for(var se=Math.round(ae),ue=Math.round(M),ce=0;ce<m;ce++){var le=ce+se*C[2]+ue*C[1]+O*C[0],de=ce+re*E[2]+L*E[1]+T*E[0];x.values[de]=S[le]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var bd={kernelName:bc.Cumprod,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;xc(a,"cumprod");var u=bc.backend_util.getAxesPermutation([o],a.shape.length),c=a;null!=u&&(c=vl({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=bc.backend_util.getInnerMostAxes(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=(0,bc.upcastType)(c.dtype,"int32"),p=bc.util.makeOnesTypedArray(bc.util.sizeFromShape(c.shape),d),f=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},g=0;g<f.length;g+=h)for(var v=0;v<h;v++){var y=m(g,v);if(0===v)p[y]=i?1:f[y];else{var b=m(g,v-1);p[y]=i?f[b]*p[b]:f[y]*p[b]}}var x=n.makeTensorInfo(c.shape,d,p);if(null!=u){var k=vl({inputs:{x:x},backend:n,attrs:{perm:bc.backend_util.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),k}return x}};var xd={kernelName:bc.Cumsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;xc(a,"cumsum");var u=bc.backend_util.getAxesPermutation([o],a.shape.length),c=a;null!=u&&(c=vl({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=bc.backend_util.getInnerMostAxes(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=(0,bc.upcastType)(c.dtype,"int32"),p=bc.util.makeZerosTypedArray(bc.util.sizeFromShape(c.shape),d),f=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},g=0;g<f.length;g+=h)for(var v=0;v<h;v++){var y=m(g,v);if(0===v)p[y]=i?0:f[y];else{var b=m(g,v-1);p[y]=i?f[b]+p[b]:f[y]+p[b]}}var x=n.makeTensorInfo(c.shape,d,p);if(null!=u){var k=vl({inputs:{x:x},backend:n,attrs:{perm:bc.backend_util.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),k}return x}};var kd={kernelName:bc.DenseBincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=Gl(n.data.get(a.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,u)}if(2===a.shape.length){var c=ql(n.bufferSync(a),n.bufferSync(o),i,s);return n.makeTensorInfo(c.shape,o.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var wd={kernelName:bc.DepthToSpace,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat;bc.util.assert("NHWC"===i,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(i)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],d=u*o,p=c*o,f=l/(o*o),h=n.data.get(a.dataId).values,m=new Float32Array(s*d*p*f),g=0,v=0;v<s;++v)for(var y=0;y<d;++y)for(var b=Math.floor(y/o),x=y%o,k=0;k<p;++k)for(var w=Math.floor(k/o),S=(x*o+k%o)*f,C=0;C<f;++C){var E=C+S+l*(w+c*(b+u*v));m[g++]=h[E]}return n.makeTensorInfo([s,d,p,f],a.dtype,m)}};function Sd(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;xc([a,o],"depthwiseConv2DNative");var l=bc.util.computeStrides(a.shape),d=bc.util.computeStrides(o.shape),p=u;null==p&&(p=[1,1]),bc.util.assert(bc.backend_util.eitherStridesOrDilationsAreOne(i,p),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(p,"'")}));for(var f=bc.backend_util.computeConv2DInfo(a.shape,o.shape,i,p,s,c,!0),h=f.filterHeight,m=f.filterWidth,g=f.dilationHeight,v=f.dilationWidth,y=f.padInfo,b=y.left,x=y.top,k=f.outChannels/f.inChannels,w=new bc.TensorBuffer(f.outShape,a.dtype),S=n.data.get(a.dataId).values,C=n.data.get(o.dataId).values,E=w.values,T=0;T<f.batchSize;++T)for(var N=T*l[0],_=T*w.strides[0],I=0;I<f.outHeight;++I)for(var R=_+I*w.strides[1],A=I*f.strideHeight-x,O=0;O<h;++O){var P=A+O*g;if(!(P<0||P>=f.inHeight))for(var D=O*d[0],L=N+P*l[1],M=0;M<f.outWidth;++M)for(var F=R+M*w.strides[2],B=M*f.strideWidth-b,j=0;j<m;++j){var z=B+j*v;if(!(z<0||z>=f.inWidth))for(var V=D+j*d[1],W=L+z*f.inChannels,Z=F,U=V,H=0;H<f.inChannels;++H){for(var G=S[W+H],q=0;q<k;++q)E[Z+q]+=G*C[U+q];Z+=k,U+=k}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var Cd={kernelName:bc.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:Sd};var Ed={kernelName:bc.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;xc([a,o],"depthwiseConv2dNativeBackpropFilter");for(var d=bc.backend_util.computeConv2DInfo(a.shape,l,i,s,u,c,!0),p=d.strideHeight,f=d.strideWidth,h=d.filterHeight,m=d.filterWidth,g=new bc.TensorBuffer(d.filterShape,"float32"),v=d.padInfo.left,y=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,k=new bc.TensorBuffer(a.shape,a.dtype,x),w=n.data.get(o.dataId).values,S=new bc.TensorBuffer(o.shape,o.dtype,w),C=0;C<h;++C)for(var E=Math.max(0,Math.ceil((y-C)/p)),T=Math.min(d.outHeight,(d.inHeight+y-C)/p),N=0;N<m;++N)for(var _=Math.max(0,Math.ceil((v-N)/f)),I=Math.min(d.outWidth,(d.inWidth+v-N)/f),R=0;R<d.outChannels;++R){for(var A=Math.trunc(R/b),O=R%b,P=0,D=0;D<d.batchSize;++D)for(var L=E;L<T;++L)for(var M=C+L*p-y,F=_;F<I;++F){var B=N+F*f-v;P+=k.get(D,M,B,A)*S.get(D,L,F,R)}g.set(P,C,N,A,O)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var Td={kernelName:bc.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,s=r.strides,u=r.dilations,c=r.pad,l=r.dimRoundingMode,d=r.inputShape;xc([a,o],"depthwiseConv2DNativeBackpropInput");for(var p=bc.util.computeStrides(a.shape),f=bc.util.computeStrides(o.shape),h=bc.backend_util.computeConv2DInfo(d,o.shape,s,u,c,l,!0),m=new bc.TensorBuffer(h.inShape,"float32"),g=m.values,v=(0,i.Z)(m.strides,3),y=v[0],b=v[1],x=v[2],k=n.data.get(a.dataId).values,w=(0,i.Z)(p,3),S=w[0],C=w[1],E=w[2],T=n.data.get(o.dataId).values,N=(0,i.Z)(f,3),_=N[0],I=N[1],R=N[2],A=h.batchSize,O=h.filterHeight,P=h.filterWidth,D=h.inChannels,L=h.inHeight,M=h.inWidth,F=h.outChannels,B=h.outHeight,j=h.outWidth,z=h.strideHeight,V=h.strideWidth,W=O-1-h.padInfo.top,Z=P-1-h.padInfo.left,U=F/D,H=0;H<A;++H)for(var G=0;G<D;++G)for(var q=0;q<L;++q)for(var X=q-W,K=Math.max(0,Math.ceil(X/z)),Y=Math.min(B,(O+X)/z),Q=0;Q<M;++Q){for(var $=Q-Z,J=Math.max(0,Math.ceil($/V)),ee=Math.min(j,(P+$)/V),te=0,ne=K;ne<Y;++ne)for(var re=ne*z-X,ae=J;ae<ee;++ae)for(var oe=S*H+C*ne+E*ae,ie=_*(O-1-re)+I*(P-1-(ae*V-$))+R*G,se=0;se<U;++se){te+=k[oe+(G*U+se)]*T[ie+se]}g[y*H+b*q+x*Q+G]=te}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var Nd={kernelName:bc.Diag,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=bc.util.sizeFromShape(r.shape),o=n.data.get(r.dataId).values,i=(0,bc.buffer)([a,a],r.dtype),s=i.values,u=0;u<o.length;u++)s[u*a+u]=o[u];var c=[].concat((0,Be.Z)(r.shape),(0,Be.Z)(r.shape));return n.makeTensorInfo(c,i.dtype,i.values)}},_d={kernelName:bc.Dilation2D,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,d=a.shape.length,p=c.data.get(o.dataId).values,f=o.shape.length,h=bc.backend_util.computeDilation2DInfo(a.shape,o.shape,i,s,"NHWC",u),m=h.batchSize,g=h.inHeight,v=h.inWidth,y=h.inChannels,b=h.outHeight,x=h.outWidth,k=h.padInfo,w=h.strideHeight,S=h.strideWidth,C=h.filterHeight,E=h.filterWidth,T=h.dilationHeight,N=h.dilationWidth,_=h.outShape,I=bc.util.sizeFromShape(_),R=_.length,A=bc.util.getArrayFromDType(a.dtype,I),O=0;O<m;++O)for(var P=0;P<b;++P)for(var D=P*w-k.top,L=0;L<x;++L)for(var M=L*S-k.left,F=0;F<y;++F){for(var B=Number.MIN_SAFE_INTEGER,j=0;j<C;++j){var z=D+j*T;if(z>=0&&z<g)for(var V=0;V<E;++V){var W=M+V*N;if(W>=0&&W<v){var Z=bc.util.locToIndex([O,z,W,F],d,bc.util.computeStrides(a.shape)),U=bc.util.locToIndex([j,V,F],f,bc.util.computeStrides(o.shape)),H=l[Z]+p[U];H>B&&(B=H)}}}A[bc.util.locToIndex([O,P,L,F],R,bc.util.computeStrides(_))]=B}return{dataId:c.write(bc.util.toTypedArray(A,a.dtype),_,a.dtype),shape:_,dtype:a.dtype}}},Id={kernelName:bc.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=bc.util.toNestedArray(a.shape,l.data.get(a.dataId).values),p=bc.util.toNestedArray(o.shape,l.data.get(o.dataId).values),f=bc.backend_util.computeDilation2DInfo(a.shape,o.shape,s,u,"NHWC",c),h=f.batchSize,m=f.inHeight,g=f.inWidth,v=f.inChannels,y=f.outHeight,b=f.outWidth,x=f.padInfo,k=f.strideHeight,w=f.strideWidth,S=f.filterHeight,C=f.filterWidth,E=f.dilationHeight,T=f.dilationWidth,N=f.outShape;bc.util.assert(i.rank===N.length,(function(){return"Error in ".concat(bc.Dilation2DBackpropFilter,", dy ")+"must have the same rank as output ".concat(N.length,", but got ")+"".concat(i.rank)}));for(var _=bc.util.toNestedArray(N,l.data.get(i.dataId).values),I=bc.util.makeZerosNestedTypedArray(o.shape,o.dtype),R=0;R<h;++R)for(var A=0;A<y;++A)for(var O=A*k-x.top,P=0;P<b;++P)for(var D=P*w-x.left,L=0;L<v;++L){for(var M=Number.MIN_SAFE_INTEGER,F=0,B=0,j=0;j<S;++j){var z=O+j*E;if(z>=0&&z<m)for(var V=0;V<C;++V){var W=D+V*T;if(W>=0&&W<g){var Z=d[R][z][W][L]+p[j][V][L];Z>M&&(M=Z,F=j,B=V)}}}I[F][B][L]+=_[R][A][P][L]}return{dataId:l.write(bc.util.toTypedArray(I,a.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},Rd={kernelName:bc.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=bc.util.toNestedArray(a.shape,l.data.get(a.dataId).values),p=bc.util.toNestedArray(o.shape,l.data.get(o.dataId).values),f=bc.backend_util.computeDilation2DInfo(a.shape,o.shape,s,u,"NHWC",c),h=f.batchSize,m=f.inHeight,g=f.inWidth,v=f.inChannels,y=f.outHeight,b=f.outWidth,x=f.padInfo,k=f.strideHeight,w=f.strideWidth,S=f.filterHeight,C=f.filterWidth,E=f.dilationHeight,T=f.dilationWidth,N=f.outShape;bc.util.assert(i.rank===N.length,(function(){return"Error in ".concat(bc.Dilation2DBackpropInput,", dy ")+"must have the same rank as output ".concat(N.length,", but got ")+"".concat(i.rank)}));for(var _=bc.util.toNestedArray(N,l.data.get(i.dataId).values),I=bc.util.makeZerosNestedTypedArray(a.shape,a.dtype),R=0;R<h;++R)for(var A=0;A<y;++A)for(var O=A*k-x.top,P=0;P<b;++P)for(var D=P*w-x.left,L=0;L<v;++L){for(var M=Number.MIN_SAFE_INTEGER,F=O<0?0:O,B=D<0?0:D,j=0;j<S;++j){var z=O+j*E;if(z>=0&&z<m)for(var V=0;V<C;++V){var W=D+V*T;if(W>=0&&W<g){var Z=d[R][z][W][L]+p[j][V][L];Z>M&&(M=Z,F=z,B=W)}}}I[R][F][B][L]+=_[R][A][P][L]}return{dataId:l.write(bc.util.toTypedArray(I,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},Ad=Ac((function(e,t){return e*t})),Od=Jc((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),Pd=$c(bc.Multiply,Ad,Od),Dd={kernelName:bc.Multiply,backendName:"cpu",kernelFunc:Pd};function Ld(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,s=a.axis,u=a.keepDims;xc(o,"sum");var c=(t="bool"===o.dtype?Yc({inputs:{x:o},backend:r,attrs:{dtype:"int32"}}):Nc({inputs:{x:o},backend:r})).shape.length,l=bc.util.parseAxisParam(s,t.shape),d=bc.backend_util.getAxesPermutation(l,c),p=l,f=t;null!=d&&(f=vl({inputs:{x:t},backend:r,attrs:{perm:d}}),p=bc.backend_util.getInnerMostAxes(p.length,c)),bc.backend_util.assertAxesAreInnerMostDims("sum",p,f.shape.length);for(var h=bc.backend_util.computeOutAndReduceShapes(f.shape,p),m=(0,i.Z)(h,2),g=m[0],v=m[1],y=Gc(r,g,bc.backend_util.upcastType(f.dtype,"int32")),b=bc.util.sizeFromShape(v),x=r.data.get(y.dataId).values,k=r.data.get(f.dataId).values,w=0;w<x.length;++w){for(var S=w*b,C=0,E=0;E<b;++E)C+=k[S+E];x[w]=C}if(u){var T=y;y=al({inputs:{x:y},backend:r,attrs:{shape:bc.backend_util.expandShapeToKeepDim(y.shape,l)}}),r.disposeIntermediateTensorInfo(T)}return r.disposeIntermediateTensorInfo(t),null!=d&&r.disposeIntermediateTensorInfo(f),y}var Md={kernelName:bc.Sum,backendName:"cpu",kernelFunc:Ld};var Fd={kernelName:bc.Einsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=bc.backend_util.decodeEinsumEquation(r,a.length),s=i.allDims,u=i.summedDims,c=i.idDims;bc.backend_util.checkEinsumDimSizes(s.length,c,a);for(var l=bc.backend_util.getEinsumComputePath(u,c),d=l.path,p=l.steps,f=p.length,h=null,m=s.length,g=[],v=0;v<f;++v){var y,b=(0,o.Z)(p[v]);try{for(b.s();!(y=b.n()).done;){var x=y.value,k=bc.backend_util.getEinsumPermutation(m,c[x]),w=k.permutationIndices,S=k.expandDims,C=void 0;bc.backend_util.isIdentityPermutation(w)?C=a[x]:(C=vl({inputs:{x:a[x]},backend:n,attrs:{perm:w}}),g.push(C));for(var E=C.shape.slice(),T=0;T<S.length;++T)E.splice(S[T],0,1);bc.util.arraysEqual(C.shape,E)||(C=al({inputs:{x:C},backend:n,attrs:{shape:E}}),g.push(C)),null===h?h=C:(h=Pd({inputs:{a:C,b:h},backend:n}),g.push(h))}}catch(lT){b.e(lT)}finally{b.f()}v<f-1&&(d[v]>=0&&(h=Ld({inputs:{x:h},backend:n,attrs:{axis:d[v]-(s.length-m),keepDims:!1}}),g.push(h)),m--)}for(var N=0,_=g;N<_.length;N++){var I=_[N];I!==h&&n.disposeIntermediateTensorInfo(I)}return h}};var Bd={kernelName:bc.EluGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;xc([r,a],"eluGrad");for(var o=new Float32Array(bc.util.sizeFromShape(a.shape)),i=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<i.length;++u){var c=i[u];o[u]=c>=1?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",o)}},jd=Ac((function(e,t){return e===t?1:0})),zd=$c(bc.Equal,jd,null,"bool"),Vd={kernelName:bc.Equal,backendName:"cpu",kernelFunc:zd},Wd=bc.backend_util.ERF_P,Zd=bc.backend_util.ERF_A1,Ud=bc.backend_util.ERF_A2,Hd=bc.backend_util.ERF_A3,Gd=bc.backend_util.ERF_A4,qd=bc.backend_util.ERF_A5,Xd=Sc(bc.Erf,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+Wd*n);return t*(1-((((qd*r+Gd)*r+Hd)*r+Ud)*r+Zd)*r*Math.exp(-n*n))})),Kd={kernelName:bc.Erf,backendName:"cpu",kernelFunc:Xd},Yd=jc((function(e){return Math.exp(e)})),Qd=Cc(bc.Exp,Yd,"float32"),$d={kernelName:bc.Exp,backendName:"cpu",kernelFunc:Qd};function Jd(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,o=r.dim,i=a.shape.length,s=a.shape.slice(),u=o;return o<0&&(bc.util.assert(-(i+1)<=o,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+o+1),s.splice(u,0,1),al({inputs:{x:a},backend:n,attrs:{shape:s}})}var ep={kernelName:bc.ExpandDims,backendName:"cpu",kernelFunc:Jd},tp=jc((function(e){return Math.expm1(e)})),np=Cc(bc.Expm1,tp),rp={kernelName:bc.Expm1,backendName:"cpu",kernelFunc:np},ap=Ac((function(e,t){return e/t})),op=$c(bc.RealDiv,ap),ip={kernelName:bc.RealDiv,backendName:"cpu",kernelFunc:op},sp=Ac((function(e,t){return e-t})),up=Jc((function(e,t,n,r){return{real:e-n,imag:t-r}})),cp=$c(bc.Sub,sp,up),lp={kernelName:bc.Sub,backendName:"cpu",kernelFunc:cp};function dp(e,t,n){for(var r=e.shape,a=r[0],o=r[1],i=n.data.get(e.dataId),s=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,c=[a,o],l=bc.util.sizeFromShape(c),d=bc.util.getTypedArrayFromDType("float32",l),p=bc.util.getTypedArrayFromDType("float32",l),f=0;f<a;f++){for(var h=Zl({inputs:{x:s},backend:n,attrs:{begin:[f,0],size:[1,o]}}),m=Zl({inputs:{x:u},backend:n,attrs:{begin:[f,0],size:[1,o]}}),g=Uc({inputs:{real:h,imag:m},backend:n}),v=pp(g,t,n),y=v.real,b=v.imag,x=bc.backend_util.mergeRealAndImagArrays(y,b),k=0;k<o;k++){var w=bc.backend_util.getComplexWithIndex(x,k);d[f*o+k]=w.real,p[f*o+k]=w.imag}n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g)}var S=n.makeTensorInfo(c,"float32",d),C=n.makeTensorInfo(c,"float32",p),E=Uc({inputs:{real:S,imag:C},backend:n});return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(C),E}function pp(e,t,n){var r=bc.util.sizeFromShape(e.shape),a=n.data.get(e.dataId),o=n.data.get(a.complexTensorInfos.real.dataId).values,i=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((v=r)&v-1)){var s=fp(o,i,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var c=n.makeTensorInfo(u,"float32",s.real),l=n.makeTensorInfo(u,"float32",s.imag),d=n.makeTensorInfo([],"float32",bc.util.createScalarValue(r,"float32")),p=Nc({inputs:{x:d},backend:n}),f=ip.kernelFunc({inputs:{a:c,b:d},backend:n}),h=ip.kernelFunc({inputs:{a:l,b:p},backend:n}),m=n.data.get(f.dataId).values,g=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),{real:m,imag:g}}return s}var v,y=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var o=0,i=0,s=0;s<t;s++){var u=bc.backend_util.exponent(a*s,t,n),c=bc.backend_util.getComplexWithIndex(e,s);o+=c.real*u.real-c.imag*u.imag,i+=c.real*u.imag+c.imag*u.real}n&&(o/=t,i/=t),bc.backend_util.assignToTypedArray(r,o,i,a)}return r}(bc.backend_util.mergeRealAndImagArrays(o,i),r,t);return bc.backend_util.splitRealAndImagArrays(y)}function fp(e,t,n,r,a){if(1===n)return{real:e,imag:t};var o=bc.backend_util.mergeRealAndImagArrays(e,t),i=n/2,s=bc.backend_util.complexWithEvenIndex(o),u=s.real,c=s.imag,l=[u.length],d=a.makeTensorInfo(l,"float32",u),p=a.makeTensorInfo(l,"float32",c),f=Uc({inputs:{real:d,imag:p},backend:a}),h=bc.backend_util.complexWithOddIndex(o),m=h.real,g=h.imag,v=[m.length],y=a.makeTensorInfo(v,"float32",m),b=a.makeTensorInfo(v,"float32",g),x=Uc({inputs:{real:y,imag:b},backend:a}),k=fp(u,c,i,r,a),w=k.real,S=k.imag,C=[w.length],E=a.makeTensorInfo(C,"float32",w),T=a.makeTensorInfo(C,"float32",S),N=Uc({inputs:{real:E,imag:T},backend:a}),_=fp(m,g,i,r,a),I=_.real,R=_.imag,A=[I.length],O=a.makeTensorInfo(A,"float32",I),P=a.makeTensorInfo(A,"float32",R),D=Uc({inputs:{real:O,imag:P},backend:a}),L=bc.backend_util.exponents(n,r),M=[L.real.length],F=a.makeTensorInfo(M,"float32",L.real),B=a.makeTensorInfo(M,"float32",L.imag),j=Uc({inputs:{real:F,imag:B},backend:a}),z=Pd({inputs:{a:j,b:D},backend:a}),V=nl({inputs:{a:N,b:z},backend:a}),W=cp({inputs:{a:N,b:z},backend:a}),Z=qc({inputs:{input:V},backend:a}),U=qc({inputs:{input:W},backend:a}),H=rd({inputs:{input:V},backend:a}),G=rd({inputs:{input:W},backend:a}),q=od({inputs:[Z,U],backend:a,attrs:{axis:0}}),X=od({inputs:[H,G],backend:a,attrs:{axis:0}}),K=a.data.get(q.dataId).values,Y=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),{real:K,imag:Y}}var hp={kernelName:bc.FFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=bc.util.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],i=al({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=dp(i,!1,n),u=al({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}};function mp(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype||bc.util.inferDtype(a),i=bc.util.getArrayFromDType(o,bc.util.sizeFromShape(r));return function(e,t,n){e.fill(t)}(i,a),t.makeTensorInfo(r,o,i)}var gp={kernelName:bc.Fill,backendName:"cpu",kernelFunc:mp};var vp={kernelName:bc.FlipLeftRight,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,o=bc.util.getTypedArrayFromDType(r.dtype,bc.util.sizeFromShape(r.shape)),s=(0,i.Z)(r.shape,4),u=s[0],c=s[1],l=s[2],d=s[3],p=a.data.get(r.dataId).values,f=0;f<u;f++)for(var h=f*l*c*d,m=0;m<c;m++)for(var g=m*(l*d),v=0;v<l;v++)for(var y=v*d,b=0;b<d;b++){var x=Math.round(l-v-1),k=h+g+y+b,w=p[k];if(x>=0&&x<l)w=p[h+g+x*d+b];o[k]=w}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},yp=jc((function(e){return Math.floor(e)})),bp=Cc(bc.Floor,yp),xp={kernelName:bc.Floor,backendName:"cpu",kernelFunc:bp},kp=Ac((function(e,t){return Math.floor(e/t)})),wp=$c(bc.FloorDiv,kp,null,"int32"),Sp={kernelName:bc.FloorDiv,backendName:"cpu",kernelFunc:wp};var Cp={kernelName:bc.FusedConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,p=r.dimRoundingMode,f=r.activation,h=r.leakyreluAlpha,m=sd({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p}});if(i){var g=m;if("NCHW"===l&&1===i.shape.length&&1!==i.shape[0]){var v=al({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=nl({inputs:{a:m,b:v},backend:n}),n.disposeIntermediateTensorInfo(v)}else m=nl({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(g)}if(f){var y=m;if("NCHW"===l&&"prelu"===f&&1===s.shape.length&&1!==s.shape[0]){var b=al({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=Zc(n,m,f,b,h),n.disposeIntermediateTensorInfo(b)}else m=Zc(n,m,f,s,h);n.disposeIntermediateTensorInfo(y)}return m}};var Ep={kernelName:bc.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,p=r.dimRoundingMode,f=r.activation,h=r.leakyreluAlpha,m=Sd({inputs:{x:a,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:p}});if(i){var g=m;m=nl({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(f){var v=m;m=Zc(n,m,f,s,h),n.disposeIntermediateTensorInfo(v)}return m}};function Tp(e,t,n,r,a,o,i,s,u){for(var c=(0,bc.buffer)([r,o],n),l=0;l<r;l++){for(var d=[],p=0,f=0;f<a;f++){var h=e[l*a+f];p+=h*i[f],d.push(h)}if(p<0||p>=u/o)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var m=0;m<o;m++)c.values[l*o+m]=t.get.apply(t,(0,Be.Z)(t.indexToLoc(p*o+m)))}return c}var Np={kernelName:bc.GatherNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=bc.util.sizeFromShape(r.shape),s=a.shape,u=s[s.length-1],c=bc.backend_util.prepareAndValidate(r,a),l=(0,i.Z)(c,4),d=l[0],p=l[1],f=l[2],h=l[3];if(0===p)return n.makeTensorInfo(d,r.dtype,[]);var m=Tp(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,p,u,f,h,r.shape,o);return n.makeTensorInfo(d,r.dtype,m.values)}};function _p(e,t,n){for(var r=(0,bc.buffer)(n,e.dtype),a=0;a<r.size;++a){var o=r.indexToLoc(a).slice(),i=o[0],s=o[2],u=t.locToIndex([i,s]);o[2]=t.values[u];var c=e.locToIndex(o);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var Ip={kernelName:bc.GatherV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims;xc([a,o],"gatherV2");for(var u=bc.util.parseAxisParam(i,a.shape)[0],c=n.data.get(o.dataId).values,l=a.shape[u],d=function(e){var t=c[e];bc.util.assert(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},p=0;p<c.length;++p)d(p);var f=s;null==s&&(f=0);var h=bc.util.sizeFromShape(o.shape),m=bc.backend_util.segment_util.collectGatherOpShapeInfo(a,o,u,f),g=al({inputs:{x:a},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),v=al({inputs:{x:o},backend:n,attrs:{shape:[m.batchSize,h/m.batchSize]}}),y=[m.batchSize,m.outerSize,h/m.batchSize,m.sliceSize],b=n.bufferSync(v),x=_p(n.bufferSync(g),b,y);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(m.outputShape,x.dtype,x.values)}},Rp=Ac((function(e,t){return e>t?1:0})),Ap=$c(bc.Greater,Rp,null,"bool"),Op={kernelName:bc.Greater,backendName:"cpu",kernelFunc:Ap},Pp=Ac((function(e,t){return e>=t?1:0})),Dp=$c(bc.GreaterEqual,Pp,null,"bool"),Lp={kernelName:bc.GreaterEqual,backendName:"cpu",kernelFunc:Dp};var Mp={kernelName:bc.IFFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=bc.util.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],i=al({inputs:{x:r},backend:n,attrs:{shape:[a/o,o]}}),s=dp(i,!0,n),u=al({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}},Fp=Sc(bc.IsFinite,(function(e){return Number.isFinite(e)?1:0}),"bool"),Bp={kernelName:bc.IsFinite,backendName:"cpu",kernelFunc:Fp},jp=Sc(bc.IsInf,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),zp={kernelName:bc.IsInf,backendName:"cpu",kernelFunc:jp},Vp=Sc(bc.IsNan,(function(e){return Number.isNaN(e)?1:0}),"bool"),Wp={kernelName:bc.IsNan,backendName:"cpu",kernelFunc:Vp},Zp=Ac((function(e,t){return e<t?1:0})),Up=$c(bc.Less,Zp,null,"bool"),Hp={kernelName:bc.Less,backendName:"cpu",kernelFunc:Up},Gp=Ac((function(e,t){return e<=t?1:0})),qp=$c(bc.LessEqual,Gp,null,"bool"),Xp={kernelName:bc.LessEqual,backendName:"cpu",kernelFunc:qp};function Kp(e,t,n){var r=(t-e)/(n-1),a=bc.util.makeZerosTypedArray(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return a}var Yp={kernelName:bc.LinSpace,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=Kp(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},Qp=jc((function(e){return Math.log(e)})),$p=Cc(bc.Log,Qp),Jp={kernelName:bc.Log,backendName:"cpu",kernelFunc:$p},ef=Sc(bc.Log1p,(function(e){return Math.log1p(e)})),tf={kernelName:bc.Log1p,backendName:"cpu",kernelFunc:ef},nf=Ac((function(e,t){return e&&t})),rf=$c(bc.LogicalAnd,nf,null,"bool"),af={kernelName:bc.LogicalAnd,backendName:"cpu",kernelFunc:rf},of=Sc(bc.LogicalNot,(function(e){return e?0:1}),"bool"),sf={kernelName:bc.LogicalNot,backendName:"cpu",kernelFunc:of},uf=Ac((function(e,t){return e||t})),cf=$c(bc.LogicalOr,uf,null,"bool"),lf={kernelName:bc.LogicalOr,backendName:"cpu",kernelFunc:cf};var df={kernelName:bc.LRN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta;xc(a,"LRN");var c=a.shape[3],l=c-1,d=n.data.get(a.dataId).values,p=bc.util.sizeFromShape(a.shape),f=new Float32Array(p);function h(e){for(var t=e%c,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,l),a=0;n<=r;n++){var i=d[n];a+=i*i}return a}for(var m=0;m<p;m++){var g=h(m),v=d[m]*Math.pow(i+s*g,-u);f[m]=v}return n.makeTensorInfo(a.shape,a.dtype,f)}};var pf={kernelName:bc.LRNGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;xc(i,"LRNGrad");for(var d=bc.util.sizeFromShape(i.shape),p=i.shape[3],f=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(d),v=d,y=0;y<v;y++){for(var b=y%p,x=y-b+Math.max(0,b-s),k=y-b+Math.min(p,b+s+1),w=0,S=x;S<k;S++)w+=Math.pow(h[S],2);w=c*w+u;for(var C=x;C<k;C++){var E=-2*c*l*h[C]*m[y]/w;y===C&&(E+=Math.pow(w,-l)),E*=f[y],g[C]+=E}}return n.makeTensorInfo(i.shape,a.dtype,g)}};function ff(e,t,n,r){for(var a=bc.util.getTypedArrayFromDType(r,bc.util.sizeFromShape(n)),o=0;o<a.length;++o){for(var i=o*t,s=e[i],u=0;u<t;++u){var c=e[i+u];(Number.isNaN(c)||c>s)&&(s=c)}a[o]=s}return a}function hf(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,s=r.keepDims,u=n,c=a.shape,l=c.length,d=bc.util.parseAxisParam(o,c),p=d,f=bc.backend_util.getAxesPermutation(p,l),h=u.data.get(a.dataId).values;if(null!=f){for(var m=new Array(l),g=0;g<m.length;g++)m[g]=c[f[g]];h=gl(h,c,a.dtype,f,m),p=bc.backend_util.getInnerMostAxes(p.length,l),c=m}xc(a,"max"),bc.backend_util.assertAxesAreInnerMostDims("max",p,l);var v=bc.backend_util.computeOutAndReduceShapes(c,p),y=(0,i.Z)(v,2),b=y[0],x=y[1],k=ff(h,bc.util.sizeFromShape(x),b,a.dtype),w=u.write(k,b,a.dtype),S=b;s&&(S=bc.backend_util.expandShapeToKeepDim(b,d));return{dataId:w,shape:S,dtype:a.dtype}}var mf={kernelName:bc.Max,backendName:"cpu",kernelFunc:hf},gf=Ac((function(e,t){return Math.max(e,t)})),vf=$c(bc.Maximum,gf),yf={kernelName:bc.Maximum,backendName:"cpu",kernelFunc:vf};var bf={kernelName:bc.MaxPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;xc(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;bc.util.assert(bc.backend_util.eitherStridesOrDilationsAreOne(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var c,l=bc.backend_util.computePool2DInfo(a.shape,o,i,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&bc.util.arraysEqual(l.inShape,l.outShape))c=Nc({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,p=bc.util.computeStrides(a.shape),f=Dl(d,a.shape,a.dtype,p,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,f.values)}return c}};var xf={kernelName:bc.MaxPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;xc(a,"maxPool3d");var l=bc.backend_util.computePool3DInfo(a.shape,o,i,1,s,u,c),d=Ml(n.data.get(a.dataId).values,a.shape,a.dtype,bc.util.computeStrides(a.shape),l,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};var kf={kernelName:bc.MaxPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;xc([a,o],"maxPool3DGrad");for(var l=bc.backend_util.computePool3DInfo(o.shape,i,s,1,u,c),d=function(e,t){for(var n=(0,bc.buffer)(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.front,f=t.padInfo.top,h=t.padInfo.left,m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var v=0;v<t.outDepth;++v){for(var y=v*r-p,b=y;b<0;)b+=i;for(var x=Math.min(t.inDepth,c+y),k=0;k<t.outHeight;++k){for(var w=k*a-f,S=w;S<0;)S+=s;for(var C=Math.min(t.inHeight,l+w),E=0;E<t.outWidth;++E){for(var T=E*o-h,N=T;N<0;)N+=u;for(var _=Math.min(t.inWidth,d+T),I=Number.NEGATIVE_INFINITY,R=-1,A=b;A<x;A+=i)for(var O=A-y,P=S;P<C;P+=s)for(var D=P-w,L=N;L<_;L+=u){var M=L-T,F=e.get(m,A,P,L,g);F>=I&&(I=F,R=O*l*d+D*l+M)}n.set(R,m,v,k,E,g)}}}return n}(n.bufferSync(o),l),p=l.strideDepth,f=l.strideHeight,h=l.strideWidth,m=l.dilationDepth,g=l.dilationHeight,v=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,k=y-1-l.padInfo.front,w=x-1-l.padInfo.left,S=b-1-l.padInfo.top,C=(0,bc.buffer)(o.shape,"float32"),E=n.bufferSync(a),T=0;T<l.batchSize;++T)for(var N=0;N<l.inChannels;++N)for(var _=0;_<l.inDepth;++_)for(var I=0;I<l.inHeight;++I)for(var R=0;R<l.inWidth;++R){for(var A=_-k,O=I-S,P=R-w,D=0,L=0;L<y;L+=m){var M=(A+L)/p;if(!(M<0||M>=l.outDepth||Math.floor(M)!==M))for(var F=0;F<b;F+=g){var B=(O+F)/f;if(!(B<0||B>=l.outHeight||Math.floor(B)!==B))for(var j=0;j<x;j+=v){var z=(P+j)/h;if(!(z<0||z>=l.outWidth||Math.floor(z)!==z)){var V=y*b*x-1-d.get(T,M,B,z,N)===L*b*x+F*x+j?1:0;if(0!==V)D+=E.get(T,M,B,z,N)*V}}}}C.set(D,T,_,I,R,N)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};var wf={kernelName:bc.MaxPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;xc([o,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=bc.backend_util.computePool2DInfo(i.shape,s,u,1,c,l),p=n.data.get(i.dataId).values,f=(0,bc.buffer)(d.outShape,i.dtype,Ll(p,i.shape,i.dtype,d).values),h=d.strideHeight,m=d.strideWidth,g=d.dilationHeight,v=d.dilationWidth,y=d.effectiveFilterHeight,b=d.effectiveFilterWidth,x=b-1-d.padInfo.left,k=y-1-d.padInfo.top,w=(0,bc.buffer)(i.shape,"float32"),S=n.data.get(a.dataId).values,C=(0,bc.buffer)(a.shape,"float32",S),E=0;E<d.batchSize;++E)for(var T=0;T<d.inChannels;++T)for(var N=0;N<d.inHeight;++N)for(var _=0;_<d.inWidth;++_){for(var I=N-k,R=_-x,A=0,O=0;O<y;O+=g){var P=(I+O)/h;if(!(P<0||P>=d.outHeight||Math.floor(P)!==P))for(var D=0;D<b;D+=v){var L=(R+D)/m;if(!(L<0||L>=d.outWidth||Math.floor(L)!==L)){var M=y*b-1-f.get(E,P,L,T)===O*b+D?1:0;if(0!==M)A+=C.get(E,P,L,T)*M}}}w.set(A,E,N,_,T)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var Sf={kernelName:bc.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,s=n.strides,u=n.pad,c=n.includeBatchInIndex,l=r;xc(a,"MaxPoolWithArgmax");var d=l.data.get(a.dataId).values,p=bc.backend_util.computePool2DInfo(a.shape,o,s,[1,1],u),f=function(e,t,n,r,a){var o=Dl(e,0,n,bc.util.computeStrides(t),a,"max"),i=Ll(e,t,n,a,!0,r);return[o.values,i.values]}(d,a.shape,a.dtype,c,p),h=(0,i.Z)(f,2),m=h[0],g=h[1],v=l.write(m,p.outShape,a.dtype),y=l.write(g,p.outShape,a.dtype);return[{dataId:v,shape:p.outShape,dtype:a.dtype},{dataId:y,shape:p.outShape,dtype:"int32"}]}};var Cf={kernelName:bc.Mean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims,s=bc.util.parseAxisParam(o,a.shape),u=bc.backend_util.computeOutAndReduceShapes(a.shape,s)[1],c=bc.util.sizeFromShape(u),l=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));l.push(d);var p=Yc({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(p);var f=op({inputs:{a:p,b:d},backend:n});l.push(f);var h=Ld({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:i}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),h}};var Ef={kernelName:bc.Min,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,s=r.keepDims;xc(a,"min");var u=bc.util.parseAxisParam(o,a.shape),c=u,l=bc.backend_util.getAxesPermutation(c,a.shape.length),d=a;null!=l&&(d=vl({inputs:{x:a},backend:n,attrs:{perm:l}}),c=bc.backend_util.getInnerMostAxes(c.length,a.shape.length)),bc.backend_util.assertAxesAreInnerMostDims("min",c,d.shape.length);for(var p=bc.backend_util.computeOutAndReduceShapes(d.shape,c),f=(0,i.Z)(p,2),h=f[0],m=f[1],g=bc.util.sizeFromShape(m),v=bc.util.makeZerosTypedArray(bc.util.sizeFromShape(h),d.dtype),y=n.data.get(d.dataId).values,b=0;b<v.length;++b){for(var x=b*g,k=y[x],w=0;w<g;++w){var S=y[x+w];(Number.isNaN(S)||S<k)&&(k=S)}v[b]=k}null!=l&&n.disposeIntermediateTensorInfo(d);var C=n.makeTensorInfo(h,d.dtype,v);if(s){var E=al({inputs:{x:C},backend:n,attrs:{shape:bc.backend_util.expandShapeToKeepDim(h,u)}});return n.disposeIntermediateTensorInfo(C),E}return C}},Tf=Ac((function(e,t){return Math.min(e,t)})),Nf=$c(bc.Minimum,Tf),_f={kernelName:bc.Minimum,backendName:"cpu",kernelFunc:Nf};var If={kernelName:bc.MirrorPad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode;xc(a,"mirrorPad");for(var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=o.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===i?0:1,d=n.data.get(a.dataId).values,p=a.shape.length,f=bc.util.computeStrides(a.shape),h=bc.util.sizeFromShape(s),m=s.length,g=bc.util.computeStrides(s),v=bc.util.getTypedArrayFromDType(a.dtype,h),y=0;y<h;y++){for(var b=bc.util.indexToLoc(y,m,g),x=0;x<m;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);b=b.map((function(e,t){return e-u[t]}));var k=bc.util.locToIndex(b,p,f);v[y]=d[k]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},Rf=Ac((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),Af=$c(bc.Mod,Rf),Of={kernelName:bc.Mod,backendName:"cpu",kernelFunc:Af},Pf=n(4213);function Df(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.dim,i=a.shape.length,s=o;if(-1===s&&(s=i-1),s!==i-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(i," and dim was ").concat(s));var u=bc.util.parseAxisParam([s],a.shape),c=hf({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=bc.backend_util.expandShapeToKeepDim(c.shape,u),d=al({inputs:{x:c},backend:n,attrs:{shape:l}}),p=cp({inputs:{a:a,b:d},backend:n}),f=Qd({inputs:{x:p},backend:n}),h=Ld({inputs:{x:f},backend:n,attrs:{axis:u,keepDims:!1}}),m=al({inputs:{x:h},backend:n,attrs:{shape:l}}),g=op({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}var Lf={kernelName:bc.Softmax,backendName:"cpu",kernelFunc:Df};var Mf={kernelName:bc.Multinomial,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized;xc(a,"multinomial");for(var u=s?a:Df({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],d=n.data.get(u.dataId).values,p=[c,o],f=bc.util.makeZerosTypedArray(bc.util.sizeFromShape(p),"int32"),h=0;h<c;++h){var m=h*l,g=new Float32Array(l-1);g[0]=d[m];for(var v=1;v<g.length;++v)g[v]=g[v-1]+d[m+v];for(var y=Pf.alea(i.toString()),b=h*o,x=0;x<o;++x){var k=y();f[b+x]=g.length;for(var w=0;w<g.length;w++)if(k<g[w]){f[b+x]=w;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(p,"int32",f)}};function Ff(e,t,n){var r=bc.util.createScalarValue(-1,n);return Ad([],t,r,e,n)}var Bf={kernelName:bc.Neg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;xc(r,"neg");var a=Ff(n.data.get(r.dataId).values,r.shape,r.dtype),o=(0,i.Z)(a,2),s=o[0],u=o[1];return n.makeTensorInfo(u,r.dtype,s)}},jf=bc.kernel_impls.nonMaxSuppressionV3Impl;var zf={kernelName:bc.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;xc(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,d=jf(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},Vf=bc.kernel_impls.nonMaxSuppressionV4Impl;var Wf={kernelName:bc.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;xc(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,p=Vf(l,d,i,s,u,c),f=p.selectedIndices,h=p.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},Zf=bc.kernel_impls.nonMaxSuppressionV5Impl;var Uf={kernelName:bc.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;xc(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,p=Zf(l,d,i,s,u,c),f=p.selectedIndices,h=p.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},Hf=Ac((function(e,t){return e!==t?1:0})),Gf=$c(bc.NotEqual,Hf,null,"bool"),qf={kernelName:bc.NotEqual,backendName:"cpu",kernelFunc:Gf};var Xf={kernelName:bc.OneHot,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.dtype,i=r.depth,s=r.onValue,u=r.offValue;xc(a,"oneHot");var c=bc.util.sizeFromShape(a.shape),l=new Float32Array(c*i);l.fill(u);for(var d=n.data.get(a.dataId).values,p=0;p<c;++p)d[p]>=0&&d[p]<i&&(l[p*i+d[p]]=s);return n.makeTensorInfo([].concat((0,Be.Z)(a.shape),[i]),o,l)}};function Kf(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=qc({inputs:{input:r},backend:n}),o=Kf({inputs:{x:a},backend:n}),i=rd({inputs:{input:r},backend:n}),s=Kf({inputs:{x:i},backend:n}),u=Uc({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return mp({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var Yf={kernelName:bc.ZerosLike,backendName:"cpu",kernelFunc:Kf};var Qf={kernelName:bc.OnesLike,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var o=qc({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=rd({inputs:{input:a},backend:r}),u=Kf({inputs:{x:s},backend:r}),c=Uc({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return mp({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function $f(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Jd({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){bc.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),bc.util.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=od({inputs:t.map((function(e){var t=Jd({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var Jf={kernelName:bc.Pack,backendName:"cpu",kernelFunc:$f};var eh={kernelName:bc.PadV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;xc(a,"pad");var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=o.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=bc.util.sizeFromShape(a.shape),d=a.shape.length,p=bc.util.computeStrides(a.shape),f=bc.util.sizeFromShape(s),h=s.length,m=bc.util.computeStrides(s),g=bc.util.getTypedArrayFromDType(a.dtype,f);0!==i&&g.fill(i);for(var v=0;v<l;v++){var y=bc.util.indexToLoc(v,d,p).map((function(e,t){return e+u[t]}));g[bc.util.locToIndex(y,h,m)]=c[v]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},th=Ac((function(e,t){return Math.pow(e,t)})),nh=$c(bc.Pow,th),rh={kernelName:bc.Pow,backendName:"cpu",kernelFunc:nh};function ah(e,t,n,r){for(var a=bc.backend_util.computeOutAndReduceShapes(e,r),o=(0,i.Z)(a,2),s=o[0],u=o[1],c=(0,bc.upcastType)(t,"int32"),l=bc.util.makeZerosTypedArray(bc.util.sizeFromShape(s),c),d=bc.util.sizeFromShape(u),p=0;p<l.length;++p){for(var f=p*d,h=1,m=0;m<d;++m)h*=n[f+m];l[p]=h}return{outVals:l,outShape:s,outDtype:c}}var oh={kernelName:bc.Prod,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.keepDims;xc(a,"prod");var s=a.shape.length,u=bc.util.parseAxisParam(o,a.shape),c=bc.backend_util.getAxesPermutation(u,s),l=u,d=a,p=[];null!=c&&(d=vl({inputs:{x:a},backend:n,attrs:{perm:c}}),p.push(d),l=bc.backend_util.getInnerMostAxes(l.length,s));var f=n.data.get(d.dataId).values,h=ah(d.shape,d.dtype,f,l),m=h.outVals,g=h.outShape,v=h.outDtype,y=g;return i&&(y=bc.backend_util.expandShapeToKeepDim(g,u)),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,v,m)}};function ih(e,t,n,r){var a=[],o=0,i=t.length-1+n.length,s=new Array(i).fill(null).map((function(){return[0]}));!function(e,t){for(var n=0;n<e.length;++n){var r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var o=1;o<r.length;++o)if(r[o-1]>r[o])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);for(var u=1,c=0;c<t.length-1;++c){u*=t[c];for(var l=t[c+1],d=1;d<u+1;++d)s[c].push(d*l)}for(var p=0;p<e.length;++p){for(var f=e[p],h=e[p]+1,m=0;m<n.length;++m){var g=n[m],v=m+t.length-1;if(v>=0)for(var y=s[v],b=y[y.length-1]-g[f],x=f;x<h;++x)s[v].push(g[x+1]+b);f=g[f],h=g[h]}h!==f&&(a.push([f,h]),o+=h-f)}return{outSplits:s,valueSlices:a,numValues:o}}function sh(e,t){for(var n=e.slice(0,t);n.length<t;)n.push(1);for(var r=t;r<e.length;r++)n[t-1]*=e[r];return n}function uh(e,t,n,r,a){var i=t.slice();i[0]=a;var s=bc.util.getArrayFromDType(n,bc.util.sizeFromShape(i)),u=e.length;return function(e,t,n,r,a,i){var s,u=sh(t,2)[1],c=sh(i,2)[1],l=0,d=(0,o.Z)(n);try{for(d.s();!(s=d.n()).done;)for(var p=s.value,f=p[0];f<p[1];++f){for(var h=0;h<r;++h)a[l*c+h]=e[f*u+h];++l}}catch(lT){d.e(lT)}finally{d.f()}}(e,t,r,0===u?0:u/t[0],s,i),[s,i]}function ch(e,t,n,r,a,o,i,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((function(e,r){if(e<0||e>=n){var a=bc.util.indexToLoc(r,t.length,bc.util.computeStrides(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(o,i,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");var u=ih(o,i,e,r[0]),c=u.outSplits,l=u.valueSlices,d=u.numValues,p=function(e){for(var t=[],n=function(n){var r=e[n].length,a=bc.util.getArrayFromDType("int32",r);t.push(a),e[n].forEach((function(e,t){return a[t]=e}))},r=0;r<e.length;++r)n(r);return t}(c),f=uh(n,r,a,l,d);return[p,f[0],f[1]]}var lh={kernelName:bc.RaggedGather,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,o=t.paramsDenseValues,s=t.indices,u=(r.outputRaggedRank,a.map((function(e){return n.data.get(e.dataId).values}))),c=a.map((function(e){return e.shape})),l=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,p=ch(u,c,l,o.shape,o.dtype,d,s.shape),f=(0,i.Z)(p,3),h=f[0],m=f[1],g=f[2],v=h.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),y=n.makeTensorInfo(g,o.dtype,m);return v.concat([y])}},dh=bc.backend_util.RowPartitionType,ph=function(){function e(t,n,r,a,o,i,s,u,c,l){(0,Je.Z)(this,e),this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=o,this.defaultValue=i,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=bc.backend_util.getRowPartitionTypesHelper(l),this.raggedRank=bc.backend_util.getRaggedRank(this.rowPartitionTypes)}return(0,et.Z)(e,[{key:"getRowPartitionTypeByDimension",value:function(e){return this.rowPartitionTypes[0]===dh.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}},{key:"getRowPartitionTensor",value:function(e){return this.rowPartitionTypes[0]===dh.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}},{key:"getMaxWidth",value:function(t){var n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case dh.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case dh.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(dh[this.getRowPartitionTypeByDimension(t-1)]))}}},{key:"tensorShapeFromTensor",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return hh(e,n)}},{key:"calculateOutputSize",value:function(e){var t=this.valuesShape,n=this.defaultValueShape;bc.backend_util.validateDefaultValueShape(n,t);var r=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=bc.backend_util.combineRaggedTensorToTensorShapes(this.raggedRank,r,t);a[0]<0&&(a[0]=e);for(var o=1;o<=this.raggedRank;++o)a[o]<0&&(a[o]=this.getMaxWidth(o));return a}},{key:"calculateFirstParentOutputIndex",value:function(e,t,n){for(var r=Math.min(e,n),a=[],o=0,i=0;i<r;++i,o+=t)a.push(o);for(var s=r;s<e;++s)a.push(-1);return bc.util.assert(a.length===e,(function(){return"Final length of result must be equal to firstDimension."})),a}},{key:"calculateOutputIndexRowSplit",value:function(e,t,n,r){for(var a=e.length,o=[],i=0;i<a-1;++i){var s=e[i+1]-e[i],u=Math.min(r,s),c=t[i];-1===c&&(u=0);for(var l=0;l<u;++l)o.push(c),c+=n;for(var d=0;d<s-u;++d)o.push(-1)}if(a>0&&o.length!==e[a-1])throw new Error("Invalid row split size.");return o}},{key:"calculateOutputIndexValueRowID",value:function(e,t,n,r){var a=e.length,o=[];if(0===a)return[];var i=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));var u=t[s];o.push(u);for(var c=1;c<a;++c){var l=e[c];if(l===s)u>=0&&(++i<r?u+=n:u=-1);else{if(i=0,s=l,l>=t.length)throw new Error("Got nextValueRowId=".concat(l," which is not less than ").concat(t.length));u=t[l]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}},{key:"calculateOutputIndex",value:function(e,t,n,r){var a=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case dh.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case dh.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(dh[o]))}}},{key:"getFirstDimensionSize",value:function(){var e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");var t=this.rowPartitionTypes[0];switch(t){case dh.FIRST_DIM_SIZE:return e[0];case dh.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case dh.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(dh[t]))}}},{key:"compute",value:function(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(var r=n.length-2;r>=0;--r)n[r]=n[r+1]*t[r+1];var a=hh(t,!1),o=bc.util.getArrayFromDType(this.valuesDType,bc.util.sizeFromShape(a));if(n[0]*t[0]>0){for(var i=this.calculateFirstParentOutputIndex(e,n[0],t[0]),s=1;s<=this.raggedRank;++s){i=this.calculateOutputIndex(s-1,i,n[s],t[s])}this.setOutput(this.raggedRank,i,o,a)}return[a,o]}},{key:"setOutput",value:function(e,t,n,r){if(0!==n.length){var a=this.values,o=n,i=r.slice();i=i.slice(e+1);var s=bc.util.sizeFromShape(i),u=t.length,c=this.defaultValue;if(c.length!==s&&1!==c.length){var l=this.defaultValueShape;(0,bc.tidy)((function(){var e=(0,bc.reshape)(c,l),t=(0,bc.broadcastTo)(e,i);c=t.dataSync()}))}for(var d=0,p=0,f=0,h=0;h<=u;++h){var m=h<u?t[h]:-1;if(m!==f){if(p<f){var g=a.subarray(d*s);fh(o.subarray(p*s),g,(f-p)*s)}if(h>=u){var v=n.length;m=Math.floor(v/s)}if(m>f)if(1===this.defaultValue.length)o.subarray(f*s,m*s).fill(this.defaultValue[0]),f=m;else for(;m>f;){fh(o.slice(f*s),c,s),++f}m<0?(d=h+1,p=f):(d=h,f=(p=f)+1)}else++f}}}}],[{key:"getMaxWidthRowSplit",value:function(e){var t=e.length;if(0===t||1===t)return 0;for(var n=0,r=0;r<t-1;++r){var a=e[r+1]-e[r];a>n&&(n=a)}return n}},{key:"getMaxWidthValueRowID",value:function(e){var t=e.length;if(0===t)return 0;for(var n=0,r=e[0],a=0,o=1;o<t;++o){var i=e[o];i!==r&&(r=i,a=Math.max(o-n,a),n=o)}return Math.max(t-n,a)}}]),e}();function fh(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function hh(e,t){var n,r=[],a=(0,o.Z)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i<0){if(!t)throw new Error("Dimension ".concat(i," must be >= 0"));if(i<-1)throw new Error("Dimension ".concat(i," must be >= -1"));i=-1}r.push(i)}}catch(lT){a.e(lT)}finally{a.f()}return r}function mh(e,t,n,r,a,o,i,s,u,c){return new ph(e,t,n,r,a,o,i,s,u,c).compute()}var gh={kernelName:bc.RaggedTensorToTensor,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,o=t.values,s=t.defaultValue,u=t.rowPartitionTensors,c=r.rowPartitionTypes,l=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,p=n.data.get(s.dataId).values,f=u.map((function(e){return n.data.get(e.dataId).values})),h=u.map((function(e){return e.shape})),m=mh(l,a.shape,d,o.shape,o.dtype,p,s.shape,f,h,c),g=(0,i.Z)(m,2),v=g[0],y=g[1];return n.makeTensorInfo(v,o.dtype,y)}};function vh(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return bc.util.makeZerosTypedArray(0,r);var a=Math.abs(Math.ceil((t-e)/n)),o=bc.util.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+n;return o}var yh={kernelName:bc.Range,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.dtype,i=vh(r,a,n.step,o);return t.makeTensorInfo([i.length],o,i)}},bh=Sc(bc.Reciprocal,(function(e){return 1/e})),xh={kernelName:bc.Reciprocal,backendName:"cpu",kernelFunc:bh};var kh={kernelName:bc.ResizeBilinear,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,s=r.halfPixelCenters,u=r.size;xc(a,"resizeBilinear");for(var c=bc.util.computeStrides(a.shape),l=(0,i.Z)(u,2),d=l[0],p=l[1],f=(0,i.Z)(a.shape,4),h=f[0],m=f[1],g=f[2],v=f[3],y=n.data.get(a.dataId).values,b=new Float32Array(bc.util.sizeFromShape([h,d,p,v])),x=[o&&d>1?m-1:m,o&&p>1?g-1:g],k=[o&&d>1?d-1:d,o&&p>1?p-1:p],w=0,S=x[0]/k[0],C=x[1]/k[1],E=0;E<h;E++)for(var T=0;T<d;T++){var N=void 0;N=s?S*(T+.5)-.5:S*T;for(var _=Math.max(0,Math.floor(N)),I=N-_,R=Math.min(m-1,Math.ceil(N)),A=E*c[0]+_*c[1],O=E*c[0]+R*c[1],P=0;P<p;P++){var D=void 0;D=s?C*(P+.5)-.5:C*P;for(var L=Math.max(0,Math.floor(D)),M=D-L,F=Math.min(g-1,Math.ceil(D)),B=A+L*c[2],j=O+L*c[2],z=A+F*c[2],V=O+F*c[2],W=0;W<v;W++){var Z=y[B+W],U=y[j+W],H=Z+(y[z+W]-Z)*M,G=H+(U+(y[V+W]-U)*M-H)*I;b[w++]=G}}}return n.makeTensorInfo([h,d,p,v],"float32",b)}};var wh={kernelName:bc.ResizeBilinearGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,s=r.alignCorners;xc([o,a],"resizeBilinearGrad");for(var u=bc.util.computeStrides(a.shape),c=(0,i.Z)(a.shape,4),l=c[0],d=c[1],p=c[2],f=c[3],h=(0,i.Z)(o.shape,3),m=h[1],g=h[2],v=new Float32Array(l*d*p*f),y=[s&&m>1?d-1:d,s&&g>1?p-1:p],b=[s&&m>1?m-1:m,s&&g>1?g-1:g],x=y[0]/b[0],k=y[1]/b[1],w=n.data.get(o.dataId).values,S=0,C=0;C<l;C++)for(var E=C*u[0],T=0;T<m;T++)for(var N=T*x,_=Math.floor(N),I=Math.min(Math.ceil(N),d-1),R=E+_*u[1],A=E+I*u[1],O=N-_,P=1-O,D=0;D<g;D++)for(var L=D*k,M=Math.floor(L),F=Math.min(Math.ceil(L),p-1),B=L-M,j=1-B,z=R+M*u[2],V=R+F*u[2],W=A+M*u[2],Z=A+F*u[2],U=P*j,H=P*B,G=O*j,q=O*B,X=0;X<f;X++){var K=w[S++];v[z+X]+=K*U,v[V+X]+=K*H,v[W+X]+=K*G,v[Z+X]+=K*q}return n.makeTensorInfo([l,p,d,f],"float32",v)}};var Sh={kernelName:bc.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,s=r.halfPixelCenters,u=r.size;xc(a,"resizeNearestNeighbor");for(var c=bc.util.computeStrides(a.shape),l=(0,i.Z)(u,2),d=l[0],p=l[1],f=(0,i.Z)(a.shape,4),h=f[0],m=f[1],g=f[2],v=f[3],y=n.data.get(a.dataId).values,b=new Float32Array(h*d*p*v),x=[o&&d>1?m-1:m,o&&p>1?g-1:g],k=[o&&d>1?d-1:d,o&&p>1?p-1:p],w=x[0]/k[0],S=x[1]/k[1],C=0,E=0;E<h;E++)for(var T=E*c[0],N=0;N<d;N++){var _=s?w*(N+.5):w*N,I=Math.min(m-1,o?Math.round(_):Math.floor(_));s&&(I=Math.max(0,I));for(var R=T+I*c[1],A=0;A<p;A++){var O=s?S*(A+.5):S*A,P=Math.min(g-1,o?Math.round(O):Math.floor(O));s&&(P=Math.max(0,P));for(var D=R+P*c[2],L=0;L<v;L++){var M=y[D+L];b[C++]=M}}}return n.makeTensorInfo([h,d,p,v],a.dtype,b)}};var Ch={kernelName:bc.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,s=r.alignCorners;xc([o,a],"resizeNearestNeighborGrad");for(var u=bc.util.computeStrides(a.shape),c=bc.util.computeStrides(o.shape),l=(0,i.Z)(a.shape,4),d=l[0],p=l[1],f=l[2],h=l[3],m=(0,i.Z)(o.shape,3),g=m[1],v=m[2],y=new Float32Array(d*p*f*h),b=n.data.get(o.dataId).values,x=[s&&g>1?p-1:p,s&&v>1?f-1:f],k=[s&&g>1?g-1:g,s&&v>1?v-1:v],w=x[0]/k[0],S=x[1]/k[1],C=1/w,E=1/S,T=2*Math.ceil(C)+2,N=2*Math.ceil(E)+2,_=0;_<d;_++)for(var I=_*u[0],R=0;R<p;R++)for(var A=I+R*u[1],O=Math.floor(R*C),P=Math.floor(O-T/2),D=0;D<f;D++)for(var L=A+D*u[2],M=Math.floor(D*E),F=Math.floor(M-N/2),B=0;B<h;B++){for(var j=0,z=0;z<T;z++){var V=z+P;if(!(V<0||V>=g)){var W=I+V*c[1],Z=V*w;if(R===Math.min(p-1,s?Math.round(Z):Math.floor(Z)))for(var U=0;U<N;U++){var H=U+F;if(!(H<0||H>=v)){var G=W+H*c[2],q=H*S;D===Math.min(f-1,s?Math.round(q):Math.floor(q))&&(j+=b[G+B])}}}}y[L+B]=j}return n.makeTensorInfo(a.shape,a.dtype,y)}};var Eh={kernelName:bc.Reverse,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims;xc(a,"reverse");var i=a.shape.length,s=bc.util.parseAxisParam(o,a.shape);if(0===i)return Nc({inputs:{x:a},backend:n});for(var u=new bc.TensorBuffer(a.shape,a.dtype),c=n.bufferSync(a),l=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[c.get.apply(c,(0,Be.Z)(n))].concat((0,Be.Z)(t)))},d=0;d<u.size;d++)l(d);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},Th={kernelName:bc.RotateWithOffset,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,s=n.fillValue,u=n.center,c=r,l=bc.util.getTypedArrayFromDType(a.dtype,bc.util.sizeFromShape(a.shape)),d=(0,i.Z)(a.shape,4),p=d[0],f=d[1],h=d[2],m=d[3],g=bc.backend_util.getImageCenter(u,f,h),v=(0,i.Z)(g,2),y=v[0],b=v[1],x=Math.sin(o),k=Math.cos(o),w=c.data.get(a.dataId).values,S=0;S<p;S++)for(var C=S*h*f*m,E=0;E<f;E++)for(var T=E*(h*m),N=0;N<h;N++)for(var _=N*m,I=0;I<m;I++){var R=[p,E,N,I],A=R[2],O=R[1],P=(A-y)*k-(O-b)*x,D=(A-y)*x+(O-b)*k;P=Math.round(P+y),D=Math.round(D+b);var L=s;if("number"!==typeof s&&(L=3===I?255:s[I]),P>=0&&P<h&&D>=0&&D<f)L=w[C+D*(h*m)+P*m+I];l[C+T+_+I]=L}return{dataId:c.write(l,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},Nh=Sc(bc.Round,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),_h={kernelName:bc.Round,backendName:"cpu",kernelFunc:Nh},Ih=jc((function(e){return 1/Math.sqrt(e)})),Rh=Cc(bc.Rsqrt,Ih),Ah={kernelName:bc.Rsqrt,backendName:"cpu",kernelFunc:Rh};function Oh(e,t,n,r,a,o,i,s,u,c){var l=[r/a,a],d=e.values,p=t.values;if(0===r)return(0,bc.buffer)(n,t.dtype);var f=(0,bc.buffer)(l,t.dtype);"string"===typeof u||"number"===typeof u?f.values.fill(u):"boolean"===typeof u&&f.values.fill(+u);for(var h=0;h<o;h++){for(var m=[],g=0,v=0;v<i;v++){var y=d[h*i+v];m.push(y),g+=y*s[v]}if(g<0||g>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)c?f.values[g*a+b]+=p[h*a+b]:f.values[g*a+b]=0===t.rank?p[0]:p[h*a+b]}return f}var Ph={kernelName:bc.ScatterNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=bc.backend_util.calculateShapes(o,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,p=s.outputSize,f=Oh(n.bufferSync(a),n.bufferSync(o),i,p,l,c,u,d,0,!0);return n.makeTensorInfo(i,f.dtype,f.values)}};function Dh(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function Lh(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var Mh={kernelName:bc.SearchSorted,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,o=t.values,i=r.side,s=function(e,t,n,r,a,o){for(var i=bc.util.getArrayFromDType("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),c=s*a,l=0;l<a;++l)i[c+l]="left"===o?Dh(u,t[l+c]):Lh(u,t[l+c]);return i}(n.data.get(a.dataId).values,n.data.get(o.dataId).values,a.shape[0],a.shape[1],o.shape[1],i);return n.makeTensorInfo(o.shape,"int32",s)}};var Fh={kernelName:bc.Select,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e;xc([r,a,o],"select");for(var i=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=(0,bc.upcastType)(a.dtype,o.dtype),d=bc.util.makeZerosTypedArray(bc.util.sizeFromShape(a.shape),l),p=0,f=0===i||i>1||1===a.shape.length?1:bc.util.sizeFromShape(a.shape.slice(1)),h=0;h<s.length;h++)for(var m=0;m<f;m++)1===s[h]?d[p++]=u[h]:d[p++]=c[h];return n.makeTensorInfo(a.shape,l,d)}},Bh=bc.backend_util.SELU_SCALEALPHA,jh=bc.backend_util.SELU_SCALE,zh=Sc(bc.Selu,(function(e){return e>=0?jh*e:Bh*(Math.exp(e)-1)})),Vh={kernelName:bc.Selu,backendName:"cpu",kernelFunc:zh},Wh=Sc(bc.Sign,(function(e){return e<0?-1:e>0?1:0})),Zh={kernelName:bc.Sign,backendName:"cpu",kernelFunc:Wh},Uh=Sc(bc.Sin,(function(e){return Math.sin(e)})),Hh={kernelName:bc.Sin,backendName:"cpu",kernelFunc:Uh},Gh=Sc(bc.Sinh,(function(e){return Math.sinh(e)})),qh={kernelName:bc.Sinh,backendName:"cpu",kernelFunc:Gh},Xh=Math.log(1.1920928955078125e-7)+2,Kh=Sc(bc.Softplus,(function(e){var t=e>-Xh,n=e<Xh,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),Yh={kernelName:bc.Softplus,backendName:"cpu",kernelFunc:Kh};var Qh={kernelName:bc.SpaceToBatchND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;xc([a],"spaceToBatchND");var s=bc.util.sizeFromShape(o),u=[[0,0]];u.push.apply(u,(0,Be.Z)(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=eh.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=bc.backend_util.getReshaped(l.shape,o,s,!1),p=bc.backend_util.getPermuted(d.length,o.length,!1),f=bc.backend_util.getReshapedPermuted(l.shape,o,s,!1),h=al({inputs:{x:l},backend:n,attrs:{shape:d}}),m=vl({inputs:{x:h},backend:n,attrs:{perm:p}}),g=al({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}};function $h(e,t,n,r,a,o,i){var s=t[0],u=o[0],c=new Array(u),l=new Array(s),d=t[1];if(0===u){if(0!==s)throw new Error(bc.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(s));return[bc.util.getArrayFromDType(n,0),[0,d],bc.util.getArrayFromDType(a,0),c,l]}for(var p=!0,f=0,h=new Array(u).fill(0),m=0;m<s;++m){var g=e[m*d];if(g<0)throw new Error(bc.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(m,g));if(g>=u)throw new Error(bc.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(m,g,u));++h[g],p=p&&g>=f,f=g}for(var v=!0,y=0;y<u;++y){var b=0===h[y];c[y]=b,v=v&&!b,h[y]=Math.max(h[y],1),y>0&&(h[y]+=h[y-1])}if(v&&p){for(var x=e,k=r,w=0;w<s;++w)l[w]=w;return[x,[s,d],k,c,l]}for(var S=h[u-1],C=bc.util.getArrayFromDType(n,S*d),E=bc.util.getArrayFromDType(a,S),T=new Array(u).fill(0),N=0;N<s;++N){var _=e[N*d],I=T[_],R=(0===_?0:h[_-1])+I;T[_]++;for(var A=0;A<d;++A)C[R*d+A]=e[N*d+A];E[R]=r[N],l[N]=R}for(var O=0;O<u;++O){if(0===T[O]){var P=0===O?0:h[O-1];C[P*d+0]=O;for(var D=1;D<d;++D)C[P*d+D]=0;E[P]=i}}return[C,[S,d],E,c,l]}var Jh={kernelName:bc.SparseFillEmptyRows,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,s=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));var u=n.data.get(r.dataId).values,c=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values[0],p=$h(u,r.shape,r.dtype,c,a.dtype,l,d),f=(0,i.Z)(p,5),h=f[0],m=f[1],g=f[2],v=f[3],y=f[4];return[n.makeTensorInfo(m,r.dtype,h),n.makeTensorInfo([m[0]],a.dtype,g),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}};function em(e,t,n,r,a){for(var o=bc.util.sizeFromShape(r),i=t[0],s=a.length,u=[],c=1,l=-1,d=0;d<s;++d){var p=a[d];if(-1===p){if(-1!==l)throw new Error(bc.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(l,d));l=d,u.push(1)}else{if(p<0)throw new Error(bc.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(d,p));c*=p,u.push(p)}}if(-1!==l){if(c<=0)throw new Error(bc.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());var f=Math.trunc(o/c);if(c*f!==o)throw new Error(bc.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[l]=f}if(bc.util.sizeFromShape(u)!==o)throw new Error(bc.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(r,u));var h=r.length,m=[];if(h>0){m[h-1]=1;for(var g=h-2;g>=0;--g)m[g]=m[g+1]*r[g+1]}var v=[];if(s>0){v[s-1]=1;for(var y=s-2;y>=0;--y)v[y]=v[y+1]*u[y+1]}for(var b=bc.util.getArrayFromDType(n,i*s),x=0;x<i;++x){for(var k=0,w=0;w<h;++w)k+=e[x*h+w]*m[w];for(var S=0;S<s;++S)b[x*s+S]=Math.trunc(k/v[S]),k%=v[S]}return[b,[i,s],u]}var tm={kernelName:bc.SparseReshape,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var s=Array.from(n.data.get(a.dataId).values),u=n.data.get(r.dataId).values,c=Array.from(n.data.get(o.dataId).values),l=em(u,r.shape,r.dtype,s,c),d=(0,i.Z)(l,3),p=d[0],f=d[1],h=d[2];return[n.makeTensorInfo(f,r.dtype,p),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};function nm(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0,d=l;if(d<0)throw new Error(bc.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var p=t.slice();p[0]=d;var f=p.reduce((function(e,t){return e*t}),1),h=bc.util.getArrayFromDType(n,f);if(0===s)return d>0&&h.fill(i),[h,p];if(d<=0)throw new Error(bc.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());for(var m=0,g=1,v=0,y=a[m];;){var b=0;if(g<s){if(y===(b=a[g])){++g;continue}if(y>=b)throw new Error(bc.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=d)throw new Error(bc.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,d));y>v&&h.fill(i,v*c,y*c);for(var x=m;x<g;++x){var k=r[x];if(k<0||k>=u[0])throw new Error(bc.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(x,r[x],u[0]));for(var w=0;w<c;w++)h[y*c+w]+=e[k*c+w]}if(o)for(var S=0;S<c;S++)h[y*c+S]/=g-m;if(m=g,v=y+1,y=b,++g>s)break}return v<d&&h.fill(i,v*c,d*c),[h,p]}var rm={kernelName:bc.SparseSegmentMean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(o.shape));if(a.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=nm(s,r.shape,r.dtype,u,c,!0),d=(0,i.Z)(l,2),p=d[0],f=d[1];return n.makeTensorInfo(f,r.dtype,p)}};var am={kernelName:bc.SparseSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(o.shape));if(a.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(o.dataId).values,l=nm(s,r.shape,r.dtype,u,c),d=(0,i.Z)(l,2),p=d[0],f=d[1];return n.makeTensorInfo(f,r.dtype,p)}};var om={kernelName:bc.SparseToDense,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.sparseIndices,i=n.sparseValues,s=n.defaultValue,u=a.outputShape,c=bc.backend_util.calculateShapes(i,o,u),l=c.sliceRank,d=c.numUpdates,p=c.sliceSize,f=c.strides,h=c.outputSize,m=!1,g=r.bufferSync(o);switch(i.dtype){case"bool":t=Oh(g,r.bufferSync(i),u,h,p,d,l,f,Boolean(r.data.get(s.dataId).values[0]),m);break;case"float32":t=Oh(g,r.bufferSync(i),u,h,p,d,l,f,r.data.get(s.dataId).values[0],m);break;case"int32":t=Oh(g,r.bufferSync(i),u,h,p,d,l,f,r.data.get(s.dataId).values[0],m);break;case"string":t=Oh(g,r.bufferSync(i),u,h,p,d,l,f,bc.util.decodeString(r.data.get(s.dataId).values[0]),m);break;default:throw new Error("Unsupported type ".concat(i.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var im={kernelName:bc.SplitV,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=r.axis,s=bc.util.parseAxisParam(i,a.shape)[0],u=bc.backend_util.prepareSplitSize(a,o,s),c=new Array(a.shape.length).fill(0),l=a.shape.slice();return u.map((function(e){var t=(0,Be.Z)(l);t[s]=e;var r=Zl({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r}))}},sm=jc((function(e){return Math.sqrt(e)})),um=Sc(bc.Sqrt,(function(e){return Math.sqrt(e)})),cm={kernelName:bc.Sqrt,backendName:"cpu",kernelFunc:um},lm={kernelName:bc.Square,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;xc(r,"square");for(var o=a.data.get(r.dataId).values,i=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];i[s]=u*u}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},dm=Ac((function(e,t){var n=e-t;return n*n})),pm=$c(bc.SquaredDifference,dm),fm={kernelName:bc.SquaredDifference,backendName:"cpu",kernelFunc:pm},hm=Sc(bc.Step,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),mm={kernelName:bc.Step,backendName:"cpu",kernelFunc:hm};function gm(e,t,n,r){for(var a=(0,bc.buffer)(e,t.dtype),o=0;o<a.size;o++){for(var i=a.indexToLoc(o),s=new Array(i.length),u=0;u<s.length;u++)s[u]=i[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat((0,Be.Z)(i)))}return a}var vm={kernelName:bc.StridedSlice,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,i=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,p=r.shrinkAxisMask;xc(a,"stridedSlice");var f,h=bc.slice_util.sliceInfo(a.shape,o,i,s,u,c,l,d,p),m=h.finalShapeSparse,g=h.finalShape,v=h.isIdentity,y=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,k=h.end,w=h.strides;if(v)f=al({inputs:{x:a},backend:n,attrs:{shape:g}});else if(y||b){bc.util.assert(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var S=bc.slice_util.computeOutShape(x,k,w),C=Zl({inputs:{x:a},backend:n,attrs:{begin:x,size:S}});f=al({inputs:{x:C},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(C)}else{var E=gm(m,n.bufferSync(a),w,x);f=n.makeTensorInfo(g,E.dtype,E.values)}return f}},ym=function(){function e(t,n,r,a,o,i){(0,Je.Z)(this,e),this.separator=bc.util.encodeString(t),this.nGramWidths=n,this.leftPad=bc.util.encodeString(r),this.rightPad=bc.util.encodeString(a),this.padWidth=o,this.preserveShort=i}return(0,et.Z)(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,o){for(var i=this,s=function(s){var u=i.getPadWidth(o),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),d=o-(c+l),p=t+(c>0?0:s-u),f=0;f+=c*i.leftPad.length;for(var h=0;h<d;++h)f+=e[p+h].length;f+=l*i.rightPad.length,f+=(c+l+d-1)*i.separator.length,n[r+s]=new Uint8Array(f);for(var m=n[r+s],g=0,v=function(e){return e.forEach((function(e){return m[g++]=e}))},y=0;y<c;++y)v(i.leftPad),v(i.separator);for(var b=0;b<d-1;++b)v(e[p+b]),v(i.separator);if(d>0){v(e[p+d-1]);for(var x=0;x<l;++x)v(i.separator),v(i.rightPad)}else{for(var k=0;k<l-1;++k)v(i.rightPad),v(i.separator);v(i.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var o=t[0];if(0!==o)throw new Error("First split value must be 0, got ".concat(o));for(var i=1;i<a;++i){var s=t[i]>=o;if(!(s=s&&t[i]<=r))throw new Error("Invalid split value ".concat(t[i],", must be in [").concat(o,", ").concat(r,"]"));o=t[i]}if(o!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(o))}var u=a-1,c=bc.util.getArrayFromDType("int32",a);if(0===r||0===a){for(var l=new Array(r),d=0;d<=u;++d)c[d]=0;return[l,c]}c[0]=0;for(var p=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},f=1;f<=u;++f)p(f);for(var h=new Array(c[u]),m=function(r){var a=t[r],o=c[r];if(n.nGramWidths.forEach((function(i){var s=t[r+1]-t[r],u=n.getNumNGrams(s,i);n.createNGrams(e,a,h,o,u,i),o+=u})),n.preserveShort&&o===c[r]){var i=t[r+1]-t[r];if(0===i)return"continue";var s=i+2*n.padWidth;n.createNGrams(e,a,h,o,1,s)}},g=0;g<u;++g)m(g);return[h,c]}}]),e}();function bm(e,t,n,r,a,o,i,s){return new ym(n,r,a,o,i,s).compute(e,t)}var xm={kernelName:bc.StringNGrams,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,s=r.leftPad,u=r.rightPad,c=r.padWidth,l=r.preserveShortSequences,d=t.data,p=t.dataSplits,f=bm(n.data.get(d.dataId).values,n.data.get(p.dataId).values,a,o,s,u,c,l),h=(0,i.Z)(f,2),m=h[0],g=h[1];return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(p.shape,"int32",g)]}};function km(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){var i=e.subarray(a,o);n&&0===i.length||r.push(i),a=o+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);n&&0===c.length||r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function wm(e,t,n){for(var r=e.length,a=[],o=0,i=0,s=new Array(r),u=0;u<r;++u){var c=a.length;km(e[u],t,n,a);var l=a.length-c;s[u]=l,o+=l,i=Math.max(i,l)}for(var d=bc.util.getArrayFromDType("int32",2*o),p=new Array(o),f=[r,i],h=0,m=0;m<r;++m)for(var g=0;g<s[m];++g)d[2*h]=m,d[2*h+1]=g,p[h]=a[h],++h;return[d,p,f]}var Sm={kernelName:bc.StringSplit,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var s=wm(n.data.get(a.dataId).values,n.data.get(o.dataId).values[0],r),u=(0,i.Z)(s,3),c=u[0],l=u[1],d=u[2],p=l.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}};function Cm(e,t){for(var n=bc.util.getArrayFromDType("int32",e.length),r=0;r<e.length;++r)n[r]=bc.util.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var Em={kernelName:bc.StringToHashBucketFast,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=Cm(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",o)}},Tm=Sc(bc.Tan,(function(e){return Math.tan(e)})),Nm={kernelName:bc.Tan,backendName:"cpu",kernelFunc:Tm},_m=Sc(bc.Tanh,(function(e){return Math.tanh(e)})),Im={kernelName:bc.Tanh,backendName:"cpu",kernelFunc:_m};function Rm(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=(0,bc.buffer)(n,e.dtype),o=0;o<a.values.length;++o){for(var i=a.indexToLoc(o),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=i[u]%e.shape[u];var c=e.locToIndex(s);a.values[o]=e.values[c]}return a}var Am={kernelName:bc.Tile,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;xc(a,"tile");var i=Rm(n.bufferSync(a),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}},Om=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function Pm(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,i=Math.log(a),s=.5*Math.exp(2*i/3),u=.5*Math.sqrt(i*s*(a-s)/a)*Math.sign(o-a/2),c=Math.max(n,Math.floor(t-o*s/a+u)),l=Math.min(r,Math.floor(t+(a-o)*s/a+u));Pm(e,t,c,l)}var d=e[t],p=n,f=r;for(bc.util.swap(e,n,t),Om(e[r],d)>0&&bc.util.swap(e,n,r);p<f;){for(bc.util.swap(e,p,f),p++,f--;Om(e[p],d)<0;)p+=1;for(;Om(e[f],d)>0;)f-=1}0===Om(e[n],d)?bc.util.swap(e,n,f):(f+=1,bc.util.swap(e,f,r)),f<=t&&(n=f+1),t<=f&&(r=f-1)}}function Dm(e,t,n,r,a){for(var o=t[t.length-1],i=e.length/o,s=o,u=bc.util.getTypedArrayFromDType(n,i*r),c=bc.util.getTypedArrayFromDType("int32",i*r),l=function(t){var n=t*s,o=e.subarray(n,n+s),i=new Array(o.length);o.forEach((function(e,t){return i[t]={value:e,index:t}})),r<i.length&&(Pm(i,r),i=i.slice(0,r)),a&&i.sort(Om);for(var l=t*r,d=u.subarray(l,l+r),p=c.subarray(l,l+r),f=0;f<r;f++)d[f]=i[f].value,p[f]=i[f].index},d=0;d<i;d++)l(d);var p=t.slice();return p[p.length-1]=r,[(0,bc.buffer)(p,n,u),(0,bc.buffer)(p,"int32",c)]}var Lm={kernelName:bc.TopK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,s=r.sorted;xc(a,"topk");var u=Dm(n.data.get(a.dataId).values,a.shape,a.dtype,o,s),c=(0,i.Z)(u,2),l=c[0],d=c[1];return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(d.shape,d.dtype,d.values)]}};var Mm={kernelName:bc.Transform,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=t.transforms,s=n.interpolation,u=n.fillMode,c=n.fillValue,l=n.outputShape,d=(0,i.Z)(a.shape,4),p=d[0],f=d[1],h=d[2],m=d[3],g=null!=l?l:[f,h],v=(0,i.Z)(g,2),y=v[0],b=v[1],x=[p,y,b,m],k=bc.util.computeStrides(a.shape),w=k[0],S=k[1],C=k[2],E=bc.util.computeStrides(x),T=E[0],N=E[1],_=E[2],I=bc.util.getTypedArrayFromDType(a.dtype,bc.util.sizeFromShape(x));I.fill(c);for(var R=r.data.get(a.dataId).values,A=r.data.get(o.dataId).values,O=0;O<p;++O){for(var P=1===o.shape[0]?A:A.subarray(8*O,8*O+8),D=0;D<y;++D)for(var L=0;L<b;++L)for(var M=0;M<m;++M){var F=void 0,B=P[6]*L+P[7]*D+1;if(0!==B){var j=(P[0]*L+P[1]*D+P[2])/B,z=(P[3]*L+P[4]*D+P[5])/B,V=Fm(j,h,u),W=Fm(z,f,u);switch(s){case"nearest":F=jm(R,f,h,w,S,C,O,W,V,M,c);break;case"bilinear":F=zm(R,f,h,w,S,C,O,W,V,M,c);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(s))}I[O*T+D*N+L*_+M]=F}}return r.makeTensorInfo(x,a.dtype,I)}return{dataId:r.write(I,x,a.dtype),shape:a.shape,dtype:a.dtype}}};function Fm(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return bc.util.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return bc.util.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return bc.util.clamp(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function Bm(e,t,n,r,a,o,i,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[i*r+s*a+u*o+c]:l}function jm(e,t,n,r,a,o,i,s,u,c,l){return Bm(e,t,n,r,a,o,i,Math.round(s),Math.round(u),c,l)}function zm(e,t,n,r,a,o,i,s,u,c,l){var d=Math.floor(s),p=Math.floor(u),f=d+1,h=p+1;return(f-s)*((h-u)*Bm(e,t,n,r,a,o,i,d,p,c,l)+(u-p)*Bm(e,t,n,r,a,o,i,d,h,c,l))+(s-d)*((h-u)*Bm(e,t,n,r,a,o,i,f,p,c,l)+(u-p)*Bm(e,t,n,r,a,o,i,f,h,c,l))}function Vm(e,t,n,r){for(var a=bc.util.parseAxisParam(t,n)[0],o=[1,n[0],1],i=0;i<a;i++)o[0]*=n[i];o[1]=n[a];for(var s=a+1;s<n.length;s++)o[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new bc.TensorBuffer(o,r,e),d=[],p=1===o[0]&&1===o[2],f=0;f<n[a];f++){var h=void 0;if(p)h=e[f].toString();else{for(var m=[],g=0;g<o[0];g++)for(var v=0;v<o[2];v++)m.push(l.get(g,f,v));h=m.join(",")}if(void 0!==u[h])c[f]=u[h];else{var y=Object.keys(u).length;u[h]=y,c[f]=y,d.push(f)}}var b=o.slice();b[1]=Object.keys(u).length;var x=new bc.TensorBuffer(b,r);d.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)x.set(l.get(n,e,r),n,t,r)}));var k=n.slice();return k[a]=b[1],{outputValues:x.values,outputShape:k,indices:c}}var Wm={kernelName:bc.Unique,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;xc(o,"unique");var i=Vm(r.data.get(o.dataId).values,a,o.shape,o.dtype),s=i.outputValues,u=i.outputShape,c=i.indices;return[r.makeTensorInfo(u,o.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};var Zm={kernelName:bc.Unpack,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a.shape.length,s=a.shape[o],u=new Array(i-1),c=0,l=0;l<i;l++)l!==o&&(u[c++]=a.shape[l]);var d=new Array(i).fill(0),p=a.shape.slice();p[o]=1;for(var f=new Array(s),h=0;h<f.length;h++){d[o]=h;var m=Zl({inputs:{x:a},backend:n,attrs:{begin:d,size:p}});f[h]=al({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return f}};for(var Um={kernelName:bc.UnsortedSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments;xc(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-o.shape.length,l=o,d=0;d<c;++d){var p=Jd({inputs:{input:l},backend:n,attrs:{dim:d+1}});l=p,u.push(p)}for(var f=0;f<i;++f){var h=bc.util.createScalarValue(f,"int32"),m=n.makeTensorInfo([],"int32",h),g=zd({inputs:{a:m,b:l},backend:n}),v=Yc({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),y=Pd({inputs:{a:v,b:a},backend:n}),b=Ld({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(m),u.push(g),u.push(v),u.push(y),u.push(b)}var x=$f({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},Hm=0,Gm=[ul,ll,pl,hl,rl,ml,bl,xl,kl,wl,Cl,Tl,_l,Al,Pl,Fl,Bl,jl,zl,sl,Vl,Hl,Xl,Kl,Qc,$l,ed,Hc,td,id,ud,cd,ld,dd,pd,fd,md,vd,yd,bd,xd,kd,wd,Cd,Ed,Td,Nd,_d,Id,Rd,Fd,Tc,Bd,Vd,Kd,$d,ep,rp,hp,gp,vp,xp,Sp,Cp,Ep,Np,Ip,Op,Lp,_c,Mp,ad,Bp,zp,Wp,Rc,Hp,Xp,Yp,Jp,tf,af,sf,lf,df,pf,mf,yf,bf,xf,kf,wf,Sf,Cf,Ef,_f,If,Of,Mf,Dd,Bf,zf,Wf,Uf,qf,Xf,Qf,Jf,eh,rh,Dc,oh,lh,gh,yh,Xc,ip,xh,Mc,Bc,ol,kh,wh,Sh,Ch,Eh,Th,_h,Ah,Ph,Mh,Fh,Vh,Wc,Zh,Hh,qh,Ul,Lf,Yh,Qh,Jh,tm,rm,am,om,im,cm,lm,fm,mm,vm,xm,Sm,Em,lp,Md,Nm,Im,Am,Lm,Mm,yl,Wm,Zm,Um,Yf];Hm<Gm.length;Hm++){var qm=Gm[Hm];(0,bc.registerKernel)(qm)}var Xm,Km,Ym,Qm={},$m={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Jm(e,t){if(!(e in Qm)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete Qm[e]}),!1),(0,bc.env)().getBool("SOFTWARE_WEBGL_ENABLED")&&($m.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",$m)||n.getContext("experimental-webgl",$m);return n.getContext("webgl2",$m)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;Qm[e]=n}var r=Qm[e];return null==r||r.isContextLost()?(delete Qm[e],Jm(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),Qm[e])}function eg(e,t){return[t,e]}function tg(e){var t=bc.util.sizeFromShape(e),n=Math.ceil(t/4);return bc.util.sizeToSquarishShape(n)}function ng(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function rg(e,t){var n,r,a,o,i,s,u,c,l,d,p=e;return 2===(0,bc.env)().getNumber("WEBGL_VERSION")?(n=p.R32F,r=p.R16F,a=p.RGBA16F,o=p.RGBA32F,i=p.RED,u=4,c=1,l=p.HALF_FLOAT,d=p.FLOAT,s=p.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=p.RGBA,i=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:d}}function ag(e,t){var n=t();return(0,bc.env)().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(Xm||(Xm={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Km||(Km={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Ym||(Ym={}));function og(e){return!!((0,bc.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function ig(e,t){return bg(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var sg,ug,cg=/ERROR: [0-9]+:([0-9]+):/g;function lg(e,t){var n=cg.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((function(e,t){return bc.util.rightPad((t+1).toString(),o)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var c=i.slice(0,r-1),l=i.slice(r-1,r),d=i.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(bc.util.rightPad(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}function dg(e,t){if(ag(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function pg(e,t,n,r,a,o,i){var s=e.getAttribLocation(t,n);return-1!==s&&(ag(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),ag(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,o,i)})),ag(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function fg(e,t,n){return bg(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function hg(e,t,n){return e.getUniformLocation(t,n)}function mg(e,t,n,r){ag(e,(function(){return function(e,t,n){xg(e,n),ag(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),ag(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),ag(e,(function(){return e.uniform1i(n,r)}))}function gg(e,t,n){ag(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),ag(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function vg(e,t){ag(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),ag(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function yg(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function bg(e,t,n){var r=ag(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function xg(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function kg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return bc.util.sizeFromShape(e.slice(0,e.length-t))}function wg(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Sg(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[kg(e)].concat((0,Be.Z)(wg(e)))),t}function Cg(e){return e%2===0}function Eg(e,t){if(e=e.slice(-2),t=t.slice(-2),bc.util.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Cg(n)&&Cg(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Cg(e[0])&&Cg(t[0])}function Tg(e,t){return null!=e.getExtension(t)}function Ng(e){try{if(null!=Jm(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function _g(e){if(0===e)return!1;var t=Jm(e);if(1!==e){if(Tg(t,"EXT_color_buffer_float"))return Ig(t);var n="EXT_color_buffer_half_float";if(Tg(t,n)){var r=t.getExtension(n);return function(e,t){var n=rg(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),s}(t,r)}return!1}return!!Tg(t,"OES_texture_float")&&(!!Tg(t,"WEBGL_color_buffer_float")&&Ig(t))}function Ig(e){var t=rg(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function Rg(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&bc.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var Ag=(0,bc.env)();function Og(){var e,t,n,r,a,o,i,s,u,c;return 2===(0,bc.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s=(0,bc.env)().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function Pg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=bc.util.computeStrides(t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / ").concat(t),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(o,"; ").concat(i,";")})).join("")}function Dg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=bc.util.computeStrides(t);return r.map((function(t,a){var o="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),i=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(o,"; ").concat(i,";")})).join("")}function Lg(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var o=n-3;o>=0;--o)a[o]="(".concat(a[o+1]," * ").concat(r[o+1],")");return a}function Mg(e){var t=bc.util.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}Ag.registerFlag("HAS_WEBGL",(function(){return Ag.getNumber("WEBGL_VERSION")>0})),Ag.registerFlag("WEBGL_VERSION",(function(){return Ng(2)?2:Ng(1)?1:0})),Ag.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),Ag.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Ag.get("WEBGL_VERSION")})),Ag.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Ag.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Ag.registerFlag("WEBGL_PACK",(function(){return Ag.getBool("HAS_WEBGL")})),Ag.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Ag.getBool("WEBGL_PACK")})),Ag.registerFlag("WEBGL_PACK_CLIP",(function(){return Ag.getBool("WEBGL_PACK")})),Ag.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return Ag.getBool("WEBGL_PACK")})),Ag.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Ag.getBool("WEBGL_PACK")})),Ag.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Ag.getBool("WEBGL_PACK")})),Ag.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Ag.getBool("WEBGL_PACK")})),Ag.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Ag.getBool("WEBGL_PACK")})),Ag.registerFlag("WEBGL_PACK_REDUCE",(function(){return Ag.getBool("WEBGL_PACK")})),Ag.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Ag.getBool("WEBGL_PACK")})),Ag.registerFlag("WEBGL_CONV_IM2COL",(function(){return Ag.getBool("WEBGL_PACK")})),Ag.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==sg){var t=Jm(e);sg=t.getParameter(t.MAX_TEXTURE_SIZE)}return sg}(Ag.getNumber("WEBGL_VERSION"))})),Ag.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==ug){var t=Jm(e);ug=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ug)}(Ag.getNumber("WEBGL_VERSION"))})),Ag.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Ag.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=Jm(e);return Tg(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Tg(t,"EXT_disjoint_timer_query")?1:0}(e)})),Ag.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Ag.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!bc.device_util.isMobile()})),Ag.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=Jm(e);if(1===e){if(!Tg(t,"OES_texture_float"))return!1}else if(!Tg(t,"EXT_color_buffer_float"))return!1;return Ig(t)}(Ag.getNumber("WEBGL_VERSION"))})),Ag.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Ag.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ag.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Ag.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return _g(Ag.getNumber("WEBGL_VERSION"))})),Ag.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=Ag.getNumber("WEBGL_VERSION"))&&null!=Jm(e).fenceSync;var e})),Ag.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Ag.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Ag.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),Ag.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return bc.device_util.isMobile()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),Ag.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),Ag.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),Ag.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),Ag.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128})),Ag.registerFlag("WEBGL_EXP_CONV",(function(){return!1})),Ag.registerFlag("SOFTWARE_WEBGL_ENABLED",(function(){return Ag.getBool("IS_TEST")})),Ag.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(function(){return 1/0})),Ag.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(function(){return!1})),Ag.registerFlag("WEBGL2_ISNAN_CUSTOM",(function(){return!1}));var Fg="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",Bg=bc.backend_util.getBroadcastDims;function jg(e,t,n){var r=[];if(e.forEach((function(e){var t=bc.util.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(av(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,o,i=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?Vg(e,r):zg(e,r);var o=e.shapeInfo.logicalShape,i=t.logicalShape;o.length<=i.length&&(a+=n?tv(e,t):nv(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=Og(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),d=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(Wg,"\n    ").concat(Zg,"\n    ").concat(Ug,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(bc.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),o=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),o=a*Math.ceil(e[e.length-2]/2),i=o,s="",u="b, r, c",c=2;c<e.length-1;c++)i*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(i,";\n      index -= b").concat(c," * ").concat(i,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(bc.util.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=Dg(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=Pg(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=Dg(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=Pg(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=Pg(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=Pg(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),o=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(d+=Hg),[d,l,o,i,a,s,n.userCode].join("\n")}function zg(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return qg(e,t);case 1:return Xg(e,t);case 2:return Kg(e,t);case 3:return Yg(e,t);case 4:return Qg(e,t);case 5:return $g(e);case 6:return Jg(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function Vg(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Og();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=Og();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");var i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(i[0],", ").concat(i[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=o[0],s=o[1],u=Og();if(null!=o&&bc.util.arraysEqual(n,o))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){var s=[1,2],u=ov(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(Vg(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(iv(c,s),");\n        }\n      ")}var l=Og();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var d=i[0],p=i[1],f=Math.ceil(n[2]/2),h=f*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(d,", ").concat(p,", ").concat(h,", ").concat(f,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Og();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var o=e.shapeInfo.logicalShape,i=o.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],d=Math.ceil(o[i-1]/2),p=d*Math.ceil(o[i-2]/2),f="int b, int row, int col",h="b * ".concat(p," + (row / 2) * ").concat(d," + (col / 2)"),m=2;m<i-1;m++)f="int b".concat(m,", ")+f,p*=o[i-m-1],h="b".concat(m," * ").concat(p," + ")+h;return"\n    vec4 ".concat(r,"(").concat(f,") {\n      int index = ").concat(h,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var Wg="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Zg="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Ug="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Hg="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Gg(e){return"offset".concat(e)}function qg(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,i.Z)(e.shapeInfo.texShape,2),o=a[0],s=a[1];if(1===o&&1===s)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var u=Gg(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var c=(0,i.Z)(e.shapeInfo.texShape,2),l=c[0],d=c[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(l,", ").concat(d,", ").concat(u,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Xg(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(ev(e),"\n      }\n    ");var a=e.shapeInfo.texShape,o=a[0],i=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=Gg(n);return 1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(i,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Kg(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&bc.util.arraysEqual(n,o)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var i=o[0],s=o[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=bc.util.squeezeShape(n),c=u.newShape,l=u.keptDims,d=c;if(d.length<n.length){var p=ov(e,d);return"\n      ".concat(zg(p,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(iv(["row","col"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(ev(e),"\n      }\n    ");var f=o[0],h=o[1],m=Gg(r);return 1===h?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(f,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===f?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(h,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(m,";\n    vec2 uv = uvFromFlat(").concat(f,", ").concat(h,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function Yg(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],s=bc.util.squeezeShape(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var d=ov(e,l);return"\n        ".concat(zg(d,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(iv(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(i,", 1)));\n        ").concat(ev(e),"\n      }\n    ");var p=e.shapeInfo.texShape,f=p[0],h=p[1],m=e.shapeInfo.flatOffset;if(h===o&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(f,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===i&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(f,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var g=Gg(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(i," + depth + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(f,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function Qg(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,s=n[1]*i,u=bc.util.squeezeShape(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var d=ov(e,c);return"\n      ".concat(zg(d,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(iv(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(i,", ").concat(o,", 1)));\n        ").concat(ev(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],m=f[1],g="int stride2 = ".concat(r,"Shape[3];"),v="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(m===s&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(g,"\n        ").concat(v,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(m===o&&null==p)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=Gg(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(g,"\n      ").concat(v,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function $g(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,s=t[1]*i,u=bc.util.squeezeShape(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var d=ov(e,c);return"\n      ".concat(zg(d),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(iv(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(i,", ").concat(o,", ").concat(a,")) +\n          depth3;\n        ").concat(ev(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],m=f[1];if(m===s&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(i,", ").concat(o,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===a&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=Gg(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(o," +\n          depth2 * ").concat(a," + depth3 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function Jg(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=bc.util.squeezeShape(t),o=a.newShape,i=a.keptDims;if(o.length<t.length){var s=ov(e,o);return"\n      ".concat(zg(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(iv(["row","col","depth","depth2","depth3","depth4"],i),");\n      }\n    ")}var u=t[5],c=t[4]*u,l=t[3]*c,d=t[2]*l,p=t[1]*d;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(p,", ").concat(d,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(ev(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,m=h[0],g=h[1];if(g===p&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(d,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(g===u&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var v=Gg(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(p," + col * ").concat(d," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(u," + depth4 + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(g,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function ev(e){var t=e.name,n=bc.util.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function tv(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=Bg(e.shapeInfo.logicalShape,t.logicalShape),c=rv(s),l=s-i,d=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(d[e+l]," = 0;")})).join("\n");var p="";p=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+l])})).join(", ");var f="return outputValue;",h=1===bc.util.sizeFromShape(e.shapeInfo.logicalShape),m=1===bc.util.sizeFromShape(t.logicalShape);if(1!==i||h||m){if(h&&!m)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=i-2,v=i-1;u.indexOf(g)>-1&&u.indexOf(v)>-1?f="return vec4(outputValue.x);":u.indexOf(g)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(p,");\n      ").concat(f,"\n    }\n  ")}function nv(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&bc.util.arraysEqual(i,o))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=rv(u),d=Bg(e.shapeInfo.logicalShape,t.logicalShape),p=u-s,f=["x","y","z","w","u","v"];c=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(f[e+p]," = 0;")})).join("\n");var h="";return h=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+p])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(h,");\n    }\n  ")}function rv(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function av(e,t,n){var r=bc.util.squeezeShape(t),a=r.newShape,o=r.keptDims,i=t.length,s=e&&3===i&&1===t[0],u=s?t.slice(1):a,c=!e&&i>1&&!bc.util.arraysEqual(t,n)&&a.length<i||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:o}}function ov(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function iv(e,t){return t.map((function(t){return e[t]})).join(", ")}function sv(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=a.map((function(e){return e.shapeInfo})),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=jg(a,i,t),u=function(e,t){var n=bg(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(ag(e,(function(){return e.shaderSource(n,t)})),ag(e,(function(){return e.compileShader(n)})),(0,bc.env)().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw lg(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),c=e.createProgram(u);return(0,bc.env)().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:o,outShapeInfo:i,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:o,outShapeInfo:i},uv(e,t,c))}function uv(e,t,n){var r,a,o,i,s={},u={},c={},l=[],d=null;i=e.getUniformLocation(n,"NAN",!1),1===(0,bc.env)().getNumber("WEBGL_VERSION")&&(d=e.getUniformLocation(n,"INFINITY",!1));for(var p=!1,f=0;f<t.variableNames.length;f++){var h=t.variableNames[f];s[h]=e.getUniformLocation(n,h,p),s["offset".concat(h)]=e.getUniformLocation(n,"offset".concat(h),p),t.enableShapeUniforms&&(u["".concat(h,"Shape")]=e.getUniformLocation(n,"".concat(h,"Shape"),p),c["".concat(h,"TexShape")]=e.getUniformLocation(n,"".concat(h,"TexShape"),p))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",p),o=e.getUniformLocation(n,"outShapeStrides",p),a=e.getUniformLocation(n,"outTexShape",p)),t.customUniforms&&t.customUniforms.forEach((function(t,r){l[r]=e.getUniformLocation(n,t.name,p)})),{uniformLocations:s,customUniformLocations:l,infLoc:d,nanLoc:i,inShapesLocations:u,inTexShapesLocations:c,outShapeLocation:r,outShapeStridesLocation:o,outTexShapeLocation:a}}function cv(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!bc.util.arraysEqual(r,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(o," must match"));if(!e.isUniform||!a.isUniform){var i=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!bc.util.arraysEqual(i,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(i," and ").concat(s," must match"))}}))}function lv(e,t,n,r,a){t.program.enableShapeUniforms||(cv(t.inShapeInfos,n),cv([t.outShapeInfo],[r]));var o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,i[0],i[1]):e.setOutputMatrixTexture(o.texture,i[0],i[1]),e.setProgram(t.webGLProgram),1===(0,bc.env)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],o=t.uniformLocations[a],i=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var c=av(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=o)if(n.isUniform)if(bc.util.sizeFromShape(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(o,l)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,o,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=bc.util.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var o=t.customUniformLocations[r],i=a[r];if("float"===n.type)e.gl.uniform1fv(o,i);else if("vec2"===n.type)e.gl.uniform2fv(o,i);else if("vec3"===n.type)e.gl.uniform3fv(o,i);else if("vec4"===n.type)e.gl.uniform4fv(o,i);else if("int"===n.type)e.gl.uniform1iv(o,i);else if("ivec2"===n.type)e.gl.uniform2iv(o,i);else if("ivec3"===n.type)e.gl.uniform3iv(o,i);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(o,i)}})),e.executeProgram()}function dv(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var o=t.texData.texShape,i=av(e.packedInputs,t.shape,o),s=i.useSqueezeShape,u=i.uniformShape,c=i.keptDims,l="",d="",p="";if(1===u.length&&e.packedInputs){var f=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];l="".concat(f[0]>1,"_").concat(f[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var h=bc.util.computeStrides(u);p="".concat(h[0]===o[1],"_").concat(h[h.length-1]===o[1])}}else d="".concat(u[0]>1,"_").concat(u[1]>1);var m=t.shape.length,g=2===u.length&&bc.util.arraysEqual(t.shape,o),v=1===bc.util.sizeFromShape(t.shape),y=bc.backend_util.getBroadcastDims(t.shape,n.shape),b=!e.packedInputs&&m===n.shape.length&&bc.util.arraysEqual(o,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);r+="".concat(m,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(v,"_").concat(y,"_").concat(g,"_").concat(l,"_").concat(d,"_").concat(p,"_").concat(x,"_").concat(a)}else{var k=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(k,"_").concat(a)}}));var a=e.userCode,o=e.constructor.name;return o+="_"+r+"_"+a+"".concat((0,bc.env)().getNumber("WEBGL_VERSION"))}function pv(e){return(0,bc.env)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var fv=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Xm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Og();this.outputShape=t,this.enableShapeUniforms=pv(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Dg(["r","c","d"],t):Pg(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),hv=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Xm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=Og();this.outputShape=t,this.enableShapeUniforms=pv(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?Dg(["r","c","d"],t):Pg(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),mv=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["A"],this.outTexUsage=Km.DOWNLOAD;var n=Og();this.outputShape=t,this.userCode="\n      ".concat(Fg,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),gv=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Km.DOWNLOAD;var n=Og();this.outputShape=t,this.userCode="\n      ".concat(Fg,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),vv=(0,et.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,Je.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Og();this.outputShape=t,this.enableShapeUniforms=pv(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Mg(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),yv=(0,et.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=Og();this.outputShape=t,this.enableShapeUniforms=pv(this.outputShape.length);var a="",o="result";n&&(o="floor(result * 255. + 0.5)");for(var i=0;i<=1;i++)for(var s=0;s<=1;s++){var u=2*i+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Mg(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(o,";\n        }\n    ")}));function bv(e){var t=Og();return function(e,t){var n=bg(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(ag(e,(function(){return e.shaderSource(n,t)})),ag(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function xv(e){return function(e,t){var n=bg(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return ag(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),ag(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function kv(e){return function(e,t){var n=bg(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return ag(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),ag(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function wv(e,t,n,r,a,o){!function(e,t){var n=(0,bc.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),o="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+o+".")}}(t,n);var i=function(e){return bg(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return ag(e,(function(){return e.bindTexture(s,i)})),ag(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),ag(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),ag(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),ag(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===(0,bc.env)().getNumber("WEBGL_VERSION")?ag(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,o,null)})):ag(e,(function(){return e.texStorage2D(s,1,r,t,n)})),ag(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:i,texShape:[n,t]}}function Sv(e){return e.internalFormatFloat}function Cv(e){return e.internalFormatHalfFloat}function Ev(e){return e.downloadTextureFormat}function Tv(e){return e.internalFormatPackedFloat}function Nv(e){return e.internalFormatPackedHalfFloat}function _v(e,t,n,r,a,o,s,u){var c=e,l=new Float32Array(function(e,t){var n=ng(e,t),r=(0,i.Z)(n,2);return r[0]*r[1]*4}(o,s));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}var Iv=function(){function e(t){(0,Je.Z)(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=(0,bc.env)().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){Qm[e]=t}(n,t)):this.gl=Jm(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===(0,bc.env)().getNumber("WEBGL_VERSION")){var o="OES_texture_half_float";if(this.textureFloatExtension=ig(this.gl,"OES_texture_float"),Tg(this.gl,o))this.textureHalfFloatExtension=ig(this.gl,o);else if((0,bc.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Tg(this.gl,a))this.colorBufferHalfFloatExtension=ig(this.gl,a);else if((0,bc.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Tg(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Tg(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=xv(this.gl),this.indexBuffer=kv(this.gl),this.framebuffer=function(e){return bg(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=rg(this.gl,this.textureHalfFloatExtension)}return(0,et.Z)(e,[{key:"debug",get:function(){return(0,bc.env)().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;ag(t,(function(){return t.finish()})),ag(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),ag(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),ag(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),ag(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),ag(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=eg(t,n),o=(0,i.Z)(a,2);return wv(e,o[0],o[1],Sv(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=eg(t,n),o=(0,i.Z)(a,2);return wv(e,o[0],o[1],Cv(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=eg(t,n),o=(0,i.Z)(a,2);return wv(e,o[0],o[1],Ev(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){ag(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===(0,bc.env)().getNumber("WEBGL_VERSION")?ag(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):ag(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===(0,bc.env)().getNumber("WEBGL_VERSION")?ag(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):ag(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),ag(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,o){var i,s,u;ag(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(i=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(i=new Float32Array(n*r*4),s=e.FLOAT,u=o.internalFormatPackedFloat),i.set(a),2===(0,bc.env)().getNumber("WEBGL_VERSION")?ag(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,i)})):ag(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,i)})),ag(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=ng(t,n),o=(0,i.Z)(a,2);return wv(e,o[0],o[1],Nv(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=ng(t,n),o=(0,i.Z)(a,2);return wv(e,o[0],o[1],Tv(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(vg(this.gl,this.framebuffer),this.outputTexture=null),ag(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=eg(t,n),o=(0,i.Z)(a,2),s=o[0],u=o[1],c=new Uint8Array(t*n*4);return ag(e,(function(){return e.readPixels(0,0,s,u,r.downloadTextureFormat,e.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,o){return _v(this.gl,e,0,0,0,a,o,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();ag(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var o=16*t*n;return ag(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),ag(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),ag(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if((0,bc.env)().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else(0,bc.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,(0,bc.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return ag(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=bv(n));var r=function(e){return bg(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return ag(n,(function(){return n.attachShader(r,t.vertexShader)})),ag(n,(function(){return n.attachShader(r,e)})),function(e,t){if(ag(e,(function(){return e.linkProgram(t)})),!(0,bc.env)().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&dg(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return ag(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),pg(e,t,"clipSpacePos",n,3,20,0)&&pg(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&ag(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&dg(this.gl,this.program),ag(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?fg(this.gl,e,t):hg(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),ag(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),mg(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=ng(t,n),a=(0,i.Z)(r,2),o=a[0],s=a[1];this.setOutputMatrixTextureDriver(e,o,s)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&dg(this.gl,this.program),yg(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),ag(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),ag(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=ig(this.gl,2===(0,bc.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===(0,bc.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==(0,bc.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=(0,qe.Z)($e().mark((function e(t){var n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bc.util.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,(0,bc.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,(0,bc.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var o=this.getQueryTimerExtensionWebGL1(),i=o.getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)){var r=void 0;"setTimeoutCustom"in(0,bc.env)().platform&&(r=(0,bc.env)().platform.setTimeoutCustom.bind((0,bc.env)().platform)),bc.util.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}),(function(){return 0}),null,r)}}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),gg(this.gl,e,this.framebuffer),this.debug&&yg(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(gg(this.gl,this.outputTexture,this.framebuffer),this.debug&&yg(this.gl)):vg(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;gg(r,e,this.framebuffer),this.debug&&yg(r),this.outputTexture=e,ag(r,(function(){return r.viewport(0,0,t,n)})),ag(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),ag(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var Rv=el,Av=Gl,Ov=ql,Pv=Kc,Dv=Yl,Lv=nd,Mv=jd,Fv=Yd,Bv=tp,jv=yp,zv=Tp,Vv=_p,Wv=Rp,Zv=Pp,Uv=Zp,Hv=Gp,Gv=Kp,qv=Qp,Xv=ff,Kv=gf,Yv=Tf,Qv=Ad,$v=Ff,Jv=Hf,ey=ah,ty=ch,ny=mh,ry=vh,ay=Ih,oy=Oh,iy=zc,sy=cl,uy=Wl,cy=$h,ly=em,dy=nm,py=sm,fy=gm,hy=bm,my=wm,gy=Cm,vy=sp,yy=Rm,by=Dm,xy=gl,ky=Vm;function wy(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function Sy(e,t){return 1===t?[e]:wy(e,t)}var Cy=function(){function e(t){if((0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=pv(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Sy("rc",this.rank),r=rv(this.rank),a=this.getOutOfBoundsCondition(n),o=this.getSetup(n),i=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(o,"\n\n            setOutput(vec4(").concat(i,"));\n          }\n        }\n      ")}}return(0,et.Z)(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),o=2;o<this.rank;o++)a="".concat(e[e.length-1-o],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),Ey=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=pv(this.outputShape.length);for(var r="",a=0;a<4;a++){var o="thisRC = rc;";a%2===1&&(o+="thisRC.z += 1;"),a>1&&(o+="thisRC.y += 1;"),r+="\n        ".concat(o,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=Lg(r,t);return a.map((function(t,r){var o="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),i=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(o,"; ").concat(i,";")})).join("")}(["r","c","d"],"inputShape"):Pg(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Mg(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var Ty=function(){function e(t){(0,Je.Z)(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return(0,et.Z)(e,[{key:"acquireTexture",value:function(e,t,n){var r=_y(t,n),a=Iy(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var o,i=Ny(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===Ym.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===Ym.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===Ym.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===Ym.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===Ym.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=_y(n,r),o=Iy(t,a,r);o in this.freeTextures||(this.freeTextures[o]=[]);var i=Ny(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=(0,bc.env)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=i):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;var u=this.usedTextures[o],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function Ny(e,t,n,r,a){var o,s=function(e,t){switch(e){case Ym.PACKED_2X2_FLOAT32:return Tv(t);case Ym.PACKED_2X2_FLOAT16:return Nv(t);case Ym.UNPACKED_FLOAT32:return Sv(t);case Ym.UNPACKED_FLOAT16:return Cv(t);case Ym.PACKED_4X1_UNSIGNED_BYTE:return Ev(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var u=ng(e[0],e[1]),c=(0,i.Z)(u,2);o=c[0]*c[1]}else{var l=eg(e[0],e[1]),d=(0,i.Z)(l,2);o=d[0]*d[1]}var p=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,s);return o*p}function _y(e,t){if(e===Km.UPLOAD)return Ym.PACKED_2X2_FLOAT32;if(e===Km.RENDER||null==e)return function(e){return(0,bc.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Ym.PACKED_2X2_FLOAT32:Ym.UNPACKED_FLOAT32:e?Ym.PACKED_2X2_FLOAT16:Ym.UNPACKED_FLOAT16}(t);if(e===Km.DOWNLOAD||e===Km.PIXELS)return Ym.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function Iy(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var Ry=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=pv(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),Ay="if (isnan(x)) return x;",Oy="return x;",Py="return abs(x);";var Dy="return (x >= 0.0) ? x : (exp(x) - 1.0);",Ly=Ay+"\n  return (x < 0.0) ? 0.0 : x;\n",My=Ay+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Fy="return x;",By="return 1.0 / (1.0 + exp(-1.0 * x));",jy="return x;",zy="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Vy="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Wy="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Zy="return 1.0 / (1.0 + exp(-1.0 * x));",Uy=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=pv(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),Hy=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=pv(this.outputShape.length);var n=t.length,r=Sy("rc",n),a=rv(n),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),i=r.slice(-2),s=n<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(o,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),Gy=bc.kernel_impls.whereImpl,qy={};var Xy=(0,bc.env)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var Ky=function(e){(0,nt.Z)(n,e);var t=(0,rt.Z)(n);function n(e){var r,a,o;if((0,Je.Z)(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!(0,bc.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof Iv)a=e;else{var i=Jm((0,bc.env)().getNumber("WEBGL_VERSION"),e);a=new Iv(i)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=Jm((0,bc.env)().getNumber("WEBGL_VERSION"));a=new Iv(s),r.binaryCache=((o=(0,bc.env)().getNumber("WEBGL_VERSION"))in qy||(qy[o]={}),qy[o]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new Ty(r.gpgpu),r.numMBBeforeWarning=null==(0,bc.env)().global.screen?1024:(0,bc.env)().global.screen.height*(0,bc.env)().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new bc.DataStorage((0,tt.Z)(r),(0,bc.engine)()),r}return(0,et.Z)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if(((0,bc.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,bc.env)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:Km.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if((0,bc.env)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:Km.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,o=t.slice,i=t.shape,s=t.isPacked;if(null!=o){var u;u=s?new Uy(i,Fy):new Ry(i,Fy);var c=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,p,f=null!=this.activeTimers;if(f&&(d=bc.util.now()),"complex64"===r){var h=this.readSync(a.real.dataId),m=this.readSync(a.imag.dataId);p=bc.backend_util.mergeRealAndImagArrays(h,m)}else p=this.getValuesFromTexture(e);return f&&(this.downloadWaitMs+=bc.util.now()-d),this.convertAndCacheOnCPU(e,p)}},{key:"read",value:function(){var e=(0,qe.Z)($e().mark((function e(t){var n,r,a,o,i,s,u,c,l,d,p,f,h,m,g,v,y,b,x,k,w,S,C;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,o=r.shape,i=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==i){e.next=11;break}return l=c?new Uy(o,Fy):new Ry(o,Fy),d=this.runWebGLProgram(l,[{dataId:t,shape:o,dtype:s}],s),p=this.read(d.dataId),this.disposeIntermediateTensorInfo(d),e.abrupt("return",p);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!(0,bc.env)().getBool("DEBUG")){e.next=16;break}if((0,bc.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==(0,bc.env)().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(f=null,"complex64"!==s&&(0,bc.env)().get("WEBGL_BUFFER_SUPPORTED")&&(h=this.decode(t),g=this.texData.get(h.dataId),f=(m=this.gpgpu).createBufferFromTexture.apply(m,[g.texture.texture].concat((0,Be.Z)(tg(o))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:y=e.sent,b=y[0],x=y[1],v=bc.backend_util.mergeRealAndImagArrays(b,x),e.next=32;break;case 31:null==f?v=this.getValuesFromTexture(t):(k=bc.util.sizeFromShape(o),v=this.gpgpu.downloadFloat32MatrixFromBuffer(f,k));case 32:return null!=h&&this.disposeIntermediateTensorInfo(h),null!=f&&ag(w=this.gpgpu.gl,(function(){return w.deleteBuffer(f)})),S=this.convertAndCacheOnCPU(t,v),C=this.pendingRead.get(t),this.pendingRead.delete(t),C.forEach((function(e){return e(S)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&(0,bc.engine)().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",S);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,o=n.slice,i=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===i)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){var c;c=s?new Uy(a,Fy):new Ry(a,Fy);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:i}],i),d=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),d}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var p=this.decode(e,t.customTexShape),f=(0,bc.engine)().makeTensorFromTensorInfo(p),h=this.texData.get(p.dataId);return Object.assign({tensorRef:f},h.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return bc.util.decodeString(e)}));return(0,bc.buffer)(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return(0,bc.buffer)(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!og(n)){if((0,bc.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,o=bc.util.sizeFromShape(n);if((0,bc.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var i,s=this.decode(e),u=this.texData.get(s.dataId),c=(i=this.gpgpu).downloadMatrixFromPackedTexture.apply(i,[u.texture.texture].concat((0,Be.Z)(tg(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(s),c}var l=(0,bc.env)().getBool("WEBGL_PACK")&&!0===a,d=l?Sg(n):n,p=l?new gv(d):new mv(d),f=this.runWebGLProgram(p,[{shape:d,dtype:r,dataId:e}],"float32"),h=this.texData.get(f.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture.texture,h.texShape[0],h.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(f),m}},{key:"timerAvailable",value:function(){return(0,bc.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var o=bc.util.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=bc.util.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(0,qe.Z)($e().mark((function e(){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,bc.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(o);case 3:n=e.sent,s.kernelMs=bc.util.sum(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return(0,bc.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:bc.util.now(),endMs:null}}},{key:"endTimer",value:function(e){return(0,bc.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=bc.util.now(),e)}},{key:"getQueryTime",value:function(){var e=(0,qe.Z)($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,bc.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,o=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,o,i)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xy;return(0,bc.env)().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&bc.util.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){bc.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Gy(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new Uy(e.shape,t),a=this.compileAndRun(r,[e],n);return(0,bc.engine)().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=sy(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if((0,bc.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Py,e.dtype);var n=new Ry(e.shape,Py),r=this.compileAndRun(n,[e]);return(0,bc.engine)().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&bc.util.isString(n[0])){var a=n.map((function(e){return bc.util.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return(0,bc.engine)().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new Hy(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new Cy(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[kg(e.shape)].concat((0,Be.Z)(wg(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[kg(t)].concat((0,Be.Z)(wg(t))),o=new Ey(a,n),i=[n],s=this.runWebGLProgram(o,[r],e.dtype,i,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,o=n.dtype;if(null!=t){var i=bc.util.sizeFromShape(a),s=t[0]*t[1]*4;bc.util.assert(i<=s,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}))}var u,c=Sg(a);u=r?new hv(c):new fv(c);var l=[null!=t?t:tg(c)];return{dtype:o,shape:a,dataId:this.runWebGLProgram(u,[{shape:c,dtype:o,dataId:e}],o,l,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===Xm.DENSE){var c=null!=i?i:tg(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===bc.util.sizeFromShape(s.shape))return u.values=bc.util.getTypedArrayFromDType(s.dtype,0),s;var l=[],d=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&bc.util.sizeFromShape(t.shape)<=(0,bc.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!Eg(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),l.push(t),n=a.texData.get(t.dataId),r.shape=o}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var p,f={shape:s.shape,texData:u,isUniform:!1},h=dv(e,d,f),m=this.getAndSaveBinary(h,(function(){return sv(a.gpgpu,e,d,f)})),g=null!=this.activeTimers;g&&(p=this.startTimer()),(0,bc.env)().get("ENGINE_COMPILE_ONLY")||lv(this.gpgpu,m,d,f,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),g&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)}));var v=(0,bc.env)().get("WEBGL_FLUSH_THRESHOLD");if(v>0){var y=bc.util.now();y-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!(0,bc.env)().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===o){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var o=this.runWebGLProgram(e,t,n,r,a);return o}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!(0,bc.env)().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,bc.tidy)((function(){if(!(0,bc.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=(0,bc.env)().getBool("DEBUG");(0,bc.env)().set("DEBUG",!1);var n=e.abs((0,bc.scalar)(1e-8)).dataSync()[0];if((0,bc.env)().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,o=t.texture,s=t.usage,u=t.isPacked;if(null==o){var c,l=null!=this.activeTimers;l&&(c=bc.util.now());var d=t.texShape;if(null==d&&(d=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,bc.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=(0,bc.env)().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&(0,bc.env)().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?bc.util.nearestLargerEven(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=bc.util.squeezeShape(e);e=a.newShape}var o=bc.util.sizeFromShape(e),s=null;e.length<=1&&o<=n?s=[1,o]:2===e.length&&e[0]<=n&&e[1]<=n?s=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?s=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?s=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?s=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(s=[e[0],e[1]*e[2]*e[3]]);var u=null!=s&&Math.max.apply(Math,(0,Be.Z)(s))>r&&Math.min.apply(Math,(0,Be.Z)(s))<=(t?2:1)&&Math.min.apply(Math,(0,Be.Z)(s))>0;if(null==s||u)if(t){var c=kg(e),l=2,d=2;if(e.length){var p=wg(e),f=(0,i.Z)(p,2);l=f[0],d=f[1]}o=c*(l/2)*(d/2),s=bc.util.sizeToSquarishShape(o).map((function(e){return 2*e}))}else s=bc.util.sizeToSquarishShape(o);return s}(n,u),t.texShape=d),null!=a){var p,f=Sg(n),h=d[1],m=d[0],g=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(u||!g){var v=ng(d[0],d[1]),y=(0,i.Z)(v,2);h=y[0],m=y[1]}p=u?new yv(f,g):new vv(f,g);var b=g?[m,h]:d,x=this.makeTensorInfo(b,r),k=this.texData.get(x.dataId);k.usage=g?Km.PIXELS:Km.UPLOAD,k.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),h,m,a);var w=[[m,h]],S=this.runWebGLProgram(p,[x],r,w,!0),C=this.texData.get(S.dataId);t.texShape=C.texShape,t.isPacked=C.isPacked,t.usage=C.usage,(0,bc.env)().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(t.texture=C.texture,t.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(x),l&&(this.uploadWaitMs+=bc.util.now()-c)}else{var E=this.acquireTexture(d,s,r,u);t.texture=E}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*bc.util.bytesPerElement(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,i.Z)(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=(0,qe.Z)($e().mark((function e(){var t,n,r,a,o,s,u,c,l=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=(0,i.Z)(r[n],2),o=a[1],t.push(this.checkCompletionAsync_(o));return e.abrupt("return",Promise.all(t));case 6:for(s=function(){var e=(0,i.Z)(c[u],2)[1],n=new Promise((function(t){try{l.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},u=0,c=Object.entries(this.binaryCache);u<c.length;u++)s();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=(0,qe.Z)($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,(0,bc.nextFrame)();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw lg(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,i.Z)(t[e],2)[1],r=uv(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,o=r.customUniformLocations,s=r.infLoc,u=r.nanLoc,c=r.inShapesLocations,l=r.inTexShapesLocations,d=r.outShapeLocation,p=r.outShapeStridesLocation,f=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=o,n.infLoc=s,n.nanLoc=u,n.inShapesLocations=c,n.inTexShapesLocations=l,n.outShapeLocation=d,n.outShapeStridesLocation=p,n.outTexShapeLocation=f}}}]),n}(bc.KernelBackend);Ky.nextDataId=0,bc.device_util.isBrowser()&&(0,bc.registerBackend)("webgl",(function(){return new Ky}),2);var Yy=(0,et.Z)((function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["A","B"],this.outputShape=bc.backend_util.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=pv(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),Qy=(0,et.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,Je.Z)(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=bc.backend_util.assertAndGetBroadcastShape(n,r);var o=this.outputShape.length;this.enableShapeUniforms=pv(o);var i="";if(a)if(0===o||1===bc.util.sizeFromShape(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=rv(o);if(i="\n          ".concat(s," coords = getOutputCoords();\n        "),1===o)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=Sy("coords",o);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(u[o-2]," + 1) >= outShape[").concat(o," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[o-1]," + 1) >= outShape[").concat(o," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(u[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}));function $y(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var Jy={kernelName:bc.Identity,backendName:"webgl",kernelFunc:$y};function eb(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),s=$y({inputs:{x:r},backend:n}),u=$y({inputs:{x:a},backend:n});return i.complexTensorInfos={real:s,imag:u},o}var tb={kernelName:bc.Complex,backendName:"webgl",kernelFunc:eb},nb="return (a < 0.) ? b * a : a;",rb="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var ab={kernelName:bc.LeakyRelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.alpha,i=n.makeTensorInfo([],"float32",bc.util.createScalarValue(o,"float32")),s=(0,bc.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qy(rb,a.shape,i.shape):new Yy(nb,a.shape,i.shape),u=n.runWebGLProgram(s,[a,i],"float32");return n.disposeIntermediateTensorInfo(i),u}},ob="return (a < 0.) ? b * a : a;",ib="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var sb={kernelName:bc.Prelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,o=(0,bc.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qy(ib,r.shape,a.shape):new Yy(ob,r.shape,a.shape);return n.runWebGLProgram(o,[r,a],"float32")}};function ub(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var o,i=e.inputs,s=e.backend,u=i.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var d=c.texData.get(u.dataId),p=r(d.values,l);return c.makeTensorInfo(u.shape,l,p)}return o=(0,bc.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new Uy(u.shape,n):new Ry(u.shape,t),c.runWebGLProgram(o,[u],l)}}function cb(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,o=e.supportsComplex,s=void 0!==o&&o,u=e.cpuKernelImpl,c=e.dtype;return function(e){var r=e.inputs,o=e.backend,l=r.a,d=r.b,p=o;if(s&&"complex64"===l.dtype){var f=p.texData.get(l.dataId),h=p.texData.get(d.dataId),m=[[f.complexTensorInfos.real,h.complexTensorInfos.real],[f.complexTensorInfos.imag,h.complexTensorInfos.imag]].map((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1],o={dataId:r.dataId,dtype:r.dtype,shape:l.shape},s={dataId:a.dataId,dtype:a.dtype,shape:d.shape},u=new Yy(t,l.shape,d.shape);return p.runWebGLProgram(u,[o,s],(0,bc.upcastType)(r.dtype,a.dtype))})),g=(0,i.Z)(m,2),v=g[0],y=g[1],b=eb({inputs:{real:v,imag:y},backend:p});return p.disposeIntermediateTensorInfo(v),p.disposeIntermediateTensorInfo(y),b}var x,k=c||(0,bc.upcastType)(l.dtype,d.dtype);if(("string"===l.dtype||"string"===d.dtype||p.shouldExecuteOnCPU([l,d]))&&null!=u){var w=p.texData.get(l.dataId).values,S=p.texData.get(d.dataId).values,C="string"===l.dtype?bc.backend_util.fromUint8ToStringArray(w):w,E="string"===l.dtype?bc.backend_util.fromUint8ToStringArray(S):S,T=u(l.shape,d.shape,C,E,k),N=(0,i.Z)(T,2),_=N[0],I=N[1],R=p.makeTensorInfo(I,k);return p.texData.get(R.dataId).values=_,R}return x=(0,bc.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new Qy(n,l.shape,d.shape,a):new Yy(t,l.shape,d.shape),p.runWebGLProgram(x,[l,d],k)}}function lb(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?jy:Oy;if("relu"===e)return t?Vy:Ly;if("elu"===e)return t?zy:Dy;if("relu6"===e)return t?Wy:My;if("prelu"===e)return t?ib:ob;if("leakyrelu"===e)return t?rb:nb;if("sigmoid"===e)return t?Zy:By;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var db=(0,et.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];(0,Je.Z)(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=pv(this.outputShape.length);var l=a?t[1]:t[2],d=Math.ceil(l/2),p=a?"i * 2, rc.y":"rc.y, i * 2",f=o?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",v="";s&&(g=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),v="result = activation(result);");var y=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(g,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(d,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(p,");\n          vec4 b = getMatrixB(batchB, ").concat(f,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(m[0],");\n          result += (").concat(h[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(v,"\n\n        setOutput(result);\n      }\n    ")})),pb="return areal * breal - aimag * bimag;",fb="return areal * bimag + aimag * breal;",hb=(0,et.Z)((function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=bc.backend_util.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),mb="return a * b;";function gb(e){var t,n=e.inputs,r=e.backend,a=n.a,o=n.b,s=bc.backend_util.upcastType(a.dtype,o.dtype);if("complex64"===a.dtype){var u=r.texData.get(a.dataId),c=r.texData.get(o.dataId),l=new hb(pb,a.shape,o.shape),d=new hb(fb,a.shape,o.shape),p=[{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:a.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:o.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:o.shape}],f=r.runWebGLProgram(l,p,"float32"),h=r.runWebGLProgram(d,p,"float32"),m=eb({inputs:{real:f,imag:h},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h),m}if(r.shouldExecuteOnCPU([a,o])){var g=r.texData.get(a.dataId),v=r.texData.get(o.dataId),y=Qv(a.shape,o.shape,g.values,v.values,s),b=(0,i.Z)(y,2),x=b[0],k=b[1],w=r.makeTensorInfo(k,s);return r.texData.get(w.dataId).values=x,w}return t=(0,bc.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qy(mb,a.shape,o.shape):new Yy(mb,a.shape,o.shape),r.runWebGLProgram(t,[a,o],s)}var vb={kernelName:bc.Multiply,backendName:"webgl",kernelFunc:gb};function yb(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.shape,i=n,s=bc.util.sizeFromShape(a.shape),u=bc.util.inferFromImplicitShape(o,s),c=bc.util.sizeFromShape(u);bc.util.assert(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=i.texData.get(a.dataId);return!l.isPacked||Eg(a.shape,u)||null!==l.texture&&Eg(l.shape,u)?(i.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[kg(e.shape)].concat((0,Be.Z)(wg(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},o=[kg(t)].concat((0,Be.Z)(wg(t))),i=new Ey(o,r),s=[r],u=n.runWebGLProgram(i,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,i)}var bb={kernelName:bc.Reshape,backendName:"webgl",kernelFunc:yb},xb=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(bc.util.isInt(l)?l.toPrecision(2):l,", ones);")}var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),kb=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.outSize;this.outputShape=[a,i];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),d=r%4,p="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),f="vec4";"all"===n?(s="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===n&&(s="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var h="";o%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(p,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===d,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(p,"\n        } else if (").concat(2===d,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(p,"\n        } else if (").concat(3===d,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(p,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function wb(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=bc.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e,i=0;i<a.length;i++){var s,u=a[i],c=u.inSize,l=u.windowSize,d=u.outSize,p=void 0;p="mean"===n?0===i?new xb({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d},c):new xb({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d}):new kb({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d},n),s=o,o=r.runWebGLProgram(p,[o],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return o}var Sb=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var o=rv(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(o," resRC = getOutputCoords();\n      setOutput(getA(").concat(i,"));\n    }\n    ")}));var Cb=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var o=rv(this.rank),i=wy("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=i[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(i[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(o," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(l,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(i[this.rank-1],";\n      if(++").concat(i[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(l,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function Eb(e,t,n){var r=(0,bc.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Cb(e.shape,t):new Sb(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function Tb(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,o=e.shape.length,s=bc.util.parseAxisParam(a,e.shape),u=s,c=bc.backend_util.getAxesPermutation(u,o),l=null!=c,d=e;l&&(d=Eb(e,c,r),u=bc.backend_util.getInnerMostAxes(u.length,o)),bc.backend_util.assertAxesAreInnerMostDims("sum",u,o);var p=bc.backend_util.computeOutAndReduceShapes(d.shape,u),f=(0,i.Z)(p,2),h=f[0],m=f[1],g=h;n&&(g=bc.backend_util.expandShapeToKeepDim(h,s));var v=bc.util.sizeFromShape(m),y=yb({inputs:{x:d},attrs:{shape:[bc.util.sizeFromShape(e.shape)/v,v]},backend:r}),b=wb(y,(0,bc.sumOutType)(e.dtype),"sum",r),x=yb({inputs:{x:b},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(b),l&&r.disposeIntermediateTensorInfo(d),x}(t.x,r.axis,r.keepDims,n)}var Nb={kernelName:bc.Sum,backendName:"webgl",kernelFunc:Tb};function _b(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.perm,s=r,u=o.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=o.shape[i[l]];if(s.shouldExecuteOnCPU([o])){var d=s.texData.get(o.dataId).values,p=xy(d,o.shape,o.dtype,i,c);t=s.makeTensorInfo(c,o.dtype),s.texData.get(t.dataId).values=p}else t=Eb(o,i,s);return t}var Ib={kernelName:bc.Transpose,backendName:"webgl",kernelFunc:_b};function Rb(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,p=e.activation,f=void 0===p?null:p,h=t.shape.length,m=n.shape.length,g=r?t.shape[h-2]:t.shape[h-1],v=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[h-1]:t.shape[h-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=bc.util.sizeFromShape(x),S=bc.util.sizeFromShape(k),C=bc.broadcast_util.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);bc.util.assert(g===v,(function(){return"Error in matMul: inner shapes (".concat(g,") and (")+"".concat(v,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var E,T=r?[w,g,y]:[w,y,g],N=a?[S,b,v]:[S,v,b],_=yb({inputs:{x:t},backend:o,attrs:{shape:T}}),I=yb({inputs:{x:n},backend:o,attrs:{shape:N}}),R=[_,I],A=Math.max(w,S),O=r?_.shape[1]:_.shape[2],P=null!=s,D=null!=c,L="leakyrelu"===f,M=null!=f?lb(f,!0):null;if((1===y||1===b)&&O>1e3&&!1===(P||D||L||null!=M)){var F=_,B=I;r&&(F=_b({inputs:{x:_},backend:o,attrs:{perm:[0,2,1]}}),R.push(F)),a&&(B=_b({inputs:{x:I},backend:o,attrs:{perm:[0,2,1]}}),R.push(B));var j=1===b,z=F;1!==b&&(z=yb({inputs:{x:F},backend:o,attrs:{shape:[A,O,1]}}),R.push(z));var V=1===b?2:1,W=B;j&&(W=yb({inputs:{x:B},backend:o,attrs:{shape:[A,1,O]}}),R.push(W));var Z=gb({inputs:{a:z,b:W},backend:o});E=Tb({inputs:{x:Z},backend:o,attrs:{axis:V,keepDims:!0}}),R.push(Z)}else{var U=(0,bc.upcastType)(t.dtype,n.dtype),H=new db(T,N,[A,y,b],r,a,P,M,D,L),G=[_,I];if(null!=s&&G.push(s),D&&G.push(c),L){var q=o.makeTensorInfo([],"float32",bc.util.createScalarValue(d,"float32"));G.push(q),R.push(q)}E=o.runWebGLProgram(H,G,U)}var X=yb({inputs:{x:E},backend:o,attrs:{shape:C}});R.push(E);for(var K=0,Y=R;K<Y.length;K++){var Q=Y[K];o.disposeIntermediateTensorInfo(Q)}return X}var Ab={kernelName:bc._FusedMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,o=t.b,i=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return Rb({a:a,b:o,transposeA:u,transposeB:c,backend:n,bias:i,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},Ob="return abs(x);";var Pb={kernelName:bc.Abs,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var o=r.texData.get(a.dataId),i=sy(o.values);return r.makeTensorInfo(a.shape,a.dtype,i)}return t=(0,bc.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Uy(a.shape,Ob):new Ry(a.shape,Ob),r.runWebGLProgram(t,[a],a.dtype)}},Db=ub({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),Lb={kernelName:bc.Acos,backendName:"webgl",kernelFunc:Db},Mb=ub({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),Fb={kernelName:bc.Acosh,backendName:"webgl",kernelFunc:Mb},Bb="return a + b;",jb=cb({opSnippet:Bb,packedOpSnippet:Bb,supportsComplex:!0,cpuKernelImpl:Rv}),zb={kernelName:bc.Add,backendName:"webgl",kernelFunc:jb},Vb=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),Wb=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var Zb={kernelName:bc.AddN,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return $y({inputs:{x:a[0]},backend:r});if(a.length>(0,bc.env)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(a.length/2),i=e({inputs:a.slice(0,o),backend:r}),s=e({inputs:a.slice(o),backend:r});return e({inputs:[i,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return(0,bc.upcastType)(e,t)})),c=a.map((function(e){return e.shape})),l=(0,bc.env)().getBool("WEBGL_PACK")?new Wb(a[0].shape,c):new Vb(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var Ub={kernelName:bc.All,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,s=r.keepDims,u=a.shape.length,c=bc.util.parseAxisParam(o,a.shape),l=c,d=bc.backend_util.getAxesPermutation(l,u),p=a;null!=d&&(p=_b({inputs:{x:a},backend:n,attrs:{perm:d}}),l=bc.backend_util.getInnerMostAxes(l.length,u)),bc.backend_util.assertAxesAreInnerMostDims("all",l,u);var f,h=bc.backend_util.computeOutAndReduceShapes(p.shape,l),m=(0,i.Z)(h,2),g=m[0],v=m[1],y=yb({inputs:{x:p},backend:n,attrs:{shape:[-1,bc.util.sizeFromShape(v)]}}),b=wb(y,y.dtype,"all",n);return f=yb(s?{inputs:{x:b},backend:n,attrs:{shape:bc.backend_util.expandShapeToKeepDim(g,c)}}:{inputs:{x:b},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),null!=d&&n.disposeIntermediateTensorInfo(p),f}};var Hb={kernelName:bc.Any,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,s=r.keepDims,u=a.shape.length,c=bc.util.parseAxisParam(o,a.shape),l=c,d=bc.backend_util.getAxesPermutation(l,u),p=a;null!=d&&(p=_b({inputs:{x:a},backend:n,attrs:{perm:d}}),l=bc.backend_util.getInnerMostAxes(l.length,u)),bc.backend_util.assertAxesAreInnerMostDims("any",l,u);var f,h=bc.backend_util.computeOutAndReduceShapes(p.shape,l),m=(0,i.Z)(h,2),g=m[0],v=m[1],y=yb({inputs:{x:p},backend:n,attrs:{shape:[-1,bc.util.sizeFromShape(v)]}}),b=wb(y,y.dtype,"any",n);return f=yb(s?{inputs:{x:b},backend:n,attrs:{shape:bc.backend_util.expandShapeToKeepDim(g,c)}}:{inputs:{x:b},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),null!=d&&n.disposeIntermediateTensorInfo(p),f}},Gb=(0,et.Z)((function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["A"];var a=t.windowSize,o=t.batchSize,i=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),qb=(0,et.Z)((function e(t,n,r,a){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,bc.util.assert(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var o=t[t.length-1],i=Math.ceil(o/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,d=rv(l),p=Sy("coords",l);if(1===i){var f=rv(u=l+1);s="\n        ".concat(f," sourceLocR = ").concat(f,"(").concat(p.join(),", 0);\n        ++").concat(p[l-1],";\n        ").concat(f," sourceLocG = ").concat(f,"(").concat(p.join(),", 0);\n        ++").concat(p[l-2],";\n        ").concat(f," sourceLocA = ").concat(f,"(").concat(p.join(),", 0);\n        --").concat(p[l-1],";\n        ").concat(f," sourceLocB = ").concat(f,"(").concat(p.join(),", 0);\n        --").concat(p[l-2],";")}else u=l,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(p[l-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(p[l-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(p[l-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(p[l-2],";");var h=["x","y","z","w","u","v"].slice(0,u),m="."+h[u-1],g=h.map((function(e){return"int "+e})),v=Sy("sourceLocR",u-1).concat("inIdx.r"),y=Sy("sourceLocG",u-1).concat("inIdx.g"),b=Sy("sourceLocB",u-1).concat("inIdx.b"),x=Sy("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(v.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),S="vec4(\n            getAChannel(".concat(v.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),C=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(C,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(p[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(p[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(S,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(S,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function Xb(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],o=t.shape[1];null!=r&&(a=r.shape[0],o=r.shape[1]);var i=bc.backend_util.computeOptimalWindowSize(o),s={windowSize:i,inSize:o,batchSize:a,outSize:Math.ceil(o/i)},u=new Gb(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var d=Xb(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function Kb(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,o=a[a.length-1],i=bc.backend_util.computeOptimalWindowSize(o),s=new qb(a,i,n,null==r),u=null==r?[t]:[t,r],c=e.runWebGLProgram(s,u,"int32");if(c.shape.length===t.shape.length){var l=Kb(e,t,n,c);return e.disposeIntermediateTensorInfo(c),l}return c}function Yb(e,t,n,r){var a=[n];if(bc.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!(0,bc.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var o=[],s=e.texData.get(t.dataId),u=t;null!==s&&s.isPacked&&(u=e.unpackTensor(t),o.push(u));var c=bc.backend_util.computeOutAndReduceShapes(u.shape,a),l=(0,i.Z)(c,2),d=l[0],p=l[1],f=bc.util.sizeFromShape(p),h=yb({inputs:{x:u},backend:e,attrs:{shape:[-1,f]}});o.push(h);var m=Xb(e,h,r);o.push(m);var g=yb({inputs:{x:m},backend:e,attrs:{shape:d}});return o.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),g}return Kb(e,t,r)}var Qb={kernelName:bc.ArgMax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=bc.util.parseAxisParam(o,a.shape),s=bc.backend_util.getAxesPermutation(i,a.shape.length),u=a,c=[];null!=s&&(u=_b({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=bc.backend_util.getInnerMostAxes(i.length,u.shape.length)),bc.backend_util.assertAxesAreInnerMostDims("argMax",[i[0]],u.shape.length);var l=Yb(n,u,i[0],"max");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}};var $b={kernelName:bc.ArgMin,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=bc.util.parseAxisParam(o,a.shape),s=bc.backend_util.getAxesPermutation(i,a.shape.length),u=a,c=[];null!=s&&(u=_b({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),i=bc.backend_util.getInnerMostAxes(i.length,u.shape.length)),bc.backend_util.assertAxesAreInnerMostDims("argMin",[i[0]],u.shape.length);var l=Yb(n,u,i[0],"min");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},Jb=ub({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),ex={kernelName:bc.Asin,backendName:"webgl",kernelFunc:Jb},tx=ub({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),nx={kernelName:bc.Asinh,backendName:"webgl",kernelFunc:tx},rx=ub({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),ax={kernelName:bc.Atan,backendName:"webgl",kernelFunc:rx},ox=cb({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),ix={kernelName:bc.Atan2,backendName:"webgl",kernelFunc:ox},sx=ub({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),ux={kernelName:bc.Atanh,backendName:"webgl",kernelFunc:sx},cx=(0,et.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,Je.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,p=t.effectiveFilterWidth,f=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),v="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(m||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(f,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?o?g:v:"wR * ".concat(p," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var w=4*Math.floor(i/4),S=i%4,C="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(h,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(C,"\n          }\n\n          int xC = xCCorner + ").concat(w,";\n          if (").concat(1===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(C,"\n          } else if (").concat(2===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(C,"\n          } else if (").concat(3===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(C,"\n          }\n        }\n        setOutput(").concat(k,");\n      }\n    ")}})),lx=(0,et.Z)((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if((0,Je.Z)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var i=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,p=t.dilationWidth,f=t.effectiveFilterDepth,h=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,v=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(v,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(f,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(p,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?o?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(h," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",S="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(S="avgValue / count");var C=4*Math.floor(i/4),E=i%4,T="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(v,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(C,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(p,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(p,", ch)\n              );\n\n              ").concat(T,"\n            }\n\n            int xC = xCCorner + ").concat(C,";\n            if (").concat(1===E,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(T,"\n            } else if (").concat(2===E,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(T,"\n            } else if (").concat(3===E,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(p,", ch),\n                initializationValue\n              );\n\n              ").concat(T,"\n            }\n          }\n          setOutput(").concat(S,");\n        }\n      }\n    ")}}));var dx={kernelName:bc.AvgPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Rg(a,"avgPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;bc.util.assert(bc.backend_util.eitherStridesOrDilationsAreOne(i,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var c=bc.backend_util.computePool2DInfo(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&bc.util.arraysEqual(c.inShape,c.outShape))return $y({inputs:{x:a},backend:n});var l=new cx(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var px={kernelName:bc.AvgPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=bc.backend_util.computePool3DInfo(a.shape,o,i,[1,1,1],s,u,c),d=new lx(l,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},fx=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,d=c-1-t.padInfo.left,p=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(d,");\n      const float avgMultiplier = float(").concat(p,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),hx=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=d-1-t.padInfo.front,m=p-1-t.padInfo.top,g=f-1-t.padInfo.left,v=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(m,", ").concat(g,");\n      const float avgMultiplier = float(").concat(v,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(o,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(p,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var mx={kernelName:bc.AvgPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=bc.backend_util.computePool3DInfo(o.shape,i,s,[1,1,1],u,c),d=new hx(l);return n.runWebGLProgram(d,[a],o.dtype)}};var gx={kernelName:bc.AvgPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;Rg([a,o],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=bc.backend_util.computePool2DInfo(i.shape,s,u,1,c),d=new fx(l);return n.runWebGLProgram(d,[a],i.dtype)}};var vx={kernelName:bc.BatchMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return Rb({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},yx=(0,et.Z)((function e(t,n,r,a,o,i){(0,Je.Z)(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],bc.backend_util.assertAndGetBroadcastShape(t,n),bc.backend_util.assertAndGetBroadcastShape(t,r);var s="0.0";null!=a&&(bc.backend_util.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=o&&(bc.backend_util.assertAndGetBroadcastShape(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),bx=(0,et.Z)((function e(t,n,r,a,o,i){(0,Je.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],bc.backend_util.assertAndGetBroadcastShape(t,n),bc.backend_util.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";null!=a&&(bc.backend_util.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=o&&(bc.backend_util.assertAndGetBroadcastShape(t,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),xx={kernelName:bc.FusedBatchNorm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.mean,i=t.variance,s=t.offset,u=t.scale;bc.util.assert(o.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),bc.util.assert(null==s||o.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),bc.util.assert(null==u||o.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,o,i],d=null;null!=s&&(d=s.shape,l.push(s));var p=null;null!=u&&(p=u.shape,l.push(u));var f=(0,bc.env)().getBool("WEBGL_PACK_NORMALIZATION")?new bx(a.shape,o.shape,i.shape,d,p,c):new yx(a.shape,o.shape,i.shape,d,p,c);return n.runWebGLProgram(f,l,l[0].dtype)}},kx=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=rv(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return wx.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),o=t.map((function(e,t){return"sourceLoc.".concat(wx[t]," = start[").concat(t,"] + coords.").concat(wx[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(o.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),wx=["x","y","z","w","u","v"];var Sx=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=rv(this.rank),r=Sy("coords",this.rank),a=Sy("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),i="getChannel(getSource(".concat(a.join(),"), ").concat(o,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function Cx(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.begin,s=r.size,u=bc.slice_util.parseSliceParams(a,o,s),c=(0,i.Z)(u,2),l=c[0],d=c[1];if(bc.slice_util.assertParamsValid(a,l,d),0===bc.util.sizeFromShape(d))return n.makeTensorInfo(d,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var p=n.texData.get(a.dataId),f=uy(p.values,l,d,a.shape,a.dtype);return n.makeTensorInfo(d,a.dtype,f)}var h=n.texData.get(a.dataId).isPacked,m=bc.slice_util.isSliceContinous(a.shape,l,d);if(h||!m){var g=(0,bc.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Sx(d):new kx(d),v=[l];return n.runWebGLProgram(g,[a],a.dtype,v)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),i=r.texData.get(o.dataId);Object.assign(i,a),i.refCount=1,i.shape=n,i.dtype=e.dtype;var s=bc.slice_util.computeFlatOffset(t,bc.util.computeStrides(e.shape));a.slice&&(s+=a.slice.flatOffset),i.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),o}(a,l,d,n)}var Ex={kernelName:bc.Slice,backendName:"webgl",kernelFunc:Cx},Tx={kernelName:bc.BatchToSpaceND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.crops;bc.util.assert(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=bc.backend_util.getReshaped(a.shape,o,s),c=bc.backend_util.getPermuted(u.length,o.length),l=bc.backend_util.getReshapedPermuted(a.shape,o,s),d=bc.backend_util.getSliceBeginCoords(i,o.length),p=bc.backend_util.getSliceSize(l,i,o.length),f=[],h=yb({inputs:{x:a},backend:n,attrs:{shape:u}}),m=_b({inputs:{x:h},backend:n,attrs:{perm:c}}),g=yb({inputs:{x:m},backend:n,attrs:{shape:l}}),v=Cx({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return f.push(h),f.push(m),f.push(g),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}};var Nx={kernelName:bc.Bincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=n.readSync(a.dataId),u=n.readSync(o.dataId),c=Av(s,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}};var _x={kernelName:bc.BroadcastArgs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,o=n.readSync(r.dataId),i=n.readSync(a.dataId),s=bc.backend_util.assertAndGetBroadcastShape(Array.from(o),Array.from(i));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Ix=cb({opSnippet:"return float(a != b);",cpuKernelImpl:Jv,dtype:"bool"}),Rx={kernelName:bc.NotEqual,backendName:"webgl",kernelFunc:Ix};function Ax(e){var t=e.inputs,n=e.backend,r=t.input;return $y({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var Ox={kernelName:bc.Real,backendName:"webgl",kernelFunc:Ax};var Px={kernelName:bc.Cast,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,o=n.x,s=a.dtype;if("complex64"===s){if("complex64"===o.dtype)return $y({inputs:{x:o},backend:r});var u=bc.zeros(o.shape),c=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),l=eb({inputs:{real:c,imag:u},backend:r});return u.dispose(),r.disposeIntermediateTensorInfo(c),l}if("complex64"===o.dtype){var d=Ax({inputs:{input:o},backend:r}),p=e({inputs:{x:d},backend:r,attrs:{dtype:s}});return r.disposeIntermediateTensorInfo(d),p}if(!bc.util.hasEncodingLoss(o.dtype,s)){var f=$y({inputs:{x:o},backend:r});return{dataId:f.dataId,shape:f.shape,dtype:s}}if(r.shouldExecuteOnCPU([o])){var h=r.texData.get(o.dataId).values,m=Pv(h,o.shape,o.dtype,s),g=(0,i.Z)(m,3),v=g[0],y=g[1],b=g[2];return r.makeTensorInfo(v,y,b)}if("int32"===s)return function(e,t){var n=new Ry(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===s){var x=r.makeTensorInfo([],"bool",bc.util.getTypedArrayFromDType("bool",1)),k=Ix({inputs:{a:o,b:x},backend:r});return r.disposeIntermediateTensorInfo(x),k}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(s))}},Dx="return ceil(x);",Lx=ub({opSnippet:Dx,packedOpSnippet:Dx,cpuKernelImpl:Dv}),Mx={kernelName:bc.Ceil,backendName:"webgl",kernelFunc:Lx},Fx=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),Bx=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var jx={kernelName:bc.ClipByValue,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.clipValueMin,s=a.clipValueMax;t=(0,bc.env)().getBool("WEBGL_PACK_CLIP")?new Bx(o.shape):new Fx(o.shape);var u=[[i],[s]];return r.runWebGLProgram(t,[o],o.dtype,u)}},zx=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function Vx(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var Wx={kernelName:bc.ComplexAbs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),o=new zx(r.shape),i=[Vx(r,a.complexTensorInfos.real),Vx(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}},Zx=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.outputShape=[],this.outputShape=bc.backend_util.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],o=1;o<n.length;o++){var i=n[o-1];a.push("else if (yC < ".concat(n[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(i,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),Ux=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=bc.backend_util.computeOutShape(t,n);var r=this.outputShape,a=r.length,o=rv(a),i=Sy("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],d=s.slice(-2),p=s.join(),f="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(p,"), vec2(").concat(d.join(),"));\n        }"),h=1;h<u.length;h++){var m=u[h-1];f+="\n        if (".concat(l," < ").concat(u[h],"  && ").concat(l," >= ").concat(u[h-1],") {\n          return getChannel(\n            getT").concat(h,"(").concat(Hx(s,l,m),"),\n            vec2(").concat(Hx(d,l,m),"));\n        }")}var g=u.length,v=u[u.length-1];f+="\n        return getChannel(\n          getT".concat(g,"(").concat(Hx(s,l,v),"),\n          vec2(").concat(Hx(d,l,v),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(f,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," + 1;\n        if (").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-2]," = ").concat(i[a-2]," + 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[a-1]," = ").concat(i[a-1]," - 1;\n        if (").concat(i[a-2]," < ").concat(r[a-2]," &&\n            ").concat(i[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}));function Hx(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function Gx(e){var t=e.inputs,n=e.backend,r=t.input;return $y({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var qx={kernelName:bc.Imag,backendName:"webgl",kernelFunc:Gx};function Xx(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return Ax({inputs:{input:e},backend:n})})),o=e.map((function(e){return Gx({inputs:{input:e},backend:n})})),i=Xx(a,t,n),s=Xx(o,t,n),u=eb({inputs:{real:i,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=bc.util.sizeFromShape(e.shape.slice(t));return yb({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),p=bc.backend_util.computeOutShape(l.map((function(e){return e.shape})),1),f=1===l[0].shape[0],h=Lv(d,p,r,f),m=bc.backend_util.computeOutShape(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(m,r,h);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var v=(0,bc.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(e.length>v){for(var y=[],b=0;b<e.length;b+=v){var x=e.slice(b,b+v);y.push(Xx(x,t,n))}for(var k=Xx(y,t,n),w=0,S=y;w<S.length;w++){var C=S[w];n.disposeIntermediateTensorInfo(C)}return k}if((0,bc.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var E=new Ux(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(E,e,r)}var T=function(e,t,n){var r=bc.backend_util.computeOutShape(e.map((function(e){return e.shape})),t),a=e.map((function(e){return yb({inputs:{x:e},attrs:{shape:[-1,bc.util.sizeFromShape(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(e,t,n),N=T.tensors2D,_=T.outShape,I=new Zx(N.map((function(e){return e.shape}))),R=n.runWebGLProgram(I,N,r);N.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var A=yb({inputs:{x:R},attrs:{shape:_},backend:n});return n.disposeIntermediateTensorInfo(R),A}function Kx(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=bc.util.parseAxisParam(r,t[0].shape)[0],o=t.map((function(e){return e.shape}));bc.backend_util.assertParamsConsistent(o,a);var i=bc.backend_util.computeOutShape(t.map((function(e){return e.shape})),a);if(0===bc.util.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var s=t.filter((function(e){return bc.util.sizeFromShape(e.shape)>0}));return 1===s.length?$y({inputs:{x:s[0]},backend:n}):Xx(s,a,n)}var Yx={kernelName:bc.Concat,backendName:"webgl",kernelFunc:Kx},Qx=(0,et.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Je.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,p=t.filterHeight,f=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4,g="channelsLast"===t.dataFormat,v=g?1:2,y=g?2:3,b=g?3:1,x="",k="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(v,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(p,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(f,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")})),$x=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,p=t.filterHeight,f=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(o,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Jx=(0,et.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Je.Z)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=pv(this.outputShape.length);for(var i=t.padInfo.left,s=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,l=t.filterWidth,d=l,p="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;",f=0;f<l;f++)p+="\n           vec4 xTexelC".concat(2*f,";\n           int xTexelC").concat(2*f,"Ready;\n           vec4 xTexelC").concat(2*f+1,";\n           int xTexelC").concat(2*f+1,"Ready;\n           vec4 xC").concat(f,";");p+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(t.inChannels,"; d1 += 2) {\n       ");for(var h=0;h<l;h++)p+="\n           xTexelC".concat(2*h," = vec4(0.0);\n           xTexelC").concat(2*h,"Ready = 0;\n           xTexelC").concat(2*h+1," = vec4(0.0);\n           xTexelC").concat(2*h+1,"Ready = 0;\n           xC").concat(h," = vec4(0.0);");p+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(var m=0;m<(d+1)/2;m++){var g=2*m;if(p+="\n           xC = xCCorner + ".concat(g*u,";\n           "),1===s){if(g<l&&(i%2===1?(p+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n               "),p+=1===u&&g>0?"\n                 xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                   } else {\n                     xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                   }\n                   ")):p+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xC").concat(g," = xTexelC").concat(g,";\n                 "),g+1<l)){var v=i%2===0?bc.util.nearestLargerEven(u):u;u%2===0&&i%2===1||u%2!==0&&i%2!==1?(p+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(v,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                     xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(g+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(g+1,"Ready = 1;\n                   }\n                   "),p+=u>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(g+1," = vec4(previous.zw, xTexelC").concat(g+1,".xy);\n                     } else {\n                      xC").concat(g+1," = vec4(0.0, 0.0, xTexelC").concat(g+1,".xy);\n                     }\n                     "):"\n                     xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                     ")):p+=1===v?"\n                     xC".concat(g+1," = xTexelC").concat(g,";\n                     "):"\n                     xCOffset = xC + ".concat(v,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                       xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(g+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(g+1,"Ready = 1;\n                     }\n\n                     xC").concat(g+1," = xTexelC").concat(g+1,";\n                     ")}}else g<l&&(i%2===1?(p+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n               "),g+1<l&&(p+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                 "))):(p+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                   xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(g,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(g,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                   xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(g+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(g+1,"Ready = 1;\n                 }\n\n                 xC").concat(g," = vec4(\n                   xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n               "),g+1<l&&(p+="\n                   xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                 "))));g<l&&(p+="\n             wTexel = getW(r, ".concat(g,", d1, d2);\n             dotProd += xC").concat(g,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(t.inChannels,") {\n               dotProd += xC").concat(g,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),g+1<l&&(p+="\n               wTexel = getW(r, ".concat(g+1,", d1, d2);\n               dotProd += xC").concat(g+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(t.inChannels,") {\n                 dotProd += xC").concat(g+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}p+="\n     }\n   ",p+="\n     }\n   ",p+="\n     }\n   ";var y="",b="";r&&(y=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(r,"\n         }"):o?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(r,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(r,"\n         }"),b="result = activation(result);");var x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(y,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(p,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(x,"\n         ").concat(b,"\n         setOutput(result);\n       }\n     ")})),ek=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=pv(this.outputShape.length);for(var r=n.dataFormat,a=Og(),o="channelsLast"===r,i=o?1:2,s=o?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),c="",l=0;l<=1;l++)for(var d=0;d<=1;d++)c+="\n          blockIndex = rc.z + ".concat(d,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(o,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function tk(e,t){var n=e.length;return n>=3?[].concat((0,Be.Z)(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function nk(e){var t,n=e.x,r=e.filter,a=e.convInfo,o=e.backend,i=e.bias,s=void 0===i?null:i,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,p=e.activation,f=void 0===p?null:p,h=n.shape,m=o.texData.get(n.dataId),g=a.inChannels,v=h[0]*h[1]*h[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=c){var k=tk(c.shape,b);null!=k&&(c=yb({inputs:{x:c},backend:o,attrs:{shape:k}}),x.push(c))}if(null!=s){var w=tk(s.shape,b);null!=w&&(s=yb({inputs:{x:s},backend:o,attrs:{shape:w}}),x.push(s))}if(!((1===v||1===y)&&g>1e3)&&m.isPacked&&b&&null!=m.texture&&h[2]%2!==0&&bc.util.arraysEqual(m.shape.slice(-3),h.slice(-3))){var S=h[0]*h[1]*(h[2]+1),C={dataId:n.dataId,shape:[1,S,a.inChannels],dtype:n.dtype},E=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,bc.util.assert(Eg(m.shape,C.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(C.shape," isn't free")}));var T=yb({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(T);var N=Rb({a:C,b:T,backend:o,transposeA:!1,transposeB:false,bias:s,activation:f,preluActivationWeights:c,leakyreluAlpha:d}),_=o.texData.get(N.dataId);bc.util.assert(_.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=E,_.shape=a.outShape,(t=$y({inputs:{x:N},backend:o})).shape=a.outShape,x.push(N)}else{var I=a.outHeight*a.outWidth,R=yb({inputs:{x:n},backend:o,attrs:{shape:b?[a.batchSize,I,a.inChannels]:[a.batchSize,a.inChannels,I]}}),A=yb({inputs:{x:r},backend:o,attrs:{shape:[1,a.inChannels,a.outChannels]}}),O=Rb({a:b?R:A,b:b?A:R,transposeA:!b,transposeB:false,backend:o,bias:s,activation:f,preluActivationWeights:c,leakyreluAlpha:d});t=yb({inputs:{x:O},backend:o,attrs:{shape:a.outShape}}),x.push(R),x.push(A),x.push(O)}for(var P=0,D=x;P<D.length;P++){var L=D[P];o.disposeIntermediateTensorInfo(L)}return t}function rk(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,o=e.bias,i=void 0===o?null:o,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,d=e.activation,p=void 0===d?null:d,f=r.filterWidth,h=r.filterHeight,m=r.inChannels,g=r.outWidth,v=r.outHeight,y="channelsLast"===r.dataFormat,b=f*h*m,x=v*g,k=[r.batchSize,b,x],w=[];if(null!=u){var S=tk(u.shape,y);null!=S&&(u=yb({inputs:{x:u},backend:a,attrs:{shape:S}}),w.push(u))}if(null!=i){var C=tk(i.shape,y);null!=C&&(i=yb({inputs:{x:i},backend:a,attrs:{shape:C}}),w.push(i))}var E=yb({inputs:{x:n},backend:a,attrs:{shape:[1,b,bc.util.sizeFromShape(n.shape)/b]}});w.push(E);var T=new ek(k,r),N=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],_=a.runWebGLProgram(T,[t],"float32",N),I=yb({inputs:{x:_},backend:a,attrs:{shape:k}});w.push(_),w.push(I);var R=null!=i,A=null!=u,O="leakyrelu"===p,P=p?lb(p,!0):null,D=new db(y?I.shape:E.shape,y?E.shape:I.shape,y?[r.batchSize,x,r.outChannels]:[r.batchSize,r.outChannels,x],!0,!1,R,P,A,O),L=y?[I,E]:[E,I];if(i&&L.push(i),A&&L.push(u),O){var M=a.makeTensorInfo([],"float32",bc.util.createScalarValue(l,"float32"));L.push(M),w.push(M)}var F=a.runWebGLProgram(D,L,"float32"),B=yb({inputs:{x:F},backend:a,attrs:{shape:r.outShape}});w.push(F);for(var j=0,z=w;j<z.length;j++){var V=z[j];a.disposeIntermediateTensorInfo(V)}return B}var ak={kernelName:bc.Conv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,d=a.dimRoundingMode,p=bc.backend_util.convertConv2DDataFormat(c),f=bc.backend_util.computeConv2DInfo(o.shape,i.shape,s,l,u,d,!1,p);if(1!==f.filterHeight||1!==f.filterWidth||1!==f.dilationHeight||1!==f.dilationWidth||1!==f.strideHeight||1!==f.strideWidth||"SAME"!==f.padInfo.type&&"VALID"!==f.padInfo.type)if(f.strideWidth<=2&&"channelsLast"===p&&(0,bc.env)().getBool("WEBGL_EXP_CONV")){var h=new Jx(f),m=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];t=r.runWebGLProgram(h,[o,i],"float32",m)}else if((0,bc.env)().getBool("WEBGL_CONV_IM2COL"))t=rk({x:o,filter:i,convInfo:f,backend:r});else{var g=new Qx(f);t=r.runWebGLProgram(g,[o,i],"float32")}else t=nk({x:o,filter:i,convInfo:f,backend:r});var v=yb({inputs:{x:t},backend:r,attrs:{shape:f.outShape}});return r.disposeIntermediateTensorInfo(t),v}},ok=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(i,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),ik=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=i?1:2,l=i?2:3,d=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),sk=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(o,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),uk=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,o=t.strideDepth,i=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(o,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var ck={kernelName:bc.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,d=bc.backend_util.convertConv2DDataFormat(u),p=bc.backend_util.computeConv2DInfo(a.shape,l,i,1,s,c,!1,d),f=new ok(p);return n.runWebGLProgram(f,[a,o],"float32")}};var lk={kernelName:bc.Conv2DBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=bc.backend_util.convertConv2DDataFormat(c),p=bc.backend_util.computeConv2DInfo(i,o.shape,s,1,u,l,!1,d),f=new ik(p);return n.runWebGLProgram(f,[a,o],"float32")}};var dk={kernelName:bc.Conv3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=bc.backend_util.computeConv3DInfo(a.shape,o.shape,i,u,s),l=new $x(c);return n.runWebGLProgram(l,[a,o],"float32")}};var pk={kernelName:bc.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.pad,u=r.filterShape,c=bc.backend_util.computeConv3DInfo(a.shape,u,i,1,s),l=new sk(c);return n.runWebGLProgram(l,[a,o],"float32")}};var fk,hk={kernelName:bc.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.pad,s=r.strides,u=r.inputShape,c=bc.backend_util.computeConv3DInfo(u,o.shape,s,1,i),l=new uk(c);return n.runWebGLProgram(l,[a,o],"float32")}},mk=ub({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),gk={kernelName:bc.Cos,backendName:"webgl",kernelFunc:mk},vk=ub({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),yk={kernelName:bc.Cosh,backendName:"webgl",kernelFunc:vk},bk=(0,et.Z)((function e(t,n,r,a,o){(0,Je.Z)(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var s=(0,i.Z)(t,4),u=s[0],c=s[1],l=s[2],d=s[3],p=(0,i.Z)(n,1)[0],f=(0,i.Z)(r,2),h=f[0],m=f[1];this.outputShape=[p,h,m,d];var g="bilinear"===a?1:0,v="".concat(c-1,".0"),y="".concat(l-1,".0"),b=h>1?["".concat((c-1)/(h-1)),"(y2-y1) * height_ratio","y1*".concat(v," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(v)],x=(0,i.Z)(b,3),k=x[0],w=x[1],S=x[2],C=m>1?["".concat((l-1)/(m-1)),"(x2-x1) * width_ratio","x1*".concat(y," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(y)],E=(0,i.Z)(C,3),T=E[0],N=E[1],_=E[2];this.userCode="\n      const float height_ratio = float(".concat(k,");\n      const float width_ratio = float(").concat(T,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(u,") {\n          return;\n        }\n\n        float height_scale = ").concat(w,";\n        float width_scale = ").concat(N,";\n\n        float in_y = ").concat(S,";\n        if( in_y < 0.0 || in_y > ").concat(v," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(_,";\n        if( in_x < 0.0 || in_x > ").concat(y," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(g," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),xk={kernelName:bc.CropAndResize,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.boxes,i=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new bk(a.shape,o.shape,s,u,c);return n.runWebGLProgram(l,[a,o,i],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(fk||(fk={}));var kk=(0,et.Z)((function e(t,n,r,a){(0,Je.Z)(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var o=this.outputShape.length,i=this.op===fk.Prod?"1.0":"0.0",s=r?i:"getX(".concat(wk(o,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],c="",l="";r?(c=a?"end != ".concat(u-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(u):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(rv(o)," coords = getOutputCoords();\n        int end = ").concat(Sk(o,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(Sk(o,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(wk(o,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function wk(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function Sk(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function Ck(e,t,n,r,a,o){var i=t.shape.length,s=bc.backend_util.getAxesPermutation([r],i),u=t;null!=s&&(u=_b({inputs:{x:t},backend:n,attrs:{perm:s}}));var c=bc.backend_util.getInnerMostAxes(1,i)[0];if(c!==i-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var l=u.shape[c],d=$y({inputs:{x:u},backend:n}),p=0;p<=Math.ceil(Math.log2(l))-1;p++){var f=new kk(e,u.shape,!1,o),h=[[p]],m=d;d=n.runWebGLProgram(f,[d],d.dtype,h),n.disposeIntermediateTensorInfo(m)}if(a){var g=new kk(e,u.shape,a,o),v=d;d=n.runWebGLProgram(g,[d],d.dtype),n.disposeIntermediateTensorInfo(v)}if(null!=s){var y=_b({inputs:{x:d},backend:n,attrs:{perm:bc.backend_util.getUndoAxesPermutation(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),y}return d}var Ek={kernelName:bc.Cumprod,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;return Ck(fk.Prod,a,n,o,i,s)}};var Tk={kernelName:bc.Cumsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,i=r.exclusive,s=r.reverse;return Ck(fk.Sum,a,n,o,i,s)}};var Nk={kernelName:bc.DenseBincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.weights,i=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=Av(u,c,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}if(2===a.shape.length){var d=n.bufferSync(a),p=n.bufferSync(o),f=Ov(d,p,i,s);return n.makeTensorInfo(f.shape,o.dtype,f.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},_k=function(){function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return(0,et.Z)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var Ik={kernelName:bc.DepthToSpace,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockSize,i=r.dataFormat,s=a.shape[0],u=("NHWC"===i?a.shape[1]:a.shape[2])*o,c=("NHWC"===i?a.shape[2]:a.shape[3])*o,l=("NHWC"===i?a.shape[3]:a.shape[1])/(o*o),d=new _k("NHWC"===i?[s,u,c,l]:[s,l,u,c],o,i);return n.runWebGLProgram(d,[a],a.dtype)}},Rk=(0,et.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Je.Z)(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=pv(this.outputShape.length);var i=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),Ak=(0,et.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,Je.Z)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=pv(this.outputShape.length);for(var i=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,d=t.filterWidth,p=d,f="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",h=0;h<d;h++)f+="\n          vec4 xTexelC".concat(2*h,";\n          int xTexelC").concat(2*h,"Ready;\n          vec4 xTexelC").concat(2*h+1,";\n          int xTexelC").concat(2*h+1,"Ready;\n          vec4 xC").concat(h,";");f+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var m=0;m<d;m++)f+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");f+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var g=0;g<(p+1)/2;g++){var v=2*g;if(f+="\n          xC = xCCorner + ".concat(v*c,";\n          "),1===u){if(v<d&&(s%2===1?(f+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n              "),f+=1===c&&v>0?"\n                xC".concat(v," = vec4(xTexelC").concat(v-2,".zw, xTexelC").concat(v,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(v," = vec4(previous.zw, xTexelC").concat(v,".xy);\n                  } else {\n                    xC").concat(v," = vec4(0.0, 0.0, xTexelC").concat(v,".xy);\n                  }\n                  ")):f+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n\n                xC").concat(v," = xTexelC").concat(v,";\n                "),v+1<d)){var y=s%2===0?bc.util.nearestLargerEven(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(f+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                    xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(v+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(v+1,"Ready = 1;\n                  }\n                  "),f+=c>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(v+1," = vec4(previous.zw, xTexelC").concat(v+1,".xy);\n                    } else {\n                     xC").concat(v+1," = vec4(0.0, 0.0, xTexelC").concat(v+1,".xy);\n                    }\n                    "):"\n                    xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".xy);\n                    ")):f+=1===y?"\n                    xC".concat(v+1," = xTexelC").concat(v,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                      xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(v+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(v+1,"Ready = 1;\n                    }\n\n                    xC").concat(v+1," = xTexelC").concat(v+1,";\n                    ")}}else v<d&&(s%2===1?(f+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                  xTexelC").concat(v+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(v+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v+1,"Ready = 1;\n                }\n\n                xC").concat(v," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n              "),v+1<d&&(f+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(v+1," = vec4(xTexelC").concat(v+1,".xy, final.xy);\n                "))):(f+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                  xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(v+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(v+1,"Ready = 1;\n                }\n\n                xC").concat(v," = vec4(\n                  xTexelC").concat(v,".xy, xTexelC").concat(v+1,".xy);\n              "),v+1<d&&(f+="\n                  xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n                "))));v<d&&(f+="\n            wTexel = getW(r, ".concat(v,", d1, q);\n            dotProd += xC").concat(v," * vec4(wTexel.xz, wTexel.xz);\n          "),v+1<d&&(f+="\n              wTexel = getW(r, ".concat(v+1,", d1, q);\n              dotProd += xC").concat(v+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}f+="\n    }\n  ",f+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(f,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(k,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var Ok={kernelName:bc.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),bc.util.assert(bc.backend_util.eitherStridesOrDilationsAreOne(i,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(i," and dilations '").concat(l,"'")}));var d,p=bc.backend_util.computeConv2DInfo(a.shape,o.shape,i,l,s,c,!0);d=(0,bc.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels===1?new Ak(p):new Rk(p);var f=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];return n.runWebGLProgram(d,[a,o],"float32",f)}},Pk=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(o,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Dk=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,o=t.strideWidth,i=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(o,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Lk={kernelName:bc.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.dy,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,d=bc.backend_util.computeConv2DInfo(a.shape,l,i,s,u,c,!0),p=new Pk(d);return n.runWebGLProgram(p,[a,o],"float32")}};var Mk={kernelName:bc.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.filter,i=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape,d=bc.backend_util.computeConv2DInfo(l,o.shape,i,s,u,c,!0),p=new Dk(d);return n.runWebGLProgram(p,[a,o],"float32")}},Fk=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var Bk={kernelName:bc.Diag,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,Be.Z)(r.shape),(0,Be.Z)(r.shape)),o=bc.util.sizeFromShape(r.shape),i=yb({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new Fk(o),u=n.runWebGLProgram(s,[i],i.dtype),c=yb({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),c}},jk=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,o=t.strideHeight,i=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,d=a.top,p=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(o,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var zk={kernelName:bc.Dilation2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=bc.backend_util.computeDilation2DInfo(o.shape,i.shape,s,u,"NHWC",c),d=new jk(l),p=yb({inputs:{x:t=r.runWebGLProgram(d,[o,i],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),p}};var Vk={kernelName:bc.Einsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=bc.backend_util.decodeEinsumEquation(r,a.length),s=i.allDims,u=i.summedDims,c=i.idDims;bc.backend_util.checkEinsumDimSizes(s.length,c,a);for(var l=bc.backend_util.getEinsumComputePath(u,c),d=l.path,p=l.steps,f=p.length,h=null,m=s.length,g=[],v=0;v<f;++v){var y,b=(0,o.Z)(p[v]);try{for(b.s();!(y=b.n()).done;){var x=y.value,k=bc.backend_util.getEinsumPermutation(m,c[x]),w=k.permutationIndices,S=k.expandDims,C=void 0;bc.backend_util.isIdentityPermutation(w)?C=a[x]:(C=_b({inputs:{x:a[x]},backend:n,attrs:{perm:w}}),g.push(C));for(var E=C.shape.slice(),T=0;T<S.length;++T)E.splice(S[T],0,1);bc.util.arraysEqual(C.shape,E)||(C=yb({inputs:{x:C},backend:n,attrs:{shape:E}}),g.push(C)),null===h?h=C:(h=gb({inputs:{a:C,b:h},backend:n}),g.push(h))}}catch(lT){b.e(lT)}finally{b.f()}v<f-1&&(d[v]>=0&&(h=Tb({inputs:{x:h},backend:n,attrs:{axis:d[v]-(s.length-m),keepDims:!1}}),g.push(h)),m--)}for(var N=0,_=g;N<_.length;N++){var I=_[N];I!==h&&n.disposeIntermediateTensorInfo(I)}return h}},Wk=ub({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),Zk={kernelName:bc.Elu,backendName:"webgl",kernelFunc:Wk},Uk={kernelName:bc.EluGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,o=(0,bc.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qy("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new Yy("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(o,[r,a],r.dtype)}},Hk=cb({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:Mv}),Gk={kernelName:bc.Equal,backendName:"webgl",kernelFunc:Hk},qk=ub({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(bc.backend_util.ERF_P,";\n  float a1 = ").concat(bc.backend_util.ERF_A1,";\n  float a2 = ").concat(bc.backend_util.ERF_A2,";\n  float a3 = ").concat(bc.backend_util.ERF_A3,";\n  float a4 = ").concat(bc.backend_util.ERF_A4,";\n  float a5 = ").concat(bc.backend_util.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),Xk={kernelName:bc.Erf,backendName:"webgl",kernelFunc:qk},Kk=ub({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:Fv,dtype:"float32"}),Yk={kernelName:bc.Exp,backendName:"webgl",kernelFunc:Kk};function Qk(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,o=t.input,i=o.shape.length,s=o.shape.slice(),u=a;return a<0&&(bc.util.assert(-(i+1)<=a,(function(){return"Axis must be in the interval [".concat(-(i+1),", ").concat(i,"]")})),u=i+a+1),s.splice(u,0,1),yb({inputs:{x:o},backend:r,attrs:{shape:s}})}var $k={kernelName:bc.ExpandDims,backendName:"webgl",kernelFunc:Qk},Jk="return exp(x) - 1.0;",ew=ub({opSnippet:Jk,packedOpSnippet:Jk,cpuKernelImpl:Bv}),tw={kernelName:bc.Expm1,backendName:"webgl",kernelFunc:ew},nw=(0,et.Z)((function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var o,i=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)o="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));o="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(o,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function rw(e,t,n){var r=n.texData.get(e.dataId),a=bc.util.sizeFromShape(e.shape),o=e.shape[e.shape.length-1],i=yb({inputs:{x:e},backend:n,attrs:{shape:[a/o,o]}}),s=i.shape,u=new nw("real",s,t),c=new nw("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,l,"float32"),p=n.runWebGLProgram(c,l,"float32"),f=eb({inputs:{real:d,imag:p},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p);var h=yb({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(f),h}var aw={kernelName:bc.FFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return rw(t.input,!1,n)}},ow=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function iw(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,o=n.dtype;if("string"===(o=o||bc.util.inferDtype(a))){var i=bc.util.getArrayFromDType(o,bc.util.sizeFromShape(r));return i.fill(a),t.makeTensorInfo(r,o,i)}var s=new ow(r,a),u=[[a]];return t.runWebGLProgram(s,[],o,u)}var sw,uw={kernelName:bc.Fill,backendName:"webgl",kernelFunc:iw},cw=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),lw={kernelName:bc.FlipLeftRight,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,o=new cw(r.shape);return a.runWebGLProgram(o,[r],r.dtype)}},dw="return floor(x);",pw=ub({opSnippet:dw,packedOpSnippet:dw,cpuKernelImpl:jv}),fw={kernelName:bc.Floor,backendName:"webgl",kernelFunc:pw},hw=cb({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),mw={kernelName:bc.FloorDiv,backendName:"webgl",kernelFunc:hw},gw=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["A"];var n=Og(),r=(0,i.Z)(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(o,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),vw=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Og(),r=(0,i.Z)(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(o,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),yw={kernelName:bc.FromPixels,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,o=r.numChannels,s="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,u="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,c=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],l=(0,i.Z)(c,2),d=l[0],p=l[1],f=[p,d],h=[p,d,o];if(u||s){var m=(0,bc.env)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=sw&&m===bw||(bw=m,sw=document.createElement("canvas").getContext("2d",{willReadFrequently:bw})),sw.canvas.width=d,sw.canvas.height=p,sw.drawImage(a,0,0,d,p),a=sw.canvas}var g=n.makeTensorInfo(f,"int32");n.texData.get(g.dataId).usage=Km.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(g.dataId),a);var v=(0,bc.env)().getBool("WEBGL_PACK")?new vw(h):new gw(h),y=n.runWebGLProgram(v,[g],"int32");return n.disposeData(g.dataId),y}},bw=(0,bc.env)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var xw={kernelName:bc.FusedConv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,d=a.dataFormat,p=a.dilations,f=a.dimRoundingMode,h=a.activation,m=a.leakyreluAlpha,g=bc.backend_util.convertConv2DDataFormat(d),v=bc.backend_util.computeConv2DInfo(o.shape,i.shape,c,p,l,f,!1,g),y=[],b=null!=s,x=null!=u,k="leakyrelu"===h,w=function(){var e=[o,i],t=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=yb({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&e.push(t(s,d)),x&&e.push(t(u,d)),k){var n=r.makeTensorInfo([],"float32",bc.util.createScalarValue(m,"float32"));e.push(n),y.push(n)}return e};if(1!==v.filterHeight||1!==v.filterWidth||1!==v.dilationHeight||1!==v.dilationWidth||1!==v.strideHeight||1!==v.strideWidth||"SAME"!==v.padInfo.type&&"VALID"!==v.padInfo.type)if(v.strideWidth<=2&&"channelsLast"===g&&(0,bc.env)().getBool("WEBGL_EXP_CONV")){var S=h?lb(h,!0):null,C=new Jx(v,b,S,x,k),E=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],T=w();t=r.runWebGLProgram(C,T,"float32",E)}else if((0,bc.env)().getBool("WEBGL_CONV_IM2COL"))t=rk({x:o,filter:i,convInfo:v,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});else{var N=h?lb(h,!1):null,_=new Qx(v,b,N,x,k),I=w();t=r.runWebGLProgram(_,I,"float32")}else t=nk({x:o,filter:i,convInfo:v,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});var R=yb({inputs:{x:t},backend:r,attrs:{shape:v.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),R}};var kw={kernelName:bc.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.filter,i=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,d=r.dimRoundingMode,p=r.activation,f=r.leakyreluAlpha,h=[],m=l;null==m&&(m=[1,1]),bc.util.assert(bc.backend_util.eitherStridesOrDilationsAreOne(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(m,"'")}));var g,v=bc.backend_util.computeConv2DInfo(a.shape,o.shape,u,m,c,d,!0),y=(0,bc.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,b=p?lb(p,y):null,x=[a,o],k=null!=i,w=null!=s,S="leakyrelu"===p;if(k&&x.push(i),w&&x.push(s),S){var C=n.makeTensorInfo([],"float32",bc.util.createScalarValue(f,"float32"));x.push(C),h.push(C)}g=y?new Ak(v,k,b,w,S):new Rk(v,k,b,w,S);var E=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],T=n.runWebGLProgram(g,x,"float32",E);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),T}},ww=(0,et.Z)((function e(t,n,r,a){(0,Je.Z)(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;for(var o=rv(r.length),i="\n    int index;",s=0;s<this.sliceDim;s++)i+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(i,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var Sw={kernelName:bc.GatherNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,o=a.shape,s=o[o.length-1],u=bc.util.sizeFromShape(r.shape),c=bc.backend_util.prepareAndValidate(r,a),l=(0,i.Z)(c,4),d=l[0],p=l[1],f=l[2],h=l[3],m=yb({inputs:{x:a},backend:n,attrs:{shape:[p,s]}}),g=yb({inputs:{x:r},backend:n,attrs:{shape:[bc.util.sizeFromShape(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var v=n.readSync(a.dataId),y=n.bufferSync(r),b=zv(v,y,r.dtype,p,s,f,h,r.shape,u);return n.makeTensorInfo(d,r.dtype,b.values)}var x=new ww(s,h,[p,f],r.shape),k=n.runWebGLProgram(x,[g,m],g.dtype),w=yb({inputs:{x:k},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(k),w}},Cw=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=rv(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function Ew(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.indices,i=r.axis,s=r.batchDims,u=bc.util.parseAxisParam(i,a.shape)[0];(0,bc.env)().get("DEBUG")&&function(){for(var e=n.readSync(o.dataId),t=a.shape[u],r=function(n){var r=e[n];bc.util.assert(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},i=0;i<e.length;++i)r(i)}();var c=bc.backend_util.segment_util.collectGatherOpShapeInfo(a,o,u,s),l=bc.util.sizeFromShape(o.shape),d=[],p=yb({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=yb({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});d.push(p),d.push(f);var h=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,o])||"string"===a.dtype){var m=n.bufferSync(f),g=n.bufferSync(p),v=Vv(g,m,h);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(c.outputShape,v.dtype,v.values)}var y=new Cw(p.shape,h),b=n.runWebGLProgram(y,[p,f],p.dtype);d.push(b);var x=yb({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var Tw={kernelName:bc.GatherV2,backendName:"webgl",kernelFunc:Ew},Nw=cb({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:Wv,dtype:"bool"}),_w={kernelName:bc.Greater,backendName:"webgl",kernelFunc:Nw},Iw=cb({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:Zv}),Rw={kernelName:bc.GreaterEqual,backendName:"webgl",kernelFunc:Iw};var Aw={kernelName:bc.IFFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return rw(t.input,!0,n)}},Ow=ub({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Pw={kernelName:bc.IsFinite,backendName:"webgl",kernelFunc:Ow},Dw=ub({opSnippet:"return float(isinf(x));",dtype:"bool"}),Lw={kernelName:bc.IsInf,backendName:"webgl",kernelFunc:Dw},Mw=ub({opSnippet:"return float(isnan(x));",dtype:"bool"}),Fw={kernelName:bc.IsNan,backendName:"webgl",kernelFunc:Mw},Bw=cb({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:Uv,dtype:"bool"}),jw={kernelName:bc.Less,backendName:"webgl",kernelFunc:Bw},zw=cb({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:Hv,dtype:"bool"}),Vw={kernelName:bc.LessEqual,backendName:"webgl",kernelFunc:zw};var Ww={kernelName:bc.LinSpace,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.num,i=Gv(r,a,o);return t.makeTensorInfo([i.length],"float32",i)}},Zw=ub({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:qv}),Uw={kernelName:bc.Log,backendName:"webgl",kernelFunc:Zw},Hw=ub({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),Gw={kernelName:bc.Log1p,backendName:"webgl",kernelFunc:Hw},qw=cb({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),Xw={kernelName:bc.LogicalAnd,backendName:"webgl",kernelFunc:qw},Kw=ub({opSnippet:"return float(!(x >= 1.0));"}),Yw={kernelName:bc.LogicalNot,backendName:"webgl",kernelFunc:Kw},Qw=cb({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),$w={kernelName:bc.LogicalOr,backendName:"webgl",kernelFunc:Qw},Jw=(0,et.Z)((function e(t,n,r,a,o){(0,Je.Z)(this,e),this.variableNames=["x"],this.outputShape=[];var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(i,";\n        setOutput(val);\n      }\n    ")})),eS=(0,et.Z)((function e(t,n,r,a,o){(0,Je.Z)(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");i=.5===o?"inversesqrt(".concat(c,")"):1===o?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(o,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(i,";\n        setOutput(result);\n      }\n    ")})),tS={kernelName:bc.LRN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.depthRadius,i=r.bias,s=r.alpha,u=r.beta,c=(0,bc.env)().getBool("WEBGL_PACK_NORMALIZATION")?new eS(a.shape,o,i,s,u):new Jw(a.shape,o,i,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},nS=(0,et.Z)((function e(t,n,r,a,o){(0,Je.Z)(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(o,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(o,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),rS={kernelName:bc.LRNGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.y,i=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,d=new nS(a.shape,s,u,c,l);return n.runWebGLProgram(d,[a,o,i],a.dtype)}};function aS(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reductionIndices,s=r.keepDims,u=a.shape.length,c=bc.util.parseAxisParam(o,a.shape),l=c,d=bc.backend_util.getAxesPermutation(l,u),p=null!=d,f=n.shouldExecuteOnCPU([a]),h=a;if(p){if(f){for(var m=n.texData.get(h.dataId).values,g=new Array(u),v=0;v<g.length;v++)g[v]=a.shape[d[v]];var y=xy(m,a.shape,a.dtype,d,g);h=n.makeTensorInfo(g,a.dtype),n.texData.get(h.dataId).values=y}else h=Eb(a,d,n);l=bc.backend_util.getInnerMostAxes(l.length,u)}bc.backend_util.assertAxesAreInnerMostDims("max",l,u);var b,x=bc.backend_util.computeOutAndReduceShapes(h.shape,l),k=(0,i.Z)(x,2),w=k[0],S=k[1],C=w;if(s&&(C=bc.backend_util.expandShapeToKeepDim(w,c)),f){var E=n.texData.get(h.dataId).values,T=Xv(E,bc.util.sizeFromShape(S),C,a.dtype);b=n.makeTensorInfo(C,a.dtype),n.texData.get(b.dataId).values=T}else b=function(e,t,n,r){var a=bc.util.sizeFromShape(t),o=yb({inputs:{x:e},attrs:{shape:[bc.util.sizeFromShape(e.shape)/a,a]},backend:r}),i=wb(o,e.dtype,"max",r),s=yb({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(h,S,C,n);return p&&n.disposeIntermediateTensorInfo(h),b}var oS={kernelName:bc.Max,backendName:"webgl",kernelFunc:aS},iS=cb({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Kv}),sS={kernelName:bc.Maximum,backendName:"webgl",kernelFunc:iS};var uS={kernelName:bc.MaxPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Rg(a,"maxPool");var o=r.filterSize,i=r.strides,s=r.pad,u=r.dimRoundingMode;bc.util.assert(bc.backend_util.eitherStridesOrDilationsAreOne(i,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(1,"'")}));var c=bc.backend_util.computePool2DInfo(a.shape,o,i,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&bc.util.arraysEqual(c.inShape,c.outShape))return $y({inputs:{x:a},backend:n});var l=new cx(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var cS={kernelName:bc.MaxPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.filterSize,i=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=bc.backend_util.computePool3DInfo(a.shape,o,i,[1,1,1],s,c,u),d=new lx(l,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},lS=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,s=o-1-t.padInfo.top,u=i-1-t.padInfo.left,c=o*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),dS=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=u-1-t.padInfo.front,p=c-1-t.padInfo.top,f=l-1-t.padInfo.left,h=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(p,", ").concat(f,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var pS={kernelName:bc.MaxPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=bc.backend_util.computePool3DInfo(o.shape,i,s,[1,1,1],u,c),d=new lx(l,"max",!0),p=n.runWebGLProgram(d,[o],o.dtype),f=new dS(l),h=n.runWebGLProgram(f,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),h}};var fS={kernelName:bc.MaxPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,o=t.input,i=o;Rg([o,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=bc.backend_util.computePool2DInfo(i.shape,s,u,1,c,l),p=new cx(d,"max",!0),f=n.runWebGLProgram(p,[i],i.dtype),h=new lS(d),m=n.runWebGLProgram(h,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),m}};var hS={kernelName:bc.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.filterSize,s=n.strides,u=n.pad,c=n.includeBatchInIndex,l=r;bc.util.assert(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var d=[1,1];bc.util.assert(bc.backend_util.eitherStridesOrDilationsAreOne(s,d),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(d,"'")}));var p=bc.backend_util.computePool2DInfo(a.shape,o,s,d,u),f=function(e,t,n,r){var a=new cx(n,"max",!1),o=r.runWebGLProgram(a,[e],"float32");return a=new cx(n,"max",!0,!0,t),[o,r.runWebGLProgram(a,[e],"float32")]}(a,c,p,l),h=(0,i.Z)(f,2);return[h[0],h[1]]}};var mS={kernelName:bc.Mean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.keepDims,s=n.axis,u=r,c=a.shape.length,l=bc.util.parseAxisParam(s,a.shape),d=l,p=bc.backend_util.getAxesPermutation(d,c),f=null!=p,h=u.shouldExecuteOnCPU([a]),m=[],g=a;if(f){if(h){for(var v=u.texData.get(g.dataId).values,y=new Array(c),b=0;b<y.length;b++)y[b]=a.shape[p[b]];var x=xy(v,a.shape,a.dtype,p,y);g=u.makeTensorInfo(y,a.dtype),u.texData.get(g.dataId).values=x}else g=Eb(a,p,u);m.push(g),d=bc.backend_util.getInnerMostAxes(d.length,c)}bc.backend_util.assertAxesAreInnerMostDims("sum",d,c);var k=bc.backend_util.computeOutAndReduceShapes(g.shape,d),w=(0,i.Z)(k,2),S=w[0],C=w[1],E=S;o&&(E=bc.backend_util.expandShapeToKeepDim(S,l));for(var T=function(e,t,n,r){var a=bc.util.sizeFromShape(t),o=yb({inputs:{x:e},attrs:{shape:[bc.util.sizeFromShape(e.shape)/a,a]},backend:r}),i=wb(o,"float32","mean",r),s=yb({inputs:{x:i},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),s}(g,C,E,u),N=0,_=m;N<_.length;N++){var I=_[N];u.disposeIntermediateTensorInfo(I)}return T}};var gS={kernelName:bc.Min,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.axis,s=r.keepDims,u=a.shape.length,c=bc.util.parseAxisParam(o,a.shape),l=c,d=bc.backend_util.getAxesPermutation(l,u),p=a;null!=d&&(p=_b({inputs:{x:a},backend:n,attrs:{perm:d}}),l=bc.backend_util.getInnerMostAxes(l.length,a.shape.length)),bc.backend_util.assertAxesAreInnerMostDims("min",l,u);var f,h=bc.backend_util.computeOutAndReduceShapes(p.shape,l),m=(0,i.Z)(h,2),g=m[0],v=m[1],y=yb({inputs:{x:p},backend:n,attrs:{shape:[-1,bc.util.sizeFromShape(v)]}}),b=wb(y,y.dtype,"min",n);return f=yb(s?{inputs:{x:b},backend:n,attrs:{shape:bc.backend_util.expandShapeToKeepDim(g,c)}}:{inputs:{x:b},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),null!=d&&n.disposeIntermediateTensorInfo(p),f}},vS=cb({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Yv}),yS={kernelName:bc.Minimum,backendName:"webgl",kernelFunc:vS},bS=(0,et.Z)((function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=rv(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(o," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),xS=(0,et.Z)((function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=rv(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=Sy("rc",a),c=Sy("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),p="reflect"===r?0:1,f="";if(1===a){var h="\n        ".concat(o," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(p,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(p,";\n        }\n        source -= start;\n      ");f="\n        ".concat(o," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{var m="\n        ".concat(o," source = rc;\n        ").concat(o," lt = ").concat(o,"(lessThan(source, start));\n        ").concat(o," gte = ").concat(o,"(greaterThanEqual(source, end));\n        ").concat(o," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(p,") +\n                gte * ((end - 1) * 2 - source + ").concat(p,");\n        source -= start;\n      ");f="\n        ".concat(o," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")})),kS={kernelName:bc.MirrorPad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.mode,s=(0,bc.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xS(a.shape,o,i):new bS(a.shape,o,i);return n.runWebGLProgram(s,[a],a.dtype)}},wS=cb({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),SS={kernelName:bc.Mod,backendName:"webgl",kernelFunc:wS},CS=(0,et.Z)((function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),ES=cb({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),TS={kernelName:bc.RealDiv,backendName:"webgl",kernelFunc:ES},NS="return a - b;",_S=cb({opSnippet:NS,packedOpSnippet:NS,supportsComplex:!0,cpuKernelImpl:vy}),IS={kernelName:bc.Sub,backendName:"webgl",kernelFunc:_S};function RS(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.dim,i=bc.util.parseAxisParam([o],a.shape),s=aS({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),u=bc.backend_util.expandShapeToKeepDim(s.shape,i),c=yb({inputs:{x:s},backend:n,attrs:{shape:u}}),l=_S({inputs:{a:a,b:c},backend:n}),d=Kk({inputs:{x:l},backend:n}),p=Tb({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),f=yb({inputs:{x:p},backend:n,attrs:{shape:u}}),h=ES({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),h}var AS={kernelName:bc.Softmax,backendName:"webgl",kernelFunc:RS};var OS={kernelName:bc.Multinomial,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,o=r.numSamples,i=r.seed,s=r.normalized,u=s?a:RS({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new CS(c,l,o),p=[[i]],f=n.runWebGLProgram(d,[u],"int32",p);return s||n.disposeIntermediateTensorInfo(u),f}};var PS={kernelName:bc.Neg,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var o=r.texData.get(a.dataId),s=$v(o.values,a.shape,a.dtype),u=(0,i.Z)(s,2),c=u[0],l=u[1];return r.makeTensorInfo(l,a.dtype,c)}return t=(0,bc.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Uy(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new Ry(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},DS=bc.kernel_impls.nonMaxSuppressionV3Impl;var LS={kernelName:bc.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:function(e){bc.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(o.dataId),d=DS(c,l,i,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},MS=bc.kernel_impls.nonMaxSuppressionV4Impl;var FS={kernelName:bc.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:function(e){bc.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),d=n.readSync(o.dataId),p=MS(l,d,i,s,u,c),f=p.selectedIndices,h=p.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},BS=bc.kernel_impls.nonMaxSuppressionV5Impl;var jS={kernelName:bc.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:function(e){bc.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,o=t.scores,i=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),d=n.readSync(o.dataId),p=BS(l,d,i,s,u,c),f=p.selectedIndices,h=p.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},zS=(0,et.Z)((function e(t,n,r,a){(0,Je.Z)(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),VS={kernelName:bc.OneHot,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=r.dtype,i=r.depth,s=r.onValue,u=r.offValue,c=bc.util.sizeFromShape(a.shape),l=new zS(c,i,s,u),d=yb({inputs:{x:a},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(l,[d],o);n.disposeIntermediateTensorInfo(d);var f=yb({inputs:{x:p},backend:n,attrs:{shape:[].concat((0,Be.Z)(a.shape),[i])}});return n.disposeIntermediateTensorInfo(p),f}};function WS(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=Ax({inputs:{input:r},backend:n}),o=WS({inputs:{x:a},backend:n}),i=Gx({inputs:{input:r},backend:n}),s=WS({inputs:{x:i},backend:n}),u=eb({inputs:{real:o,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),u}return iw({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var ZS={kernelName:bc.ZerosLike,backendName:"webgl",kernelFunc:WS};var US={kernelName:bc.OnesLike,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var o=Ax({inputs:{input:a},backend:r}),i=e({inputs:{x:o},backend:r}),s=Gx({inputs:{input:a},backend:r}),u=WS({inputs:{x:s},backend:r}),c=eb({inputs:{real:i,imag:u},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return iw({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var HS={kernelName:bc.Pack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Qk({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,o=t[0].dtype;t.forEach((function(e){bc.util.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),bc.util.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=[],s=Kx({inputs:t.map((function(e){var t=Qk({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},GS=(0,et.Z)((function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,o=rv(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(o," start = ").concat(o,"(").concat(i,");\n      ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(o," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),qS=(0,et.Z)((function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,o=rv(a),i=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=Sy("rc",a),c=Sy("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),p=["".concat(o," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],f=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",m=0,g=1===a?2:4;m<g;m++)h+="\n        ".concat(p[m],"\n        if (").concat(f,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(o," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(o," start = ").concat(o,"(").concat(i,");\n      const ").concat(o," end = ").concat(o,"(").concat(s,");\n\n      void main() {\n        ").concat(o," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")})),XS=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.paddings,i=r.constantValue;if(0===bc.util.sizeFromShape(a.shape)){var s=o.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return iw({backend:n,attrs:{shape:s,value:i,dtype:a.dtype}})}var u=(0,bc.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qS(a.shape,o,i):new GS(a.shape,o,i),c=[[i]];return n.runWebGLProgram(u,[a],a.dtype,c)},KS={kernelName:bc.PadV2,backendName:"webgl",kernelFunc:XS},YS=cb({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),QS={kernelName:bc.Pow,backendName:"webgl",kernelFunc:YS};var $S={kernelName:bc.Prod,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,s=a.axis,u=a.keepDims,c=o.shape.length,l=[],d=bc.util.parseAxisParam(s,o.shape),p=d,f=bc.backend_util.getAxesPermutation(p,c),h=o;if(null!=f&&(h=_b({inputs:{x:o},backend:r,attrs:{perm:f}}),p=bc.backend_util.getInnerMostAxes(p.length,c),l.push(h)),bc.backend_util.assertAxesAreInnerMostDims("prod",p,c),r.shouldExecuteOnCPU([h])){var m=r.texData.get(h.dataId).values,g=ey(h.shape,h.dtype,m,p),v=g.outVals,y=g.outShape,b=g.outDtype;t=r.makeTensorInfo(y,b,v)}else{var x=bc.backend_util.computeOutAndReduceShapes(h.shape,p),k=(0,i.Z)(x,2),w=k[0],S=k[1],C=bc.util.sizeFromShape(S),E=yb({inputs:{x:h},backend:r,attrs:{shape:[-1,C]}}),T=wb(E,(0,bc.sumOutType)(o.dtype),"prod",r);t=yb({inputs:{x:T},backend:r,attrs:{shape:w}}),l.push(E),l.push(T)}if(u){l.push(t);var N=bc.backend_util.expandShapeToKeepDim(t.shape,d);t=yb({inputs:{x:t},backend:r,attrs:{shape:N}})}return l.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}};var JS={kernelName:bc.RaggedGather,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,o=t.paramsDenseValues,s=t.indices,u=r.outputRaggedRank,c=a.map((function(e){return n.readSync(e.dataId)})),l=a.map((function(e){return e.shape})),d=n.readSync(o.dataId),p=n.readSync(s.dataId),f=ty(c,l,d,o.shape,o.dtype,p,s.shape,u),h=(0,i.Z)(f,3),m=h[0],g=h[1],v=h[2],y=m.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),b=n.makeTensorInfo(v,o.dtype,g);return y.concat([b])}};var eC={kernelName:bc.RaggedTensorToTensor,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,o=t.values,s=t.defaultValue,u=t.rowPartitionTensors,c=r.rowPartitionTypes,l=n.readSync(a.dataId),d=n.readSync(o.dataId),p=n.readSync(s.dataId),f=u.map((function(e){return n.readSync(e.dataId)})),h=u.map((function(e){return e.shape})),m=ny(l,a.shape,d,o.shape,o.dtype,p,s.shape,f,h,c),g=(0,i.Z)(m,2),v=g[0],y=g[1];return n.makeTensorInfo(v,o.dtype,y)}},tC=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,o=n.step,i=n.dtype,s=ry(r,a,o,i);return t.makeTensorInfo([s.length],i,s)},nC={kernelName:bc.Range,backendName:"webgl",kernelFunc:tC},rC=ub({opSnippet:"return 1.0 / x;"}),aC={kernelName:bc.Reciprocal,backendName:"webgl",kernelFunc:rC},oC=ub({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),iC={kernelName:bc.Relu,backendName:"webgl",kernelFunc:oC},sC=ub({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),uC={kernelName:bc.Relu6,backendName:"webgl",kernelFunc:sC},cC=(0,et.Z)((function e(t,n,r,a,o){(0,Je.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var s=(0,i.Z)(t,4),u=s[0],c=s[1],l=s[2],d=s[3];this.outputShape=[u,n,r,d];var p,f=[a&&n>1?c-1:c,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];p=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/h[0],",\n          ").concat(f[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),lC=(0,et.Z)((function e(t,n,r,a,o){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var s=(0,i.Z)(t,4),u=s[0],c=s[1],l=s[2],d=s[3];this.outputShape=[u,n,r,d];var p,f=[a&&n>1?c-1:c,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];p=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/h[0],",\n          ").concat(f[1]/h[1],",\n          ").concat(f[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(d-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var dC={kernelName:bc.ResizeBilinear,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,s=r.halfPixelCenters,u=r.size,c=(0,i.Z)(u,2),l=c[0],d=c[1],p=(0,bc.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new lC(a.shape,l,d,o,s):new cC(a.shape,l,d,o,s);return n.runWebGLProgram(p,[a],"float32")}},pC=(0,et.Z)((function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,i.Z)(n,3),o=a[1],s=a[2],u=(0,i.Z)(t,3),c=u[1],l=u[2],d=[r&&c>1?o-1:o,r&&l>1?s-1:s],p=[r&&c>1?c-1:c,r&&l>1?l-1:l],f=d[0]/p[0],h=d[1]/p[1],m=1/f,g=1/h,v=2*Math.ceil(m)+2,y=2*Math.ceil(g)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(m,");\n        const float invWidthScale = float(").concat(g,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(o-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(s-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var fC={kernelName:bc.ResizeBilinearGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new pC(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},hC=(0,et.Z)((function e(t,n,r,a,o){(0,Je.Z)(this,e),this.variableNames=["A"],this.outputShape=[];var s=(0,i.Z)(t,4),u=s[0],c=s[1],l=s[2],d=s[3];this.outputShape=[u,n,r,d];var p,f=[a&&n>1?c-1:c,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],m=a?"0.5":"0.0";p=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/h[0],",\n          ").concat(f[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(m,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),mC=(0,et.Z)((function e(t,n,r,a,o){(0,Je.Z)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var s=(0,i.Z)(t,4),u=s[0],c=s[1],l=s[2],d=s[3];this.outputShape=[u,n,r,d];var p,f=[a&&n>1?c-1:c,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],m=a?"0.5":"0.0";p=o?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/h[0],",\n          ").concat(f[1]/h[1],",\n          ").concat(f[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(m,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(d-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var gC={kernelName:bc.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,s=r.halfPixelCenters,u=r.size,c=(0,i.Z)(u,2),l=c[0],d=c[1],p=(0,bc.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new mC(a.shape,l,d,o,s):new hC(a.shape,l,d,o,s);return n.runWebGLProgram(p,[a],a.dtype)}},vC=(0,et.Z)((function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,i.Z)(n,3),o=a[1],s=a[2],u=(0,i.Z)(t,3),c=u[1],l=u[2],d=[r&&c>1?o-1:o,r&&l>1?s-1:s],p=[r&&c>1?c-1:c,r&&l>1?l-1:l],f=d[0]/p[0],h=d[1]/p[1],m=1/f,g=1/h,v=2*Math.ceil(m)+2,y=2*Math.ceil(g)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(m,");\n        const float invWidthScale = float(").concat(g,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(d[0],") *\n                (float(dyR) / float(").concat(p[0],"));\n\n            float sourceFracCol =\n                float(").concat(d[1],") *\n                  (float(dyC) / float(").concat(p[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(s,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var yC={kernelName:bc.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=t.dy,i=r.alignCorners,s=new vC(o.shape,a.shape,i);return n.runWebGLProgram(s,[o],o.dtype)}},bC=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),o=rv(r);this.userCode="\n      void main() {\n        ".concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),xC=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=Sy("rc",r),o="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),i="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=rv(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),o=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(o,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(o,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(o,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(o,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var kC={kernelName:bc.Reverse,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.dims,i=a.shape.length,s=bc.util.parseAxisParam(o,a.shape);if(0===i)return $y({inputs:{x:a},backend:n});var u=(0,bc.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xC(a.shape,s):new bC(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},wC=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var o="";o="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(o,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),SC={kernelName:bc.RotateWithOffset,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,o=n.radians,s=n.fillValue,u=n.center,c=r,l=new wC(a.shape,s),d=bc.backend_util.getImageCenter(u,a.shape[1],a.shape[2]),p=(0,i.Z)(d,2),f=[[p[0],p[1],Math.sin(o),Math.cos(o)]];return c.runWebGLProgram(l,[a],a.dtype,f)}},CC=ub({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),EC={kernelName:bc.Round,backendName:"webgl",kernelFunc:CC},TC=ub({opSnippet:"return inversesqrt(x);",cpuKernelImpl:ay}),NC={kernelName:bc.Rsqrt,backendName:"webgl",kernelFunc:TC},_C=(0,et.Z)((function e(t,n,r,a,o,i){(0,Je.Z)(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=rv(o.length),u=rv(i.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var p="getUpdates(".concat(d,")"),f=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(o,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(f,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(p,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var IC={kernelName:bc.ScatterNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,o=t.updates,i=r.shape,s=bc.backend_util.calculateShapes(o,a,i),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,p=s.outputSize,f=[p/l,l];if(0===p)return n.makeTensorInfo(i,a.dtype);var h=yb({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=yb({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),v=new _C(c,u,h.shape.length,m.shape.length,d,f),y=n.runWebGLProgram(v,[m,h,g],m.dtype),b=yb({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),b}},RC=(0,et.Z)((function e(t,n,r,a){(0,Je.Z)(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var o="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),i=2===(0,bc.env)().getNumber("WEBGL_VERSION")?"while (left < right) {":o,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(i,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var AC={kernelName:bc.SearchSorted,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,o=t.values,i=r.side,s=new RC(a.shape[0],a.shape[1],o.shape[1],i),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,o],"int32",u)}},OC=(0,et.Z)((function e(t,n,r){var a,o;if((0,Je.Z)(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)o="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(i[c])),c<t&&s.push("".concat(i[c]));a=s.join(),o=u.join()}var l=rv(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(o,"));\n        } else {\n          setOutput(getB(").concat(o,"));\n        }\n      }\n    ")}));var PC={kernelName:bc.Select,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,o=t.e,i=new OC(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(i,[r,a,o],(0,bc.upcastType)(a.dtype,o.dtype))}},DC=ub({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(bc.backend_util.SELU_SCALEALPHA,";\n  float scale = ").concat(bc.backend_util.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),LC={kernelName:bc.Selu,backendName:"webgl",kernelFunc:DC},MC=ub({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:iy}),FC={kernelName:bc.Sigmoid,backendName:"webgl",kernelFunc:MC},BC=ub({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),jC={kernelName:bc.Sign,backendName:"webgl",kernelFunc:BC},zC=ub({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),VC={kernelName:bc.Sin,backendName:"webgl",kernelFunc:zC},WC=ub({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),ZC={kernelName:bc.Sinh,backendName:"webgl",kernelFunc:WC},UC=ub({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),HC={kernelName:bc.Softplus,backendName:"webgl",kernelFunc:UC},GC={kernelName:bc.SpaceToBatchND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.blockShape,i=r.paddings;bc.util.assert(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,(0,Be.Z)(i));for(var c=1+o.length;c<a.shape.length;++c)u.push([0,0]);var l=[],d=XS({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),p=bc.backend_util.getReshaped(d.shape,o,s,!1),f=bc.backend_util.getPermuted(p.length,o.length,!1),h=bc.backend_util.getReshapedPermuted(d.shape,o,s,!1),m=yb({inputs:{x:d},backend:n,attrs:{shape:p}}),g=_b({inputs:{x:m},backend:n,attrs:{perm:f}}),v=yb({inputs:{x:g},backend:n,attrs:{shape:h}});return l.push(d),l.push(m),l.push(g),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}};var qC={kernelName:bc.SparseFillEmptyRows,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,o=t.denseShape,s=t.defaultValue;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));var u=n.readSync(r.dataId),c=n.readSync(a.dataId),l=n.readSync(o.dataId),d=n.readSync(s.dataId)[0],p=cy(u,r.shape,r.dtype,c,a.dtype,l,d),f=(0,i.Z)(p,5),h=f[0],m=f[1],g=f[2],v=f[3],y=f[4];return[n.makeTensorInfo(m,r.dtype,h),n.makeTensorInfo([m[0]],a.dtype,g),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}};var XC={kernelName:bc.SparseReshape,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,o=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));var s=Array.from(n.readSync(a.dataId)),u=n.readSync(r.dataId),c=Array.from(n.readSync(o.dataId)),l=ly(u,r.shape,r.dtype,s,c),d=(0,i.Z)(l,3),p=d[0],f=d[1],h=d[2];return[n.makeTensorInfo(f,r.dtype,p),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};var KC={kernelName:bc.SparseSegmentMean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=dy(s,r.shape,r.dtype,u,c,!0),d=(0,i.Z)(l,2),p=d[0],f=d[1];return n.makeTensorInfo(f,r.dtype,p)}};var YC={kernelName:bc.SparseSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,o=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(o.dataId),l=dy(s,r.shape,r.dtype,u,c),d=(0,i.Z)(l,2),p=d[0],f=d[1];return n.makeTensorInfo(f,r.dtype,p)}};var QC={kernelName:bc.SparseToDense,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,o=t.sparseValues,i=t.defaultValue,s=r.outputShape,u=bc.backend_util.calculateShapes(o,a,s),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,p=u.strides,f=u.outputSize;if("string"===o.dtype){var h=n.bufferSync(a),m=n.bufferSync(o),g=bc.util.decodeString(n.readSync(i.dataId)[0]),v=oy(h,m,s,f,d,l,c,p,g,false);return n.makeTensorInfo(s,v.dtype,v.values)}var y=new _C(l,c,a.shape.length,o.shape.length,p,[f,1],false),b=n.runWebGLProgram(y,[o,a,i],o.dtype),x=yb({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}};var $C={kernelName:bc.SplitV,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.numOrSizeSplits,i=r.axis,s=bc.util.parseAxisParam(i,a.shape)[0],u=bc.backend_util.prepareSplitSize(a,o,s),c=a.shape.length,l=new Array(c).fill(0),d=a.shape.slice();return u.map((function(e){var t=(0,Be.Z)(d);t[s]=e;var r=Cx({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r}))}},JC="return sqrt(x);",eE=ub({opSnippet:JC,packedOpSnippet:JC,cpuKernelImpl:py}),tE={kernelName:bc.Sqrt,backendName:"webgl",kernelFunc:eE},nE=ub({opSnippet:"return x * x;"}),rE={kernelName:bc.Square,backendName:"webgl",kernelFunc:nE},aE="return (a - b) * (a - b);",oE=cb({opSnippet:aE,packedOpSnippet:aE}),iE={kernelName:bc.SquaredDifference,backendName:"webgl",kernelFunc:oE};var sE={kernelName:bc.Step,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=Ay+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),i=new Ry(a.shape,o);return r.runWebGLProgram(i,[a],a.dtype)}},uE=(0,et.Z)((function e(t,n,r){(0,Je.Z)(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,o=rv(r.length),i=rv(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(o," begin = ").concat(o,"(").concat(t,");\n      ").concat(o," strides = ").concat(o,"(").concat(n,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var cE={kernelName:bc.StridedSlice,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,o=n.x,i=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,p=a.newAxisMask,f=a.shrinkAxisMask,h=bc.slice_util.sliceInfo(o.shape,i,s,u,c,l,d,p,f),m=h.finalShapeSparse,g=h.finalShape,v=h.isIdentity,y=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,k=h.end,w=h.strides;if(v)t=yb({inputs:{x:o},backend:r,attrs:{shape:g}});else if(y||b){bc.util.assert(o.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(o.shape.length)}));var S=bc.slice_util.computeOutShape(x,k,w),C=Cx({inputs:{x:o},backend:r,attrs:{begin:x,size:S}});t=yb({inputs:{x:C},backend:r,attrs:{shape:g}}),r.disposeIntermediateTensorInfo(C)}else{if(r.shouldExecuteOnCPU([o])){var E=r.readSync(o.dataId),T=(0,bc.buffer)(o.shape,o.dtype,E),N=fy(m,T,w,x);t=r.makeTensorInfo(g,o.dtype,N.values)}else{var _=new uE(x,w,m);t=r.runWebGLProgram(_,[o],o.dtype)}}var I=yb({inputs:{x:t},backend:r,attrs:{shape:g}});return r.disposeIntermediateTensorInfo(t),I}};var lE={kernelName:bc.StringNGrams,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,o=r.nGramWidths,s=r.leftPad,u=r.rightPad,c=r.padWidth,l=r.preserveShortSequences,d=t.data,p=t.dataSplits,f=n.readSync(d.dataId),h=n.readSync(p.dataId),m=hy(f,h,a,o,s,u,c,l),g=(0,i.Z)(m,2),v=g[0],y=g[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(p.shape,"int32",y)]}};var dE={kernelName:bc.StringSplit,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,o=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==o.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(o.shape));var s=n.readSync(a.dataId),u=n.readSync(o.dataId)[0],c=my(s,u,r),l=(0,i.Z)(c,3),d=l[0],p=l[1],f=l[2],h=p.length;return[n.makeTensorInfo([h,2],"int32",d),n.makeTensorInfo([h],"string",p),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};var pE={kernelName:bc.StringToHashBucketFast,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var o=n.readSync(a.dataId),i=gy(o,r);return n.makeTensorInfo(a.shape,"int32",i)}},fE=ub({opSnippet:"return tan(x);"}),hE={kernelName:bc.Tan,backendName:"webgl",kernelFunc:fE},mE=ub({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),gE={kernelName:bc.Tanh,backendName:"webgl",kernelFunc:mE},vE=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var o=rv(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        setOutput(getA(").concat(i,"));\n      }\n    ")}));function yE(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.reps;if("string"===a.dtype||a.shape.length>5){var i=n.readSync(a.dataId),s="string"===a.dtype?i.map((function(e){return bc.util.decodeString(e)})):i,u=(0,bc.buffer)(a.shape,a.dtype,s),c=yy(u,o);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new vE(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}var bE={kernelName:bc.Tile,backendName:"webgl",kernelFunc:yE},xE=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),kE=(0,et.Z)((function e(t){(0,Je.Z)(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function wE(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function SE(e){for(var t=1;t<e;)t*=2;return t}var CE={kernelName:bc.TopK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,s=r.sorted,u=(0,bc.env)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=(0,bc.env)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=a.shape,d=l[l.length-1];if(n.shouldExecuteOnCPU([a])||d<u||o>c){var p=n.readSync(a.dataId),f=by(p,l,a.dtype,o,s),h=(0,i.Z)(f,2),m=h[0],g=h[1];return[n.makeTensorInfo(m.shape,m.dtype,m.values),n.makeTensorInfo(g.shape,g.dtype,g.values)]}if(0===o)return l[l.length-1]=0,[n.makeTensorInfo(l,a.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===d)return[a,iw({attrs:{shape:l,dtype:"int32",value:0},backend:n})];var v=n.texData.get(a.dataId),y=null!==v&&v.isPacked,b=y?n.unpackTensor(a):a,x=bc.util.sizeFromShape(l)/d,k=yb({inputs:{x:b},attrs:{shape:[x,d]},backend:n});y&&wE(n,b);for(var w=SE(o),S=SE(d),C=null,E=function(){return null===C?[k,k]:[k,C]},T=function(e,t,r){var a=E(),o=new xE(r),i=[[d],[null===C?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=C;C=n.runWebGLProgram(o,a,"int32",i),wE(n,s)},N=1;N<w;N*=2)for(var _=2*N,I=N;I>=1;I/=2)T(_,I,[x,S]);for(var R=S;R>w;R/=2){var A=E(),O=new kE([x,R/2]),P=[[d],[null===C?1:0],[w]],D=C;C=n.runWebGLProgram(O,A,"int32",P),wE(n,D);for(var L=w/2,M=2*L,F=L;F>=1;F/=2)T(M,F,C.shape)}var B=C;C=Cx({inputs:{x:C},backend:n,attrs:{begin:0,size:[x,o]}}),wE(n,B);var j=Ew({inputs:{x:k,indices:C},backend:n,attrs:{axis:1,batchDims:1}});wE(n,k);var z=l.slice(0,-1);z.push(o),B=C,C=yb({inputs:{x:C},attrs:{shape:z},backend:n}),wE(n,B);var V=j;return j=yb({inputs:{x:j},attrs:{shape:z},backend:n}),wE(n,V),[j,C]}},EE=(0,et.Z)((function e(t,n,r,a,o,i){(0,Je.Z)(this,e),this.variableNames=["Image","Transforms"],this.outputShape=i;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(o,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(o,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var TE={kernelName:bc.Transform,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,o=t.transforms,s=r.interpolation,u=r.fillMode,c=r.fillValue,l=r.outputShape,d=(0,i.Z)(a.shape,4),p=d[0],f=d[1],h=d[2],m=d[3],g=null!=l?l:[f,h],v=(0,i.Z)(g,2),y=v[0],b=v[1],x=new EE(f,h,s,u,c,[p,y,b,m]);return n.runWebGLProgram(x,[a,o],"float32")}};var NE={kernelName:bc.Unique,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,o=t.x;Rg(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var i=r.readSync(o.dataId),s=ky(i,a,o.shape,o.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,o.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var _E={kernelName:bc.Unpack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,o=r.axis;o<0&&(o+=a.shape.length);for(var i=a,s=i.shape.length,u=a.shape[o],c=new Array(s-1),l=0,d=0;d<s;d++)d!==o&&(c[l++]=i.shape[d]);var p=[],f=new Array(s).fill(0),h=i.shape.slice();h[o]=1;for(var m=new Array(u),g=0;g<m.length;g++){f[o]=g;var v=Cx({inputs:{x:i},backend:n,attrs:{begin:f,size:h}}),y=yb({inputs:{x:v},backend:n,attrs:{shape:c}});m[g]=y,p.push(v)}return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},IE=(0,et.Z)((function e(t,n){(0,Je.Z)(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,o=t.inSize,i=t.numSegments,s=i*Math.ceil(o/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return initializationValue;\n        }\n      "));var p="";o%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(p,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var RE={kernelName:bc.UnsortedSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=t.segmentIds,i=r.numSegments,s=a.shape.length,u=[],c=0,l=bc.backend_util.getAxesPermutation([c],s),d=a;null!=l&&(d=_b({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(d),c=bc.backend_util.getInnerMostAxes(1,s)[0]);var p=bc.backend_util.segment_util.computeOutShape(d.shape,c,i),f=bc.util.sizeFromShape([d.shape[c]]),h=yb({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});u.push(h);var m=function e(t,r,a,o,i){var s=t.shape[0],c=t.shape[1],l=bc.backend_util.segment_util.segOpComputeOptimalWindowSize(c,i),d=new IE({windowSize:l,inSize:c,batchSize:s,numSegments:i},r),p=n.compileAndRun(d,[t,a],o);if(u.push(p),p.shape[1]===i)return p;var f=tC({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),h=yE({inputs:{x:f},backend:n,attrs:{reps:[c/l]}});return u.push(f),u.push(h),e(p,r,h,o,i)}(h,"unsortedSegmentSum",o,(0,bc.sumOutType)(a.dtype),i),g=yb({inputs:{x:m},backend:n,attrs:{shape:p}}),v=g;if(null!=l){u.push(g);var y=bc.backend_util.getUndoAxesPermutation(l);v=_b({inputs:{x:v},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},AE=0,OE=[Ab,Pb,Lb,Fb,zb,Zb,Ub,Hb,Qb,$b,ex,nx,ax,ix,ux,dx,px,mx,gx,vx,xx,Tx,Nx,_x,Px,Mx,jx,tb,Wx,Yx,ak,ck,lk,dk,pk,hk,gk,yk,xk,Ek,Tk,Nk,Ik,Ok,Lk,Mk,Bk,zk,Vk,Zk,Uk,Gk,Xk,Yk,$k,tw,aw,uw,lw,fw,mw,yw,xw,kw,Sw,Tw,_w,Rw,Jy,Aw,qx,Pw,Lw,Fw,ab,jw,Vw,Ww,Uw,Gw,Xw,Yw,$w,tS,rS,oS,sS,uS,cS,pS,fS,hS,mS,gS,yS,kS,SS,OS,vb,PS,LS,FS,jS,Rx,VS,US,HS,KS,QS,sb,$S,JS,eC,nC,Ox,TS,aC,iC,uC,bb,dC,fC,gC,yC,kC,SC,EC,NC,IC,AC,PC,LC,FC,jC,VC,ZC,Ex,AS,HC,GC,qC,XC,KC,YC,QC,$C,tE,rE,iE,sE,cE,lE,dE,pE,IS,Nb,hE,gE,bE,CE,TE,Ib,NE,_E,RE,ZS];AE<OE.length;AE++){var PE=OE[AE];(0,bc.registerKernel)(PE)}var DE,LE,ME,FE,BE,jE,zE,VE=n(2593),WE=Hr()+":3500",ZE=function(e){var n=e.setStream,r=e.setVideo,a=(0,t.useRef)(null),o=(0,t.useState)("JOIN"),s=(0,i.Z)(o,2),u=s[0],c=s[1],l=(0,t.useRef)(null),d=(0,t.useRef)(null);function p(e){console.log("gotRemoteStream: "),console.log(e),console.log("pc2 received remote stream"),a.current&&(a.current.srcObject=e.streams[0],n(e.streams[0]),r(a.current))}function f(){return(f=(0,qe.Z)($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return LE.setRemoteDescription(new RTCSessionDescription(d.current)),e.next=3,LE.createAnswer();case 3:return t=e.sent,e.next=6,LE.setLocalDescription(t);case 6:h({callerId:l.current,rtcMessage:t});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){DE.emit("answerCall",e)}return(0,t.useEffect)((function(){return LE=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]}),WE=Hr()+":3500",(DE=Fr(WE,{transports:["websocket"],query:{callerId:"27099634"}})).on("newCall",(function(e){d.current=e.rtcMessage,l.current=e.callerId,c("INCOMING_CALL")})),DE.on("callAnswered",(function(e){d.current=e.rtcMessage,LE.setRemoteDescription(new RTCSessionDescription(d.current)),c("WEBRTC_ROOM")})),DE.on("ICEcandidate",(function(e){var t=e.rtcMessage;LE&&LE.addIceCandidate(new RTCIceCandidate({candidate:t.candidate,sdpMid:t.id,sdpMLineIndex:t.label})).then((function(e){console.log("SUCCESS")})).catch((function(e){console.log("Error",e)}))})),LE.addEventListener("track",p),LE.onicecandidate=function(e){var t;e.candidate?(t={calleeId:l.current,rtcMessage:{label:e.candidate.sdpMLineIndex,id:e.candidate.sdpMid,candidate:e.candidate.candidate}},DE.emit("ICEcandidate",t)):console.log("End of candidates.")},function(){DE.off("newCall"),DE.off("callAnswered"),DE.off("ICEcandidate"),n(null)}}),[]),(0,t.useEffect)((function(){"INCOMING_CALL"===u&&(!function(){f.apply(this,arguments)}(),c("WEBRTC_ROOM"))}),[u]),(0,We.jsx)(We.Fragment,{children:(0,We.jsx)("video",{id:"remotevideo",style:{width:1280,height:720,backgroundColor:"black"},ref:a,autoPlay:!0})})},UE=function(e){var t=e.children;return(0,We.jsx)(We.Fragment,{children:bn({children:t,autoPlay:!0,lang:"kr",volume:1}).ttsChildren})},HE=new Map,GE=0,qE=0,XE=!1,KE=null,YE=function(e){var n=e.active,r=e.appLayout,a=t.useState(null),o=(0,i.Z)(a,2),s=o[0],u=o[1],c=t.useState(null),l=(0,i.Z)(c,2),d=l[0],p=l[1],f=t.useState(null),h=(0,i.Z)(f,2),m=h[0],g=h[1],v=t.useCallback((function(){var e=function(){var e=d.videoWidth,t=d.videoHeight,n=document.createElement("canvas");return n.width=e,n.height=t,n.getContext("2d").drawImage(d,0,0,e,t),n}();g(e.toDataURL())}),[s,g]);var y=t.useRef(null),b=t.useState(!1),x=(0,i.Z)(b,2),k=x[0],w=x[1],S=t.useState([]),C=(0,i.Z)(S,2),E=C[0],T=C[1],N=t.useCallback((function(){w(!0),y.current=new MediaRecorder(s,{mimeType:"video/webm"}),y.current.addEventListener("dataavailable",_),y.current.start()}),[s,w,y]),_=t.useCallback((function(e){var t=e.data;t.size>0&&T((function(e){var n=e.concat(t);return KE=n,n}))}),[T]),I=t.useCallback((function(){y.current.stop(),w(!1)}),[y,s,w]),R=t.useCallback((function(){if(E.length){var e=new Blob(E,{type:"video/mp4"}),t=URL.createObjectURL(e),n=document.createElement("a");document.body.appendChild(n),n.style="display: none",n.href=t;var r=(new Date).toLocaleDateString(),a=(new Date).toLocaleTimeString();n.download="vid_"+r+"_"+a+".mp4",n.click(),window.URL.revokeObjectURL(t),T([])}}),[E]),A=t.useCallback((function(){if(null!=m){var e=m,t=document.createElement("a");document.body.appendChild(t),t.style="display: none",t.href=e;var n=(new Date).toLocaleDateString(),r=(new Date).toLocaleTimeString();t.download="img_"+n+"_"+r+".jpg",t.click(),window.URL.revokeObjectURL(e),g(null)}}),[m]),O=t.useState(!1),P=(0,i.Z)(O,2),D=P[0],L=P[1],M=t.useState(null),F=(0,i.Z)(M,2),B=F[0],j=F[1],z=t.useState(null),V=(0,i.Z)(z,2),W=V[0],Z=V[1],U=t.useState(null),H=(0,i.Z)(U,2),G=H[0],q=H[1],X=t.useRef(null),K=[];function Y(){if(++GE>=25&&(GE=0,HE.clear()),!s||!d)return clearInterval(W),void Z(null);B.detect(d).then((function(e){if(X.current)for(var t=0;t<K.length;t++)X.current.removeChild(K[t]);K.splice(0);for(var n=!1,r=0;r<e.length;r++)if(e[r].score>.66){var a=document.createElement("p");a.innerText=e[r].class+" - with "+Math.round(100*parseFloat(e[r].score))+"% confidence.",a.style="margin-left: "+e[r].bbox[0]+"px; margin-top: "+(e[r].bbox[1]-10)+"px; width: "+(e[r].bbox[2]-10)+"px; top: 0; left: 0;";var o=document.createElement("div");o.setAttribute("class","highlighter"),o.style="left: "+e[r].bbox[0]+"px; top: "+e[r].bbox[1]+"px; width: "+e[r].bbox[2]+"px; height: "+e[r].bbox[3]+"px;",X.current.appendChild(o),X.current.appendChild(a),K.push(o),K.push(a),"person"===e[r].class&&(n=!0)}n?(qE>0?XE||(XE=!0,N()):XE&&(XE=!1,I()),5e3===(qE+=200)&&(q("\uc774 \ucc28\ub294 \uacbd\uacc4 \uc911\uc785\ub2c8\ub2e4. \uc601\uc0c1\uc774 \ucd2c\uc601\ub418\uace0 \uc788\uc2b5\ub2c8\ub2e4."),setTimeout((function(){q(null),qE=0,I(),XE=!1}),1e4),setTimeout((function(){!function(){if(KE.length){var e=new Blob(KE,{type:"video/mp4"}),t=URL.createObjectURL(e),n=document.createElement("a");document.body.appendChild(n),n.style="display: none",n.href=t;var r=(new Date).toLocaleDateString(),a=(new Date).toLocaleTimeString();n.download="vid_ai_"+r+"_"+a+".mp4",n.click(),window.URL.revokeObjectURL(t),T([])}}()}),10100))):qE>0&&(qE-=200)}))}return t.useEffect((function(){return VE.load().then((function(e){j(e)})),function(){null!=W&&clearInterval(W)}}),[]),t.useEffect((function(){if(W){if(!s||!D){if(X.current)for(var e=0;e<K.length;e++)X.current.removeChild(K[e]);K.splice(0),clearInterval(W),Z(null)}}else if(B&&s&&D){var t=setInterval(Y,200);Z(t),qE=0}}),[B,W,D]),(0,We.jsx)(QE,{appLayout:r,children:n&&(0,We.jsxs)("div",{className:"camView",ref:X,children:[(0,We.jsx)(ZE,{setStream:u,setVideo:p}),G&&(0,We.jsx)("div",{style:{display:"none"},children:(0,We.jsx)(UE,{children:(0,We.jsx)("p",{children:G})})}),s&&d&&(0,We.jsxs)("div",{className:"control-buttons",children:[(0,We.jsxs)(gu,{tabClass:"tabs2",children:[(0,We.jsx)("li",{onClick:function(){return L(!1)},className:"active",children:"Camera"}),(0,We.jsx)("li",{onClick:function(){return L(!0)},children:"Sentry"})]}),!D&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("button",{onClick:v,className:"btn-deco",children:"Capture photo"}),k?(0,We.jsx)("button",{onClick:I,className:"btn-deco",children:"Stop recording"}):(0,We.jsx)("button",{onClick:N,className:"btn-deco",children:"Start recording"}),m&&(0,We.jsx)("button",{onClick:A,className:"btn-deco",children:"Download"}),!m&&E.length>0&&(0,We.jsx)("button",{onClick:R,className:"btn-deco",children:"Download"})]})]})]})})},QE=Fe.div(ME||(ME=a(["\n    background: #eeeeee;\n    color: #6f6f6f;\n    height: ",'px;\n    width: "100%";\n    position: relative;\n    z-index: 2;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    .control-buttons {\n        position: absolute;\n        z-index: 10;\n        left: 0;\n        bottom: 0;\n        width: 100%;\n        height: 52px;\n        display: flex;\n        flex-direction: row;\n        gap: 32px;\n        padding: 0px 32px;\n        \n        .btn-deco {\n            border: 1px solid #6F6F6F;\n            //padding: 6px 6px;\n            background-color: gray;\n            border-radius: 8px;\n            color: white;\n            text-transform: uppercase;\n            font-size: 1.0rem;\n            width: 200px;\n            height: 36px;\n        }\n    }\n\n    .removed {\n        display: none;\n    }\n      \n    .invisible {\n        opacity: 0.2;\n    }\n      \n    .camView {\n        width: 1280px;\n        height: 720px;\n        position: relative;\n    }\n      \n    .camView p {\n        position: absolute;\n        padding: 5px;\n        background-color: rgba(255, 111, 0, 0.85);\n        color: #FFF;\n        border: 1px dashed rgba(255, 255, 255, 0.7);\n        z-index: 2;\n        font-size: 12px;\n    }\n      \n    .highlighter {\n        background: rgba(0, 255, 0, 0.25);\n        border: 1px dashed #fff;\n        z-index: 1;\n        position: absolute;\n    }\n'])),(function(e){return e.appLayout.appExpandHeight})),$E=!1,JE=function(e){var n=e.signalName,r=e.temperature,a=(0,t.useState)(null),o=(0,i.Z)(a,2),s=o[0],u=o[1];function c(e,t){return"up"===t?14.5===e?15:141===e?141:e>=15&&e<=31.5?e+.5:32===e?141:25:14.5===e?14.5:141===e?32:e>=15.5&&e<=32?e-.5:15===e?14.5:25}return(0,t.useEffect)((function(){return setTimeout((function(){Vr(n,25)}),500),function(){null!=s&&clearInterval(s)}}),[]),(0,We.jsxs)(eT,{count:r,children:[(0,We.jsx)("button",{onClick:function(){if(null!=s&&(clearInterval(s),u(null),$E))$E=!1;else{var e=c(r,"down");Vr(n,e)}},onMouseDown:function(){$E=!1,BE=r;var e=setInterval((function(){$E=!0,BE=c(BE,"down"),Vr(n,BE)}),250);u(e)},className:"decrease"}),(0,We.jsxs)("div",{className:"counter",id:n,children:[(0,We.jsx)("span",{className:"value",children:r>=15&&r<=32?Number(r).toFixed(1).substring(0,2):14.5===r?"LO":141===r?"HI":"--"}),(0,We.jsx)("span",{className:"fraction",children:r>=15&&r<=32?Number(r).toFixed(1).substring(2):null})]}),(0,We.jsx)("button",{onClick:function(){if(null!=s&&(clearInterval(s),u(null),$E))$E=!1;else{var e=c(r,"up");Vr(n,e)}},onMouseDown:function(){$E=!1,BE=r;var e=setInterval((function(){$E=!0,BE=c(BE,"up"),Vr(n,BE)}),250);u(e)},className:"increase"})]})},eT=Fe.div(FE||(FE=a(['\n\tcolor: #ffffff;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\t//gap: 12px;\n\tflex-direction: row;\n\talign-items: center;\n\twidth: 176px;\n\n\t.counter {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 80px;\n\t\theight: 60px;\n\t\t.value {\n\t\t\tfont-size: 36px;\n\t\t\tfont-weight: 500;\n\t\t}\n\t\t.fraction {\n\t\t\tfont-size: 28px;\n\t\t\tfont-weight: 500;\n\t\t}\n\t\t.degree {\n\t\t\tfont-size: 36px;\n\t\t\tfont-weight: 300;\n\t\t}\n\t}\n\n\tbutton {\n\t\tborder: 0;\n\t\twidth: 48px;\n\t\theight: 60px;\n\t\tbackground-position: center;\n\t\tbackground-repeat: no-repeat;\n\t\tposition: center;\n\t\tbackground-repeat: no-repeat;\n\t\tcursor: pointer;\n\t}\n\n\tbutton.increase {\n\t\tbackground: url("./images/right-white.png");\n\t\tbackground-position: center;\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-size: 24px 24px;\n\t}\n\n\tbutton.decrease {\n\t\tbackground: url("./images/left-white.png");\n\t\tbackground-position: center;\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-size: 24px 24px;\n\t}\n']))),tT=JSON.parse('{"x":{"jW":{"Ss":{"RlF":{"u2":"CLU_DisSpdVal"},"LhW":{"u2":"CLU_EVDTEDisp"}},"X$":{"flF":{"u2":"DATC_AUTOActv"},"HiR":{"u2":"DATC_AcDis"}}},"Oh":{"x5":{"JFA":{"u2":"C_HazardFromCCS"},"Gy1":{"u2":"HU_DATC_DrTempSetC"},"wHI":{"u2":"HU_DATC_PsTempSetC"}}},"cg":{"fr":{"o4f":{"u2":"VCU_GearPosSta"}}}}}'),nT="#2979FF",rT="#6F6F6F",aT=function(){var e="dashboard2/climate";function n(){Zr({signals:[{name:tT.x.jW.X$.flF.u2},{name:tT.x.jW.X$.HiR.u2}],channel:e},(function(e){var t,n=(0,o.Z)(e.signals);try{for(n.s();!(t=n.n()).done;){var r=t.value;"DATC_AUTOActv"===r.name?1===r.value?x(!0):x(!1):"DATC_AcDis"===r.name&&(1===r.value?g(!0):g(!1))}}catch(lT){n.e(lT)}finally{n.f()}}))}(0,t.useEffect)((function(){return setTimeout(n,500),function(){Ur({channel:e})}}),[]);var r=(0,t.useState)(!0),a=(0,i.Z)(r,2),s=a[0],u=a[1],c=(0,t.useState)(!1),l=(0,i.Z)(c,2),d=l[0],p=l[1],f=(0,t.useState)(!1),h=(0,i.Z)(f,2),m=h[0],g=h[1],v=(0,t.useState)(!1),y=(0,i.Z)(v,2),b=y[0],x=y[1],k=(0,t.useState)(!1),w=(0,i.Z)(k,2),S=w[0],C=w[1],E=(0,t.useState)(!1),T=(0,i.Z)(E,2),N=T[0],_=T[1],I=(0,t.useState)(!1),R=(0,i.Z)(I,2),A=R[0],O=R[1],P=(0,t.useState)(!1),D=(0,i.Z)(P,2),L=D[0],M=D[1],F=(0,t.useState)(!1),B=(0,i.Z)(F,2),j=B[0],z=B[1],V=(0,t.useState)(!1),W=(0,i.Z)(V,2),Z=W[0],U=W[1],H=(0,t.useState)(!1),G=(0,i.Z)(H,2),q=G[0],X=G[1],K=(0,t.useState)(!1),Y=(0,i.Z)(K,2),Q=Y[0],$=Y[1],J=(0,t.useState)(!1),ee=(0,i.Z)(J,2),te=ee[0],ne=ee[1],re=(0,t.useState)(!1),ae=(0,i.Z)(re,2),oe=ae[0],ie=ae[1],se=(0,t.useState)(!1),ue=(0,i.Z)(se,2),ce=ue[0],le=ue[1],de=(0,t.useState)(!1),pe=(0,i.Z)(de,2),fe=pe[0],he=pe[1];return(0,We.jsxs)("div",{style:oT.container,children:[(0,We.jsxs)("div",{style:oT.leftPane,children:[(0,We.jsx)("div",{onClick:function(){s||(u(!s),p(s))},style:{display:"flex",height:"50%",justifyContent:"center",alignItems:"center",borderRadius:8,backgroundColor:s?"#bbbbbb":"#eeeeee"},children:(0,We.jsx)("span",{style:{fontSize:20,fontWeight:"900"},children:"Front"})}),(0,We.jsx)("div",{onClick:function(){d||(p(!d),u(d))},style:{display:"flex",height:"50%",justifyContent:"center",alignItems:"center",borderRadius:8,backgroundColor:d?"#bbbbbb":"#eeeeee"},children:(0,We.jsx)("span",{style:{fontSize:20,fontWeight:"900"},children:"Rear"})})]}),(0,We.jsxs)("div",{style:oT.rightPane,children:[(0,We.jsxs)("div",{style:oT.firstRow,children:[(0,We.jsxs)("div",{style:{width:"20%",display:"flex",flexDirection:"row",padding:16,justifyContent:"flex-start"},children:[(0,We.jsx)("div",{onClick:function(){var e=!m;g(e),Wr({signals:[{name:"DATC_AcDis",value:e?1:0}]})},style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderStyle:"solid",borderColor:"darkgray",borderTopLeftRadius:8,borderBottomLeftRadius:8,backgroundColor:m?nT:"#eeeeee"},children:(0,We.jsx)("img",{src:m?"./climate/power-active.png":"./climate/power.png",alt:"",style:{width:40,height:40}})}),(0,We.jsx)("div",{onClick:function(){var e=!b;x(e),Wr(e?{signals:[{name:"DATC_AUTOActv",value:1},{name:"DATC_DrvAutoDis",value:1},{name:"DATC_PsAutoDis",value:1}]}:{signals:[{name:"DATC_AUTOActv",value:0},{name:"DATC_DrvAutoDis",value:0},{name:"DATC_PsAutoDis",value:0}]})},style:{display:"flex",width:100,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderLeftWidth:0,borderStyle:"solid",borderColor:"darkgray",borderTopRightRadius:8,borderBottomRightRadius:8,backgroundColor:b?nT:"#eeeeee"},children:(0,We.jsx)("span",{style:{color:b?"white":rT,fontSize:20,fontWeight:"900"},children:"Auto"})})]}),(0,We.jsxs)("div",{style:{width:"60%",display:"flex",flexDirection:"row",padding:16,justifyContent:"center"},children:[(0,We.jsx)("div",{onClick:function(){C(!S)},style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderStyle:"solid",borderColor:"darkgray",borderTopLeftRadius:8,borderBottomLeftRadius:8},children:(0,We.jsx)("img",{src:S?"./climate/car-aircon-icon-active.png":"./climate/car-aircon-icon.png",alt:"",style:{width:40,height:40}})}),(0,We.jsx)("div",{onClick:function(){_(!N)},style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderLeftWidth:0,borderStyle:"solid",borderColor:"darkgray",borderTopRightRadius:8,borderBottomRightRadius:8},children:(0,We.jsx)("img",{src:N?"./climate/car-heater-icon-active.png":"./climate/car-heater-icon.png",alt:"",style:{width:48,height:48}})}),(0,We.jsx)("div",{style:{width:16}}),(0,We.jsx)("div",{onClick:function(){O(!A)},style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderRadius:8,borderStyle:"solid",borderColor:"darkgray",backgroundColor:A?nT:"#eeeeee"},children:(0,We.jsx)("span",{style:{color:A?"white":rT,fontSize:20,fontWeight:"900"},children:"A/C"})}),(0,We.jsx)("div",{style:{width:16}}),(0,We.jsxs)("div",{style:{width:256,height:80,borderWidth:2,borderStyle:"solid",borderColor:"darkgray",borderRadius:8,display:"flex",flexDirection:"row",gap:16,justifyContent:"center",alignItems:"center"},children:[(0,We.jsx)("img",{src:"./climate/fan.png",alt:"",style:{width:36,height:36}}),(0,We.jsx)("span",{style:{fontSize:32,fontWeight:"900"},children:"5"}),(0,We.jsx)("span",{style:{fontSize:20,fontWeight:"900"},children:"----O--------"})]}),(0,We.jsx)("div",{style:{width:16}}),(0,We.jsx)("div",{style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderRadius:8,borderStyle:"solid",borderColor:"darkgray"},children:(0,We.jsx)("img",{src:"./climate/arrow-loop.png",alt:"",style:{width:40,height:40}})}),(0,We.jsx)("div",{style:{width:16}}),(0,We.jsx)("div",{style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderRadius:8,borderStyle:"solid",borderColor:"darkgray"},children:(0,We.jsx)("span",{style:{fontSize:20,fontWeight:"900"},children:"HEPA"})})]}),(0,We.jsx)("div",{style:{width:"20%",display:"flex",flexDirection:"row",padding:16,justifyContent:"flex-end"},children:(0,We.jsx)("div",{style:{backgroundColor:"#eeeeee",display:"flex",width:200,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderRadius:8,borderStyle:"solid",borderColor:"darkgray"},onClick:function(){},children:(0,We.jsx)("span",{style:{fontSize:20,fontWeight:"900"},children:"Schedule"})})})]}),(0,We.jsxs)("div",{style:oT.secondRow,children:[(0,We.jsxs)("div",{style:{width:"10%",display:"flex",flexDirection:"column",padding:16,justifyContent:"center",alignItems:"flex-start"},children:[(0,We.jsx)("div",{onClick:function(){M(!L),L||(z(!1),U(!1))},style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderStyle:"solid",borderColor:"darkgray",borderTopLeftRadius:8,borderTopRightRadius:8,backgroundColor:L?nT:"#eeeeee"},children:(0,We.jsx)("img",{src:L?"./climate/ventilation-face-active.png":"./climate/ventilation-face.png",alt:"",style:{width:40,height:40}})}),(0,We.jsx)("div",{onClick:function(){z(!j),j||(M(!1),U(!1))},style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderTopWidth:0,borderBottomWidth:0,borderStyle:"solid",borderColor:"darkgray",backgroundColor:j?nT:"#eeeeee"},children:(0,We.jsx)("img",{src:j?"./climate/ventilation-both-active.png":"./climate/ventilation-both.png",alt:"",style:{width:40,height:40}})}),(0,We.jsx)("div",{onClick:function(){U(!Z),Z||(M(!1),z(!1))},style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderStyle:"solid",borderColor:"darkgray",borderBottomLeftRadius:8,borderBottomRightRadius:8,backgroundColor:Z?nT:"#eeeeee"},children:(0,We.jsx)("img",{src:Z?"./climate/ventilation-leg-active.png":"./climate/ventilation-leg.png",alt:"",style:{width:40,height:40}})})]}),(0,We.jsx)("div",{style:{display:"flex",width:"80%",justifyContent:"center",alignItems:"center"},children:(0,We.jsx)("img",{src:"./climate/ClimateControl.png",alt:"",style:{width:760,height:337}})}),(0,We.jsxs)("div",{style:{width:"10%",display:"flex",flexDirection:"column",padding:16,justifyContent:"center",alignItems:"flex-end"},children:[(0,We.jsx)("div",{style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderStyle:"solid",borderColor:"darkgray",borderTopLeftRadius:8,borderTopRightRadius:8},children:(0,We.jsx)("span",{style:{fontSize:16,fontWeight:"700"},children:"Keep"})}),(0,We.jsx)("div",{style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderTopWidth:0,borderBottomWidth:0,borderStyle:"solid",borderColor:"darkgray"},children:(0,We.jsx)("span",{style:{fontSize:16,fontWeight:"700"},children:"Dog"})}),(0,We.jsx)("div",{style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderStyle:"solid",borderColor:"darkgray",borderBottomLeftRadius:8,borderBottomRightRadius:8},children:(0,We.jsx)("span",{style:{fontSize:16,fontWeight:"700"},children:"Camp"})})]})]}),(0,We.jsxs)("div",{style:oT.thirdRow,children:[(0,We.jsxs)("div",{style:{width:"33%",display:"flex",flexDirection:"row",padding:16,justifyContent:"flex-start",alignItems:"center"},children:[(0,We.jsx)("div",{onClick:function(){X(!q)},style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderTopLeftRadius:8,borderBottomLeftRadius:8,borderStyle:"solid",borderColor:"darkgray"},children:(0,We.jsx)("img",{src:q?"./climate/car-seat-left-active.png":"./climate/car-seat-left.png",alt:"",style:{width:40,height:40}})}),(0,We.jsx)("div",{onClick:function(){$(!Q)},style:{display:"flex",width:100,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderLeftWidth:0,borderTopRightRadius:8,borderBottomRightRadius:8,borderStyle:"solid",borderColor:"darkgray",backgroundColor:Q?nT:"#eeeeee"},children:(0,We.jsx)("span",{style:{color:Q?"white":rT,fontSize:20,fontWeight:"900"},children:"Auto"})})]}),(0,We.jsxs)("div",{style:{width:"34%",display:"flex",flexDirection:"row",padding:16,justifyContent:"center",alignItems:"center"},children:[(0,We.jsx)("div",{onClick:function(){le(!ce)},style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderTopLeftRadius:8,borderBottomLeftRadius:8,borderStyle:"solid",borderColor:"darkgray"},children:(0,We.jsx)("img",{src:ce?"./climate/steering_wheel_heated_active.png":"./climate/steering_wheel_heated.png",alt:"",style:{width:40,height:40}})}),(0,We.jsx)("div",{onClick:function(){he(!fe)},style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderLeftWidth:0,borderTopRightRadius:8,borderBottomRightRadius:8,borderStyle:"solid",borderColor:"darkgray"},children:(0,We.jsx)("img",{src:fe?"./climate/windshield_heated_active.png":"./climate/windshield_heated.png",alt:"",style:{width:40,height:40}})})]}),(0,We.jsxs)("div",{style:{width:"33%",display:"flex",flexDirection:"row",padding:16,justifyContent:"flex-end",alignItems:"center"},children:[(0,We.jsx)("div",{onClick:function(){ie(!oe)},style:{display:"flex",width:100,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderRightWidth:0,borderTopLeftRadius:8,borderBottomLeftRadius:8,borderStyle:"solid",borderColor:"darkgray",backgroundColor:oe?nT:"#eeeeee"},children:(0,We.jsx)("span",{style:{color:oe?"white":rT,fontSize:20,fontWeight:"900"},children:"Auto"})}),(0,We.jsx)("div",{onClick:function(){ne(!te)},style:{display:"flex",width:80,height:80,justifyContent:"center",alignItems:"center",borderWidth:2,borderTopRightRadius:8,borderBottomRightRadius:8,borderStyle:"solid",borderColor:"darkgray"},children:(0,We.jsx)("img",{src:te?"./climate/car-seat-right-active.png":"./climate/car-seat-right.png",alt:"",style:{width:40,height:40}})})]})]})]})]})},oT={container:{position:"relative",zIndex:2,width:"100%",height:804,display:"flex",flexDirection:"row",backgroundColor:"#eeeeee",color:rT},leftPane:{width:"10%"},rightPane:{width:"90%",display:"flex",flexDirection:"column"},firstRow:{height:"15%",display:"flex",flexDirection:"row"},secondRow:{height:"70%",display:"flex",flexDirection:"row"},thirdRow:{height:"15%",display:"flex",flexDirection:"row"}},iT=function(e){var n=e.tabIndex,r=e.setTabIndex,a=e.appLayout,o=e.extraInfoOpen,s=e.carStatusView,u=e.setCarStatusView,c=e.mapView,l=e.setMapView,d=e.driverTemperature,p=e.passengerTemperature,f=(0,t.useState)([!1,!1,!1,!1]),h=(0,i.Z)(f,2),m=h[0],g=h[1],v=0,y=1,b=2,x=4;function k(e){if(!o){for(var t=[!1,!1,!1,!1,!1],n=!1,r=0;r<m.length;r++)m[r]&&(n=!0);m[e]?g(t):(t[e]=!0,n?setTimeout((function(){g(t)}),600):g(t))}}return(0,t.useEffect)((function(){o&&g([!1,!1,!1,!1,!1])}),[o]),(0,We.jsx)(sT,{className:"navigation-bar",appLayout:a,children:(0,We.jsxs)(Os,{selectedIndex:n,onSelect:function(e){return r(e!==n?e:-1)},forceRenderTabPanel:!0,children:[(0,We.jsxs)(Ls,{className:"nav-bar-tab-list",children:[(0,We.jsx)(zs,{children:(0,We.jsx)("div",{onClick:function(){k(v)},children:(0,We.jsx)(qu,{background:0===n?"./nav/car-control-active.png":"./nav/car-control.png",activeBackground:null,activeBackgroundBlur:null,size:"48px"})})}),(0,We.jsx)(zs,{children:(0,We.jsx)("div",{onClick:function(){k(y)},children:(0,We.jsx)(qu,{background:1===n?"./nav/media-active.png":"./nav/media.png",activeBackground:null,activeBackgroundBlur:null,size:"36px"})})}),(0,We.jsx)(zs,{children:(0,We.jsx)("div",{onClick:function(){k(x)},children:(0,We.jsx)(qu,{background:2===n?"./nav/dashcam-active.png":"./nav/dashcam.png",activeBackground:null,activeBackgroundBlur:null,size:"48px"})})}),(0,We.jsx)(JE,{signalName:"HU_DATC_DrTempSetC",temperature:d}),(0,We.jsx)(zs,{children:(0,We.jsx)("div",{onClick:function(){k(b)},children:(0,We.jsx)(qu,{background:3===n?"./nav/climate-active.png":"./nav/climate.png",activeBackground:null,activeBackgroundBlur:null,size:"36px"})})}),(0,We.jsx)(JE,{signalName:"HU_DATC_PsTempSetC",temperature:p}),(0,We.jsx)(Qr,{})]}),(0,We.jsxs)("div",{className:"nav-bar-tab-panels",children:[(0,We.jsx)(du,{children:(0,We.jsx)("div",{style:{maxHeight:m[v]?a.appExpandHeight+"px":"0vh",transition:"all 0.6s ease"},children:(0,We.jsx)(Hu,{appLayout:a,carStatusView:s,mapView:c})})}),(0,We.jsx)(du,{children:(0,We.jsx)("div",{style:{maxHeight:m[y]?a.appExpandHeight+"px":"0vh",transition:"all 0.6s ease"},children:(0,We.jsx)(mc,{appLayout:a,carStatusView:s,mapView:c})})}),(0,We.jsx)(du,{children:(0,We.jsx)("div",{style:{maxHeight:m[x]?a.appExpandHeight+"px":"0vh",transition:"all 0.6s ease"},children:(0,We.jsx)(YE,{active:m[x],appLayout:a})})}),(0,We.jsx)(du,{children:(0,We.jsx)("div",{style:{maxHeight:m[b]?a.appExpandHeight+"px":"0vh",transition:"all 0.6s ease"},children:(0,We.jsx)(aT,{})})})]}),(0,We.jsx)("div",{style:{position:"absolute",left:"4px",top:"4px",width:"32px",height:"32px",padding:"4px",backgroundColor:"gray",opacity:.5,borderRadius:"40px",cursor:"pointer"},onClick:function(){c?u(!s):l(!0)},children:(0,We.jsx)("img",{src:s?"./images/left-white.png":"./images/right-white.png",style:{width:"24px",height:"24px"},alt:""})}),(0,We.jsx)("div",{style:{position:"absolute",right:"4px",top:"4px",width:"32px",height:"32px",padding:"4px",backgroundColor:"gray",opacity:.5,borderRadius:"40px",cursor:"pointer"},onClick:function(){s?l(!c):u(!0)},children:(0,We.jsx)("img",{src:c?"./images/right-white.png":"./images/left-white.png",style:{width:"24px",height:"24px"},alt:""})})]})})},sT=Fe.div(jE||(jE=a(["\n\tbackground-color: #000000;\n\tborder-bottom-left-radius: 8px;\n\tborder-bottom-right-radius: 8px;\n\tpadding-top: 16px;\n\tpadding-bottom: 16px;\n\tz-index: 10;\n\theight: 92px;\n\n\t.navigation {\n\t\tdisplay: flex;\n\t}\n\t.react-tabs {\n\t\tposition: relative;\n\t}\n\n\t.nav-bar-tab-list {\n\t\tmargin: 0;\n\t\tlist-style-type: none;\n\t\tpadding: 0;\n\t\tpadding-left: 96px;\n\t\tpadding-right: 96px;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\t//gap: 48px;\n\t\talign-items: center;\n\t}\n\t.nav-bar-tab-panels {\n\t\tposition: absolute;\n\t\tbottom: 76px;\n\t\tright: 0px;\n\t\tleft: 64px;\n\t\toverflow: hidden;\n\t\ttransition: all 0.6s ease;\n\t}\n\n\t.react-tabs__tab-panel {\n\t\tmax-height: 0;\n\t\toverflow: hidden;\n\t\ttransition: all 0.6s ease;\n\t}\n\t.react-tabs__tab-panel.react-tabs__tab-panel--selected {\n\t\tmax-height: ","px;\n\t\ttransition: all 0.6s ease;\n\t}\n"])),(function(e){return e.appLayout.appExpandHeight}));var uT=function(){var e=(0,t.useState)(-1),n=(0,i.Z)(e,2),r=n[0],a=n[1],s=(0,t.useState)({screenWidth:1480,screenHeight:924,leftTaskBarWidth:64,carSideWidth:850,carSideWidthStd:850,carSideHeight:832,mapWidthStd:566,appExpandHeight:804}),u=(0,i.Z)(s,2),c=u[0],l=u[1],d={left:64,right:1416,up:832,bottom:92},p=(0,t.useState)(!0),f=(0,i.Z)(p,2),h=f[0],m=f[1],g=(0,t.useState)(!0),v=(0,i.Z)(g,2),y=v[0],b=v[1],x=(0,t.useState)("p"),k=(0,i.Z)(x,2),w=k[0],S=k[1],C=(0,t.useState)(0),E=(0,i.Z)(C,2),T=E[0],N=E[1],_=(0,t.useState)(500),I=(0,i.Z)(_,2),R=I[0],A=I[1],O=(0,t.useState)(!1),P=(0,i.Z)(O,2),D=P[0],L=P[1],M=(0,t.useState)(25),F=(0,i.Z)(M,2),B=F[0],j=F[1],z=(0,t.useState)(25),V=(0,i.Z)(z,2),W=V[0],Z=V[1],U="dashboard2/topview";function H(){Zr({signals:[{name:tT.x.cg.fr.o4f.u2},{name:tT.x.jW.Ss.RlF.u2},{name:tT.x.jW.Ss.LhW.u2},{name:tT.x.Oh.x5.JFA.u2},{name:tT.x.Oh.x5.Gy1.u2},{name:tT.x.Oh.x5.wHI.u2}],channel:U},(function(e){var t,n=(0,o.Z)(e.signals);try{for(n.s();!(t=n.n()).done;){var r=t.value;"VCU_GearPosSta"===r.name?5===r.value?S("d"):6===r.value?S("n"):7===r.value?S("r"):S("p"):"CLU_DisSpdVal"===r.name?r.value<511.5?N(r.value):N(0):"CLU_EVDTEDisp"===r.name?r.value<1023?A(r.value):A(500):"C_HazardFromCCS"===r.name?1===r.value&&L(!0):"HU_DATC_DrTempSetC"===r.name?j(r.value):"HU_DATC_PsTempSetC"===r.name&&Z(r.value)}}catch(lT){n.e(lT)}finally{n.f()}}))}return document.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1),(0,t.useEffect)((function(){return Gr(),setTimeout(H,500),function(){Ur({channel:U})}}),[]),(0,t.useEffect)((function(){c.carSideWidth=h?y?c.carSideWidthStd:c.screenWidth-c.leftTaskBarWidth:0,l({screenWidth:c.screenWidth,screenHeight:c.screenHeight,leftTaskBarWidth:c.leftTaskBarWidth,carSideWidth:c.carSideWidth,carSideWidthStd:c.carSideWidthStd,carSideHeight:c.carSideHeight,mapWidthStd:c.mapWidthStd,appExpandHeight:c.appExpandHeight})}),[h,y]),(0,We.jsx)(cT,{className:"App",children:(0,We.jsxs)(la,{gridLayout:d,children:[(0,We.jsx)(aa,{appLayout:c,setCarStatusView:m,setMapView:b,gear:w,speed:T,hazardReq:D,setHazardReq:L}),(0,We.jsxs)("div",{style:{width:d.right,height:d.up,display:"flex",flexDirection:"row"},children:[(0,We.jsx)(Ze,{appLayout:c,carStatusView:h,mapView:y}),(0,We.jsx)(hs,{appLayout:c,carStatusView:h,mapView:y}),(0,We.jsx)("div",{style:{position:"absolute",zIndex:2},children:(0,We.jsx)(sa,{carStatusView:h,mapView:y,appLayout:c,gear:w,speed:T,distanceToEmpty:R})})]}),(0,We.jsx)(iT,{tabIndex:r,setTabIndex:a,appLayout:c,carStatusView:h,setCarStatusView:m,mapView:y,setMapView:b,driverTemperature:B,passengerTemperature:W})]})})},cT=Fe.div(zE||(zE=a(["\n\tmin-height: 100vh;\n\tmin-width: 100%;\n\tposition: relative;\n\tdisplay: grid;\n\tplace-content: center;\n\n\tuser-drag: none; \n\tuser-select: none;\n\t-moz-user-select: none;\n\t-webkit-user-drag: none;\n\t-webkit-user-select: none;\n\t-ms-user-select: none;\n\n\timg {\n\t\tpointer-events: none;\n\t}\n\n\toncontextmenu: return false;\n"])));r.createRoot(document.getElementById("root")).render((0,We.jsx)(uT,{}))}()}();